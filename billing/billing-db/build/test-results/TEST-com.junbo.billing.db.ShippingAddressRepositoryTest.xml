<?xml version="1.1" encoding="UTF-8"?>
<testsuite name="com.junbo.billing.db.ShippingAddressRepositoryTest" tests="3" failures="0" errors="0" timestamp="1970-01-01T00:00:00" hostname="xumengchendembp" time="1.397134979004E9">
  <properties/>
  <testcase name="testFindByUserId" classname="com.junbo.billing.db.ShippingAddressRepositoryTest" time="0.731"/>
  <testcase name="testInsertGet" classname="com.junbo.billing.db.ShippingAddressRepositoryTest" time="0.079"/>
  <testcase name="testSoftDelete" classname="com.junbo.billing.db.ShippingAddressRepositoryTest" time="0.089"/>
  <system-out><![CDATA[21:02:58.027 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'
21:02:58.030 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
21:02:58.030 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [com.junbo.sharding.id.oculus.OculusGlobalCounterInDBImpl.getAndIncrease]
21:02:58.031 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBD700000001], status=ACTIVE, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.031 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (603732274) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBD700000001], status=ACTIVE, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014), default timeout 60s
21:02:58.031 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
21:02:58.031 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
21:02:58.031 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBD700000001], status=ACTIVE, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.031 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002]
21:02:58.031 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning <a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)> to <a ThreadContext (603732274) with transaction null, default timeout 60s>
21:02:58.031 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
21:02:58.032 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
21:02:58.032 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014) for Thu Apr 10 21:03:58 CST 2014
21:02:58.032 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.032 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014) scheduled for Thu Apr 10 21:03:58 CST 2014, total task(s) queued: 5
21:02:58.032 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Thu Apr 10 21:02:58 CST 2014
21:02:58.037 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'IdGlobalCounterDAOImpl.get' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
21:02:58.037 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
21:02:58.037 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
21:02:58.073 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@54eed0ab
21:02:58.073 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
21:02:58.074 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13971349780
21:02:58.074 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@68e37faa
21:02:58.115 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
21:02:58.115 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available)
21:02:58.115 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available)
21:02:58.115 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001454BBBEBEF00000002]
21:02:58.115 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
21:02:58.116 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available), waiting if necessary
21:02:58.116 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 - closing time: 1397135036324, now time: 1397134978116
21:02:58.116 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.116 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.116 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.116 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.116 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.116 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 to the accessible pool
21:02:58.116 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@38f03c14 was in state IN_POOL, testing it
21:02:58.116 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14, skipping test
21:02:58.116 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.116 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.117 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
21:02:58.117 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 into a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.121 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@38f03c14 does not belong to any resource of a PoolingDataSource containing an XAPool of resource jdbc/billing with 3 connection(s) (3 still available)
21:02:58.121 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@38f03c14 belongs to a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.130 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001454BBBEBEF00000002 : 737072696E672D62746D000001454BBBEC5100000003]
21:02:58.132 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning <a Bitronix XID [737072696E672D62746D000001454BBBEBEF00000002 : 737072696E672D62746D000001454BBBEC5100000003]> to <an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@38f03c14 with XID null>
21:02:58.133 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@38f03c14 with XID a Bitronix XID [737072696E672D62746D000001454BBBEBEF00000002 : 737072696E672D62746D000001454BBBEC5100000003] with NOFLAGS
21:02:58.135 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@38f03c14 (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEBEF00000002 : 737072696E672D62746D000001454BBBEC5100000003] with NOFLAGS
21:02:58.137 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@38f03c14 (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEBEF00000002 : 737072696E672D62746D000001454BBBEC5100000003]] on a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.137 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001454BBBEBEF00000002] previously unknown to a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14, adding it to the resource's transactions list
21:02:58.158 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D000001454BBBEBD700000001
21:02:58.160 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D000001454BBBEBEF00000002
21:02:58.168 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
21:02:58.184 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 0 -> shardId [1]
21:02:58.187 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -> optionMode [2]
21:02:58.227 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
21:02:58.234 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
21:02:58.254 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
21:02:58.254 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@31dc66fd
21:02:58.254 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.255 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.255 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.256 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.257 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.258 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.261 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.262 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.263 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.264 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
21:02:58.264 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from the accessible pool
21:02:58.265 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.267 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.267 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 to the inaccessible pool
21:02:58.268 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.268 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
21:02:58.268 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
21:02:58.269 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
21:02:58.271 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
21:02:58.272 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
21:02:58.273 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'IdGlobalCounterDAOImpl.saveOrUpdate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
21:02:58.273 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
21:02:58.273 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
21:02:58.275 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
21:02:58.279 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
21:02:58.290 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 1 updates, 0 deletions to 1 objects
21:02:58.290 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
21:02:58.295 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
21:02:58.296 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=2, shardId=0, globalCounter=96, optionMode=2}
21:02:58.297 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: id_global_counter
21:02:58.343 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
21:02:58.343 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.343 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.343 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001454BBBEBEF00000002]
21:02:58.343 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.343 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.344 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001454BBBEBEF00000002
21:02:58.345 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
21:02:58.345 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.345 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.345 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.345 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from the inaccessible pool
21:02:58.347 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.347 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.347 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.347 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.348 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 to the accessible pool
21:02:58.348 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@38f03c14 was in state NOT_ACCESSIBLE, no need to test it
21:02:58.349 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.349 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.350 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
21:02:58.350 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 into a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.352 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@38f03c14 (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEBEF00000002 : 737072696E672D62746D000001454BBBEC5100000003]
21:02:58.354 [Test worker] DEBUG org.hibernate.SQL - update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
Hibernate: update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
21:02:58.357 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
21:02:58.363 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
21:02:58.364 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
21:02:58.364 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@31dc66fd
21:02:58.364 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.364 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.365 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.365 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.365 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.365 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.365 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.366 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.366 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.366 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
21:02:58.367 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from the accessible pool
21:02:58.367 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.367 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.367 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 to the inaccessible pool
21:02:58.367 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.367 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
21:02:58.369 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
21:02:58.370 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.371 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.371 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001454BBBEBEF00000002]
21:02:58.372 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.373 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.373 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001454BBBEBEF00000002
21:02:58.374 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
21:02:58.375 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.377 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.377 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.377 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from the inaccessible pool
21:02:58.378 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.378 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.379 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.379 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.380 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 to the accessible pool
21:02:58.381 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@38f03c14 was in state NOT_ACCESSIBLE, no need to test it
21:02:58.381 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.381 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.382 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
21:02:58.383 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 into a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.383 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@38f03c14 (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEBEF00000002 : 737072696E672D62746D000001454BBBEC5100000003]
21:02:58.383 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
21:02:58.384 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 0 -> shardId [1]
21:02:58.385 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -> optionMode [2]
21:02:58.388 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
21:02:58.388 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
21:02:58.389 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
21:02:58.390 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@31dc66fd
21:02:58.391 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.392 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.393 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.394 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.394 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.395 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.396 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.398 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.399 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.399 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
21:02:58.400 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from the accessible pool
21:02:58.400 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.400 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.400 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 to the inaccessible pool
21:02:58.400 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.401 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
21:02:58.401 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
21:02:58.409 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
21:02:58.409 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
21:02:58.410 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 1 updates, 0 deletions to 1 objects
21:02:58.410 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
21:02:58.410 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
21:02:58.411 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=2, shardId=0, globalCounter=96, optionMode=2}
21:02:58.411 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: id_global_counter
21:02:58.412 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
21:02:58.412 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.413 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.413 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001454BBBEBEF00000002]
21:02:58.413 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.413 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.413 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001454BBBEBEF00000002
21:02:58.413 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
21:02:58.413 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.413 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.413 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.414 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from the inaccessible pool
21:02:58.414 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.414 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.414 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.414 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.414 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 to the accessible pool
21:02:58.414 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@38f03c14 was in state NOT_ACCESSIBLE, no need to test it
21:02:58.414 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.414 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.415 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
21:02:58.415 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 into a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.415 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@38f03c14 (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEBEF00000002 : 737072696E672D62746D000001454BBBEC5100000003]
21:02:58.417 [Test worker] DEBUG org.hibernate.SQL - update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
Hibernate: update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
21:02:58.422 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
21:02:58.430 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
21:02:58.430 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
21:02:58.430 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@31dc66fd
21:02:58.430 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.430 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.430 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.431 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.431 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.431 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.431 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.431 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.431 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.431 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
21:02:58.431 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from the accessible pool
21:02:58.431 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.431 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.431 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 to the inaccessible pool
21:02:58.431 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.431 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
21:02:58.431 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
21:02:58.431 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.432 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.433 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001454BBBEBEF00000002]
21:02:58.433 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.433 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.434 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001454BBBEBEF00000002
21:02:58.434 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
21:02:58.434 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.434 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.436 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.436 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from the inaccessible pool
21:02:58.437 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.437 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.439 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.440 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.442 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 to the accessible pool
21:02:58.443 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@38f03c14 was in state NOT_ACCESSIBLE, no need to test it
21:02:58.443 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.444 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.444 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
21:02:58.444 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 into a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.445 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@38f03c14 (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEBEF00000002 : 737072696E672D62746D000001454BBBEC5100000003]
21:02:58.446 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
21:02:58.447 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 0 -> shardId [1]
21:02:58.448 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -> optionMode [2]
21:02:58.450 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
21:02:58.451 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
21:02:58.451 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
21:02:58.451 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@31dc66fd
21:02:58.451 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.451 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.451 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.451 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.451 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.451 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.451 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.452 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.452 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.452 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
21:02:58.452 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from the accessible pool
21:02:58.452 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.452 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.452 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 to the inaccessible pool
21:02:58.452 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.452 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
21:02:58.452 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
21:02:58.453 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
21:02:58.453 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
21:02:58.453 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
21:02:58.453 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
21:02:58.453 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
21:02:58.453 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=2, shardId=0, globalCounter=96, optionMode=2}
21:02:58.454 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
21:02:58.454 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.454 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.454 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001454BBBEBEF00000002]
21:02:58.454 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.454 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.454 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001454BBBEBEF00000002
21:02:58.454 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
21:02:58.454 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.454 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.454 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.454 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from the inaccessible pool
21:02:58.454 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.454 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.454 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.454 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.455 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 to the accessible pool
21:02:58.455 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@38f03c14 was in state NOT_ACCESSIBLE, no need to test it
21:02:58.455 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.455 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.455 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
21:02:58.455 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 into a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.455 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@38f03c14 (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEBEF00000002 : 737072696E672D62746D000001454BBBEC5100000003]
21:02:58.455 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
21:02:58.456 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 0 -> shardId [1]
21:02:58.456 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -> optionMode [2]
21:02:58.468 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
21:02:58.469 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
21:02:58.471 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
21:02:58.472 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@31dc66fd
21:02:58.472 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.472 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.476 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.477 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.477 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.477 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.477 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.478 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.478 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.478 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
21:02:58.478 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from the accessible pool
21:02:58.478 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.478 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.478 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 to the inaccessible pool
21:02:58.478 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.478 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
21:02:58.479 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
21:02:58.479 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
21:02:58.479 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.479 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.480 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.480 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014) scheduled for Thu Apr 10 21:03:58 CST 2014, total task(s) still queued: 4
21:02:58.480 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
21:02:58.482 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.483 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.483 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@54eed0ab
21:02:58.483 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
21:02:58.483 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
21:02:58.484 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
21:02:58.484 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
21:02:58.484 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
21:02:58.484 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=2, shardId=0, globalCounter=96, optionMode=2}
21:02:58.484 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
21:02:58.485 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@68e37faa
21:02:58.485 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@38f03c14 (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEBEF00000002 : 737072696E672D62746D000001454BBBEC5100000003]
21:02:58.485 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@38f03c14 (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEBEF00000002 : 737072696E672D62746D000001454BBBEC5100000003]
21:02:58.485 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@38f03c14 (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEBEF00000002 : 737072696E672D62746D000001454BBBEC5100000003] with SUCCESS
21:02:58.485 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@38f03c14 (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEBEF00000002 : 737072696E672D62746D000001454BBBEC5100000003] with SUCCESS
21:02:58.485 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
21:02:58.485 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
21:02:58.485 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
21:02:58.485 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
21:02:58.485 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
21:02:58.485 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
21:02:58.485 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
21:02:58.485 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
21:02:58.486 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
21:02:58.487 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
21:02:58.487 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
21:02:58.488 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@38f03c14 (ended) with XID a Bitronix XID [737072696E672D62746D000001454BBBEBEF00000002 : 737072696E672D62746D000001454BBBEC5100000003] (with one-phase optimization)
21:02:58.496 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@38f03c14 (ended) with XID a Bitronix XID [737072696E672D62746D000001454BBBEBEF00000002 : 737072696E672D62746D000001454BBBEC5100000003]
21:02:58.497 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
21:02:58.501 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
21:02:58.502 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/sharding]
21:02:58.505 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/sharding]
21:02:58.506 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
21:02:58.508 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
21:02:58.509 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=COMMITTED, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.509 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
21:02:58.509 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001454BBBEBEF00000002 : 737072696E672D62746D000001454BBBEC5100000003] from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.509 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 cleaned up all transaction states for GTRID [737072696E672D62746D000001454BBBEBEF00000002]
21:02:58.509 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
21:02:58.509 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@54eed0ab with status=COMMITTED
21:02:58.510 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
21:02:58.510 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
21:02:58.512 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@68e37faa with status=COMMITTED
21:02:58.512 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=COMMITTED, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014) with status=COMMITTED
21:02:58.512 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (603732274) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=COMMITTED, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014), default timeout 60s
21:02:58.512 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBEF00000002], status=COMMITTED, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.513 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 with status=COMMITTED
21:02:58.513 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.513 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.513 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
21:02:58.515 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 from the inaccessible pool
21:02:58.515 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.515 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.515 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14 to the available pool
21:02:58.515 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@38f03c14
21:02:58.516 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
21:02:58.516 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBD700000001], status=ACTIVE, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.516 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning <a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBD700000001], status=ACTIVE, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)> to <a ThreadContext (603732274) with transaction null, default timeout 60s>
21:02:58.517 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@4a46d2e2
21:02:58.517 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
21:02:58.517 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13971349785
21:02:58.517 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@62a3d63a
21:02:58.520 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1610629120, using strategy: org.hibernate.id.Assigned
21:02:58.528 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1610645504, using strategy: org.hibernate.id.Assigned
21:02:58.577 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
21:02:58.577 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
21:02:58.578 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 2 objects
21:02:58.579 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
21:02:58.580 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
21:02:58.581 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.billing.db.entity.ShippingAddressEntity{street2=null, middleName=null, street1=null, lastName=Chen, onbehalfofRequestorId=null, createdTime=Thu Apr 10 21:02:58 CST 2014, modifiedBy=null, street=NO 1, Dapu RD, modifiedTime=null, state=CA, companyName=null, deleted=false, addressId=1610645504, city=FORREST, country=US, postalCode=96045, phoneNumber=null, createdBy=BILLING, description=null, userId=1397134978026, firstName=Xumeng, requestorId=GOD}
21:02:58.581 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.billing.db.entity.ShippingAddressEntity{street2=null, middleName=null, street1=null, lastName=Chen, onbehalfofRequestorId=null, createdTime=Thu Apr 10 21:02:58 CST 2014, modifiedBy=null, street=NO 1, Dapu RD, modifiedTime=null, state=CA, companyName=null, deleted=false, addressId=1610629120, city=FORREST, country=US, postalCode=96045, phoneNumber=null, createdBy=BILLING, description=null, userId=1397134978026, firstName=Xumeng, requestorId=GOD}
21:02:58.582 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: shipping_address
21:02:58.588 [Test worker] DEBUG o.h.v.i.m.d.ConstraintDescriptorImpl - Adding composing constraint: ConstraintDescriptorImpl{annotation=javax.validation.constraints.NotNull, payloads=[], hasComposingConstraints=true, isReportAsSingleInvalidConstraint=false, elementType=METHOD, definedOn=DEFINED_LOCALLY, groups=[interface javax.validation.groups.Default], attributes={message={javax.validation.constraints.NotNull.message}, payload=[Ljava.lang.Class;@7b9efe5f, groups=[Ljava.lang.Class;@34e4e61}, constraintType=GENERIC}.
21:02:58.589 [Test worker] DEBUG o.h.v.i.m.d.ConstraintDescriptorImpl - Adding composing constraint: ConstraintDescriptorImpl{annotation=javax.validation.constraints.Size, payloads=[], hasComposingConstraints=true, isReportAsSingleInvalidConstraint=false, elementType=METHOD, definedOn=DEFINED_LOCALLY, groups=[interface javax.validation.groups.Default], attributes={message={javax.validation.constraints.Size.message}, min=1, payload=[Ljava.lang.Class;@1c9e9079, max=2147483647, groups=[Ljava.lang.Class;@6e1f069c}, constraintType=GENERIC}.
21:02:58.593 [Test worker] DEBUG o.h.v.i.m.d.ConstraintDescriptorImpl - Adding composing constraint: ConstraintDescriptorImpl{annotation=javax.validation.constraints.NotNull, payloads=[], hasComposingConstraints=true, isReportAsSingleInvalidConstraint=false, elementType=METHOD, definedOn=DEFINED_LOCALLY, groups=[interface javax.validation.groups.Default], attributes={message={javax.validation.constraints.NotNull.message}, payload=[Ljava.lang.Class;@3c3436ed, groups=[Ljava.lang.Class;@802207c}, constraintType=GENERIC}.
21:02:58.595 [Test worker] DEBUG o.h.v.i.m.d.ConstraintDescriptorImpl - Adding composing constraint: ConstraintDescriptorImpl{annotation=javax.validation.constraints.Size, payloads=[], hasComposingConstraints=true, isReportAsSingleInvalidConstraint=false, elementType=METHOD, definedOn=DEFINED_LOCALLY, groups=[interface javax.validation.groups.Default], attributes={message={javax.validation.constraints.Size.message}, min=1, payload=[Ljava.lang.Class;@7d376ed4, max=2147483647, groups=[Ljava.lang.Class;@424d6085}, constraintType=GENERIC}.
21:02:58.599 [Test worker] DEBUG o.h.v.i.m.d.ConstraintDescriptorImpl - Adding composing constraint: ConstraintDescriptorImpl{annotation=javax.validation.constraints.NotNull, payloads=[], hasComposingConstraints=true, isReportAsSingleInvalidConstraint=false, elementType=METHOD, definedOn=DEFINED_LOCALLY, groups=[interface javax.validation.groups.Default], attributes={message={javax.validation.constraints.NotNull.message}, payload=[Ljava.lang.Class;@7fa9e945, groups=[Ljava.lang.Class;@6c11f27d}, constraintType=GENERIC}.
21:02:58.599 [Test worker] DEBUG o.h.v.i.m.d.ConstraintDescriptorImpl - Adding composing constraint: ConstraintDescriptorImpl{annotation=javax.validation.constraints.Size, payloads=[], hasComposingConstraints=true, isReportAsSingleInvalidConstraint=false, elementType=METHOD, definedOn=DEFINED_LOCALLY, groups=[interface javax.validation.groups.Default], attributes={message={javax.validation.constraints.Size.message}, min=1, payload=[Ljava.lang.Class;@841a209, max=2147483647, groups=[Ljava.lang.Class;@cf5011b}, constraintType=GENERIC}.
21:02:58.601 [Test worker] DEBUG o.h.v.i.m.d.ConstraintDescriptorImpl - Adding composing constraint: ConstraintDescriptorImpl{annotation=javax.validation.constraints.NotNull, payloads=[], hasComposingConstraints=true, isReportAsSingleInvalidConstraint=false, elementType=METHOD, definedOn=DEFINED_LOCALLY, groups=[interface javax.validation.groups.Default], attributes={message={javax.validation.constraints.NotNull.message}, payload=[Ljava.lang.Class;@847ca9d, groups=[Ljava.lang.Class;@21470daa}, constraintType=GENERIC}.
21:02:58.601 [Test worker] DEBUG o.h.v.i.m.d.ConstraintDescriptorImpl - Adding composing constraint: ConstraintDescriptorImpl{annotation=javax.validation.constraints.Size, payloads=[], hasComposingConstraints=true, isReportAsSingleInvalidConstraint=false, elementType=METHOD, definedOn=DEFINED_LOCALLY, groups=[interface javax.validation.groups.Default], attributes={message={javax.validation.constraints.Size.message}, min=1, payload=[Ljava.lang.Class;@7d78f4dc, max=2147483647, groups=[Ljava.lang.Class;@1013d7df}, constraintType=GENERIC}.
21:02:58.602 [Test worker] DEBUG o.h.v.i.m.d.ConstraintDescriptorImpl - Adding composing constraint: ConstraintDescriptorImpl{annotation=javax.validation.constraints.NotNull, payloads=[], hasComposingConstraints=true, isReportAsSingleInvalidConstraint=false, elementType=METHOD, definedOn=DEFINED_LOCALLY, groups=[interface javax.validation.groups.Default], attributes={message={javax.validation.constraints.NotNull.message}, payload=[Ljava.lang.Class;@6c13bfd9, groups=[Ljava.lang.Class;@49876fe}, constraintType=GENERIC}.
21:02:58.602 [Test worker] DEBUG o.h.v.i.m.d.ConstraintDescriptorImpl - Adding composing constraint: ConstraintDescriptorImpl{annotation=javax.validation.constraints.Size, payloads=[], hasComposingConstraints=true, isReportAsSingleInvalidConstraint=false, elementType=METHOD, definedOn=DEFINED_LOCALLY, groups=[interface javax.validation.groups.Default], attributes={message={javax.validation.constraints.Size.message}, min=1, payload=[Ljava.lang.Class;@1649039f, max=2147483647, groups=[Ljava.lang.Class;@138cc727}, constraintType=GENERIC}.
21:02:58.605 [Test worker] DEBUG o.h.v.i.m.d.ConstraintDescriptorImpl - Adding composing constraint: ConstraintDescriptorImpl{annotation=javax.validation.constraints.NotNull, payloads=[], hasComposingConstraints=true, isReportAsSingleInvalidConstraint=false, elementType=METHOD, definedOn=DEFINED_LOCALLY, groups=[interface javax.validation.groups.Default], attributes={message={javax.validation.constraints.NotNull.message}, payload=[Ljava.lang.Class;@7bf8f190, groups=[Ljava.lang.Class;@14bb6486}, constraintType=GENERIC}.
21:02:58.605 [Test worker] DEBUG o.h.v.i.m.d.ConstraintDescriptorImpl - Adding composing constraint: ConstraintDescriptorImpl{annotation=javax.validation.constraints.Size, payloads=[], hasComposingConstraints=true, isReportAsSingleInvalidConstraint=false, elementType=METHOD, definedOn=DEFINED_LOCALLY, groups=[interface javax.validation.groups.Default], attributes={message={javax.validation.constraints.Size.message}, min=1, payload=[Ljava.lang.Class;@27b5027d, max=2147483647, groups=[Ljava.lang.Class;@5cb670e8}, constraintType=GENERIC}.
21:02:58.623 [Test worker] DEBUG o.h.v.i.m.d.ConstraintDescriptorImpl - Adding composing constraint: ConstraintDescriptorImpl{annotation=javax.validation.constraints.NotNull, payloads=[], hasComposingConstraints=true, isReportAsSingleInvalidConstraint=false, elementType=METHOD, definedOn=DEFINED_IN_HIERARCHY, groups=[interface javax.validation.groups.Default], attributes={message={javax.validation.constraints.NotNull.message}, payload=[Ljava.lang.Class;@2bcac8b3, groups=[Ljava.lang.Class;@e3e763b}, constraintType=GENERIC}.
21:02:58.624 [Test worker] DEBUG o.h.v.i.m.d.ConstraintDescriptorImpl - Adding composing constraint: ConstraintDescriptorImpl{annotation=javax.validation.constraints.Size, payloads=[], hasComposingConstraints=true, isReportAsSingleInvalidConstraint=false, elementType=METHOD, definedOn=DEFINED_IN_HIERARCHY, groups=[interface javax.validation.groups.Default], attributes={message={javax.validation.constraints.Size.message}, min=1, payload=[Ljava.lang.Class;@26c422cb, max=2147483647, groups=[Ljava.lang.Class;@16c8514f}, constraintType=GENERIC}.
21:02:58.626 [Test worker] DEBUG o.h.v.i.m.d.ConstraintDescriptorImpl - Adding composing constraint: ConstraintDescriptorImpl{annotation=javax.validation.constraints.NotNull, payloads=[], hasComposingConstraints=true, isReportAsSingleInvalidConstraint=false, elementType=METHOD, definedOn=DEFINED_IN_HIERARCHY, groups=[interface javax.validation.groups.Default], attributes={message={javax.validation.constraints.NotNull.message}, payload=[Ljava.lang.Class;@dfb093b, groups=[Ljava.lang.Class;@5c1b07a8}, constraintType=GENERIC}.
21:02:58.627 [Test worker] DEBUG o.h.v.i.m.d.ConstraintDescriptorImpl - Adding composing constraint: ConstraintDescriptorImpl{annotation=javax.validation.constraints.Size, payloads=[], hasComposingConstraints=true, isReportAsSingleInvalidConstraint=false, elementType=METHOD, definedOn=DEFINED_IN_HIERARCHY, groups=[interface javax.validation.groups.Default], attributes={message={javax.validation.constraints.Size.message}, min=1, payload=[Ljava.lang.Class;@7293d5d5, max=2147483647, groups=[Ljava.lang.Class;@47bbcdb7}, constraintType=GENERIC}.
21:02:58.661 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementUnregisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D000001454BBBEBEF00000002
21:02:58.679 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
21:02:58.680 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/billing with 3 connection(s) (3 still available)
21:02:58.680 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/billing with 3 connection(s) (3 still available)
21:02:58.680 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001454BBBEBD700000001]
21:02:58.681 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
21:02:58.681 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/billing with 3 connection(s) (3 still available), waiting if necessary
21:02:58.681 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/billing in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19 - closing time: 1397135032901, now time: 1397134978681
21:02:58.681 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/billing in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19 from an XAPool of resource jdbc/billing with 3 connection(s) (2 still available)
21:02:58.681 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/billing in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.681 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.681 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.681 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.682 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@17fa4a19 to the accessible pool
21:02:58.682 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@17fa4a19 was in state IN_POOL, testing it
21:02:58.682 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@17fa4a19, skipping test
21:02:58.682 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.682 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/billing with 3 connection(s) (2 still available)
21:02:58.683 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
21:02:58.684 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@17fa4a19 into a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBD700000001], status=ACTIVE, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.685 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@17fa4a19 belongs to a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@17fa4a19 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/billing with 3 connection(s) (2 still available)
21:02:58.686 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001454BBBEBD700000001 : 737072696E672D62746D000001454BBBEE7E00000004]
21:02:58.686 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning <a Bitronix XID [737072696E672D62746D000001454BBBEBD700000001 : 737072696E672D62746D000001454BBBEE7E00000004]> to <an XAResourceHolderState with uniqueName=jdbc/billing XAResource=org.postgresql.xa.PGXAConnection@17fa4a19 with XID null>
21:02:58.687 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/billing XAResource=org.postgresql.xa.PGXAConnection@17fa4a19 with XID a Bitronix XID [737072696E672D62746D000001454BBBEBD700000001 : 737072696E672D62746D000001454BBBEE7E00000004] with NOFLAGS
21:02:58.688 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/billing XAResource=org.postgresql.xa.PGXAConnection@17fa4a19 (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEBD700000001 : 737072696E672D62746D000001454BBBEE7E00000004] with NOFLAGS
21:02:58.689 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/billing XAResource=org.postgresql.xa.PGXAConnection@17fa4a19 (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEBD700000001 : 737072696E672D62746D000001454BBBEE7E00000004]] on a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.696 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001454BBBEBD700000001] previously unknown to a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@17fa4a19, adding it to the resource's transactions list
21:02:58.696 [Test worker] DEBUG org.hibernate.SQL - insert into shipping_address (created_by, created_date, modified_by, modified_date, city, company_name, country_code, deleted, description, first_name, last_name, middle_name, onbehalfof_requestor_id, phone_number, postal_code, requestor_id, state, street, street1, street2, user_id, shipping_address_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into shipping_address (created_by, created_date, modified_by, modified_date, city, company_name, country_code, deleted, description, first_name, last_name, middle_name, onbehalfof_requestor_id, phone_number, postal_code, requestor_id, state, street, street1, street2, user_id, shipping_address_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
21:02:58.703 [Test worker] DEBUG o.h.e.j.b.internal.AbstractBatchImpl - Reusing batch statement
21:02:58.703 [Test worker] DEBUG org.hibernate.SQL - insert into shipping_address (created_by, created_date, modified_by, modified_date, city, company_name, country_code, deleted, description, first_name, last_name, middle_name, onbehalfof_requestor_id, phone_number, postal_code, requestor_id, state, street, street1, street2, user_id, shipping_address_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into shipping_address (created_by, created_date, modified_by, modified_date, city, company_name, country_code, deleted, description, first_name, last_name, middle_name, onbehalfof_requestor_id, phone_number, postal_code, requestor_id, state, street, street1, street2, user_id, shipping_address_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
21:02:58.704 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 2
21:02:58.710 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
21:02:58.711 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
21:02:58.711 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@17fa4a19 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@2a562e7b
21:02:58.711 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.712 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBD700000001], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.712 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.712 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBD700000001], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.712 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.712 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.713 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBD700000001], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.714 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.715 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.715 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
21:02:58.716 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19 from the accessible pool
21:02:58.716 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.717 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.718 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19 to the inaccessible pool
21:02:58.718 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.719 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
21:02:58.720 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
21:02:58.724 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
21:02:58.725 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/billing with 3 connection(s) (2 still available)
21:02:58.725 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/billing with 3 connection(s) (2 still available)
21:02:58.725 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001454BBBEBD700000001]
21:02:58.725 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.725 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.725 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001454BBBEBD700000001
21:02:58.725 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
21:02:58.725 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19 from an XAPool of resource jdbc/billing with 3 connection(s) (2 still available)
21:02:58.725 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.725 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.725 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@17fa4a19 from the inaccessible pool
21:02:58.725 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.725 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.726 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@17fa4a19 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBD700000001], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.726 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@17fa4a19 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBD700000001], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.726 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@17fa4a19 to the accessible pool
21:02:58.726 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@17fa4a19 was in state NOT_ACCESSIBLE, no need to test it
21:02:58.726 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.726 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/billing with 3 connection(s) (2 still available)
21:02:58.726 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
21:02:58.726 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@17fa4a19 into a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBD700000001], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.726 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/billing XAResource=org.postgresql.xa.PGXAConnection@17fa4a19 (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEBD700000001 : 737072696E672D62746D000001454BBBEE7E00000004]
21:02:58.729 [Test worker] DEBUG org.hibernate.SQL - select this_.shipping_address_id as shipping1_6_0_, this_.created_by as created2_6_0_, this_.created_date as created3_6_0_, this_.modified_by as modified4_6_0_, this_.modified_date as modified5_6_0_, this_.city as city6_0_, this_.company_name as company7_6_0_, this_.country_code as country8_6_0_, this_.deleted as deleted6_0_, this_.description as descrip10_6_0_, this_.first_name as first11_6_0_, this_.last_name as last12_6_0_, this_.middle_name as middle13_6_0_, this_.onbehalfof_requestor_id as onbehalfof14_6_0_, this_.phone_number as phone15_6_0_, this_.postal_code as postal16_6_0_, this_.requestor_id as requestor17_6_0_, this_.state as state6_0_, this_.street as street6_0_, this_.street1 as street20_6_0_, this_.street2 as street21_6_0_, this_.user_id as user22_6_0_ from shipping_address this_ where this_.user_id=? and this_.deleted=?
Hibernate: select this_.shipping_address_id as shipping1_6_0_, this_.created_by as created2_6_0_, this_.created_date as created3_6_0_, this_.modified_by as modified4_6_0_, this_.modified_date as modified5_6_0_, this_.city as city6_0_, this_.company_name as company7_6_0_, this_.country_code as country8_6_0_, this_.deleted as deleted6_0_, this_.description as descrip10_6_0_, this_.first_name as first11_6_0_, this_.last_name as last12_6_0_, this_.middle_name as middle13_6_0_, this_.onbehalfof_requestor_id as onbehalfof14_6_0_, this_.phone_number as phone15_6_0_, this_.postal_code as postal16_6_0_, this_.requestor_id as requestor17_6_0_, this_.state as state6_0_, this_.street as street6_0_, this_.street1 as street20_6_0_, this_.street2 as street21_6_0_, this_.user_id as user22_6_0_ from shipping_address this_ where this_.user_id=? and this_.deleted=?
21:02:58.733 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
21:02:58.733 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.billing.db.entity.ShippingAddressEntity#1610629120]
21:02:58.733 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 1
21:02:58.733 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.billing.db.entity.ShippingAddressEntity#1610645504]
21:02:58.733 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
21:02:58.735 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@17fa4a19 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@2a562e7b
21:02:58.735 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.735 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBD700000001], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.735 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.735 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBD700000001], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.735 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.735 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.735 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEBD700000001], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.735 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.735 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.735 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
21:02:58.736 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19 from the accessible pool
21:02:58.736 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.736 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.736 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19 to the inaccessible pool
21:02:58.736 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@17fa4a19
21:02:58.736 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
21:02:58.736 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
21:02:58.803 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
21:02:58.804 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [com.junbo.sharding.id.oculus.OculusGlobalCounterInDBImpl.getAndIncrease]
21:02:58.804 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEE700000005], status=ACTIVE, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.804 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (603732274) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEE700000005], status=ACTIVE, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014), default timeout 60s
21:02:58.804 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
21:02:58.804 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
21:02:58.804 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEE700000005], status=ACTIVE, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.804 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006]
21:02:58.804 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning <a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)> to <a ThreadContext (603732274) with transaction null, default timeout 60s>
21:02:58.804 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
21:02:58.804 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
21:02:58.805 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014) for Thu Apr 10 21:03:58 CST 2014
21:02:58.805 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.805 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014) scheduled for Thu Apr 10 21:03:58 CST 2014, total task(s) queued: 5
21:02:58.805 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Thu Apr 10 21:02:58 CST 2014
21:02:58.805 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
21:02:58.805 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
21:02:58.805 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@5733879a
21:02:58.806 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
21:02:58.806 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13971349788
21:02:58.806 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@780bbc2f
21:02:58.806 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
21:02:58.806 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available)
21:02:58.806 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available)
21:02:58.806 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001454BBBEEF400000006]
21:02:58.806 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
21:02:58.806 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available), waiting if necessary
21:02:58.806 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 - closing time: 1397135036333, now time: 1397134978806
21:02:58.806 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.806 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.806 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.807 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.807 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.807 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 to the accessible pool
21:02:58.807 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@1ab0ed61 was in state IN_POOL, testing it
21:02:58.807 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61, skipping test
21:02:58.807 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.807 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.808 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
21:02:58.808 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 into a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.808 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@1ab0ed61 does not belong to any resource of a PoolingDataSource containing an XAPool of resource jdbc/billing with 3 connection(s) (3 still available)
21:02:58.808 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@1ab0ed61 belongs to a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.808 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001454BBBEEF400000006 : 737072696E672D62746D000001454BBBEEF800000007]
21:02:58.808 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning <a Bitronix XID [737072696E672D62746D000001454BBBEEF400000006 : 737072696E672D62746D000001454BBBEEF800000007]> to <an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@1ab0ed61 with XID null>
21:02:58.808 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@1ab0ed61 with XID a Bitronix XID [737072696E672D62746D000001454BBBEEF400000006 : 737072696E672D62746D000001454BBBEEF800000007] with NOFLAGS
21:02:58.808 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@1ab0ed61 (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEEF400000006 : 737072696E672D62746D000001454BBBEEF800000007] with NOFLAGS
21:02:58.808 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@1ab0ed61 (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEEF400000006 : 737072696E672D62746D000001454BBBEEF800000007]] on a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.808 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001454BBBEEF400000006] previously unknown to a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61, adding it to the resource's transactions list
21:02:58.808 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
21:02:58.808 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 1 -> shardId [1]
21:02:58.809 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -> optionMode [2]
21:02:58.811 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
21:02:58.811 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
21:02:58.812 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
21:02:58.812 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@4287d2ea
21:02:58.812 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.812 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.812 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.812 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.812 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.812 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.812 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.812 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.812 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.812 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
21:02:58.812 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from the accessible pool
21:02:58.813 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.813 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.813 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 to the inaccessible pool
21:02:58.813 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.813 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
21:02:58.813 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
21:02:58.813 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
21:02:58.813 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
21:02:58.813 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
21:02:58.813 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
21:02:58.813 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
21:02:58.814 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
21:02:58.814 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
21:02:58.814 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 1 updates, 0 deletions to 1 objects
21:02:58.814 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
21:02:58.814 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
21:02:58.814 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=1, shardId=1, globalCounter=61, optionMode=2}
21:02:58.815 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: id_global_counter
21:02:58.815 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
21:02:58.815 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.815 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.815 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001454BBBEEF400000006]
21:02:58.815 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.815 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.815 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001454BBBEEF400000006
21:02:58.815 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
21:02:58.815 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.815 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.815 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.815 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from the inaccessible pool
21:02:58.815 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.816 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.816 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.816 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.816 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 to the accessible pool
21:02:58.816 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@1ab0ed61 was in state NOT_ACCESSIBLE, no need to test it
21:02:58.816 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.816 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.816 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
21:02:58.816 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 into a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.816 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@1ab0ed61 (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEEF400000006 : 737072696E672D62746D000001454BBBEEF800000007]
21:02:58.816 [Test worker] DEBUG org.hibernate.SQL - update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
Hibernate: update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
21:02:58.816 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
21:02:58.818 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
21:02:58.818 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
21:02:58.818 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@4287d2ea
21:02:58.818 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.818 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.818 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.818 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.819 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.819 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.819 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.819 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.819 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.819 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
21:02:58.819 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from the accessible pool
21:02:58.819 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.819 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.819 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 to the inaccessible pool
21:02:58.819 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.819 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
21:02:58.819 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
21:02:58.819 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.819 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.819 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001454BBBEEF400000006]
21:02:58.819 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.819 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.819 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001454BBBEEF400000006
21:02:58.820 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
21:02:58.820 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.820 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.820 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.820 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from the inaccessible pool
21:02:58.820 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.820 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.820 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.820 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.820 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 to the accessible pool
21:02:58.820 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@1ab0ed61 was in state NOT_ACCESSIBLE, no need to test it
21:02:58.820 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.820 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.821 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
21:02:58.822 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 into a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.823 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@1ab0ed61 (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEEF400000006 : 737072696E672D62746D000001454BBBEEF800000007]
21:02:58.824 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
21:02:58.825 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 1 -> shardId [1]
21:02:58.826 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -> optionMode [2]
21:02:58.827 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
21:02:58.827 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
21:02:58.827 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
21:02:58.827 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@4287d2ea
21:02:58.828 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.828 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.828 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.828 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.828 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.828 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.828 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.828 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.828 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.828 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
21:02:58.828 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from the accessible pool
21:02:58.828 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.828 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.828 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 to the inaccessible pool
21:02:58.828 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.828 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
21:02:58.828 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
21:02:58.829 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
21:02:58.830 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
21:02:58.831 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 1 updates, 0 deletions to 1 objects
21:02:58.831 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
21:02:58.831 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
21:02:58.831 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=1, shardId=1, globalCounter=61, optionMode=2}
21:02:58.831 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: id_global_counter
21:02:58.832 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
21:02:58.832 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.832 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.832 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001454BBBEEF400000006]
21:02:58.832 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.832 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.832 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001454BBBEEF400000006
21:02:58.832 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
21:02:58.832 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.832 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.832 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.832 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from the inaccessible pool
21:02:58.832 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.832 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.832 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.832 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.833 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 to the accessible pool
21:02:58.833 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@1ab0ed61 was in state NOT_ACCESSIBLE, no need to test it
21:02:58.833 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.833 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.833 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
21:02:58.833 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 into a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.833 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@1ab0ed61 (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEEF400000006 : 737072696E672D62746D000001454BBBEEF800000007]
21:02:58.834 [Test worker] DEBUG org.hibernate.SQL - update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
Hibernate: update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
21:02:58.834 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
21:02:58.837 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
21:02:58.837 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
21:02:58.838 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@4287d2ea
21:02:58.838 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.838 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.838 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.838 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.838 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.838 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.838 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.838 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.838 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.838 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
21:02:58.838 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from the accessible pool
21:02:58.838 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.839 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.839 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 to the inaccessible pool
21:02:58.839 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.839 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
21:02:58.839 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
21:02:58.839 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.839 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.840 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001454BBBEEF400000006]
21:02:58.840 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.840 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.840 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001454BBBEEF400000006
21:02:58.840 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
21:02:58.840 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.840 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.840 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.841 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from the inaccessible pool
21:02:58.841 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.841 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.841 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.841 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.841 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 to the accessible pool
21:02:58.841 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@1ab0ed61 was in state NOT_ACCESSIBLE, no need to test it
21:02:58.841 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.842 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.842 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
21:02:58.842 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 into a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.842 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@1ab0ed61 (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEEF400000006 : 737072696E672D62746D000001454BBBEEF800000007]
21:02:58.842 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
21:02:58.843 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 1 -> shardId [1]
21:02:58.843 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -> optionMode [2]
21:02:58.845 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
21:02:58.845 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
21:02:58.845 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
21:02:58.845 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@4287d2ea
21:02:58.845 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.845 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.845 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.846 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.846 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.846 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.846 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.846 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.846 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.846 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
21:02:58.846 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from the accessible pool
21:02:58.846 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.846 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.846 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 to the inaccessible pool
21:02:58.846 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.846 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
21:02:58.846 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
21:02:58.847 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
21:02:58.847 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
21:02:58.847 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
21:02:58.847 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
21:02:58.847 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
21:02:58.847 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=1, shardId=1, globalCounter=61, optionMode=2}
21:02:58.847 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
21:02:58.847 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.848 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.848 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001454BBBEEF400000006]
21:02:58.848 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.848 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.848 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001454BBBEEF400000006
21:02:58.848 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
21:02:58.848 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.848 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.848 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.848 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from the inaccessible pool
21:02:58.848 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.848 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.848 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.848 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.848 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 to the accessible pool
21:02:58.848 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@1ab0ed61 was in state NOT_ACCESSIBLE, no need to test it
21:02:58.848 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.848 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
21:02:58.848 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
21:02:58.849 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 into a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.849 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@1ab0ed61 (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEEF400000006 : 737072696E672D62746D000001454BBBEEF800000007]
21:02:58.849 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
21:02:58.849 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 1 -> shardId [1]
21:02:58.849 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -> optionMode [2]
21:02:58.852 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
21:02:58.853 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
21:02:58.853 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
21:02:58.853 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@4287d2ea
21:02:58.853 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.853 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.854 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.854 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.854 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.854 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.854 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.854 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.855 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.855 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
21:02:58.855 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from the accessible pool
21:02:58.855 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.855 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.855 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 to the inaccessible pool
21:02:58.855 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.855 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
21:02:58.855 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
21:02:58.855 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
21:02:58.855 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.855 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.855 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.855 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014) scheduled for Thu Apr 10 21:03:58 CST 2014, total task(s) still queued: 4
21:02:58.855 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
21:02:58.855 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.857 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.858 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@5733879a
21:02:58.858 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
21:02:58.858 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
21:02:58.859 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
21:02:58.859 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
21:02:58.859 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
21:02:58.859 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=1, shardId=1, globalCounter=61, optionMode=2}
21:02:58.859 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
21:02:58.859 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@780bbc2f
21:02:58.859 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@1ab0ed61 (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEEF400000006 : 737072696E672D62746D000001454BBBEEF800000007]
21:02:58.859 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@1ab0ed61 (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEEF400000006 : 737072696E672D62746D000001454BBBEEF800000007]
21:02:58.859 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@1ab0ed61 (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEEF400000006 : 737072696E672D62746D000001454BBBEEF800000007] with SUCCESS
21:02:58.859 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@1ab0ed61 (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEEF400000006 : 737072696E672D62746D000001454BBBEEF800000007] with SUCCESS
21:02:58.859 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
21:02:58.859 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
21:02:58.859 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
21:02:58.859 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
21:02:58.859 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
21:02:58.859 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
21:02:58.859 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
21:02:58.859 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
21:02:58.859 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
21:02:58.860 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
21:02:58.860 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
21:02:58.860 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@1ab0ed61 (ended) with XID a Bitronix XID [737072696E672D62746D000001454BBBEEF400000006 : 737072696E672D62746D000001454BBBEEF800000007] (with one-phase optimization)
21:02:58.864 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@1ab0ed61 (ended) with XID a Bitronix XID [737072696E672D62746D000001454BBBEEF400000006 : 737072696E672D62746D000001454BBBEEF800000007]
21:02:58.864 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
21:02:58.864 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
21:02:58.864 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/sharding]
21:02:58.864 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/sharding]
21:02:58.864 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
21:02:58.864 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
21:02:58.864 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=COMMITTED, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.864 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
21:02:58.864 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001454BBBEEF400000006 : 737072696E672D62746D000001454BBBEEF800000007] from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.864 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 cleaned up all transaction states for GTRID [737072696E672D62746D000001454BBBEEF400000006]
21:02:58.864 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
21:02:58.864 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@5733879a with status=COMMITTED
21:02:58.864 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
21:02:58.864 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
21:02:58.865 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@780bbc2f with status=COMMITTED
21:02:58.865 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=COMMITTED, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014) with status=COMMITTED
21:02:58.865 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (603732274) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=COMMITTED, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014), default timeout 60s
21:02:58.865 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEF400000006], status=COMMITTED, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.865 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 with status=COMMITTED
21:02:58.865 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.865 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.865 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
21:02:58.865 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 from the inaccessible pool
21:02:58.865 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.865 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.865 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61 to the available pool
21:02:58.865 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab0ed61
21:02:58.865 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
21:02:58.865 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEE700000005], status=ACTIVE, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.865 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning <a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEEE700000005], status=ACTIVE, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)> to <a ThreadContext (603732274) with transaction null, default timeout 60s>
21:02:58.866 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@3dcc579c
21:02:58.866 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
21:02:58.866 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13971349788
21:02:58.866 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@328be276
21:02:58.866 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023426624, using strategy: org.hibernate.id.Assigned
21:02:58.927 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@56f3e3db
21:02:58.927 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
21:02:58.928 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13971349789
21:02:58.928 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@25f46b76
21:02:58.928 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023443008, using strategy: org.hibernate.id.Assigned
21:02:58.929 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023459392, using strategy: org.hibernate.id.Assigned
21:02:58.930 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
21:02:58.930 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
21:02:58.931 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 2 objects
21:02:58.931 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
21:02:58.931 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
21:02:58.932 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.billing.db.entity.ShippingAddressEntity{street2=null, middleName=null, street1=null, lastName=Chen, onbehalfofRequestorId=null, createdTime=Thu Apr 10 21:02:58 CST 2014, modifiedBy=null, street=NO 1, Dapu RD, modifiedTime=null, state=CA, companyName=null, deleted=false, addressId=1023459392, city=FORREST, country=US, postalCode=96045, phoneNumber=null, createdBy=BILLING, description=null, userId=1397134978927, firstName=Xumeng, requestorId=GOD}
21:02:58.932 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.billing.db.entity.ShippingAddressEntity{street2=null, middleName=null, street1=null, lastName=Chen, onbehalfofRequestorId=null, createdTime=Thu Apr 10 21:02:58 CST 2014, modifiedBy=null, street=NO 1, Dapu RD, modifiedTime=null, state=CA, companyName=null, deleted=false, addressId=1023443008, city=FORREST, country=US, postalCode=96045, phoneNumber=null, createdBy=BILLING, description=null, userId=1397134978927, firstName=Xumeng, requestorId=GOD}
21:02:58.932 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: shipping_address
21:02:58.935 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
21:02:58.935 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/billing with 3 connection(s) (3 still available)
21:02:58.936 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/billing with 3 connection(s) (3 still available)
21:02:58.936 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001454BBBEF6200000009]
21:02:58.936 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
21:02:58.936 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/billing with 3 connection(s) (3 still available), waiting if necessary
21:02:58.936 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/billing in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e - closing time: 1397135034780, now time: 1397134978936
21:02:58.936 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/billing in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e from an XAPool of resource jdbc/billing with 3 connection(s) (2 still available)
21:02:58.936 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/billing in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.936 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.936 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.936 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.936 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e to the accessible pool
21:02:58.936 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@3aaaa02e was in state IN_POOL, testing it
21:02:58.936 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e, skipping test
21:02:58.936 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.936 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/billing with 3 connection(s) (2 still available)
21:02:58.936 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
21:02:58.936 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e into a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEF6200000009], status=ACTIVE, 0 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.936 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@3aaaa02e belongs to a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/billing with 3 connection(s) (2 still available)
21:02:58.937 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001454BBBEF6200000009 : 737072696E672D62746D000001454BBBEF790000000A]
21:02:58.937 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning <a Bitronix XID [737072696E672D62746D000001454BBBEF6200000009 : 737072696E672D62746D000001454BBBEF790000000A]> to <an XAResourceHolderState with uniqueName=jdbc/billing XAResource=org.postgresql.xa.PGXAConnection@3aaaa02e with XID null>
21:02:58.937 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/billing XAResource=org.postgresql.xa.PGXAConnection@3aaaa02e with XID a Bitronix XID [737072696E672D62746D000001454BBBEF6200000009 : 737072696E672D62746D000001454BBBEF790000000A] with NOFLAGS
21:02:58.937 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/billing XAResource=org.postgresql.xa.PGXAConnection@3aaaa02e (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEF6200000009 : 737072696E672D62746D000001454BBBEF790000000A] with NOFLAGS
21:02:58.937 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/billing XAResource=org.postgresql.xa.PGXAConnection@3aaaa02e (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEF6200000009 : 737072696E672D62746D000001454BBBEF790000000A]] on a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.937 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001454BBBEF6200000009] previously unknown to a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e, adding it to the resource's transactions list
21:02:58.941 [Test worker] DEBUG org.hibernate.SQL - insert into shipping_address (created_by, created_date, modified_by, modified_date, city, company_name, country_code, deleted, description, first_name, last_name, middle_name, onbehalfof_requestor_id, phone_number, postal_code, requestor_id, state, street, street1, street2, user_id, shipping_address_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into shipping_address (created_by, created_date, modified_by, modified_date, city, company_name, country_code, deleted, description, first_name, last_name, middle_name, onbehalfof_requestor_id, phone_number, postal_code, requestor_id, state, street, street1, street2, user_id, shipping_address_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
21:02:58.946 [Test worker] DEBUG o.h.e.j.b.internal.AbstractBatchImpl - Reusing batch statement
21:02:58.946 [Test worker] DEBUG org.hibernate.SQL - insert into shipping_address (created_by, created_date, modified_by, modified_date, city, company_name, country_code, deleted, description, first_name, last_name, middle_name, onbehalfof_requestor_id, phone_number, postal_code, requestor_id, state, street, street1, street2, user_id, shipping_address_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into shipping_address (created_by, created_date, modified_by, modified_date, city, company_name, country_code, deleted, description, first_name, last_name, middle_name, onbehalfof_requestor_id, phone_number, postal_code, requestor_id, state, street, street1, street2, user_id, shipping_address_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
21:02:58.947 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 2
21:02:58.958 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
21:02:58.958 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
21:02:58.958 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@73e84841
21:02:58.959 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.959 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEF6200000009], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.959 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.959 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEF6200000009], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.959 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.959 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.959 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEF6200000009], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.959 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.959 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.959 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
21:02:58.959 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e from the accessible pool
21:02:58.959 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.959 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.959 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e to the inaccessible pool
21:02:58.959 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.959 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
21:02:58.960 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
21:02:58.960 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
21:02:58.960 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/billing with 3 connection(s) (2 still available)
21:02:58.960 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/billing with 3 connection(s) (2 still available)
21:02:58.960 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001454BBBEF6200000009]
21:02:58.960 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.960 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.960 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001454BBBEF6200000009
21:02:58.960 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
21:02:58.960 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e from an XAPool of resource jdbc/billing with 3 connection(s) (2 still available)
21:02:58.960 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.960 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.960 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e from the inaccessible pool
21:02:58.960 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.961 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.961 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEF6200000009], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.961 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEF6200000009], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.961 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e to the accessible pool
21:02:58.961 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@3aaaa02e was in state NOT_ACCESSIBLE, no need to test it
21:02:58.961 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.961 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/billing with 3 connection(s) (2 still available)
21:02:58.961 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
21:02:58.961 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e into a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEF6200000009], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.961 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/billing XAResource=org.postgresql.xa.PGXAConnection@3aaaa02e (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEF6200000009 : 737072696E672D62746D000001454BBBEF790000000A]
21:02:58.962 [Test worker] DEBUG org.hibernate.SQL - select this_.shipping_address_id as shipping1_6_0_, this_.created_by as created2_6_0_, this_.created_date as created3_6_0_, this_.modified_by as modified4_6_0_, this_.modified_date as modified5_6_0_, this_.city as city6_0_, this_.company_name as company7_6_0_, this_.country_code as country8_6_0_, this_.deleted as deleted6_0_, this_.description as descrip10_6_0_, this_.first_name as first11_6_0_, this_.last_name as last12_6_0_, this_.middle_name as middle13_6_0_, this_.onbehalfof_requestor_id as onbehalfof14_6_0_, this_.phone_number as phone15_6_0_, this_.postal_code as postal16_6_0_, this_.requestor_id as requestor17_6_0_, this_.state as state6_0_, this_.street as street6_0_, this_.street1 as street20_6_0_, this_.street2 as street21_6_0_, this_.user_id as user22_6_0_ from shipping_address this_ where this_.user_id=? and this_.deleted=?
Hibernate: select this_.shipping_address_id as shipping1_6_0_, this_.created_by as created2_6_0_, this_.created_date as created3_6_0_, this_.modified_by as modified4_6_0_, this_.modified_date as modified5_6_0_, this_.city as city6_0_, this_.company_name as company7_6_0_, this_.country_code as country8_6_0_, this_.deleted as deleted6_0_, this_.description as descrip10_6_0_, this_.first_name as first11_6_0_, this_.last_name as last12_6_0_, this_.middle_name as middle13_6_0_, this_.onbehalfof_requestor_id as onbehalfof14_6_0_, this_.phone_number as phone15_6_0_, this_.postal_code as postal16_6_0_, this_.requestor_id as requestor17_6_0_, this_.state as state6_0_, this_.street as street6_0_, this_.street1 as street20_6_0_, this_.street2 as street21_6_0_, this_.user_id as user22_6_0_ from shipping_address this_ where this_.user_id=? and this_.deleted=?
21:02:58.970 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
21:02:58.971 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.billing.db.entity.ShippingAddressEntity#1023443008]
21:02:58.971 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 1
21:02:58.971 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.billing.db.entity.ShippingAddressEntity#1023459392]
21:02:58.971 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
21:02:58.971 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@73e84841
21:02:58.971 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.971 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEF6200000009], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.971 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.972 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEF6200000009], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.972 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.972 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.972 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEF6200000009], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.972 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.972 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.972 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
21:02:58.972 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e from the accessible pool
21:02:58.972 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.972 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.972 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e to the inaccessible pool
21:02:58.972 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.973 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
21:02:58.980 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
21:02:58.981 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
21:02:58.981 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
21:02:58.982 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 1 updates, 0 deletions to 2 objects
21:02:58.982 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
21:02:58.982 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
21:02:58.983 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.billing.db.entity.ShippingAddressEntity{street2=null, middleName=null, street1=null, lastName=Chen, onbehalfofRequestorId=null, createdTime=Thu Apr 10 21:02:58 CST 2014, modifiedBy=null, street=NO 1, Dapu RD, modifiedTime=null, state=CA, companyName=null, deleted=true, addressId=1023459392, city=FORREST, country=US, postalCode=96045, phoneNumber=null, createdBy=BILLING, description=null, userId=1397134978927, firstName=Xumeng, requestorId=GOD}
21:02:58.983 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.billing.db.entity.ShippingAddressEntity{street2=null, middleName=null, street1=null, lastName=Chen, onbehalfofRequestorId=null, createdTime=Thu Apr 10 21:02:58 CST 2014, modifiedBy=null, street=NO 1, Dapu RD, modifiedTime=null, state=CA, companyName=null, deleted=false, addressId=1023443008, city=FORREST, country=US, postalCode=96045, phoneNumber=null, createdBy=BILLING, description=null, userId=1397134978927, firstName=Xumeng, requestorId=GOD}
21:02:58.983 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: shipping_address
21:02:58.986 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
21:02:58.986 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/billing with 3 connection(s) (2 still available)
21:02:58.986 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/billing with 3 connection(s) (2 still available)
21:02:58.986 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001454BBBEF6200000009]
21:02:58.986 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.986 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.986 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001454BBBEF6200000009
21:02:58.986 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
21:02:58.986 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e from an XAPool of resource jdbc/billing with 3 connection(s) (2 still available)
21:02:58.986 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.986 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.986 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e from the inaccessible pool
21:02:58.986 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.986 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.987 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEF6200000009], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.987 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEF6200000009], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.987 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e to the accessible pool
21:02:58.987 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@3aaaa02e was in state NOT_ACCESSIBLE, no need to test it
21:02:58.987 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.987 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/billing with 3 connection(s) (2 still available)
21:02:58.987 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
21:02:58.987 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e into a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEF6200000009], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.987 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/billing XAResource=org.postgresql.xa.PGXAConnection@3aaaa02e (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEF6200000009 : 737072696E672D62746D000001454BBBEF790000000A]
21:02:58.987 [Test worker] DEBUG org.hibernate.SQL - update shipping_address set created_by=?, created_date=?, modified_by=?, modified_date=?, city=?, company_name=?, country_code=?, deleted=?, description=?, first_name=?, last_name=?, middle_name=?, onbehalfof_requestor_id=?, phone_number=?, postal_code=?, requestor_id=?, state=?, street=?, street1=?, street2=?, user_id=? where shipping_address_id=?
Hibernate: update shipping_address set created_by=?, created_date=?, modified_by=?, modified_date=?, city=?, company_name=?, country_code=?, deleted=?, description=?, first_name=?, last_name=?, middle_name=?, onbehalfof_requestor_id=?, phone_number=?, postal_code=?, requestor_id=?, state=?, street=?, street1=?, street2=?, user_id=? where shipping_address_id=?
21:02:58.991 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
21:02:58.996 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
21:02:58.996 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
21:02:58.996 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@73e84841
21:02:58.996 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.996 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEF6200000009], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.996 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.996 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEF6200000009], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.996 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.996 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.996 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEF6200000009], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.996 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.997 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.997 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
21:02:58.997 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e from the accessible pool
21:02:58.997 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.997 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.997 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e to the inaccessible pool
21:02:58.997 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.997 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
21:02:58.997 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
21:02:58.997 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/billing with 3 connection(s) (2 still available)
21:02:58.997 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/billing with 3 connection(s) (2 still available)
21:02:58.997 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001454BBBEF6200000009]
21:02:58.997 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.997 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.997 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001454BBBEF6200000009
21:02:58.997 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
21:02:58.997 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e from an XAPool of resource jdbc/billing with 3 connection(s) (2 still available)
21:02:58.997 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.997 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.998 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e from the inaccessible pool
21:02:58.998 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.998 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.998 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEF6200000009], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.998 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEF6200000009], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.998 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e to the accessible pool
21:02:58.998 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@3aaaa02e was in state NOT_ACCESSIBLE, no need to test it
21:02:58.998 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:58.998 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/billing with 3 connection(s) (2 still available)
21:02:58.998 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
21:02:58.998 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e into a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEF6200000009], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:58.998 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/billing XAResource=org.postgresql.xa.PGXAConnection@3aaaa02e (started) with XID a Bitronix XID [737072696E672D62746D000001454BBBEF6200000009 : 737072696E672D62746D000001454BBBEF790000000A]
21:02:58.998 [Test worker] DEBUG org.hibernate.SQL - select this_.shipping_address_id as shipping1_6_0_, this_.created_by as created2_6_0_, this_.created_date as created3_6_0_, this_.modified_by as modified4_6_0_, this_.modified_date as modified5_6_0_, this_.city as city6_0_, this_.company_name as company7_6_0_, this_.country_code as country8_6_0_, this_.deleted as deleted6_0_, this_.description as descrip10_6_0_, this_.first_name as first11_6_0_, this_.last_name as last12_6_0_, this_.middle_name as middle13_6_0_, this_.onbehalfof_requestor_id as onbehalfof14_6_0_, this_.phone_number as phone15_6_0_, this_.postal_code as postal16_6_0_, this_.requestor_id as requestor17_6_0_, this_.state as state6_0_, this_.street as street6_0_, this_.street1 as street20_6_0_, this_.street2 as street21_6_0_, this_.user_id as user22_6_0_ from shipping_address this_ where this_.user_id=? and this_.deleted=?
Hibernate: select this_.shipping_address_id as shipping1_6_0_, this_.created_by as created2_6_0_, this_.created_date as created3_6_0_, this_.modified_by as modified4_6_0_, this_.modified_date as modified5_6_0_, this_.city as city6_0_, this_.company_name as company7_6_0_, this_.country_code as country8_6_0_, this_.deleted as deleted6_0_, this_.description as descrip10_6_0_, this_.first_name as first11_6_0_, this_.last_name as last12_6_0_, this_.middle_name as middle13_6_0_, this_.onbehalfof_requestor_id as onbehalfof14_6_0_, this_.phone_number as phone15_6_0_, this_.postal_code as postal16_6_0_, this_.requestor_id as requestor17_6_0_, this_.state as state6_0_, this_.street as street6_0_, this_.street1 as street20_6_0_, this_.street2 as street21_6_0_, this_.user_id as user22_6_0_ from shipping_address this_ where this_.user_id=? and this_.deleted=?
21:02:59.002 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
21:02:59.003 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.billing.db.entity.ShippingAddressEntity#1023443008]
21:02:59.003 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
21:02:59.003 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@73e84841
21:02:59.003 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:59.003 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEF6200000009], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:59.003 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:59.003 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e from a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEF6200000009], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:59.003 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:59.003 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:59.003 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001454BBBEF6200000009], status=ACTIVE, 1 resource(s) enlisted (started Thu Apr 10 21:02:58 CST 2014)
21:02:59.003 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:59.004 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:59.004 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
21:02:59.004 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e from the accessible pool
21:02:59.004 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:59.004 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:59.004 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e to the inaccessible pool
21:02:59.004 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/billing in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aaaa02e
21:02:59.004 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
21:02:59.004 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
