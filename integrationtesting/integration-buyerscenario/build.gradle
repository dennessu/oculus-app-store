apply plugin: 'java'
apply plugin: 'groovy'

sourceCompatibility = '1.7'
[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

if (!hasProperty('mainClass')) {
    ext.mainClass = ''
}

test {
    useTestNG()
    systemProperty 'test.config', System.properties['test.config']
    systemProperty 'vmip', System.properties['vmip']
    options {
        listeners << 'org.testng.reporters.XMLReporter'
        listeners << 'com.junbo.test.common.property.PropertyTransformer'
    }
    testLogging {
        events "passed", "skipped", "failed"
    }

    // show standard out and standard error of the test JVM(s) on the console
    testLogging.showStandardStreams = true
}

dependencies {
    compile junboProject(':catalog-spec')
    compile junboProject(':identity-spec')
    compile junboProject(':common-testlib')
    compile junboProject(':payment-integration')
    compile junboProject(':billing-integration')
    compile junboProject(':entitlement-integration')
    compile junboProject(':order-integration')
    compile junboProject(':identity-integration')

    compile(libraries.asyncclient)
    compile(libraries.postgresql)

    testCompile(libraries.junit)
    testCompile(libraries.slf4j_api)
    testCompile(libraries.testng)

}