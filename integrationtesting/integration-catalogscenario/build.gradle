apply plugin: 'java'
apply plugin: 'idea'
apply plugin: 'maven'
apply plugin: 'groovy'

sourceCompatibility = '1.7'
[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

if (!hasProperty('mainClass')) {
    ext.mainClass = ''
}

test{
    useTestNG()
    systemProperty 'test.config', System.properties['test.config']
    options {
        listeners << 'org.testng.reporters.XMLReporter'
        listeners << 'com.junbo.testing.common.property.PropertyTransformer'
    }
    testLogging {
        events "passed", "skipped", "failed"
    }

    // show standard out and standard error of the test JVM(s) on the console
    testLogging.showStandardStreams = true
}

dependencies {

    // TODO: Add dependencies here ...
    // You can read more about how to add dependency here:
    //   http://www.gradle.org/docs/current/userguide/dependency_management.html#sec:how_to_declare_your_dependencies

    compile (libraries.asyncclient)
    compile project(':integration-common')

    testCompile (libraries.asyncclient)
    testCompile (libraries.slf4j_api)
    testCompile 'junit:junit:4.11'
    testCompile 'org.testng:testng:6.8.8'
    testCompile 'com.junbo.catalog:catalog-spec:0.0.1-SNAPSHOT'
    testCompile project(':integration-common')
}