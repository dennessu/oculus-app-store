apply plugin: 'java'

sourceCompatibility = '1.7'
[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

test {
    useTestNG()
    systemProperty 'test.config', System.properties['test.config']
    options {
        listeners << 'org.testng.reporters.XMLReporter'
        listeners << 'com.junbo.test.common.property.PropertyTransformer'
    }
    testLogging {
        events "passed", "skipped", "failed"
    }
    // show standard out and standard error of the test JVM(s) on the console
    testLogging.showStandardStreams = true
}

repositories {
    mavenLocal()
    maven {
        credentials {
            username "${artifactory_user}"
            password "${artifactory_password}"
        }
        url "${artifactory_contextUrl}/repo"
    }
    mavenCentral()
}

dependencies {

    compile(libraries.common_testlib)

    compile 'com.junbo.identity:identity-spec:0.0.1-SNAPSHOT'
    compile 'com.junbo.oauth:oauth-spec:0.0.1-SNAPSHOT'
    compile 'com.junbo.test:identity-integration:0.0.1-SNAPSHOT'

    testCompile(libraries.junit)
    testCompile(libraries.testng)
}
