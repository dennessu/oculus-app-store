<?xml version="1.1" encoding="UTF-8"?>
<testsuite name="com.junbo.fulfilment.core.service.FulfilmentServiceSupportTest" tests="4" failures="0" errors="0" timestamp="2014-03-31T08:05:17" hostname="XumengChendeMacBook-Pro.local" time="0.558">
  <properties/>
  <testcase name="testClassify" classname="com.junbo.fulfilment.core.service.FulfilmentServiceSupportTest" time="0.424"/>
  <testcase name="testDispatch" classname="com.junbo.fulfilment.core.service.FulfilmentServiceSupportTest" time="0.013"/>
  <testcase name="testDistill" classname="com.junbo.fulfilment.core.service.FulfilmentServiceSupportTest" time="0.001"/>
  <testcase name="testStore" classname="com.junbo.fulfilment.core.service.FulfilmentServiceSupportTest" time="0.09"/>
  <system-out><![CDATA[16:05:17.520 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'
16:05:17.542 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:17.545 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D00000145172BCC4700000001
16:05:17.639 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:05:17.640 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [com.junbo.sharding.id.oculus.OculusGlobalCounterInDBImpl.getAndIncrease]
16:05:17.640 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCC4700000001], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.640 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (1282194802) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCC4700000001], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014), default timeout 60s
16:05:17.640 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:05:17.640 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:05:17.640 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCC4700000001], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.641 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D00000145172BCCC800000002]
16:05:17.641 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning <a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)> to <a ThreadContext (1282194802) with transaction null, default timeout 60s>
16:05:17.641 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:05:17.641 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:05:17.641 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014) for Mon Mar 31 16:06:17 CST 2014
16:05:17.641 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.641 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014) scheduled for Mon Mar 31 16:06:17 CST 2014, total task(s) queued: 5
16:05:17.641 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:05:17 CST 2014
16:05:17.645 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'IdGlobalCounterDAOImpl.get' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
16:05:17.645 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:05:17.646 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:17.681 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@2f5a73a0
16:05:17.682 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:05:17.682 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962531176
16:05:17.683 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@6da6fd38
16:05:17.716 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:17.717 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available)
16:05:17.717 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available)
16:05:17.717 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BCCC800000002]
16:05:17.717 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:05:17.717 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available), waiting if necessary
16:05:17.717 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 - closing time: 1396253174727, now time: 1396253117717
16:05:17.717 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.717 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.717 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.717 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.717 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.718 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 to the accessible pool
16:05:17.718 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@552940f3 was in state IN_POOL, testing it
16:05:17.718 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3, skipping test
16:05:17.718 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.718 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.718 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:17.718 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.719 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@552940f3 belongs to a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.720 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D00000145172BCCC800000002 : 737072696E672D62746D00000145172BCD1800000003]
16:05:17.720 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning <a Bitronix XID [737072696E672D62746D00000145172BCCC800000002 : 737072696E672D62746D00000145172BCD1800000003]> to <an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@552940f3 with XID null>
16:05:17.720 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@552940f3 with XID a Bitronix XID [737072696E672D62746D00000145172BCCC800000002 : 737072696E672D62746D00000145172BCD1800000003] with NOFLAGS
16:05:17.720 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@552940f3 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCCC800000002 : 737072696E672D62746D00000145172BCD1800000003] with NOFLAGS
16:05:17.720 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@552940f3 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCCC800000002 : 737072696E672D62746D00000145172BCD1800000003]] on a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.720 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D00000145172BCCC800000002] previously unknown to a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3, adding it to the resource's transactions list
16:05:17.736 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
16:05:17.746 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 0 -> shardId [1]
16:05:17.748 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -> optionMode [2]
16:05:17.770 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:05:17.772 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
16:05:17.777 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:17.777 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@3bf0c2fd
16:05:17.777 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.777 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.777 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.777 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.777 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.777 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.778 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.778 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.778 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.778 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:17.778 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 from the accessible pool
16:05:17.778 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.778 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.778 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 to the inaccessible pool
16:05:17.778 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.778 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:17.779 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:05:17.780 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
16:05:17.782 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
16:05:17.782 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:05:17.783 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'IdGlobalCounterDAOImpl.saveOrUpdate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
16:05:17.783 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:05:17.783 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:17.785 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:05:17.786 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:05:17.790 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 1 updates, 0 deletions to 1 objects
16:05:17.790 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:05:17.791 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:05:17.791 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=2, shardId=0, globalCounter=61, optionMode=2}
16:05:17.791 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: id_global_counter
16:05:17.797 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D00000145172BCCC800000002
16:05:17.814 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:17.814 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.814 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.814 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BCCC800000002]
16:05:17.814 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.814 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.815 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172BCCC800000002
16:05:17.815 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:05:17.815 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.815 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.816 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.816 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 from the inaccessible pool
16:05:17.816 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.816 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.816 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.817 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.817 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 to the accessible pool
16:05:17.817 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@552940f3 was in state NOT_ACCESSIBLE, no need to test it
16:05:17.817 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.817 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.818 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:17.818 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.818 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@552940f3 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCCC800000002 : 737072696E672D62746D00000145172BCD1800000003]
16:05:17.818 [Test worker] DEBUG org.hibernate.SQL - update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
Hibernate: update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
16:05:17.819 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:05:17.821 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:05:17.822 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:17.822 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@3bf0c2fd
16:05:17.822 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.822 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.822 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.822 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.822 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.822 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.822 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.823 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.823 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.823 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:17.824 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 from the accessible pool
16:05:17.824 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.824 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.824 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 to the inaccessible pool
16:05:17.824 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.824 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:17.825 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:17.825 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.825 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.825 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BCCC800000002]
16:05:17.825 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.825 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.825 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172BCCC800000002
16:05:17.825 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:05:17.825 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.825 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.825 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.825 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 from the inaccessible pool
16:05:17.826 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.826 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.826 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.826 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.826 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 to the accessible pool
16:05:17.826 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@552940f3 was in state NOT_ACCESSIBLE, no need to test it
16:05:17.826 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.826 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.826 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:17.826 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.826 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@552940f3 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCCC800000002 : 737072696E672D62746D00000145172BCD1800000003]
16:05:17.826 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
16:05:17.827 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 0 -> shardId [1]
16:05:17.830 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -> optionMode [2]
16:05:17.833 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:05:17.833 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
16:05:17.833 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:17.833 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@3bf0c2fd
16:05:17.833 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.834 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.834 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.834 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.835 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.835 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.835 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.835 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.835 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.835 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:17.835 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 from the accessible pool
16:05:17.835 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.835 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.835 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 to the inaccessible pool
16:05:17.835 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.835 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:17.835 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:05:17.842 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:05:17.842 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:05:17.842 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 1 updates, 0 deletions to 1 objects
16:05:17.843 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:05:17.843 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:05:17.843 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=2, shardId=0, globalCounter=61, optionMode=2}
16:05:17.843 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: id_global_counter
16:05:17.843 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:17.843 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.843 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.844 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BCCC800000002]
16:05:17.844 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.844 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.844 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172BCCC800000002
16:05:17.844 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:05:17.844 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.844 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.844 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.844 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 from the inaccessible pool
16:05:17.844 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.844 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.844 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.844 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.844 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 to the accessible pool
16:05:17.844 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@552940f3 was in state NOT_ACCESSIBLE, no need to test it
16:05:17.846 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.846 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.846 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:17.847 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.847 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@552940f3 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCCC800000002 : 737072696E672D62746D00000145172BCD1800000003]
16:05:17.848 [Test worker] DEBUG org.hibernate.SQL - update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
Hibernate: update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
16:05:17.849 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:05:17.850 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:05:17.851 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:17.851 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@3bf0c2fd
16:05:17.851 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.851 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.851 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.851 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.851 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.851 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.851 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.851 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.851 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.851 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:17.851 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 from the accessible pool
16:05:17.851 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.852 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.852 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 to the inaccessible pool
16:05:17.852 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.852 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:17.852 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:17.852 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.853 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.853 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BCCC800000002]
16:05:17.854 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.854 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.854 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172BCCC800000002
16:05:17.854 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:05:17.854 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.854 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.855 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.855 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 from the inaccessible pool
16:05:17.855 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.855 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.855 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.856 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.856 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 to the accessible pool
16:05:17.856 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@552940f3 was in state NOT_ACCESSIBLE, no need to test it
16:05:17.856 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.856 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.856 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:17.856 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.856 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@552940f3 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCCC800000002 : 737072696E672D62746D00000145172BCD1800000003]
16:05:17.857 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
16:05:17.857 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 0 -> shardId [1]
16:05:17.857 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -> optionMode [2]
16:05:17.858 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:05:17.858 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
16:05:17.858 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:17.859 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@3bf0c2fd
16:05:17.859 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.859 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.859 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.859 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.859 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.859 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.859 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.859 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.859 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.859 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:17.859 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 from the accessible pool
16:05:17.859 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.859 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.859 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 to the inaccessible pool
16:05:17.860 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.860 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:17.860 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:05:17.861 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:05:17.861 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:05:17.862 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
16:05:17.862 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:05:17.862 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:05:17.862 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=2, shardId=0, globalCounter=61, optionMode=2}
16:05:17.862 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:17.862 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.863 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.863 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BCCC800000002]
16:05:17.863 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.863 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.863 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172BCCC800000002
16:05:17.863 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:05:17.863 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.863 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.863 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.863 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 from the inaccessible pool
16:05:17.865 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.866 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.866 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.866 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.866 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 to the accessible pool
16:05:17.866 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@552940f3 was in state NOT_ACCESSIBLE, no need to test it
16:05:17.867 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.869 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.870 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:17.871 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.872 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@552940f3 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCCC800000002 : 737072696E672D62746D00000145172BCD1800000003]
16:05:17.873 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
16:05:17.874 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 0 -> shardId [1]
16:05:17.874 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -> optionMode [2]
16:05:17.876 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:05:17.876 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
16:05:17.876 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:17.876 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@3bf0c2fd
16:05:17.877 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.877 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.877 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.877 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.877 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.877 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.877 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.877 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.877 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.877 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:17.877 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 from the accessible pool
16:05:17.877 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.877 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.877 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 to the inaccessible pool
16:05:17.877 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.877 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:17.878 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:05:17.878 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:05:17.878 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.878 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.879 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.879 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014) scheduled for Mon Mar 31 16:06:17 CST 2014, total task(s) still queued: 4
16:05:17.879 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:05:17.881 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.881 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.881 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@2f5a73a0
16:05:17.882 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:05:17.882 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:05:17.883 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
16:05:17.884 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:05:17.886 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:05:17.886 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=2, shardId=0, globalCounter=61, optionMode=2}
16:05:17.886 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:17.886 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@6da6fd38
16:05:17.889 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@552940f3 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCCC800000002 : 737072696E672D62746D00000145172BCD1800000003]
16:05:17.890 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@552940f3 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCCC800000002 : 737072696E672D62746D00000145172BCD1800000003]
16:05:17.890 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@552940f3 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCCC800000002 : 737072696E672D62746D00000145172BCD1800000003] with SUCCESS
16:05:17.891 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@552940f3 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCCC800000002 : 737072696E672D62746D00000145172BCD1800000003] with SUCCESS
16:05:17.892 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:05:17.892 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:05:17.892 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:05:17.892 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:05:17.892 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:05:17.892 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:05:17.892 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:05:17.892 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:05:17.892 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:05:17.893 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:05:17.894 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:05:17.895 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@552940f3 (ended) with XID a Bitronix XID [737072696E672D62746D00000145172BCCC800000002 : 737072696E672D62746D00000145172BCD1800000003] (with one-phase optimization)
16:05:17.897 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@552940f3 (ended) with XID a Bitronix XID [737072696E672D62746D00000145172BCCC800000002 : 737072696E672D62746D00000145172BCD1800000003]
16:05:17.898 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:05:17.898 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:05:17.898 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/sharding]
16:05:17.899 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/sharding]
16:05:17.899 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:05:17.899 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:05:17.899 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.900 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:05:17.900 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D00000145172BCCC800000002 : 737072696E672D62746D00000145172BCD1800000003] from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.900 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 cleaned up all transaction states for GTRID [737072696E672D62746D00000145172BCCC800000002]
16:05:17.900 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:05:17.900 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@2f5a73a0 with status=COMMITTED
16:05:17.900 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:05:17.901 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
16:05:17.903 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@6da6fd38 with status=COMMITTED
16:05:17.903 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014) with status=COMMITTED
16:05:17.903 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (1282194802) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014), default timeout 60s
16:05:17.903 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCCC800000002], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.903 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 with status=COMMITTED
16:05:17.903 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.903 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.903 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:17.903 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 from the inaccessible pool
16:05:17.903 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.904 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.904 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3 to the available pool
16:05:17.904 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@552940f3
16:05:17.904 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:05:17.904 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCC4700000001], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.904 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning <a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCC4700000001], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)> to <a ThreadContext (1282194802) with transaction null, default timeout 60s>
16:05:17.905 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@706a420d
16:05:17.905 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:05:17.905 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962531179
16:05:17.905 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@1aaeba47
16:05:17.908 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023426560, using strategy: org.hibernate.id.Assigned
16:05:17.914 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023442944, using strategy: org.hibernate.id.Assigned
16:05:17.934 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023459328, using strategy: org.hibernate.id.Assigned
16:05:17.934 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023475712, using strategy: org.hibernate.id.Assigned
16:05:17.935 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023492096, using strategy: org.hibernate.id.Assigned
16:05:17.936 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023508480, using strategy: org.hibernate.id.Assigned
16:05:17.936 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023524864, using strategy: org.hibernate.id.Assigned
16:05:17.937 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023541248, using strategy: org.hibernate.id.Assigned
16:05:17.938 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023557632, using strategy: org.hibernate.id.Assigned
16:05:17.952 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:17.953 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@4d6c32dd
16:05:17.953 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:05:17.953 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962531179
16:05:17.953 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@495ed8b8
16:05:17.954 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023574016, using strategy: org.hibernate.id.Assigned
16:05:17.955 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023590400, using strategy: org.hibernate.id.Assigned
16:05:17.955 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023606784, using strategy: org.hibernate.id.Assigned
16:05:17.956 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023623168, using strategy: org.hibernate.id.Assigned
16:05:17.957 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023639552, using strategy: org.hibernate.id.Assigned
16:05:17.958 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023655936, using strategy: org.hibernate.id.Assigned
16:05:17.958 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023672320, using strategy: org.hibernate.id.Assigned
16:05:17.959 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023688704, using strategy: org.hibernate.id.Assigned
16:05:17.960 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023705088, using strategy: org.hibernate.id.Assigned
16:05:17.962 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:17.963 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:17.965 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:17.965 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:17.985 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:17.985 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:05:17.985 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [com.junbo.sharding.id.oculus.OculusGlobalCounterInDBImpl.getAndIncrease]
16:05:17.985 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE1F00000006], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.985 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (1282194802) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE1F00000006], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014), default timeout 60s
16:05:17.985 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:05:17.985 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:05:17.985 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE1F00000006], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.985 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D00000145172BCE2100000007]
16:05:17.985 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning <a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)> to <a ThreadContext (1282194802) with transaction null, default timeout 60s>
16:05:17.986 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:05:17.986 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:05:17.986 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014) for Mon Mar 31 16:06:17 CST 2014
16:05:17.986 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.986 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014) scheduled for Mon Mar 31 16:06:17 CST 2014, total task(s) queued: 5
16:05:17.986 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:05:17 CST 2014
16:05:17.986 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:05:17.986 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:17.987 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@287a8d4b
16:05:17.987 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:05:17.987 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962531179
16:05:17.987 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@1df3794c
16:05:17.987 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:17.987 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available)
16:05:17.987 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available)
16:05:17.987 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BCE2100000007]
16:05:17.987 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:05:17.987 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available), waiting if necessary
16:05:17.987 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 - closing time: 1396253175108, now time: 1396253117987
16:05:17.987 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.988 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:17.988 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:17.988 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:17.988 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:17.988 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 to the accessible pool
16:05:17.988 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@ff061b3 was in state IN_POOL, testing it
16:05:17.988 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3, skipping test
16:05:17.988 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:17.988 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.988 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:17.988 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.988 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@ff061b3 belongs to a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.988 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D00000145172BCE2100000007 : 737072696E672D62746D00000145172BCE2400000008]
16:05:17.988 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning <a Bitronix XID [737072696E672D62746D00000145172BCE2100000007 : 737072696E672D62746D00000145172BCE2400000008]> to <an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@ff061b3 with XID null>
16:05:17.989 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@ff061b3 with XID a Bitronix XID [737072696E672D62746D00000145172BCE2100000007 : 737072696E672D62746D00000145172BCE2400000008] with NOFLAGS
16:05:17.989 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@ff061b3 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCE2100000007 : 737072696E672D62746D00000145172BCE2400000008] with NOFLAGS
16:05:17.989 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@ff061b3 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCE2100000007 : 737072696E672D62746D00000145172BCE2400000008]] on a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:17.989 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D00000145172BCE2100000007] previously unknown to a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3, adding it to the resource's transactions list
16:05:17.989 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
16:05:17.989 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 1 -> shardId [1]
16:05:17.989 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -> optionMode [2]
16:05:17.992 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:05:17.992 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
16:05:17.992 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:17.992 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@7dae7a58
16:05:17.992 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:17.993 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.993 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:17.993 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.993 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:17.993 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:17.993 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.993 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:17.993 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:17.993 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:17.993 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from the accessible pool
16:05:17.993 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:17.993 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:17.993 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 to the inaccessible pool
16:05:17.993 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:17.993 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:17.993 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:05:17.993 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
16:05:17.994 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
16:05:17.994 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:05:17.994 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:05:17.994 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:17.994 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:05:17.994 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:05:17.994 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 1 updates, 0 deletions to 1 objects
16:05:17.995 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:05:17.995 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:05:17.995 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=1, shardId=1, globalCounter=44, optionMode=2}
16:05:17.995 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: id_global_counter
16:05:17.995 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:17.995 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.995 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.995 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BCE2100000007]
16:05:17.995 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:17.995 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:17.995 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172BCE2100000007
16:05:17.995 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:05:17.995 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.995 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:17.995 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:17.995 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from the inaccessible pool
16:05:17.995 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:17.995 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:17.996 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.996 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.996 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 to the accessible pool
16:05:17.996 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@ff061b3 was in state NOT_ACCESSIBLE, no need to test it
16:05:17.996 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:17.996 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:17.997 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:17.997 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:17.997 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@ff061b3 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCE2100000007 : 737072696E672D62746D00000145172BCE2400000008]
16:05:17.998 [Test worker] DEBUG org.hibernate.SQL - update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
Hibernate: update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
16:05:18.001 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:05:18.002 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:05:18.002 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:18.003 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@7dae7a58
16:05:18.003 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.004 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.004 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.004 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.004 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.004 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.004 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.004 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.004 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.004 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:18.005 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from the accessible pool
16:05:18.005 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.007 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.008 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 to the inaccessible pool
16:05:18.008 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.008 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:18.008 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:18.008 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:18.008 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:18.008 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BCE2100000007]
16:05:18.008 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.008 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.008 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172BCE2100000007
16:05:18.008 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:05:18.008 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:18.008 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.008 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.008 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from the inaccessible pool
16:05:18.008 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.008 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.008 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.009 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.009 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 to the accessible pool
16:05:18.009 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@ff061b3 was in state NOT_ACCESSIBLE, no need to test it
16:05:18.009 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.009 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:18.009 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:18.009 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.009 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@ff061b3 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCE2100000007 : 737072696E672D62746D00000145172BCE2400000008]
16:05:18.009 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
16:05:18.009 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 1 -> shardId [1]
16:05:18.009 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -> optionMode [2]
16:05:18.013 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:05:18.013 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
16:05:18.013 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:18.013 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@7dae7a58
16:05:18.014 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.015 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.017 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.017 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.017 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.017 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.018 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.018 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.018 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.018 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:18.018 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from the accessible pool
16:05:18.018 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.018 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.018 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 to the inaccessible pool
16:05:18.018 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.018 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:18.018 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:05:18.020 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:05:18.020 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:05:18.020 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 1 updates, 0 deletions to 1 objects
16:05:18.020 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:05:18.020 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:05:18.020 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=1, shardId=1, globalCounter=44, optionMode=2}
16:05:18.020 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: id_global_counter
16:05:18.021 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:18.021 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:18.021 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:18.021 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BCE2100000007]
16:05:18.021 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.021 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.021 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172BCE2100000007
16:05:18.021 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:05:18.021 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:18.021 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.021 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.021 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from the inaccessible pool
16:05:18.021 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.021 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.021 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.021 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.021 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 to the accessible pool
16:05:18.022 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@ff061b3 was in state NOT_ACCESSIBLE, no need to test it
16:05:18.025 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.025 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:18.025 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:18.025 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.025 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@ff061b3 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCE2100000007 : 737072696E672D62746D00000145172BCE2400000008]
16:05:18.025 [Test worker] DEBUG org.hibernate.SQL - update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
Hibernate: update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
16:05:18.026 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:05:18.027 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:05:18.027 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:18.028 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@7dae7a58
16:05:18.028 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.028 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.028 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.028 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.028 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.028 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.028 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.028 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.028 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.028 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:18.028 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from the accessible pool
16:05:18.028 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.028 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.028 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 to the inaccessible pool
16:05:18.028 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.029 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:18.029 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:18.029 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:18.029 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:18.029 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BCE2100000007]
16:05:18.029 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.030 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.031 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172BCE2100000007
16:05:18.031 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:05:18.032 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:18.032 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.032 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.032 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from the inaccessible pool
16:05:18.032 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.033 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.033 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.034 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.034 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 to the accessible pool
16:05:18.034 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@ff061b3 was in state NOT_ACCESSIBLE, no need to test it
16:05:18.034 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.034 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:18.034 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:18.035 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.035 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@ff061b3 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCE2100000007 : 737072696E672D62746D00000145172BCE2400000008]
16:05:18.036 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
16:05:18.037 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 1 -> shardId [1]
16:05:18.038 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -> optionMode [2]
16:05:18.040 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:05:18.040 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
16:05:18.040 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:18.041 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@7dae7a58
16:05:18.041 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.041 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.041 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.041 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.041 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.041 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.041 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.041 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.041 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.041 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:18.041 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from the accessible pool
16:05:18.041 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.041 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.041 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 to the inaccessible pool
16:05:18.041 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.041 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:18.041 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:05:18.042 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:05:18.042 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:05:18.042 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
16:05:18.042 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:05:18.042 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:05:18.042 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=1, shardId=1, globalCounter=44, optionMode=2}
16:05:18.042 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:18.042 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:18.042 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:18.042 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BCE2100000007]
16:05:18.042 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.042 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.043 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172BCE2100000007
16:05:18.043 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:05:18.043 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:18.043 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.043 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.045 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from the inaccessible pool
16:05:18.045 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.045 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.046 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.046 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.046 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 to the accessible pool
16:05:18.047 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@ff061b3 was in state NOT_ACCESSIBLE, no need to test it
16:05:18.047 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.048 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementUnregisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D00000145172BCCC800000002
16:05:18.048 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementUnregisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D00000145172BCC4700000001
16:05:18.048 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D00000145172BCE1F00000006
16:05:18.048 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D00000145172BCE2100000007
16:05:18.049 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:05:18.050 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:18.050 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.050 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@ff061b3 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCE2100000007 : 737072696E672D62746D00000145172BCE2400000008]
16:05:18.050 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
16:05:18.051 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 1 -> shardId [1]
16:05:18.051 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -> optionMode [2]
16:05:18.053 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:05:18.054 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
16:05:18.054 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:18.055 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@7dae7a58
16:05:18.055 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.055 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.055 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.055 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.055 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.055 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.055 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.056 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.056 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.056 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:18.056 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from the accessible pool
16:05:18.056 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.056 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.056 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 to the inaccessible pool
16:05:18.056 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.056 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:18.056 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:05:18.056 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:05:18.056 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.056 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.056 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.056 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014) scheduled for Mon Mar 31 16:06:17 CST 2014, total task(s) still queued: 4
16:05:18.056 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:05:18.057 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.057 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.057 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@287a8d4b
16:05:18.057 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:05:18.057 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:05:18.057 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
16:05:18.058 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:05:18.058 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:05:18.058 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=1, shardId=1, globalCounter=44, optionMode=2}
16:05:18.058 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:18.058 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@1df3794c
16:05:18.058 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@ff061b3 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCE2100000007 : 737072696E672D62746D00000145172BCE2400000008]
16:05:18.058 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@ff061b3 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCE2100000007 : 737072696E672D62746D00000145172BCE2400000008]
16:05:18.059 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@ff061b3 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCE2100000007 : 737072696E672D62746D00000145172BCE2400000008] with SUCCESS
16:05:18.060 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@ff061b3 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCE2100000007 : 737072696E672D62746D00000145172BCE2400000008] with SUCCESS
16:05:18.060 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:05:18.060 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:05:18.061 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:05:18.061 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:05:18.061 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:05:18.061 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:05:18.061 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:05:18.061 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:05:18.061 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:05:18.062 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:05:18.062 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:05:18.062 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@ff061b3 (ended) with XID a Bitronix XID [737072696E672D62746D00000145172BCE2100000007 : 737072696E672D62746D00000145172BCE2400000008] (with one-phase optimization)
16:05:18.063 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@ff061b3 (ended) with XID a Bitronix XID [737072696E672D62746D00000145172BCE2100000007 : 737072696E672D62746D00000145172BCE2400000008]
16:05:18.063 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:05:18.063 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:05:18.063 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/sharding]
16:05:18.063 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/sharding]
16:05:18.063 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:05:18.063 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:05:18.064 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.064 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:05:18.064 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D00000145172BCE2100000007 : 737072696E672D62746D00000145172BCE2400000008] from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.064 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 cleaned up all transaction states for GTRID [737072696E672D62746D00000145172BCE2100000007]
16:05:18.064 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:05:18.064 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@287a8d4b with status=COMMITTED
16:05:18.064 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:05:18.064 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
16:05:18.064 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@1df3794c with status=COMMITTED
16:05:18.064 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014) with status=COMMITTED
16:05:18.064 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (1282194802) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014), default timeout 60s
16:05:18.064 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE2100000007], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.064 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 with status=COMMITTED
16:05:18.065 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.065 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.065 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:18.065 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 from the inaccessible pool
16:05:18.065 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.066 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.066 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3 to the available pool
16:05:18.066 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@ff061b3
16:05:18.066 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:05:18.066 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE1F00000006], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)
16:05:18.067 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning <a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE1F00000006], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:05:17 CST 2014)> to <a ThreadContext (1282194802) with transaction null, default timeout 60s>
16:05:18.067 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@48334e6c
16:05:18.067 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:05:18.067 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962531180
16:05:18.067 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@4b914caa
16:05:18.067 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 738213952, using strategy: org.hibernate.id.Assigned
16:05:18.068 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023721472, using strategy: org.hibernate.id.Assigned
16:05:18.069 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023737856, using strategy: org.hibernate.id.Assigned
16:05:18.069 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023754240, using strategy: org.hibernate.id.Assigned
16:05:18.070 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023770624, using strategy: org.hibernate.id.Assigned
16:05:18.071 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023787008, using strategy: org.hibernate.id.Assigned
16:05:18.073 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023803392, using strategy: org.hibernate.id.Assigned
16:05:18.073 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023819776, using strategy: org.hibernate.id.Assigned
16:05:18.074 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023836160, using strategy: org.hibernate.id.Assigned
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
