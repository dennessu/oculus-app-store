<?xml version="1.1" encoding="UTF-8"?>
<testsuite name="com.junbo.fulfilment.core.service.FulfilmentServiceTest" tests="3" failures="0" errors="0" timestamp="2014-03-31T08:05:18" hostname="XumengChendeMacBook-Pro.local" time="0.567">
  <properties/>
  <testcase name="testBVT" classname="com.junbo.fulfilment.core.service.FulfilmentServiceTest" time="0.218"/>
  <testcase name="testDuplicatedBillingOrderId" classname="com.junbo.fulfilment.core.service.FulfilmentServiceTest" time="0.229"/>
  <testcase name="testDuplicatedTrackingGuid" classname="com.junbo.fulfilment.core.service.FulfilmentServiceTest" time="0.091"/>
  <system-out><![CDATA[16:05:18.106 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'FulfilmentServiceImpl.fulfill' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
16:05:18.106 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:05:18.106 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:18.107 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@4805a26c
16:05:18.107 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:05:18.107 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962531181
16:05:18.107 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@702a68b
16:05:18.120 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:18.120 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (3 still available)
16:05:18.120 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (3 still available)
16:05:18.120 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BCE9100000009]
16:05:18.120 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:05:18.120 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (3 still available), waiting if necessary
16:05:18.120 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd - closing time: 1396253176303, now time: 1396253118120
16:05:18.120 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd from an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.120 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.120 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.121 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.121 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.121 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd to the accessible pool
16:05:18.121 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@77da0fd was in state IN_POOL, testing it
16:05:18.121 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd, skipping test
16:05:18.121 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.121 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.121 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:18.121 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.121 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@77da0fd does not belong to any resource of a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available)
16:05:18.121 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@77da0fd belongs to a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.121 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D00000145172BCE9100000009 : 737072696E672D62746D00000145172BCEA90000000A]
16:05:18.121 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning <a Bitronix XID [737072696E672D62746D00000145172BCE9100000009 : 737072696E672D62746D00000145172BCEA90000000A]> to <an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@77da0fd with XID null>
16:05:18.122 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@77da0fd with XID a Bitronix XID [737072696E672D62746D00000145172BCE9100000009 : 737072696E672D62746D00000145172BCEA90000000A] with NOFLAGS
16:05:18.122 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@77da0fd (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCE9100000009 : 737072696E672D62746D00000145172BCEA90000000A] with NOFLAGS
16:05:18.122 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@77da0fd (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCE9100000009 : 737072696E672D62746D00000145172BCEA90000000A]] on a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.122 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D00000145172BCE9100000009] previously unknown to a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd, adding it to the resource's transactions list
16:05:18.122 [Test worker] DEBUG org.hibernate.SQL - select this_.request_id as request1_4_0_, this_.created_by as created2_4_0_, this_.created_time as created3_4_0_, this_.updated_by as updated4_4_0_, this_.updated_time as updated5_4_0_, this_.order_id as order6_4_0_, this_.payload as payload4_0_, this_.tracking_guid as tracking8_4_0_ from fulfilment_request this_ where this_.tracking_guid=?
Hibernate: select this_.request_id as request1_4_0_, this_.created_by as created2_4_0_, this_.created_time as created3_4_0_, this_.updated_by as updated4_4_0_, this_.updated_time as updated5_4_0_, this_.order_id as order6_4_0_, this_.payload as payload4_0_, this_.tracking_guid as tracking8_4_0_ from fulfilment_request this_ where this_.tracking_guid=?
16:05:18.130 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:18.130 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@2c98acfa
16:05:18.130 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.130 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.130 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.131 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.131 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.131 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.131 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.131 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.131 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.131 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:18.131 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd from the accessible pool
16:05:18.131 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.131 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.131 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd to the inaccessible pool
16:05:18.133 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.134 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:18.134 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:05:18.134 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:05:18.135 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:18.135 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.135 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.135 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BCE9100000009]
16:05:18.135 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.135 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.135 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172BCE9100000009
16:05:18.135 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:05:18.135 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd from an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.135 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.135 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.135 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd from the inaccessible pool
16:05:18.135 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.135 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.135 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.135 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.135 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd to the accessible pool
16:05:18.135 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@77da0fd was in state NOT_ACCESSIBLE, no need to test it
16:05:18.135 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.135 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.135 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:18.136 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.136 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@77da0fd (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCE9100000009 : 737072696E672D62746D00000145172BCEA90000000A]
16:05:18.136 [Test worker] DEBUG org.hibernate.SQL - select this_.request_id as request1_4_0_, this_.created_by as created2_4_0_, this_.created_time as created3_4_0_, this_.updated_by as updated4_4_0_, this_.updated_time as updated5_4_0_, this_.order_id as order6_4_0_, this_.payload as payload4_0_, this_.tracking_guid as tracking8_4_0_ from fulfilment_request this_ where this_.order_id=?
Hibernate: select this_.request_id as request1_4_0_, this_.created_by as created2_4_0_, this_.created_time as created3_4_0_, this_.updated_by as updated4_4_0_, this_.updated_time as updated5_4_0_, this_.order_id as order6_4_0_, this_.payload as payload4_0_, this_.tracking_guid as tracking8_4_0_ from fulfilment_request this_ where this_.order_id=?
16:05:18.137 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:18.137 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@2c98acfa
16:05:18.137 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.137 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.137 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.137 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.138 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.138 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.138 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.138 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.138 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.138 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:18.138 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd from the accessible pool
16:05:18.138 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.138 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.138 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd to the inaccessible pool
16:05:18.138 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.138 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:18.138 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:05:18.138 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:18.138 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023852544, using strategy: org.hibernate.id.Assigned
16:05:18.139 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023868928, using strategy: org.hibernate.id.Assigned
16:05:18.140 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023885312, using strategy: org.hibernate.id.Assigned
16:05:18.140 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023901696, using strategy: org.hibernate.id.Assigned
16:05:18.140 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023918080, using strategy: org.hibernate.id.Assigned
16:05:18.141 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023934464, using strategy: org.hibernate.id.Assigned
16:05:18.141 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023950848, using strategy: org.hibernate.id.Assigned
16:05:18.142 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023967232, using strategy: org.hibernate.id.Assigned
16:05:18.142 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1023983616, using strategy: org.hibernate.id.Assigned
16:05:18.143 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:18.143 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:18.144 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:18.144 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:18.145 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'FulfilmentServiceImpl.retrieveRequest' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
16:05:18.145 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:05:18.145 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:18.179 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:05:18.180 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:05:18.180 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 9 insertions, 2 updates, 0 deletions to 9 objects
16:05:18.180 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:05:18.180 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:05:18.181 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1023983616, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":3,"items":[{"entityType":"ITEM","id":50000,"quantity":9,"sku":55555}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1023967232, updatedTime=null, updatedBy=null}
16:05:18.181 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1023918080, result=null, createdBy=system internal, status=2, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":4,"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=0, fulfilmentId=1023868928, updatedTime=Mon Mar 31 16:05:18 CST 2014, updatedBy=system internal}
16:05:18.181 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentEntity{id=1023868928, createdBy=system internal, requestId=1023852544, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"offerId":100,"orderItemId":10000,"quantity":2,"timestamp":1396253118105}, updatedTime=null, updatedBy=null}
16:05:18.181 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1023934464, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":6,"items":[{"entityType":"ITEM","id":40000,"quantity":77,"sku":44444}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1023868928, updatedTime=null, updatedBy=null}
16:05:18.181 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1023950848, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":60000,"items":[{"entityType":"ITEM","id":50000,"quantity":9,"sku":55555}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1023868928, updatedTime=null, updatedBy=null}
16:05:18.181 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1023885312, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":2,"items":[{"entityType":"ITEM","id":10000,"quantity":888,"sku":11111},{"entityType":"ITEM","id":20000,"quantity":999,"sku":22222}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1023868928, updatedTime=null, updatedBy=null}
16:05:18.181 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentEntity{id=1023967232, createdBy=system internal, requestId=1023852544, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"offerId":400,"orderItemId":20000,"quantity":3,"timestamp":1396253118105}, updatedTime=null, updatedBy=null}
16:05:18.182 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1023901696, result=null, createdBy=system internal, status=2, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":2,"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=0, fulfilmentId=1023868928, updatedTime=Mon Mar 31 16:05:18 CST 2014, updatedBy=system internal}
16:05:18.182 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentRequestEntity{id=1023852544, trackingGuid=568b2451-29c3-41e9-a585-5ca42bb48886, createdBy=system internal, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"orderId":1396253118104,"requester":"SYSTEM","userId":1396253118104}, orderId=1396253118104, updatedTime=null, updatedBy=null}
16:05:18.182 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: fulfilment_item
16:05:18.193 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:18.193 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.193 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.193 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BCE9100000009]
16:05:18.193 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.193 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.193 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172BCE9100000009
16:05:18.193 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:05:18.193 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd from an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.216 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.216 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.216 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd from the inaccessible pool
16:05:18.217 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.219 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.219 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.220 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.221 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd to the accessible pool
16:05:18.222 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@77da0fd was in state NOT_ACCESSIBLE, no need to test it
16:05:18.226 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.226 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.226 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:18.226 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.226 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@77da0fd (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCE9100000009 : 737072696E672D62746D00000145172BCEA90000000A]
16:05:18.226 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_request (created_by, created_time, updated_by, updated_time, order_id, payload, tracking_guid, request_id) values (?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_request (created_by, created_time, updated_by, updated_time, order_id, payload, tracking_guid, request_id) values (?, ?, ?, ?, ?, ?, ?, ?)
16:05:18.238 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:05:18.239 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:05:18.239 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.239 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@77da0fd (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCE9100000009 : 737072696E672D62746D00000145172BCEA90000000A]
16:05:18.240 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_item (created_by, created_time, updated_by, updated_time, payload, request_id, fulfilment_id) values (?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_item (created_by, created_time, updated_by, updated_time, payload, request_id, fulfilment_id) values (?, ?, ?, ?, ?, ?, ?)
16:05:18.245 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:05:18.249 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:05:18.249 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.249 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@77da0fd (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCE9100000009 : 737072696E672D62746D00000145172BCEA90000000A]
16:05:18.249 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:05:18.250 [Test worker] DEBUG o.h.e.j.b.internal.AbstractBatchImpl - Reusing batch statement
16:05:18.251 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:05:18.252 [Test worker] DEBUG o.h.e.j.b.internal.AbstractBatchImpl - Reusing batch statement
16:05:18.253 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:05:18.253 [Test worker] DEBUG o.h.e.j.b.internal.AbstractBatchImpl - Reusing batch statement
16:05:18.253 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:05:18.254 [Test worker] DEBUG o.h.e.j.b.internal.AbstractBatchImpl - Reusing batch statement
16:05:18.254 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:05:18.254 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 5
16:05:18.257 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:05:18.257 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.257 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@77da0fd (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCE9100000009 : 737072696E672D62746D00000145172BCEA90000000A]
16:05:18.257 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_item (created_by, created_time, updated_by, updated_time, payload, request_id, fulfilment_id) values (?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_item (created_by, created_time, updated_by, updated_time, payload, request_id, fulfilment_id) values (?, ?, ?, ?, ?, ?, ?)
16:05:18.259 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:05:18.260 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:05:18.260 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.260 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@77da0fd (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCE9100000009 : 737072696E672D62746D00000145172BCEA90000000A]
16:05:18.260 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:05:18.261 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:05:18.262 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:05:18.262 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.262 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@77da0fd (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCE9100000009 : 737072696E672D62746D00000145172BCEA90000000A]
16:05:18.263 [Test worker] DEBUG org.hibernate.SQL - update fulfilment_action set created_by=?, created_time=?, updated_by=?, updated_time=?, fulfilment_id=?, payload=?, result=?, status=?, type=? where action_id=?
Hibernate: update fulfilment_action set created_by=?, created_time=?, updated_by=?, updated_time=?, fulfilment_id=?, payload=?, result=?, status=?, type=? where action_id=?
16:05:18.264 [Test worker] DEBUG o.h.e.j.b.internal.AbstractBatchImpl - Reusing batch statement
16:05:18.264 [Test worker] DEBUG org.hibernate.SQL - update fulfilment_action set created_by=?, created_time=?, updated_by=?, updated_time=?, fulfilment_id=?, payload=?, result=?, status=?, type=? where action_id=?
Hibernate: update fulfilment_action set created_by=?, created_time=?, updated_by=?, updated_time=?, fulfilment_id=?, payload=?, result=?, status=?, type=? where action_id=?
16:05:18.264 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 2
16:05:18.266 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:05:18.266 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:18.266 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@2c98acfa
16:05:18.266 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.266 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.266 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.266 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.266 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.266 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.266 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.266 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.266 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.266 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:18.266 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd from the accessible pool
16:05:18.266 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.266 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.266 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd to the inaccessible pool
16:05:18.266 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.266 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:18.266 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:18.266 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.267 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.267 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BCE9100000009]
16:05:18.267 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.267 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.267 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172BCE9100000009
16:05:18.267 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:05:18.267 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd from an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.267 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.267 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.267 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd from the inaccessible pool
16:05:18.267 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.267 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.267 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.267 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.267 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd to the accessible pool
16:05:18.267 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@77da0fd was in state NOT_ACCESSIBLE, no need to test it
16:05:18.267 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.267 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.267 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:18.267 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.267 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@77da0fd (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCE9100000009 : 737072696E672D62746D00000145172BCEA90000000A]
16:05:18.267 [Test worker] DEBUG org.hibernate.SQL - select this_.fulfilment_id as fulfilment1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.payload as payload3_0_, this_.request_id as request7_3_0_ from fulfilment_item this_ where this_.request_id=?
Hibernate: select this_.fulfilment_id as fulfilment1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.payload as payload3_0_, this_.request_id as request7_3_0_ from fulfilment_item this_ where this_.request_id=?
16:05:18.269 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:05:18.269 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.fulfilment.db.entity.FulfilmentEntity#1023868928]
16:05:18.269 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 1
16:05:18.270 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.fulfilment.db.entity.FulfilmentEntity#1023967232]
16:05:18.270 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:18.271 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@2c98acfa
16:05:18.271 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.271 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.271 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.271 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.271 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.271 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.271 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.271 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.271 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.271 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:18.271 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd from the accessible pool
16:05:18.271 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.271 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.272 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd to the inaccessible pool
16:05:18.272 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.272 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:18.272 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:05:18.285 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:05:18.285 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:05:18.286 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 9 objects
16:05:18.286 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:05:18.286 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:05:18.286 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1023983616, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":3,"items":[{"entityType":"ITEM","id":50000,"quantity":9,"sku":55555}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1023967232, updatedTime=null, updatedBy=null}
16:05:18.286 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1023918080, result=null, createdBy=system internal, status=2, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":4,"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=0, fulfilmentId=1023868928, updatedTime=Mon Mar 31 16:05:18 CST 2014, updatedBy=system internal}
16:05:18.286 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentEntity{id=1023868928, createdBy=system internal, requestId=1023852544, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"offerId":100,"orderItemId":10000,"quantity":2,"timestamp":1396253118105}, updatedTime=null, updatedBy=null}
16:05:18.286 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1023934464, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":6,"items":[{"entityType":"ITEM","id":40000,"quantity":77,"sku":44444}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1023868928, updatedTime=null, updatedBy=null}
16:05:18.287 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1023950848, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":60000,"items":[{"entityType":"ITEM","id":50000,"quantity":9,"sku":55555}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1023868928, updatedTime=null, updatedBy=null}
16:05:18.287 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1023885312, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":2,"items":[{"entityType":"ITEM","id":10000,"quantity":888,"sku":11111},{"entityType":"ITEM","id":20000,"quantity":999,"sku":22222}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1023868928, updatedTime=null, updatedBy=null}
16:05:18.287 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentEntity{id=1023967232, createdBy=system internal, requestId=1023852544, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"offerId":400,"orderItemId":20000,"quantity":3,"timestamp":1396253118105}, updatedTime=null, updatedBy=null}
16:05:18.288 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1023901696, result=null, createdBy=system internal, status=2, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":2,"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=0, fulfilmentId=1023868928, updatedTime=Mon Mar 31 16:05:18 CST 2014, updatedBy=system internal}
16:05:18.288 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentRequestEntity{id=1023852544, trackingGuid=568b2451-29c3-41e9-a585-5ca42bb48886, createdBy=system internal, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"orderId":1396253118104,"requester":"SYSTEM","userId":1396253118104}, orderId=1396253118104, updatedTime=null, updatedBy=null}
16:05:18.288 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:18.288 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.288 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.288 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BCE9100000009]
16:05:18.288 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.288 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.288 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172BCE9100000009
16:05:18.288 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:05:18.288 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd from an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.288 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.288 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.288 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd from the inaccessible pool
16:05:18.288 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.288 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.289 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.289 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.289 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd to the accessible pool
16:05:18.289 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@77da0fd was in state NOT_ACCESSIBLE, no need to test it
16:05:18.289 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.289 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.289 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:18.289 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.289 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@77da0fd (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCE9100000009 : 737072696E672D62746D00000145172BCEA90000000A]
16:05:18.289 [Test worker] DEBUG org.hibernate.SQL - select this_.action_id as action1_2_0_, this_.created_by as created2_2_0_, this_.created_time as created3_2_0_, this_.updated_by as updated4_2_0_, this_.updated_time as updated5_2_0_, this_.fulfilment_id as fulfilment6_2_0_, this_.payload as payload2_0_, this_.result as result2_0_, this_.status as status2_0_, this_.type as type2_0_ from fulfilment_action this_ where this_.fulfilment_id=?
Hibernate: select this_.action_id as action1_2_0_, this_.created_by as created2_2_0_, this_.created_time as created3_2_0_, this_.updated_by as updated4_2_0_, this_.updated_time as updated5_2_0_, this_.fulfilment_id as fulfilment6_2_0_, this_.payload as payload2_0_, this_.result as result2_0_, this_.status as status2_0_, this_.type as type2_0_ from fulfilment_action this_ where this_.fulfilment_id=?
16:05:18.291 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:05:18.292 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.fulfilment.db.entity.FulfilmentActionEntity#1023885312]
16:05:18.292 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 1
16:05:18.292 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.fulfilment.db.entity.FulfilmentActionEntity#1023934464]
16:05:18.292 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 2
16:05:18.292 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.fulfilment.db.entity.FulfilmentActionEntity#1023950848]
16:05:18.292 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 3
16:05:18.292 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.fulfilment.db.entity.FulfilmentActionEntity#1023901696]
16:05:18.292 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 4
16:05:18.293 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.fulfilment.db.entity.FulfilmentActionEntity#1023918080]
16:05:18.293 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:18.293 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@2c98acfa
16:05:18.293 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.293 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.293 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.293 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.293 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.293 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.293 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.293 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.294 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.294 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:18.294 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd from the accessible pool
16:05:18.295 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.295 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.295 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd to the inaccessible pool
16:05:18.295 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.295 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:18.295 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:05:18.298 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementUnregisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D00000145172BCE2100000007
16:05:18.298 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementUnregisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D00000145172BCE1F00000006
16:05:18.299 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D00000145172BCE9100000009
16:05:18.311 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:05:18.311 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:05:18.312 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 9 objects
16:05:18.312 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:05:18.312 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:05:18.312 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1023983616, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":3,"items":[{"entityType":"ITEM","id":50000,"quantity":9,"sku":55555}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1023967232, updatedTime=null, updatedBy=null}
16:05:18.312 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1023918080, result=null, createdBy=system internal, status=2, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":4,"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=0, fulfilmentId=1023868928, updatedTime=Mon Mar 31 16:05:18 CST 2014, updatedBy=system internal}
16:05:18.312 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentEntity{id=1023868928, createdBy=system internal, requestId=1023852544, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"offerId":100,"orderItemId":10000,"quantity":2,"timestamp":1396253118105}, updatedTime=null, updatedBy=null}
16:05:18.312 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1023934464, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":6,"items":[{"entityType":"ITEM","id":40000,"quantity":77,"sku":44444}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1023868928, updatedTime=null, updatedBy=null}
16:05:18.312 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1023950848, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":60000,"items":[{"entityType":"ITEM","id":50000,"quantity":9,"sku":55555}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1023868928, updatedTime=null, updatedBy=null}
16:05:18.312 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1023885312, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":2,"items":[{"entityType":"ITEM","id":10000,"quantity":888,"sku":11111},{"entityType":"ITEM","id":20000,"quantity":999,"sku":22222}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1023868928, updatedTime=null, updatedBy=null}
16:05:18.312 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentEntity{id=1023967232, createdBy=system internal, requestId=1023852544, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"offerId":400,"orderItemId":20000,"quantity":3,"timestamp":1396253118105}, updatedTime=null, updatedBy=null}
16:05:18.312 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1023901696, result=null, createdBy=system internal, status=2, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":2,"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=0, fulfilmentId=1023868928, updatedTime=Mon Mar 31 16:05:18 CST 2014, updatedBy=system internal}
16:05:18.313 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentRequestEntity{id=1023852544, trackingGuid=568b2451-29c3-41e9-a585-5ca42bb48886, createdBy=system internal, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"orderId":1396253118104,"requester":"SYSTEM","userId":1396253118104}, orderId=1396253118104, updatedTime=null, updatedBy=null}
16:05:18.313 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:18.313 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BCE9100000009]
16:05:18.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172BCE9100000009
16:05:18.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:05:18.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd from an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.313 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.313 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd from the inaccessible pool
16:05:18.313 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.313 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.313 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.313 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd to the accessible pool
16:05:18.313 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@77da0fd was in state NOT_ACCESSIBLE, no need to test it
16:05:18.314 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.314 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.314 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:18.314 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.314 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@77da0fd (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCE9100000009 : 737072696E672D62746D00000145172BCEA90000000A]
16:05:18.314 [Test worker] DEBUG org.hibernate.SQL - select this_.action_id as action1_2_0_, this_.created_by as created2_2_0_, this_.created_time as created3_2_0_, this_.updated_by as updated4_2_0_, this_.updated_time as updated5_2_0_, this_.fulfilment_id as fulfilment6_2_0_, this_.payload as payload2_0_, this_.result as result2_0_, this_.status as status2_0_, this_.type as type2_0_ from fulfilment_action this_ where this_.fulfilment_id=?
Hibernate: select this_.action_id as action1_2_0_, this_.created_by as created2_2_0_, this_.created_time as created3_2_0_, this_.updated_by as updated4_2_0_, this_.updated_time as updated5_2_0_, this_.fulfilment_id as fulfilment6_2_0_, this_.payload as payload2_0_, this_.result as result2_0_, this_.status as status2_0_, this_.type as type2_0_ from fulfilment_action this_ where this_.fulfilment_id=?
16:05:18.315 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:05:18.316 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.fulfilment.db.entity.FulfilmentActionEntity#1023983616]
16:05:18.316 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:18.316 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@2c98acfa
16:05:18.317 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.317 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.317 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.317 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.317 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.317 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.318 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCE9100000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.318 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.318 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.318 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:18.318 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd from the accessible pool
16:05:18.318 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.318 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.320 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd to the inaccessible pool
16:05:18.320 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@77da0fd
16:05:18.320 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:18.320 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:05:18.339 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:05:18.339 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:18.339 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@3bf5ed2
16:05:18.339 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:05:18.339 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962531183
16:05:18.340 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@8ea2eea
16:05:18.341 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:18.341 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (3 still available)
16:05:18.341 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (3 still available)
16:05:18.341 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BCF7E0000000B]
16:05:18.341 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:05:18.341 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (3 still available), waiting if necessary
16:05:18.341 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 - closing time: 1396253176313, now time: 1396253118341
16:05:18.343 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 from an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.343 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.343 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.343 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.343 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.343 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 to the accessible pool
16:05:18.343 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@65b1e8f4 was in state IN_POOL, testing it
16:05:18.343 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4, skipping test
16:05:18.343 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.343 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.344 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:18.344 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.344 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@65b1e8f4 does not belong to any resource of a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available)
16:05:18.344 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@65b1e8f4 belongs to a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.344 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D00000145172BCF7E0000000B : 737072696E672D62746D00000145172BCF880000000C]
16:05:18.346 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning <a Bitronix XID [737072696E672D62746D00000145172BCF7E0000000B : 737072696E672D62746D00000145172BCF880000000C]> to <an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@65b1e8f4 with XID null>
16:05:18.346 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@65b1e8f4 with XID a Bitronix XID [737072696E672D62746D00000145172BCF7E0000000B : 737072696E672D62746D00000145172BCF880000000C] with NOFLAGS
16:05:18.346 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@65b1e8f4 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCF7E0000000B : 737072696E672D62746D00000145172BCF880000000C] with NOFLAGS
16:05:18.346 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@65b1e8f4 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCF7E0000000B : 737072696E672D62746D00000145172BCF880000000C]] on a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.346 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D00000145172BCF7E0000000B] previously unknown to a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4, adding it to the resource's transactions list
16:05:18.348 [Test worker] DEBUG org.hibernate.SQL - select this_.request_id as request1_4_0_, this_.created_by as created2_4_0_, this_.created_time as created3_4_0_, this_.updated_by as updated4_4_0_, this_.updated_time as updated5_4_0_, this_.order_id as order6_4_0_, this_.payload as payload4_0_, this_.tracking_guid as tracking8_4_0_ from fulfilment_request this_ where this_.tracking_guid=?
Hibernate: select this_.request_id as request1_4_0_, this_.created_by as created2_4_0_, this_.created_time as created3_4_0_, this_.updated_by as updated4_4_0_, this_.updated_time as updated5_4_0_, this_.order_id as order6_4_0_, this_.payload as payload4_0_, this_.tracking_guid as tracking8_4_0_ from fulfilment_request this_ where this_.tracking_guid=?
16:05:18.350 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:18.351 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@26815f05
16:05:18.351 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.351 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.351 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.351 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.351 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.351 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.351 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.351 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.351 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.351 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:18.351 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 from the accessible pool
16:05:18.351 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.351 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.351 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 to the inaccessible pool
16:05:18.351 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.351 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:18.351 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:05:18.351 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:05:18.351 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:18.352 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.352 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.352 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BCF7E0000000B]
16:05:18.352 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.352 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.352 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172BCF7E0000000B
16:05:18.352 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:05:18.352 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 from an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.352 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.354 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.354 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 from the inaccessible pool
16:05:18.354 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.354 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.355 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.355 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.355 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 to the accessible pool
16:05:18.355 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@65b1e8f4 was in state NOT_ACCESSIBLE, no need to test it
16:05:18.355 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.356 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.356 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:18.356 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.356 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@65b1e8f4 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCF7E0000000B : 737072696E672D62746D00000145172BCF880000000C]
16:05:18.358 [Test worker] DEBUG org.hibernate.SQL - select this_.request_id as request1_4_0_, this_.created_by as created2_4_0_, this_.created_time as created3_4_0_, this_.updated_by as updated4_4_0_, this_.updated_time as updated5_4_0_, this_.order_id as order6_4_0_, this_.payload as payload4_0_, this_.tracking_guid as tracking8_4_0_ from fulfilment_request this_ where this_.order_id=?
Hibernate: select this_.request_id as request1_4_0_, this_.created_by as created2_4_0_, this_.created_time as created3_4_0_, this_.updated_by as updated4_4_0_, this_.updated_time as updated5_4_0_, this_.order_id as order6_4_0_, this_.payload as payload4_0_, this_.tracking_guid as tracking8_4_0_ from fulfilment_request this_ where this_.order_id=?
16:05:18.360 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:18.360 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@26815f05
16:05:18.361 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.361 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.361 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.361 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.361 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.361 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.361 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.361 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.361 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.361 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:18.361 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 from the accessible pool
16:05:18.361 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.361 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.361 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 to the inaccessible pool
16:05:18.361 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.361 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:18.361 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:05:18.361 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:18.362 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 738230336, using strategy: org.hibernate.id.Assigned
16:05:18.362 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1024000000, using strategy: org.hibernate.id.Assigned
16:05:18.363 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1024016384, using strategy: org.hibernate.id.Assigned
16:05:18.363 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1024032768, using strategy: org.hibernate.id.Assigned
16:05:18.364 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1024049152, using strategy: org.hibernate.id.Assigned
16:05:18.365 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1024065536, using strategy: org.hibernate.id.Assigned
16:05:18.366 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1024081920, using strategy: org.hibernate.id.Assigned
16:05:18.367 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1024098304, using strategy: org.hibernate.id.Assigned
16:05:18.368 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1024114688, using strategy: org.hibernate.id.Assigned
16:05:18.368 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:18.368 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:18.369 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:18.369 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:18.369 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:05:18.369 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:18.370 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:05:18.370 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:05:18.371 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 9 insertions, 2 updates, 0 deletions to 9 objects
16:05:18.371 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:05:18.371 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:05:18.371 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentEntity{id=1024000000, createdBy=system internal, requestId=738230336, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"offerId":100,"orderItemId":10000,"quantity":2,"timestamp":1396253118339}, updatedTime=null, updatedBy=null}
16:05:18.371 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024114688, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":3,"items":[{"entityType":"ITEM","id":50000,"quantity":9,"sku":55555}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1024098304, updatedTime=null, updatedBy=null}
16:05:18.372 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024049152, result=null, createdBy=system internal, status=2, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":4,"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=0, fulfilmentId=1024000000, updatedTime=Mon Mar 31 16:05:18 CST 2014, updatedBy=system internal}
16:05:18.372 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024065536, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":6,"items":[{"entityType":"ITEM","id":40000,"quantity":77,"sku":44444}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1024000000, updatedTime=null, updatedBy=null}
16:05:18.372 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentEntity{id=1024098304, createdBy=system internal, requestId=738230336, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"offerId":400,"orderItemId":20000,"quantity":3,"timestamp":1396253118339}, updatedTime=null, updatedBy=null}
16:05:18.372 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024081920, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":60000,"items":[{"entityType":"ITEM","id":50000,"quantity":9,"sku":55555}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1024000000, updatedTime=null, updatedBy=null}
16:05:18.372 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024016384, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":2,"items":[{"entityType":"ITEM","id":10000,"quantity":888,"sku":11111},{"entityType":"ITEM","id":20000,"quantity":999,"sku":22222}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1024000000, updatedTime=null, updatedBy=null}
16:05:18.372 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentRequestEntity{id=738230336, trackingGuid=9be04db5-7c52-42db-b442-c4e73fd6d708, createdBy=system internal, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"orderId":1396253118339,"requester":"SYSTEM","userId":1396253118339}, orderId=1396253118339, updatedTime=null, updatedBy=null}
16:05:18.372 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024032768, result=null, createdBy=system internal, status=2, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":2,"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=0, fulfilmentId=1024000000, updatedTime=Mon Mar 31 16:05:18 CST 2014, updatedBy=system internal}
16:05:18.372 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: fulfilment_request
16:05:18.373 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:18.373 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.373 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.373 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BCF7E0000000B]
16:05:18.373 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.373 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.373 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172BCF7E0000000B
16:05:18.373 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:05:18.373 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 from an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.373 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.373 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.373 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 from the inaccessible pool
16:05:18.373 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.373 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.373 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.373 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.373 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 to the accessible pool
16:05:18.374 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@65b1e8f4 was in state NOT_ACCESSIBLE, no need to test it
16:05:18.374 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.374 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.374 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:18.374 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.374 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@65b1e8f4 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCF7E0000000B : 737072696E672D62746D00000145172BCF880000000C]
16:05:18.374 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_request (created_by, created_time, updated_by, updated_time, order_id, payload, tracking_guid, request_id) values (?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_request (created_by, created_time, updated_by, updated_time, order_id, payload, tracking_guid, request_id) values (?, ?, ?, ?, ?, ?, ?, ?)
16:05:18.375 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:05:18.377 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:05:18.377 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.377 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@65b1e8f4 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCF7E0000000B : 737072696E672D62746D00000145172BCF880000000C]
16:05:18.377 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_item (created_by, created_time, updated_by, updated_time, payload, request_id, fulfilment_id) values (?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_item (created_by, created_time, updated_by, updated_time, payload, request_id, fulfilment_id) values (?, ?, ?, ?, ?, ?, ?)
16:05:18.378 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:05:18.379 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:05:18.379 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.379 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@65b1e8f4 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCF7E0000000B : 737072696E672D62746D00000145172BCF880000000C]
16:05:18.379 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:05:18.380 [Test worker] DEBUG o.h.e.j.b.internal.AbstractBatchImpl - Reusing batch statement
16:05:18.380 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:05:18.381 [Test worker] DEBUG o.h.e.j.b.internal.AbstractBatchImpl - Reusing batch statement
16:05:18.381 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:05:18.382 [Test worker] DEBUG o.h.e.j.b.internal.AbstractBatchImpl - Reusing batch statement
16:05:18.382 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:05:18.383 [Test worker] DEBUG o.h.e.j.b.internal.AbstractBatchImpl - Reusing batch statement
16:05:18.383 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:05:18.383 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 5
16:05:18.386 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:05:18.386 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.386 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@65b1e8f4 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCF7E0000000B : 737072696E672D62746D00000145172BCF880000000C]
16:05:18.386 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_item (created_by, created_time, updated_by, updated_time, payload, request_id, fulfilment_id) values (?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_item (created_by, created_time, updated_by, updated_time, payload, request_id, fulfilment_id) values (?, ?, ?, ?, ?, ?, ?)
16:05:18.388 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:05:18.389 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:05:18.389 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.389 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@65b1e8f4 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCF7E0000000B : 737072696E672D62746D00000145172BCF880000000C]
16:05:18.390 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:05:18.392 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:05:18.393 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:05:18.393 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.393 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@65b1e8f4 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCF7E0000000B : 737072696E672D62746D00000145172BCF880000000C]
16:05:18.394 [Test worker] DEBUG org.hibernate.SQL - update fulfilment_action set created_by=?, created_time=?, updated_by=?, updated_time=?, fulfilment_id=?, payload=?, result=?, status=?, type=? where action_id=?
Hibernate: update fulfilment_action set created_by=?, created_time=?, updated_by=?, updated_time=?, fulfilment_id=?, payload=?, result=?, status=?, type=? where action_id=?
16:05:18.395 [Test worker] DEBUG o.h.e.j.b.internal.AbstractBatchImpl - Reusing batch statement
16:05:18.395 [Test worker] DEBUG org.hibernate.SQL - update fulfilment_action set created_by=?, created_time=?, updated_by=?, updated_time=?, fulfilment_id=?, payload=?, result=?, status=?, type=? where action_id=?
Hibernate: update fulfilment_action set created_by=?, created_time=?, updated_by=?, updated_time=?, fulfilment_id=?, payload=?, result=?, status=?, type=? where action_id=?
16:05:18.396 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 2
16:05:18.398 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:05:18.399 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:18.399 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@26815f05
16:05:18.399 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.399 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.399 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.399 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.399 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.399 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.399 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.399 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.399 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.399 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:18.399 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 from the accessible pool
16:05:18.399 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.399 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.400 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 to the inaccessible pool
16:05:18.400 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.400 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:18.400 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:18.400 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.400 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.400 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BCF7E0000000B]
16:05:18.400 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.400 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.400 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172BCF7E0000000B
16:05:18.400 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:05:18.400 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 from an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.400 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.400 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.400 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 from the inaccessible pool
16:05:18.400 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.400 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.400 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.400 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.400 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 to the accessible pool
16:05:18.401 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@65b1e8f4 was in state NOT_ACCESSIBLE, no need to test it
16:05:18.401 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.401 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.401 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:18.401 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.401 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@65b1e8f4 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCF7E0000000B : 737072696E672D62746D00000145172BCF880000000C]
16:05:18.401 [Test worker] DEBUG org.hibernate.SQL - select this_.request_id as request1_4_0_, this_.created_by as created2_4_0_, this_.created_time as created3_4_0_, this_.updated_by as updated4_4_0_, this_.updated_time as updated5_4_0_, this_.order_id as order6_4_0_, this_.payload as payload4_0_, this_.tracking_guid as tracking8_4_0_ from fulfilment_request this_ where this_.tracking_guid=?
Hibernate: select this_.request_id as request1_4_0_, this_.created_by as created2_4_0_, this_.created_time as created3_4_0_, this_.updated_by as updated4_4_0_, this_.updated_time as updated5_4_0_, this_.order_id as order6_4_0_, this_.payload as payload4_0_, this_.tracking_guid as tracking8_4_0_ from fulfilment_request this_ where this_.tracking_guid=?
16:05:18.404 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:18.404 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@26815f05
16:05:18.404 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.404 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.404 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.404 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.404 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.404 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.404 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.404 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.404 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.404 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:18.404 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 from the accessible pool
16:05:18.404 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.404 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.404 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 to the inaccessible pool
16:05:18.404 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.405 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:18.405 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:05:18.405 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:05:18.405 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:05:18.406 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 9 objects
16:05:18.406 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:05:18.406 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:05:18.406 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentEntity{id=1024000000, createdBy=system internal, requestId=738230336, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"offerId":100,"orderItemId":10000,"quantity":2,"timestamp":1396253118339}, updatedTime=null, updatedBy=null}
16:05:18.406 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024114688, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":3,"items":[{"entityType":"ITEM","id":50000,"quantity":9,"sku":55555}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1024098304, updatedTime=null, updatedBy=null}
16:05:18.406 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024049152, result=null, createdBy=system internal, status=2, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":4,"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=0, fulfilmentId=1024000000, updatedTime=Mon Mar 31 16:05:18 CST 2014, updatedBy=system internal}
16:05:18.407 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024065536, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":6,"items":[{"entityType":"ITEM","id":40000,"quantity":77,"sku":44444}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1024000000, updatedTime=null, updatedBy=null}
16:05:18.407 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentEntity{id=1024098304, createdBy=system internal, requestId=738230336, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"offerId":400,"orderItemId":20000,"quantity":3,"timestamp":1396253118339}, updatedTime=null, updatedBy=null}
16:05:18.407 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024081920, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":60000,"items":[{"entityType":"ITEM","id":50000,"quantity":9,"sku":55555}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1024000000, updatedTime=null, updatedBy=null}
16:05:18.407 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024016384, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":2,"items":[{"entityType":"ITEM","id":10000,"quantity":888,"sku":11111},{"entityType":"ITEM","id":20000,"quantity":999,"sku":22222}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1024000000, updatedTime=null, updatedBy=null}
16:05:18.407 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentRequestEntity{id=738230336, trackingGuid=9be04db5-7c52-42db-b442-c4e73fd6d708, createdBy=system internal, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"orderId":1396253118339,"requester":"SYSTEM","userId":1396253118339}, orderId=1396253118339, updatedTime=null, updatedBy=null}
16:05:18.407 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024032768, result=null, createdBy=system internal, status=2, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":2,"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=0, fulfilmentId=1024000000, updatedTime=Mon Mar 31 16:05:18 CST 2014, updatedBy=system internal}
16:05:18.407 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:18.407 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.407 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.407 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BCF7E0000000B]
16:05:18.407 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.407 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.408 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172BCF7E0000000B
16:05:18.408 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:05:18.408 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 from an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.409 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.410 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.410 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 from the inaccessible pool
16:05:18.410 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.410 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.411 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.411 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.411 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 to the accessible pool
16:05:18.411 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@65b1e8f4 was in state NOT_ACCESSIBLE, no need to test it
16:05:18.411 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.412 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.412 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:18.412 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.412 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@65b1e8f4 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BCF7E0000000B : 737072696E672D62746D00000145172BCF880000000C]
16:05:18.413 [Test worker] DEBUG org.hibernate.SQL - select this_.request_id as request1_4_0_, this_.created_by as created2_4_0_, this_.created_time as created3_4_0_, this_.updated_by as updated4_4_0_, this_.updated_time as updated5_4_0_, this_.order_id as order6_4_0_, this_.payload as payload4_0_, this_.tracking_guid as tracking8_4_0_ from fulfilment_request this_ where this_.order_id=?
Hibernate: select this_.request_id as request1_4_0_, this_.created_by as created2_4_0_, this_.created_time as created3_4_0_, this_.updated_by as updated4_4_0_, this_.updated_time as updated5_4_0_, this_.order_id as order6_4_0_, this_.payload as payload4_0_, this_.tracking_guid as tracking8_4_0_ from fulfilment_request this_ where this_.order_id=?
16:05:18.414 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:05:18.420 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.fulfilment.db.entity.FulfilmentRequestEntity#738230336]
16:05:18.421 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:18.421 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@26815f05
16:05:18.421 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.421 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.422 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.422 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.422 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.423 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.423 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.423 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.423 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.423 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:18.423 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 from the accessible pool
16:05:18.423 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.423 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.423 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4 to the inaccessible pool
16:05:18.423 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@65b1e8f4
16:05:18.424 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:18.424 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:05:18.425 [Test worker] ERROR c.j.f.c.s.FulfilmentServiceImpl - Fulfilment request with orderId [1396253118339] has already been issued.
16:05:18.549 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementUnregisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D00000145172BCE9100000009
16:05:18.549 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D00000145172BCF7E0000000B
16:05:18.566 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating transaction failed - marking existing transaction as rollback-only
16:05:18.567 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Setting JTA transaction rollback-only
16:05:18.567 [Test worker] DEBUG b.tm.BitronixTransactionManager - marking transaction as rollback only: a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BCF7E0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.567 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to MARKED_ROLLBACK
16:05:18.567 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to MARKED_ROLLBACK - executing 0 listener(s)
16:05:18.580 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:05:18.580 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:18.580 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@5ab2223d
16:05:18.580 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:05:18.580 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962531185
16:05:18.580 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@72c0033e
16:05:18.581 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:18.581 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (3 still available)
16:05:18.581 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (3 still available)
16:05:18.581 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BD0720000000D]
16:05:18.581 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:05:18.581 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (3 still available), waiting if necessary
16:05:18.581 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 - closing time: 1396253176761, now time: 1396253118581
16:05:18.581 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.581 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.581 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.582 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.582 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.582 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 to the accessible pool
16:05:18.582 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7904e8c4 was in state IN_POOL, testing it
16:05:18.582 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4, skipping test
16:05:18.582 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.582 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.582 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:18.582 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.582 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@7904e8c4 does not belong to any resource of a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available)
16:05:18.582 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@7904e8c4 belongs to a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.582 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D00000145172BD0720000000D : 737072696E672D62746D00000145172BD0760000000E]
16:05:18.582 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning <a Bitronix XID [737072696E672D62746D00000145172BD0720000000D : 737072696E672D62746D00000145172BD0760000000E]> to <an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@7904e8c4 with XID null>
16:05:18.582 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@7904e8c4 with XID a Bitronix XID [737072696E672D62746D00000145172BD0720000000D : 737072696E672D62746D00000145172BD0760000000E] with NOFLAGS
16:05:18.582 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@7904e8c4 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BD0720000000D : 737072696E672D62746D00000145172BD0760000000E] with NOFLAGS
16:05:18.582 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@7904e8c4 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BD0720000000D : 737072696E672D62746D00000145172BD0760000000E]] on a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.582 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D00000145172BD0720000000D] previously unknown to a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4, adding it to the resource's transactions list
16:05:18.583 [Test worker] DEBUG org.hibernate.SQL - select this_.request_id as request1_4_0_, this_.created_by as created2_4_0_, this_.created_time as created3_4_0_, this_.updated_by as updated4_4_0_, this_.updated_time as updated5_4_0_, this_.order_id as order6_4_0_, this_.payload as payload4_0_, this_.tracking_guid as tracking8_4_0_ from fulfilment_request this_ where this_.tracking_guid=?
Hibernate: select this_.request_id as request1_4_0_, this_.created_by as created2_4_0_, this_.created_time as created3_4_0_, this_.updated_by as updated4_4_0_, this_.updated_time as updated5_4_0_, this_.order_id as order6_4_0_, this_.payload as payload4_0_, this_.tracking_guid as tracking8_4_0_ from fulfilment_request this_ where this_.tracking_guid=?
16:05:18.585 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:18.585 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@2b2e24aa
16:05:18.585 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.585 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.585 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.585 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.585 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.585 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.585 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.585 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.585 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.585 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:18.586 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from the accessible pool
16:05:18.586 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.586 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.586 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 to the inaccessible pool
16:05:18.586 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.586 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:18.586 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:05:18.586 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:05:18.586 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:18.587 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.587 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.587 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BD0720000000D]
16:05:18.587 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.588 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.588 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172BD0720000000D
16:05:18.588 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:05:18.588 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.588 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.588 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.588 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from the inaccessible pool
16:05:18.588 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.588 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.588 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.588 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.588 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 to the accessible pool
16:05:18.588 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7904e8c4 was in state NOT_ACCESSIBLE, no need to test it
16:05:18.588 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.588 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.588 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:18.588 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.588 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@7904e8c4 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BD0720000000D : 737072696E672D62746D00000145172BD0760000000E]
16:05:18.589 [Test worker] DEBUG org.hibernate.SQL - select this_.request_id as request1_4_0_, this_.created_by as created2_4_0_, this_.created_time as created3_4_0_, this_.updated_by as updated4_4_0_, this_.updated_time as updated5_4_0_, this_.order_id as order6_4_0_, this_.payload as payload4_0_, this_.tracking_guid as tracking8_4_0_ from fulfilment_request this_ where this_.order_id=?
Hibernate: select this_.request_id as request1_4_0_, this_.created_by as created2_4_0_, this_.created_time as created3_4_0_, this_.updated_by as updated4_4_0_, this_.updated_time as updated5_4_0_, this_.order_id as order6_4_0_, this_.payload as payload4_0_, this_.tracking_guid as tracking8_4_0_ from fulfilment_request this_ where this_.order_id=?
16:05:18.590 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:18.590 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@2b2e24aa
16:05:18.590 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.590 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.590 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.591 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.591 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.591 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.591 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.591 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.591 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.591 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:18.591 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from the accessible pool
16:05:18.591 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.591 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.591 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 to the inaccessible pool
16:05:18.591 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.591 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:18.591 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:05:18.592 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:18.592 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 738246720, using strategy: org.hibernate.id.Assigned
16:05:18.593 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1024131072, using strategy: org.hibernate.id.Assigned
16:05:18.594 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1024147456, using strategy: org.hibernate.id.Assigned
16:05:18.594 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1024163840, using strategy: org.hibernate.id.Assigned
16:05:18.595 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1024180224, using strategy: org.hibernate.id.Assigned
16:05:18.595 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1024196608, using strategy: org.hibernate.id.Assigned
16:05:18.596 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1024212992, using strategy: org.hibernate.id.Assigned
16:05:18.597 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1024229376, using strategy: org.hibernate.id.Assigned
16:05:18.597 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 1024245760, using strategy: org.hibernate.id.Assigned
16:05:18.598 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:18.598 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:18.598 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:18.598 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:18.599 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:05:18.599 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:05:18.599 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:05:18.599 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:05:18.600 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 9 insertions, 2 updates, 0 deletions to 9 objects
16:05:18.600 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:05:18.600 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:05:18.600 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024163840, result=null, createdBy=system internal, status=2, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":2,"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=0, fulfilmentId=1024131072, updatedTime=Mon Mar 31 16:05:18 CST 2014, updatedBy=system internal}
16:05:18.600 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024147456, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":2,"items":[{"entityType":"ITEM","id":10000,"quantity":888,"sku":11111},{"entityType":"ITEM","id":20000,"quantity":999,"sku":22222}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1024131072, updatedTime=null, updatedBy=null}
16:05:18.600 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024212992, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":60000,"items":[{"entityType":"ITEM","id":50000,"quantity":9,"sku":55555}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1024131072, updatedTime=null, updatedBy=null}
16:05:18.601 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentEntity{id=1024131072, createdBy=system internal, requestId=738246720, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"offerId":100,"orderItemId":10000,"quantity":2,"timestamp":1396253118579}, updatedTime=null, updatedBy=null}
16:05:18.601 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentRequestEntity{id=738246720, trackingGuid=7155371a-611e-4279-8912-81b347d39226, createdBy=system internal, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"orderId":1396253118579,"requester":"SYSTEM","userId":1396253118579}, orderId=1396253118579, updatedTime=null, updatedBy=null}
16:05:18.601 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024196608, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":6,"items":[{"entityType":"ITEM","id":40000,"quantity":77,"sku":44444}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1024131072, updatedTime=null, updatedBy=null}
16:05:18.601 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024180224, result=null, createdBy=system internal, status=2, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":4,"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=0, fulfilmentId=1024131072, updatedTime=Mon Mar 31 16:05:18 CST 2014, updatedBy=system internal}
16:05:18.601 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024245760, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":3,"items":[{"entityType":"ITEM","id":50000,"quantity":9,"sku":55555}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1024229376, updatedTime=null, updatedBy=null}
16:05:18.601 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentEntity{id=1024229376, createdBy=system internal, requestId=738246720, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"offerId":400,"orderItemId":20000,"quantity":3,"timestamp":1396253118579}, updatedTime=null, updatedBy=null}
16:05:18.601 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: fulfilment_request
16:05:18.602 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:18.602 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.602 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.602 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BD0720000000D]
16:05:18.602 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.602 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.602 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172BD0720000000D
16:05:18.602 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:05:18.602 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.602 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.602 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.602 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from the inaccessible pool
16:05:18.602 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.602 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.602 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.602 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.602 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 to the accessible pool
16:05:18.602 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7904e8c4 was in state NOT_ACCESSIBLE, no need to test it
16:05:18.602 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.602 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.603 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:18.603 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.603 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@7904e8c4 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BD0720000000D : 737072696E672D62746D00000145172BD0760000000E]
16:05:18.603 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_request (created_by, created_time, updated_by, updated_time, order_id, payload, tracking_guid, request_id) values (?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_request (created_by, created_time, updated_by, updated_time, order_id, payload, tracking_guid, request_id) values (?, ?, ?, ?, ?, ?, ?, ?)
16:05:18.604 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:05:18.605 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:05:18.606 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.606 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@7904e8c4 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BD0720000000D : 737072696E672D62746D00000145172BD0760000000E]
16:05:18.606 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_item (created_by, created_time, updated_by, updated_time, payload, request_id, fulfilment_id) values (?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_item (created_by, created_time, updated_by, updated_time, payload, request_id, fulfilment_id) values (?, ?, ?, ?, ?, ?, ?)
16:05:18.606 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:05:18.608 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:05:18.608 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.608 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@7904e8c4 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BD0720000000D : 737072696E672D62746D00000145172BD0760000000E]
16:05:18.608 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:05:18.609 [Test worker] DEBUG o.h.e.j.b.internal.AbstractBatchImpl - Reusing batch statement
16:05:18.609 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:05:18.609 [Test worker] DEBUG o.h.e.j.b.internal.AbstractBatchImpl - Reusing batch statement
16:05:18.609 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:05:18.609 [Test worker] DEBUG o.h.e.j.b.internal.AbstractBatchImpl - Reusing batch statement
16:05:18.609 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:05:18.610 [Test worker] DEBUG o.h.e.j.b.internal.AbstractBatchImpl - Reusing batch statement
16:05:18.610 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:05:18.610 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 5
16:05:18.612 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:05:18.612 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.612 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@7904e8c4 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BD0720000000D : 737072696E672D62746D00000145172BD0760000000E]
16:05:18.612 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_item (created_by, created_time, updated_by, updated_time, payload, request_id, fulfilment_id) values (?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_item (created_by, created_time, updated_by, updated_time, payload, request_id, fulfilment_id) values (?, ?, ?, ?, ?, ?, ?)
16:05:18.613 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:05:18.613 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:05:18.614 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.614 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@7904e8c4 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BD0720000000D : 737072696E672D62746D00000145172BD0760000000E]
16:05:18.615 [Test worker] DEBUG org.hibernate.SQL - insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into fulfilment_action (created_by, created_time, updated_by, updated_time, fulfilment_id, payload, result, status, type, action_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:05:18.615 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:05:18.616 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:05:18.616 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.617 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@7904e8c4 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BD0720000000D : 737072696E672D62746D00000145172BD0760000000E]
16:05:18.617 [Test worker] DEBUG org.hibernate.SQL - update fulfilment_action set created_by=?, created_time=?, updated_by=?, updated_time=?, fulfilment_id=?, payload=?, result=?, status=?, type=? where action_id=?
Hibernate: update fulfilment_action set created_by=?, created_time=?, updated_by=?, updated_time=?, fulfilment_id=?, payload=?, result=?, status=?, type=? where action_id=?
16:05:18.617 [Test worker] DEBUG o.h.e.j.b.internal.AbstractBatchImpl - Reusing batch statement
16:05:18.617 [Test worker] DEBUG org.hibernate.SQL - update fulfilment_action set created_by=?, created_time=?, updated_by=?, updated_time=?, fulfilment_id=?, payload=?, result=?, status=?, type=? where action_id=?
Hibernate: update fulfilment_action set created_by=?, created_time=?, updated_by=?, updated_time=?, fulfilment_id=?, payload=?, result=?, status=?, type=? where action_id=?
16:05:18.618 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 2
16:05:18.619 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:05:18.620 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:18.620 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@2b2e24aa
16:05:18.620 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.620 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.620 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.620 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.620 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.620 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.620 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.620 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.620 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.620 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:18.620 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from the accessible pool
16:05:18.620 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.620 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.621 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 to the inaccessible pool
16:05:18.621 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.621 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:18.621 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:18.621 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.621 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.621 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BD0720000000D]
16:05:18.621 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.621 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.621 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172BD0720000000D
16:05:18.621 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:05:18.621 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.621 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.621 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.621 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from the inaccessible pool
16:05:18.621 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.621 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.621 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.621 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.621 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 to the accessible pool
16:05:18.622 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7904e8c4 was in state NOT_ACCESSIBLE, no need to test it
16:05:18.622 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.622 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.622 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:18.622 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.622 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@7904e8c4 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BD0720000000D : 737072696E672D62746D00000145172BD0760000000E]
16:05:18.622 [Test worker] DEBUG org.hibernate.SQL - select this_.request_id as request1_4_0_, this_.created_by as created2_4_0_, this_.created_time as created3_4_0_, this_.updated_by as updated4_4_0_, this_.updated_time as updated5_4_0_, this_.order_id as order6_4_0_, this_.payload as payload4_0_, this_.tracking_guid as tracking8_4_0_ from fulfilment_request this_ where this_.tracking_guid=?
Hibernate: select this_.request_id as request1_4_0_, this_.created_by as created2_4_0_, this_.created_time as created3_4_0_, this_.updated_by as updated4_4_0_, this_.updated_time as updated5_4_0_, this_.order_id as order6_4_0_, this_.payload as payload4_0_, this_.tracking_guid as tracking8_4_0_ from fulfilment_request this_ where this_.tracking_guid=?
16:05:18.624 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:05:18.625 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.fulfilment.db.entity.FulfilmentRequestEntity#738246720]
16:05:18.625 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:18.625 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@2b2e24aa
16:05:18.625 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.625 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.626 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.626 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.626 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.626 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.626 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.626 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.626 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.626 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:18.626 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from the accessible pool
16:05:18.626 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.626 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.627 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 to the inaccessible pool
16:05:18.627 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.627 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:18.627 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:05:18.628 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:05:18.628 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:05:18.628 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 9 objects
16:05:18.628 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:05:18.629 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:05:18.629 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024163840, result=null, createdBy=system internal, status=2, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":2,"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=0, fulfilmentId=1024131072, updatedTime=Mon Mar 31 16:05:18 CST 2014, updatedBy=system internal}
16:05:18.629 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024147456, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":2,"items":[{"entityType":"ITEM","id":10000,"quantity":888,"sku":11111},{"entityType":"ITEM","id":20000,"quantity":999,"sku":22222}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1024131072, updatedTime=null, updatedBy=null}
16:05:18.629 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024212992, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":60000,"items":[{"entityType":"ITEM","id":50000,"quantity":9,"sku":55555}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1024131072, updatedTime=null, updatedBy=null}
16:05:18.629 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentEntity{id=1024131072, createdBy=system internal, requestId=738246720, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"offerId":100,"orderItemId":10000,"quantity":2,"timestamp":1396253118579}, updatedTime=null, updatedBy=null}
16:05:18.629 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentRequestEntity{id=738246720, trackingGuid=7155371a-611e-4279-8912-81b347d39226, createdBy=system internal, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"orderId":1396253118579,"requester":"SYSTEM","userId":1396253118579}, orderId=1396253118579, updatedTime=null, updatedBy=null}
16:05:18.629 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024196608, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":6,"items":[{"entityType":"ITEM","id":40000,"quantity":77,"sku":44444}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1024131072, updatedTime=null, updatedBy=null}
16:05:18.630 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024180224, result=null, createdBy=system internal, status=2, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":4,"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=0, fulfilmentId=1024131072, updatedTime=Mon Mar 31 16:05:18 CST 2014, updatedBy=system internal}
16:05:18.631 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024245760, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":3,"items":[{"entityType":"ITEM","id":50000,"quantity":9,"sku":55555}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1024229376, updatedTime=null, updatedBy=null}
16:05:18.631 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentEntity{id=1024229376, createdBy=system internal, requestId=738246720, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"offerId":400,"orderItemId":20000,"quantity":3,"timestamp":1396253118579}, updatedTime=null, updatedBy=null}
16:05:18.632 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:18.632 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.632 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.632 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BD0720000000D]
16:05:18.632 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.632 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.633 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172BD0720000000D
16:05:18.633 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:05:18.633 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.633 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.634 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.634 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from the inaccessible pool
16:05:18.634 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.634 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.634 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.634 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.634 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 to the accessible pool
16:05:18.634 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7904e8c4 was in state NOT_ACCESSIBLE, no need to test it
16:05:18.634 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.634 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.634 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:18.634 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.634 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@7904e8c4 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BD0720000000D : 737072696E672D62746D00000145172BD0760000000E]
16:05:18.635 [Test worker] DEBUG org.hibernate.SQL - select this_.fulfilment_id as fulfilment1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.payload as payload3_0_, this_.request_id as request7_3_0_ from fulfilment_item this_ where this_.request_id=?
Hibernate: select this_.fulfilment_id as fulfilment1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.payload as payload3_0_, this_.request_id as request7_3_0_ from fulfilment_item this_ where this_.request_id=?
16:05:18.636 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:05:18.636 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.fulfilment.db.entity.FulfilmentEntity#1024131072]
16:05:18.637 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 1
16:05:18.637 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.fulfilment.db.entity.FulfilmentEntity#1024229376]
16:05:18.637 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:18.637 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@2b2e24aa
16:05:18.637 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.637 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.637 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.637 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.638 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.638 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.638 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.638 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.638 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.638 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:18.638 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from the accessible pool
16:05:18.638 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.638 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.638 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 to the inaccessible pool
16:05:18.638 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.638 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:18.638 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:05:18.639 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:05:18.639 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:05:18.639 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 9 objects
16:05:18.640 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:05:18.640 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:05:18.640 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024163840, result=null, createdBy=system internal, status=2, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":2,"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=0, fulfilmentId=1024131072, updatedTime=Mon Mar 31 16:05:18 CST 2014, updatedBy=system internal}
16:05:18.640 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024147456, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":2,"items":[{"entityType":"ITEM","id":10000,"quantity":888,"sku":11111},{"entityType":"ITEM","id":20000,"quantity":999,"sku":22222}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1024131072, updatedTime=null, updatedBy=null}
16:05:18.640 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024212992, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":60000,"items":[{"entityType":"ITEM","id":50000,"quantity":9,"sku":55555}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1024131072, updatedTime=null, updatedBy=null}
16:05:18.640 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentEntity{id=1024131072, createdBy=system internal, requestId=738246720, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"offerId":100,"orderItemId":10000,"quantity":2,"timestamp":1396253118579}, updatedTime=null, updatedBy=null}
16:05:18.640 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentRequestEntity{id=738246720, trackingGuid=7155371a-611e-4279-8912-81b347d39226, createdBy=system internal, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"orderId":1396253118579,"requester":"SYSTEM","userId":1396253118579}, orderId=1396253118579, updatedTime=null, updatedBy=null}
16:05:18.640 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024196608, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":6,"items":[{"entityType":"ITEM","id":40000,"quantity":77,"sku":44444}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1024131072, updatedTime=null, updatedBy=null}
16:05:18.640 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024180224, result=null, createdBy=system internal, status=2, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":4,"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=0, fulfilmentId=1024131072, updatedTime=Mon Mar 31 16:05:18 CST 2014, updatedBy=system internal}
16:05:18.641 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024245760, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":3,"items":[{"entityType":"ITEM","id":50000,"quantity":9,"sku":55555}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1024229376, updatedTime=null, updatedBy=null}
16:05:18.641 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentEntity{id=1024229376, createdBy=system internal, requestId=738246720, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"offerId":400,"orderItemId":20000,"quantity":3,"timestamp":1396253118579}, updatedTime=null, updatedBy=null}
16:05:18.641 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:18.641 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.641 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.641 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BD0720000000D]
16:05:18.641 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.641 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.641 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172BD0720000000D
16:05:18.641 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:05:18.641 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.641 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.641 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.641 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from the inaccessible pool
16:05:18.641 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.642 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.642 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.642 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.642 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 to the accessible pool
16:05:18.642 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7904e8c4 was in state NOT_ACCESSIBLE, no need to test it
16:05:18.642 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.642 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.642 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:18.642 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.642 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@7904e8c4 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BD0720000000D : 737072696E672D62746D00000145172BD0760000000E]
16:05:18.643 [Test worker] DEBUG org.hibernate.SQL - select this_.action_id as action1_2_0_, this_.created_by as created2_2_0_, this_.created_time as created3_2_0_, this_.updated_by as updated4_2_0_, this_.updated_time as updated5_2_0_, this_.fulfilment_id as fulfilment6_2_0_, this_.payload as payload2_0_, this_.result as result2_0_, this_.status as status2_0_, this_.type as type2_0_ from fulfilment_action this_ where this_.fulfilment_id=?
Hibernate: select this_.action_id as action1_2_0_, this_.created_by as created2_2_0_, this_.created_time as created3_2_0_, this_.updated_by as updated4_2_0_, this_.updated_time as updated5_2_0_, this_.fulfilment_id as fulfilment6_2_0_, this_.payload as payload2_0_, this_.result as result2_0_, this_.status as status2_0_, this_.type as type2_0_ from fulfilment_action this_ where this_.fulfilment_id=?
16:05:18.644 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:05:18.644 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.fulfilment.db.entity.FulfilmentActionEntity#1024147456]
16:05:18.644 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 1
16:05:18.644 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.fulfilment.db.entity.FulfilmentActionEntity#1024196608]
16:05:18.644 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 2
16:05:18.644 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.fulfilment.db.entity.FulfilmentActionEntity#1024212992]
16:05:18.645 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 3
16:05:18.645 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.fulfilment.db.entity.FulfilmentActionEntity#1024163840]
16:05:18.645 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 4
16:05:18.645 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.fulfilment.db.entity.FulfilmentActionEntity#1024180224]
16:05:18.645 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:18.645 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@2b2e24aa
16:05:18.645 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.645 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.645 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.645 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.645 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.645 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.645 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.645 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.645 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.645 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:18.645 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from the accessible pool
16:05:18.645 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.645 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.645 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 to the inaccessible pool
16:05:18.645 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.645 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:18.645 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:05:18.646 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:05:18.646 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:05:18.647 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 9 objects
16:05:18.647 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:05:18.647 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:05:18.647 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024163840, result=null, createdBy=system internal, status=2, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":2,"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=0, fulfilmentId=1024131072, updatedTime=Mon Mar 31 16:05:18 CST 2014, updatedBy=system internal}
16:05:18.647 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024147456, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":2,"items":[{"entityType":"ITEM","id":10000,"quantity":888,"sku":11111},{"entityType":"ITEM","id":20000,"quantity":999,"sku":22222}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1024131072, updatedTime=null, updatedBy=null}
16:05:18.647 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024212992, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":60000,"items":[{"entityType":"ITEM","id":50000,"quantity":9,"sku":55555}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1024131072, updatedTime=null, updatedBy=null}
16:05:18.647 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentEntity{id=1024131072, createdBy=system internal, requestId=738246720, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"offerId":100,"orderItemId":10000,"quantity":2,"timestamp":1396253118579}, updatedTime=null, updatedBy=null}
16:05:18.647 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentRequestEntity{id=738246720, trackingGuid=7155371a-611e-4279-8912-81b347d39226, createdBy=system internal, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"orderId":1396253118579,"requester":"SYSTEM","userId":1396253118579}, orderId=1396253118579, updatedTime=null, updatedBy=null}
16:05:18.647 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024196608, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":6,"items":[{"entityType":"ITEM","id":40000,"quantity":77,"sku":44444}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1024131072, updatedTime=null, updatedBy=null}
16:05:18.647 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024180224, result=null, createdBy=system internal, status=2, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":4,"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=0, fulfilmentId=1024131072, updatedTime=Mon Mar 31 16:05:18 CST 2014, updatedBy=system internal}
16:05:18.647 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentActionEntity{id=1024245760, result=null, createdBy=system internal, status=0, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"copyCount":3,"items":[{"entityType":"ITEM","id":50000,"quantity":9,"sku":55555}],"properties":{"ENTITLEMENT_DEVELOPER":"TEST_DEVELOPER","ENTITLEMENT_GROUP":"TEST_GROUP","ENTITLEMENT_TAG":"TEST_TAG","ENTITLEMENT_TYPE":"DOWNLOAD"}}, type=1, fulfilmentId=1024229376, updatedTime=null, updatedBy=null}
16:05:18.647 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.fulfilment.db.entity.FulfilmentEntity{id=1024229376, createdBy=system internal, requestId=738246720, createdTime=Mon Mar 31 16:05:18 CST 2014, payload={"offerId":400,"orderItemId":20000,"quantity":3,"timestamp":1396253118579}, updatedTime=null, updatedBy=null}
16:05:18.648 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:05:18.648 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.648 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.648 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172BD0720000000D]
16:05:18.648 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.648 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.648 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172BD0720000000D
16:05:18.648 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:05:18.648 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.648 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.648 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.648 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from the inaccessible pool
16:05:18.648 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.648 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.648 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.648 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.648 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 to the accessible pool
16:05:18.648 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7904e8c4 was in state NOT_ACCESSIBLE, no need to test it
16:05:18.648 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.648 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/fulfilment_ds1 with 3 connection(s) (2 still available)
16:05:18.648 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:05:18.648 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.649 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/fulfilment_ds1 XAResource=org.postgresql.xa.PGXAConnection@7904e8c4 (started) with XID a Bitronix XID [737072696E672D62746D00000145172BD0720000000D : 737072696E672D62746D00000145172BD0760000000E]
16:05:18.652 [Test worker] DEBUG org.hibernate.SQL - select this_.action_id as action1_2_0_, this_.created_by as created2_2_0_, this_.created_time as created3_2_0_, this_.updated_by as updated4_2_0_, this_.updated_time as updated5_2_0_, this_.fulfilment_id as fulfilment6_2_0_, this_.payload as payload2_0_, this_.result as result2_0_, this_.status as status2_0_, this_.type as type2_0_ from fulfilment_action this_ where this_.fulfilment_id=?
Hibernate: select this_.action_id as action1_2_0_, this_.created_by as created2_2_0_, this_.created_time as created3_2_0_, this_.updated_by as updated4_2_0_, this_.updated_time as updated5_2_0_, this_.fulfilment_id as fulfilment6_2_0_, this_.payload as payload2_0_, this_.result as result2_0_, this_.status as status2_0_, this_.type as type2_0_ from fulfilment_action this_ where this_.fulfilment_id=?
16:05:18.654 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:05:18.655 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.fulfilment.db.entity.FulfilmentActionEntity#1024245760]
16:05:18.655 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:05:18.655 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@2b2e24aa
16:05:18.655 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.656 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.656 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.665 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.666 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.666 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.666 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172BD0720000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:05:18 CST 2014)
16:05:18.666 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.667 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.667 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:05:18.668 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 from the accessible pool
16:05:18.668 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.668 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.668 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4 to the inaccessible pool
16:05:18.668 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/fulfilment_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7904e8c4
16:05:18.668 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:05:18.669 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
