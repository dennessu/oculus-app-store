<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <import resource="classpath*:spring/common-context.xml"/>
    <import resource="classpath*:spring/common-lib-context.xml"/>

    <alias alias="routingAsyncHttpClient" name="commonAsyncHttpClient" />
    <alias alias="routingPathParamTranscoder" name="commonPathParamTranscoder" />
    <alias alias="routingQueryParamTranscoder" name="commonQueryParamTranscoder" />
    <alias alias="routingTranscoder" name="commonTranscoder" />
    <alias alias="routingExceptionHandler" name="commonExceptionHandler" />

    <bean id="routingHeadersProvider" class="com.junbo.common.routing.HeadersProviderImpl" />

    <bean id="routingRouterBase" class="com.junbo.common.routing.RouterImpl">
        <property name="topology" ref="routingTopologyBase" />
        <property name="crossDcRoutingEnabled" value="${common.routing.crossDcRoutingEnabled}" />
        <property name="inDcRoutingEnabled" value="${common.routing.inDcRoutingEnabled}" />
        <property name="defaultPolicy" value="${common.routing.defaultPolicy}" />
    </bean>

    <bean id="routingTopologyBase" class="com.junbo.configuration.topo.Topology">
        <property name="appHostUrl" value="${apphost.server.uri}"/>
        <property name="appUrlTemplateConfig" value="[common.topo.appurltemplate]"/>
        <property name="appServersConfig" value="[common.topo.appservers]"/>
        <property name="configService" ref="configService" />
    </bean>
</beans>
