<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context" xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd">

    <import resource="classpath:spring/sharding-context.xml"/>
    <import resource="classpath:spring/sharding.xml"/>
    <import resource="classpath*:spring/common-context.xml"/>

    <bean id="sessionFactoryWrapper" class="com.junbo.sharding.core.hibernate.SessionFactoryWrapper">
        <property name="mapper" ref="shardDataSourceMapper"/>
        <property name="dataSourceRegistry" ref="shardDataSourceRegistry"/>
        <property name="sessionFactoryBeanName" value="sessionFactoryTemplate"/>
        <property name="dataBaseName" value="test"/>
        <property name="packagesToScan" value="com.junbo.sharding.test.data.dao"/>
    </bean>

    <bean id="shardDaoTarget" class="com.junbo.sharding.test.data.dao.ShardDAOImpl">
        <property name="sessionFactoryWrapper" ref="sessionFactoryWrapper"/>
    </bean>
    <bean id="shardDao" class="com.junbo.sharding.core.ShardAwareDaoFactoryBean">
        <property name="daoInterface" value="com.junbo.sharding.test.data.dao.ShardDAO"/>
        <property name="daoTarget" ref="shardDaoTarget"/>
        <property name="idGeneratorFacade" ref="idGeneratorFacade"/>
    </bean>
</beans>