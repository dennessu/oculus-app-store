<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="1" author='NanXin' context="PREDEPLOY">
        <sql><![CDATA[
            create table entitlement (
              id varchar(64) not null,
              rev int not null,
              user_id bigint not null,
              is_banned boolean not null,
              grant_time timestamp not null,
              expiration_time timestamp default null,
              use_count bigint default null,
              item_id varchar(64) default null,
              created_by bigint default null,
              modified_by bigint default null,
              created_by_client varchar(255) default null,
              updated_by_client varchar(255) default null,
              created_time timestamp not null,
              modified_time timestamp not null,
              type varchar(128),
              future_expansion json not null,
              tracking_uuid uuid UNIQUE,
              is_deleted boolean default false,
              primary key (id)
            );
            create table entitlement_history (
              id varchar(64) not null,
              action varchar(32) not null,
              entitlement_id varchar(64) not null,
              rev int not null,
              is_banned boolean not null,
              item_id varchar(64) default null,
              user_id bigint not null,
              grant_time timestamp not null,
              expiration_time timestamp default null,
              use_count bigint default null,
              future_expansion json not null,
              created_by bigint default null,
              modified_by bigint default null,
              created_by_client varchar(255) default null,
              updated_by_client varchar(255) default null,
              created_time timestamp not null,
              modified_time timestamp not null,
              is_deleted boolean default null,
              primary key (id)
            );
                ]]>
        </sql>
    </changeSet>

</databaseChangeLog>
