<idea-plugin>
    <id>com.junbo.idea.codenarc</id>
    <name>CodeNarc-IDEA</name>

    <description>
        <![CDATA[
<p>
    This plugin provides both real-time and on-demand scanning of Groovy files with CodeNarc 0.20 from within IDEA.
</p>
        ]]>
    </description>

    <version>0.0.1-SNAPSHOT</version>

    <vendor>com.junbo</vendor>

    <idea-version since-build="133.331"/>

    <resource-bundle>com.junbo.idea.codenarc.resource</resource-bundle>

    <depends>org.intellij.groovy</depends>

    <change-notes>
        <![CDATA[
        ]]>
    </change-notes>

    <project-components>
        <component>
            <implementation-class>com.junbo.idea.codenarc.CodeNarcPlugin</implementation-class>
            <interface-class>com.junbo.idea.codenarc.CodeNarcPlugin</interface-class>
        </component>
    </project-components>

    <module-components>
        <component>
            <implementation-class>com.junbo.idea.codenarc.CodeNarcModulePlugin</implementation-class>
            <interface-class>com.junbo.idea.codenarc.CodeNarcModulePlugin</interface-class>
        </component>
    </module-components>


    <extensions defaultExtensionNs="com.intellij">
        <applicationService serviceInterface="com.junbo.idea.codenarc.checker.CheckerFactory"
                            serviceImplementation="com.junbo.idea.codenarc.checker.CheckerFactory"/>

        <projectService serviceInterface="com.junbo.idea.codenarc.CodeNarcConfiguration"
                        serviceImplementation="com.junbo.idea.codenarc.CodeNarcConfiguration"/>
        <projectService serviceInterface="com.junbo.idea.codenarc.util.ModuleClassPathBuilder"
                        serviceImplementation="com.junbo.idea.codenarc.util.ModuleClassPathBuilder"/>

        <projectConfigurable instance="com.junbo.idea.codenarc.CodeNarcConfigurable"/>

        <moduleService serviceInterface="com.junbo.idea.codenarc.CodeNarcModuleConfiguration"
                       serviceImplementation="com.junbo.idea.codenarc.CodeNarcModuleConfiguration"/>

        <moduleConfigurable instance="com.junbo.idea.codenarc.CodeNarcModuleConfigurable"/>

        <localInspection id="CodeNarcIDEAInspection"
                         implementationClass="com.junbo.idea.codenarc.CodeNarcInspection"
                         displayName="Real-time scan"
                         groupName="CodeNarc"
                         shortName="CodeNarc-IDEA"
                         level="WARNING"
                         enabledByDefault="true"/>

        <checkinHandlerFactory id="CodeNarcIDEACheckInHandlerFactory"
                               implementation="com.junbo.idea.codenarc.handlers.ScanFilesBeforeCheckinHandlerFactory"/>

        <toolWindow id="CodeNarc"
                    anchor="bottom"
                    canCloseContents="false"
                    factoryClass="com.junbo.idea.codenarc.toolwindow.CodeNarcToolWindowFactory"
                    icon="/com/junbo/idea/codenarc/images/codenarc13.png"/>
    </extensions>

    <actions>
        <group id="CodeNarcPluginTreeActions" text="Filter" popup="true">
            <action id="CodeNarcScrollToSourceAction"
                    class="com.junbo.idea.codenarc.actions.ScrollToSource"
                    text="Autoscroll to Source"
                    description="Auto-scroll to the source location of errors and warnings"
                    icon="/general/autoscrollToSource.png"/>

            <action id="CodeNarcExpandAllAction"
                    class="com.junbo.idea.codenarc.actions.ExpandAll"
                    text="Expand All"
                    description="Expand all elements in the tool window"
                    icon="/actions/expandall.png"/>

            <action id="CodeNarcCollapseAllAction"
                    class="com.junbo.idea.codenarc.actions.CollapseAll"
                    text="Collapse All"
                    description="Collapse all elements in the tool window"
                    icon="/actions/collapseall.png"/>

            <separator/>

            <action id="CodeNarcDisplayErrorsAction"
                    class="com.junbo.idea.codenarc.actions.DisplayErrors"
                    text="Display Errors"
                    description="Display error results"
                    icon="/compiler/error.png"/>

            <action id="CodeNarcDisplayWarningsAction"
                    class="com.junbo.idea.codenarc.actions.DisplayWarnings"
                    text="Display Warnings"
                    description="Display warning results"
                    icon="/compiler/warning.png"/>

            <action id="CodeNarcDisplayInfoAction"
                    class="com.junbo.idea.codenarc.actions.DisplayInfo"
                    text="Display Information Results"
                    description="Display information results"
                    icon="/compiler/information.png"/>
        </group>

        <group id="CodeNarcPluginActions" text="CodeNarc" popup="true">
            <action id="CodeNarcCloseAction"
                    class="com.junbo.idea.codenarc.actions.Close"
                    text="Close CodeNarc Window"
                    description="Close the CodeNarc tool window"
                    icon="/actions/cancel.png"/>

            <action id="CodeNarcStopCheck"
                    class="com.junbo.idea.codenarc.actions.StopCheck"
                    text="Stop the running scan"
                    description="Stop the scan currently being run"
                    icon="/actions/suspend.png">
            </action>

            <separator/>

            <action id="CodeNarcCurrentFileAction"
                    class="com.junbo.idea.codenarc.actions.ScanCurrentFile"
                    text="Check Current File with CodeNarc"
                    description="Run CodeNarc on the current file in the editor"
                    icon="/actions/execute.png">

                <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            </action>

            <action id="CodeNarcModuleFilesAction"
                    class="com.junbo.idea.codenarc.actions.ScanModule"
                    text="Check Module"
                    description="Run CodeNarc on all files in the current module"
                    icon="/modules/modulesNode.png">
            </action>

            <action id="CodeNarcProjectFilesAction"
                    class="com.junbo.idea.codenarc.actions.ScanProject"
                    text="Check Project"
                    description="Run CodeNarc on all files in the current project"
                    icon="/general/projectTab.png">
            </action>

            <action id="CodeNarcModifiedFilesAction"
                    class="com.junbo.idea.codenarc.actions.ScanModifiedFiles"
                    text="Check All Modified Files"
                    description="Run CodeNarc on all modified files"
                    icon="/general/toolWindowChanges.png">
            </action>

            <action id="CodeNarcDefaultChangeListAction"
                    class="com.junbo.idea.codenarc.actions.ScanCurrentChangeList"
                    text="Check Files in the Current Change List"
                    description="Run CodeNarc on the current change list"
                    icon="/general/smallConfigurableVcs.png">
            </action>

            <separator/>

            <action id="CodeNarcClearCheckCacheAction"
                    class="com.junbo.idea.codenarc.actions.ClearCheckerCache"
                    text="Reload Rules files"
                    description="Clear the rules file cache, forcing a reload of changed rules"
                    icon="/actions/sync.png">
            </action>
        </group>

    </actions>
</idea-plugin>
