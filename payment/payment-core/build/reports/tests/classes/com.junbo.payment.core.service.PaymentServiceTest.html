<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta httpEquiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Test results - Class com.junbo.payment.core.service.PaymentServiceTest</title>
<link href="css/base-style.css" rel="stylesheet" type="text/css"/>
<link href="css/style.css" rel="stylesheet" type="text/css"/>
<script src="js/report.js" type="text/javascript"></script>
</head>
<body>
<div id="content">
<h1>Class com.junbo.payment.core.service.PaymentServiceTest</h1>
<div class="breadcrumbs">
<a href="../index.html">all</a> &gt; 
<a href="../packages/com.junbo.payment.core.service.html">com.junbo.payment.core.service</a> &gt; PaymentServiceTest</div>
<div id="summary">
<table>
<tr>
<td>
<div class="summaryGroup">
<table>
<tr>
<td>
<div class="infoBox" id="tests">
<div class="counter">6</div>
<p>tests</p>
</div>
</td>
<td>
<div class="infoBox" id="failures">
<div class="counter">0</div>
<p>failures</p>
</div>
</td>
<td>
<div class="infoBox" id="duration">
<div class="counter">2.153s</div>
<p>duration</p>
</div>
</td>
</tr>
</table>
</div>
</td>
<td>
<div class="infoBox success" id="successRate">
<div class="percent">100%</div>
<p>successful</p>
</div>
</td>
</tr>
</table>
</div>
<div id="tabs">
<ul class="tabLinks">
<li>
<a href="#tab0">Tests</a>
</li>
<li>
<a href="#tab1">Standard output</a>
</li>
</ul>
<div id="tab0" class="tab">
<h2>Tests</h2>
<table>
<thead>
<tr>
<th>Test</th>
<th>Duration</th>
<th>Result</th>
</tr>
</thead>
<tr>
<td class="success">testAddPI</td>
<td>0.746s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testAuthAndReverse</td>
<td>0.551s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testAuthSettleAndReverse</td>
<td>0.520s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testChargeAndReverse</td>
<td>0.231s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testPutPI</td>
<td>0.040s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testRemovePI</td>
<td>0.065s</td>
<td class="success">passed</td>
</tr>
</table>
</div>
<div id="tab1" class="tab">
<h2>Standard output</h2>
<span class="code">
<pre>16:00:57.600 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'
16:00:57.603 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:57.604 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:57.622 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D000001451727D4F800000001
16:00:57.651 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@22e54092
16:00:57.651 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:57.652 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528576
16:00:57.652 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@43b4db14
16:00:57.680 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:57.681 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (3 still available)
16:00:57.681 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (3 still available)
16:00:57.681 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D4F800000001]
16:00:57.681 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:57.682 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (3 still available), waiting if necessary
16:00:57.682 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f - closing time: 1396252913860, now time: 1396252857682
16:00:57.682 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:57.682 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:57.682 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:57.683 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:57.683 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:57.683 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:00:57.684 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state IN_POOL, testing it
16:00:57.684 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f, skipping test
16:00:57.684 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:57.684 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:57.684 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:57.685 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.686 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@69e210f belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:57.686 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002]
16:00:57.687 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null&gt;
16:00:57.687 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002] with NOFLAGS
16:00:57.687 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002] with NOFLAGS
16:00:57.687 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:57.687 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727D4F800000001] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f, adding it to the resource's transactions list
16:00:57.704 [Test worker] DEBUG org.hibernate.SQL - select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
Hibernate: select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
16:00:57.739 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:57.740 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:00:57.740 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:57.740 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.740 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:57.740 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.740 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:57.740 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:57.741 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.741 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:57.741 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:57.741 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:57.742 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:00:57.742 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:57.742 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:57.742 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:00:57.742 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:57.742 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:57.742 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:57.743 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:57.744 [Test worker] DEBUG o.h.t.DistinctResultTransformer - Transformed: 0 rows to: 0 distinct results
16:00:57.745 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'MockProviderRoutingServiceImpl.getPaymentProvider' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly; ''
16:00:57.745 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:57.745 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:57.761 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:57.762 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [com.junbo.sharding.id.oculus.OculusGlobalCounterInDBImpl.getAndIncrease]
16:00:57.762 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.762 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002]
16:00:57.762 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002] with SUCCESS
16:00:57.762 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002] with SUCCESS
16:00:57.762 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014), default timeout 60s
16:00:57.762 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:57.762 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:57.762 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.762 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727D5A200000003]
16:00:57.763 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:57.763 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:57.763 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:57.763 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014) for Mon Mar 31 16:01:57 CST 2014
16:00:57.763 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.763 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014) scheduled for Mon Mar 31 16:01:57 CST 2014, total task(s) queued: 5
16:00:57.763 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:57 CST 2014
16:00:57.764 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'IdGlobalCounterDAOImpl.get' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
16:00:57.764 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:57.764 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:57.764 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@89df5e8
16:00:57.764 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:57.764 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528577
16:00:57.764 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@6422b12c
16:00:57.784 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:57.784 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available)
16:00:57.784 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available)
16:00:57.784 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D5A200000003]
16:00:57.784 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:57.784 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available), waiting if necessary
16:00:57.784 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 - closing time: 1396252916148, now time: 1396252857784
16:00:57.784 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:57.784 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.784 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.784 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.784 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.784 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 to the accessible pool
16:00:57.784 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@9ea9b87 was in state IN_POOL, testing it
16:00:57.784 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87, skipping test
16:00:57.784 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.784 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:57.784 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:57.784 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.784 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@9ea9b87 does not belong to any resource of a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:57.785 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@9ea9b87 belongs to a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:57.785 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727D5A200000003 : 737072696E672D62746D000001451727D5B900000004]
16:00:57.785 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727D5A200000003 : 737072696E672D62746D000001451727D5B900000004]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@9ea9b87 with XID null&gt;
16:00:57.785 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@9ea9b87 with XID a Bitronix XID [737072696E672D62746D000001451727D5A200000003 : 737072696E672D62746D000001451727D5B900000004] with NOFLAGS
16:00:57.786 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@9ea9b87 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D5A200000003 : 737072696E672D62746D000001451727D5B900000004] with NOFLAGS
16:00:57.786 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@9ea9b87 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D5A200000003 : 737072696E672D62746D000001451727D5B900000004]] on a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.786 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727D5A200000003] previously unknown to a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87, adding it to the resource's transactions list
16:00:57.787 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
16:00:57.787 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 1 -&gt; shardId [1]
16:00:57.788 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -&gt; optionMode [2]
16:00:57.792 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:57.796 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
16:00:57.805 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:57.805 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@1e7b081b
16:00:57.805 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.805 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.805 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.805 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.805 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.805 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.805 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.805 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.806 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.806 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:57.806 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from the accessible pool
16:00:57.806 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.806 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.806 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 to the inaccessible pool
16:00:57.806 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.806 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:57.806 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:57.806 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
16:00:57.809 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
16:00:57.809 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:57.810 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'IdGlobalCounterDAOImpl.saveOrUpdate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
16:00:57.810 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:57.810 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:57.812 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:57.814 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:57.819 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 1 updates, 0 deletions to 1 objects
16:00:57.819 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:57.821 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:57.821 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=1, shardId=1, globalCounter=39, optionMode=2}
16:00:57.821 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: id_global_counter
16:00:57.842 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:57.842 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:57.842 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:57.842 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D5A200000003]
16:00:57.843 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.843 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.844 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D5A200000003
16:00:57.844 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:57.844 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:57.844 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.844 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.844 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from the inaccessible pool
16:00:57.844 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.844 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.844 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.844 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.844 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 to the accessible pool
16:00:57.844 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@9ea9b87 was in state NOT_ACCESSIBLE, no need to test it
16:00:57.844 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.844 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:57.844 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:57.845 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.845 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@9ea9b87 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D5A200000003 : 737072696E672D62746D000001451727D5B900000004]
16:00:57.845 [Test worker] DEBUG org.hibernate.SQL - update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
Hibernate: update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
16:00:57.845 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:57.848 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:57.848 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:57.848 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@1e7b081b
16:00:57.848 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.848 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.848 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.848 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.848 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.848 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.848 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.848 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.848 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.848 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:57.848 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from the accessible pool
16:00:57.849 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.849 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.849 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 to the inaccessible pool
16:00:57.849 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.849 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:57.849 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:57.849 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:57.849 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:57.850 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D5A200000003]
16:00:57.850 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.850 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.850 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D5A200000003
16:00:57.850 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:57.850 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:57.850 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.850 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.850 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from the inaccessible pool
16:00:57.850 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.851 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.851 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.851 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.851 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 to the accessible pool
16:00:57.851 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@9ea9b87 was in state NOT_ACCESSIBLE, no need to test it
16:00:57.852 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.852 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:57.852 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:57.852 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.852 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@9ea9b87 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D5A200000003 : 737072696E672D62746D000001451727D5B900000004]
16:00:57.852 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
16:00:57.853 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 1 -&gt; shardId [1]
16:00:57.853 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -&gt; optionMode [2]
16:00:57.854 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:57.855 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
16:00:57.855 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:57.855 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@1e7b081b
16:00:57.855 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.855 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.855 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.855 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.855 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.856 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.856 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.856 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.856 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.856 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:57.856 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from the accessible pool
16:00:57.856 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.856 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.857 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 to the inaccessible pool
16:00:57.857 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.857 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:57.857 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:57.862 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:57.862 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:57.862 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 1 updates, 0 deletions to 1 objects
16:00:57.863 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:57.863 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:57.863 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=1, shardId=1, globalCounter=39, optionMode=2}
16:00:57.863 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: id_global_counter
16:00:57.863 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:57.863 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:57.863 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:57.863 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D5A200000003]
16:00:57.863 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.863 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.863 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D5A200000003
16:00:57.863 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:57.863 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:57.863 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.863 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.863 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from the inaccessible pool
16:00:57.863 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.863 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.863 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.864 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.864 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 to the accessible pool
16:00:57.864 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@9ea9b87 was in state NOT_ACCESSIBLE, no need to test it
16:00:57.864 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.864 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:57.864 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:57.864 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.864 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@9ea9b87 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D5A200000003 : 737072696E672D62746D000001451727D5B900000004]
16:00:57.864 [Test worker] DEBUG org.hibernate.SQL - update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
Hibernate: update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
16:00:57.865 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:57.865 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:57.866 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:57.866 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@1e7b081b
16:00:57.866 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.866 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.866 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.866 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.866 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.866 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.866 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.866 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.866 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.866 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:57.866 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from the accessible pool
16:00:57.866 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.866 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.867 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 to the inaccessible pool
16:00:57.867 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.867 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:57.867 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:57.867 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:57.867 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:57.867 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D5A200000003]
16:00:57.867 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.867 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.867 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D5A200000003
16:00:57.867 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:57.867 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:57.867 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.867 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.867 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from the inaccessible pool
16:00:57.867 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.867 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.867 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.867 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.867 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 to the accessible pool
16:00:57.868 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@9ea9b87 was in state NOT_ACCESSIBLE, no need to test it
16:00:57.868 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.868 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:57.868 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:57.868 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.868 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@9ea9b87 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D5A200000003 : 737072696E672D62746D000001451727D5B900000004]
16:00:57.868 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
16:00:57.869 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 1 -&gt; shardId [1]
16:00:57.869 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -&gt; optionMode [2]
16:00:57.871 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:57.871 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
16:00:57.871 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:57.871 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@1e7b081b
16:00:57.871 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.871 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.871 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.871 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.871 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.871 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.871 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.872 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.872 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.872 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:57.872 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from the accessible pool
16:00:57.872 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.872 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.872 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 to the inaccessible pool
16:00:57.872 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.872 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:57.872 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:57.872 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:57.872 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:57.873 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
16:00:57.873 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:57.873 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:57.873 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=1, shardId=1, globalCounter=39, optionMode=2}
16:00:57.873 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D000001451727D5A200000003
16:00:57.873 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:57.873 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:57.874 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:57.874 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D5A200000003]
16:00:57.874 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.874 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.874 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D5A200000003
16:00:57.874 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:57.874 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:57.874 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.874 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.874 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from the inaccessible pool
16:00:57.874 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.874 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.874 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.874 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.874 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 to the accessible pool
16:00:57.874 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@9ea9b87 was in state NOT_ACCESSIBLE, no need to test it
16:00:57.874 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.874 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:57.875 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:57.875 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.875 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@9ea9b87 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D5A200000003 : 737072696E672D62746D000001451727D5B900000004]
16:00:57.875 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
16:00:57.875 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 1 -&gt; shardId [1]
16:00:57.875 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -&gt; optionMode [2]
16:00:57.876 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:57.876 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
16:00:57.876 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:57.877 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@1e7b081b
16:00:57.877 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.877 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.877 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.877 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.877 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.877 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.877 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.877 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.877 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.877 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:57.877 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from the accessible pool
16:00:57.877 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.877 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.877 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 to the inaccessible pool
16:00:57.877 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.877 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:57.877 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:57.878 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:57.878 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.878 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.878 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.878 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014) scheduled for Mon Mar 31 16:01:57 CST 2014, total task(s) still queued: 4
16:00:57.878 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:57.879 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.879 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.879 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@89df5e8
16:00:57.879 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:57.880 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:57.880 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
16:00:57.880 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:57.880 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:57.880 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=1, shardId=1, globalCounter=39, optionMode=2}
16:00:57.880 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:57.880 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@6422b12c
16:00:57.880 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@9ea9b87 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D5A200000003 : 737072696E672D62746D000001451727D5B900000004]
16:00:57.881 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@9ea9b87 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D5A200000003 : 737072696E672D62746D000001451727D5B900000004]
16:00:57.881 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@9ea9b87 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D5A200000003 : 737072696E672D62746D000001451727D5B900000004] with SUCCESS
16:00:57.881 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@9ea9b87 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D5A200000003 : 737072696E672D62746D000001451727D5B900000004] with SUCCESS
16:00:57.881 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:57.881 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:57.881 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:57.881 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:57.881 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:57.881 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:57.881 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:57.881 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:57.881 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:57.882 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:57.882 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:57.882 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@9ea9b87 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D5A200000003 : 737072696E672D62746D000001451727D5B900000004] (with one-phase optimization)
16:00:57.885 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@9ea9b87 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D5A200000003 : 737072696E672D62746D000001451727D5B900000004]
16:00:57.886 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:57.887 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:57.888 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/sharding]
16:00:57.890 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/sharding]
16:00:57.891 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:57.891 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:57.891 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.891 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:57.891 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727D5A200000003 : 737072696E672D62746D000001451727D5B900000004] from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.891 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 cleaned up all transaction states for GTRID [737072696E672D62746D000001451727D5A200000003]
16:00:57.891 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:57.891 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@89df5e8 with status=COMMITTED
16:00:57.891 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:57.892 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
16:00:57.894 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@6422b12c with status=COMMITTED
16:00:57.895 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014) with status=COMMITTED
16:00:57.895 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014), default timeout 60s
16:00:57.895 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D5A200000003], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.895 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 with status=COMMITTED
16:00:57.895 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.895 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.895 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:57.895 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 from the inaccessible pool
16:00:57.895 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.895 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.895 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87 to the available pool
16:00:57.895 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@9ea9b87
16:00:57.896 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:57.896 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:57.900 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002]
16:00:57.900 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:57.901 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null
16:00:57.901 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002]
16:00:57.901 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002]
16:00:57.902 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:57.903 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002]
16:00:57.904 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null&gt;
16:00:57.907 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002] with JOIN
16:00:57.907 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002] with JOIN
16:00:57.907 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:57.907 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727D4F800000001] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f, adding it to the resource's transactions list
16:00:57.907 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:57.910 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 654327872, using strategy: org.hibernate.id.Assigned
16:00:57.912 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 654327872, using strategy: org.hibernate.id.Assigned
16:00:57.913 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 654327872, using strategy: org.hibernate.id.Assigned
16:00:57.913 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 654327872, using strategy: org.hibernate.id.Assigned
16:00:57.947 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - parse() - HQL: update com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity set is_default = CASE WHEN payment_instrument_id = 654327872 THEN true ELSE false END where user_id = 123
16:00:57.959 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - --- HQL AST ---
 \-[UPDATE] Node: 'update'
    +-[FROM] Node: 'FROM'
    |  \-[RANGE] Node: 'RANGE'
    |     \-[DOT] Node: '.'
    |        +-[DOT] Node: '.'
    |        |  +-[DOT] Node: '.'
    |        |  |  +-[DOT] Node: '.'
    |        |  |  |  +-[DOT] Node: '.'
    |        |  |  |  |  +-[DOT] Node: '.'
    |        |  |  |  |  |  +-[IDENT] Node: 'com'
    |        |  |  |  |  |  \-[IDENT] Node: 'junbo'
    |        |  |  |  |  \-[IDENT] Node: 'payment'
    |        |  |  |  \-[IDENT] Node: 'db'
    |        |  |  \-[IDENT] Node: 'entity'
    |        |  \-[IDENT] Node: 'paymentinstrument'
    |        \-[IDENT] Node: 'PaymentInstrumentEntity'
    +-[SET] Node: 'set'
    |  \-[EQ] Node: '='
    |     +-[IDENT] Node: 'is_default'
    |     \-[CASE] Node: 'CASE'
    |        +-[WHEN] Node: 'WHEN'
    |        |  +-[EQ] Node: '='
    |        |  |  +-[IDENT] Node: 'payment_instrument_id'
    |        |  |  \-[NUM_INT] Node: '654327872'
    |        |  \-[TRUE] Node: 'true'
    |        \-[ELSE] Node: 'ELSE'
    |           \-[FALSE] Node: 'false'
    \-[WHERE] Node: 'where'
       \-[EQ] Node: '='
          +-[IDENT] Node: 'user_id'
          \-[NUM_INT] Node: '123'

16:00:57.959 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:00:57.987 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - update &lt;&lt; begin [level=1, statement=update]
16:00:58.005 [Test worker] DEBUG o.h.h.internal.ast.tree.FromElement - FromClause{level=1} : com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity (&lt;no alias&gt;) -&gt; paymentins0_
16:00:58.010 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - update : finishing up [level=1, statement=update]
16:00:58.011 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - update &gt;&gt; end [level=1, statement=update]
16:00:58.012 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - --- SQL AST ---
 \-[UPDATE] UpdateStatement: 'update'  querySpaces (payment_instrument)
    +-[FROM] FromClause: 'FROM' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[], fromElementByTableAlias=[paymentins0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
    |  \-[FROM_FRAGMENT] FromElement: 'payment_instrument' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=payment_instrument,tableAlias=paymentins0_,origin=null,columns={,className=com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity}}
    +-[SET] SqlNode: 'set'
    |  \-[EQ] BinaryLogicOperatorNode: '='
    |     +-[IDENT] IdentNode: 'is_default' {originalText=is_default}
    |     \-[CASE] CaseNode: 'CASE'
    |        +-[WHEN] SqlNode: 'WHEN'
    |        |  +-[EQ] BinaryLogicOperatorNode: '='
    |        |  |  +-[IDENT] IdentNode: 'payment_instrument_id' {originalText=payment_instrument_id}
    |        |  |  \-[NUM_INT] LiteralNode: '654327872'
    |        |  \-[TRUE] BooleanLiteralNode: 'true'
    |        \-[ELSE] SqlNode: 'ELSE'
    |           \-[FALSE] BooleanLiteralNode: 'false'
    \-[WHERE] SqlNode: 'where'
       \-[EQ] BinaryLogicOperatorNode: '='
          +-[IDENT] IdentNode: 'user_id' {originalText=user_id}
          \-[NUM_INT] LiteralNode: '123'

16:00:58.012 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:00:58.021 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:00:58.022 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:58.022 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:58.023 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
16:00:58.023 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:58.023 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:58.023 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity{prepaid=UNKNOW, createdTime=Mon Mar 31 16:00:57 CST 2014, externalToken=123, type=0, issueCountry=UNKNOW, updatedBy=null, id=654327872, lastBillingDate=Mon Mar 31 16:00:57 CST 2014, createdBy=null, expireDate=2025-11, debit=UNKNOW, commercial=UNKNOW, updatedTime=Mon Mar 31 16:00:57 CST 2014}
16:00:58.023 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity{relationToHolder=null, status=0, createdTime=Mon Mar 31 16:00:57 CST 2014, type=0, accountNum=1111, addressId=654327872, updatedBy=null, lastValidatedTime=Mon Mar 31 16:00:57 CST 2014, id=654327872, accountName=ut, createdBy=null, email=null, isDefault=true, userId=123, phoneId=654327872, encryptedAccountNO=null, updatedTime=Mon Mar 31 16:00:57 CST 2014}
16:00:58.024 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PhoneEntity{id=654327872, phoneExtension=null, createdBy=null, areaCode=null, createdTime=Mon Mar 31 16:00:57 CST 2014, number=12345678, type=0, updatedTime=Mon Mar 31 16:00:57 CST 2014, updatedBy=null}
16:00:58.024 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.AddressEntity{createdTime=Mon Mar 31 16:00:57 CST 2014, state=null, addressLine3=null, addressLine2=null, addressLine1=3rd street, updatedBy=null, city=LA, country=US, id=654327872, postalCode=12345, createdBy=null, unitNumber=null, district=null, updatedTime=Mon Mar 31 16:00:57 CST 2014}
16:00:58.024 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: payment_instrument
16:00:58.032 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.032 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.032 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.032 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D4F800000001]
16:00:58.032 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.032 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.032 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D4F800000001
16:00:58.033 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:58.033 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.033 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.033 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.033 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f from the inaccessible pool
16:00:58.033 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.033 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.033 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:58.033 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:58.033 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:00:58.034 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state NOT_ACCESSIBLE, no need to test it
16:00:58.034 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.034 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.034 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.034 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:58.034 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002]
16:00:58.034 [Test worker] DEBUG org.hibernate.SQL - insert into address (created_by, created_time, updated_by, updated_time, address_line_1, address_line_2, address_line_3, city, country_code, district, postal_code, state, unit_number, address_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into address (created_by, created_time, updated_by, updated_time, address_line_1, address_line_2, address_line_3, city, country_code, district, postal_code, state, unit_number, address_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:58.040 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:58.043 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:58.043 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:58.043 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002]
16:00:58.043 [Test worker] DEBUG org.hibernate.SQL - insert into phone (created_by, created_time, updated_by, updated_time, phone_area_code, phone_local_number, phone_extension, phone_type_id, phone_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into phone (created_by, created_time, updated_by, updated_time, phone_area_code, phone_local_number, phone_extension, phone_type_id, phone_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:58.050 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:58.058 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:58.058 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:58.058 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002]
16:00:58.059 [Test worker] DEBUG org.hibernate.SQL - insert into payment_instrument (created_by, created_time, updated_by, updated_time, payment_instrument_holder_name, account_number, address_id, email, encrypted_account_number, is_default, last_validated_time, phone_id, relation_to_holder, status_id, payment_instrument_type_id, user_id, payment_instrument_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_instrument (created_by, created_time, updated_by, updated_time, payment_instrument_holder_name, account_number, address_id, email, encrypted_account_number, is_default, last_validated_time, phone_id, relation_to_holder, status_id, payment_instrument_type_id, user_id, payment_instrument_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:58.065 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:58.071 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:58.071 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:58.071 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002]
16:00:58.071 [Test worker] DEBUG org.hibernate.SQL - insert into credit_card_payment_instrument (created_by, created_time, updated_by, updated_time, commercial, debit, expire_time, external_token, issue_country, last_billing_time, prepaid, credit_card_type_id, payment_instrument_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into credit_card_payment_instrument (created_by, created_time, updated_by, updated_time, commercial, debit, expire_time, external_token, issue_country, last_billing_time, prepaid, credit_card_type_id, payment_instrument_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:58.073 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:58.076 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:58.076 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.076 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:00:58.076 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.076 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:58.076 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.077 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:58.077 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.077 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.077 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:58.077 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.077 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.077 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.077 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:00:58.077 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.077 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.077 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:00:58.077 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.077 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.079 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.080 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.080 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.080 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D4F800000001]
16:00:58.080 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.080 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.080 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D4F800000001
16:00:58.080 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:58.080 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.080 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.080 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.080 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f from the inaccessible pool
16:00:58.080 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.080 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.080 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:58.080 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:58.080 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:00:58.080 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state NOT_ACCESSIBLE, no need to test it
16:00:58.080 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.080 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.080 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.080 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:58.080 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002]
16:00:58.081 [Test worker] DEBUG org.hibernate.SQL - update payment_instrument set is_default=case when payment_instrument_id=654327872 then true else false end where user_id=123
Hibernate: update payment_instrument set is_default=case when payment_instrument_id=654327872 then true else false end where user_id=123
16:00:58.101 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.101 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:00:58.101 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.101 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:58.102 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.102 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:58.102 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.102 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.102 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:58.102 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.102 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.102 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.102 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:00:58.102 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.102 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.102 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:00:58.102 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.102 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.124 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementUnregisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D000001451727D5A200000003
16:00:58.217 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:58.217 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [com.junbo.sharding.id.oculus.OculusGlobalCounterInDBImpl.getAndIncrease]
16:00:58.217 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:58.217 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002]
16:00:58.217 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002] with SUCCESS
16:00:58.217 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002] with SUCCESS
16:00:58.217 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014), default timeout 60s
16:00:58.217 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:58.217 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:58.217 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:58.217 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727D76900000005]
16:00:58.217 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:58.217 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:58.217 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:58.217 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) for Mon Mar 31 16:01:58 CST 2014
16:00:58.218 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.218 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) scheduled for Mon Mar 31 16:01:58 CST 2014, total task(s) queued: 5
16:00:58.218 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:58 CST 2014
16:00:58.218 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:58.218 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:58.218 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@337004d5
16:00:58.218 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:58.218 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528582
16:00:58.218 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@21c6b5b9
16:00:58.219 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.219 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available)
16:00:58.219 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available)
16:00:58.219 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D76900000005]
16:00:58.219 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:58.219 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available), waiting if necessary
16:00:58.219 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 - closing time: 1396252916155, now time: 1396252858219
16:00:58.219 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:58.219 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.219 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.219 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.219 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.219 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 to the accessible pool
16:00:58.220 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@42e18b85 was in state IN_POOL, testing it
16:00:58.221 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85, skipping test
16:00:58.221 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.221 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:58.221 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.221 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.221 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@42e18b85 does not belong to any resource of a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.221 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@42e18b85 belongs to a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:58.221 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727D76900000005 : 737072696E672D62746D000001451727D76D00000006]
16:00:58.221 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727D76900000005 : 737072696E672D62746D000001451727D76D00000006]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@42e18b85 with XID null&gt;
16:00:58.221 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@42e18b85 with XID a Bitronix XID [737072696E672D62746D000001451727D76900000005 : 737072696E672D62746D000001451727D76D00000006] with NOFLAGS
16:00:58.221 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@42e18b85 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D76900000005 : 737072696E672D62746D000001451727D76D00000006] with NOFLAGS
16:00:58.221 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@42e18b85 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D76900000005 : 737072696E672D62746D000001451727D76D00000006]] on a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.221 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727D76900000005] previously unknown to a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85, adding it to the resource's transactions list
16:00:58.222 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
16:00:58.222 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 0 -&gt; shardId [1]
16:00:58.222 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -&gt; optionMode [2]
16:00:58.230 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:58.230 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
16:00:58.230 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.231 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@165e079e
16:00:58.231 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.231 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.231 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.231 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.231 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.231 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.231 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.231 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.231 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.231 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.231 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from the accessible pool
16:00:58.231 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.231 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.232 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 to the inaccessible pool
16:00:58.232 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.232 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.232 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:58.232 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
16:00:58.232 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
16:00:58.232 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:58.232 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:58.232 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:58.233 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:58.233 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:58.233 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 1 updates, 0 deletions to 1 objects
16:00:58.233 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:58.233 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:58.233 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=2, shardId=0, globalCounter=58, optionMode=2}
16:00:58.233 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: id_global_counter
16:00:58.234 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.234 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:58.234 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:58.234 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D76900000005]
16:00:58.234 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.234 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.234 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D76900000005
16:00:58.234 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:58.234 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:58.234 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.234 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.234 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from the inaccessible pool
16:00:58.234 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.234 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.234 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.234 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.234 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 to the accessible pool
16:00:58.234 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@42e18b85 was in state NOT_ACCESSIBLE, no need to test it
16:00:58.234 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.235 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:58.235 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.235 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.235 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@42e18b85 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D76900000005 : 737072696E672D62746D000001451727D76D00000006]
16:00:58.235 [Test worker] DEBUG org.hibernate.SQL - update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
Hibernate: update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
16:00:58.235 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:58.243 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:58.243 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.244 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@165e079e
16:00:58.244 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.244 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.244 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.244 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.244 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.244 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.244 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.244 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.244 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.244 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.244 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from the accessible pool
16:00:58.244 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.244 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.244 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 to the inaccessible pool
16:00:58.244 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.244 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.245 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.245 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:58.245 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:58.245 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D76900000005]
16:00:58.245 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.245 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.245 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D76900000005
16:00:58.245 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:58.245 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:58.245 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.245 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.245 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from the inaccessible pool
16:00:58.245 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.245 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.245 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.245 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.245 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 to the accessible pool
16:00:58.245 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@42e18b85 was in state NOT_ACCESSIBLE, no need to test it
16:00:58.245 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.246 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:58.246 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.246 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.246 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@42e18b85 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D76900000005 : 737072696E672D62746D000001451727D76D00000006]
16:00:58.246 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
16:00:58.247 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 0 -&gt; shardId [1]
16:00:58.247 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -&gt; optionMode [2]
16:00:58.254 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:58.255 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
16:00:58.255 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.255 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@165e079e
16:00:58.255 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.255 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.255 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.255 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.255 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.255 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.255 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.255 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.256 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.256 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.256 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from the accessible pool
16:00:58.256 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.256 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.256 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 to the inaccessible pool
16:00:58.256 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.256 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.256 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:58.257 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:58.257 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:58.258 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 1 updates, 0 deletions to 1 objects
16:00:58.258 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:58.258 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:58.258 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=2, shardId=0, globalCounter=58, optionMode=2}
16:00:58.258 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: id_global_counter
16:00:58.259 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.259 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:58.259 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:58.259 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D76900000005]
16:00:58.259 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.259 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.259 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D76900000005
16:00:58.259 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:58.259 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:58.259 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.259 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.259 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from the inaccessible pool
16:00:58.259 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.259 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.259 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.259 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.259 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 to the accessible pool
16:00:58.259 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@42e18b85 was in state NOT_ACCESSIBLE, no need to test it
16:00:58.259 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.260 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:58.260 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.260 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.260 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@42e18b85 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D76900000005 : 737072696E672D62746D000001451727D76D00000006]
16:00:58.261 [Test worker] DEBUG org.hibernate.SQL - update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
Hibernate: update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
16:00:58.262 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:58.272 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:58.272 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.273 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@165e079e
16:00:58.273 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.273 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.273 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.273 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.273 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.273 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.273 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.273 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.273 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.273 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.273 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from the accessible pool
16:00:58.273 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.273 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.273 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 to the inaccessible pool
16:00:58.273 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.273 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.273 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.274 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:58.274 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:58.274 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D76900000005]
16:00:58.274 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.274 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.274 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D76900000005
16:00:58.274 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:58.274 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:58.274 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.274 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.274 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from the inaccessible pool
16:00:58.274 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.274 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.274 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.274 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.274 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 to the accessible pool
16:00:58.274 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@42e18b85 was in state NOT_ACCESSIBLE, no need to test it
16:00:58.274 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.274 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:58.274 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.274 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.275 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@42e18b85 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D76900000005 : 737072696E672D62746D000001451727D76D00000006]
16:00:58.275 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
16:00:58.276 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 0 -&gt; shardId [1]
16:00:58.276 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -&gt; optionMode [2]
16:00:58.286 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:58.286 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
16:00:58.287 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.287 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@165e079e
16:00:58.287 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.287 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.287 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.287 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.287 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.287 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.287 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.287 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.287 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.287 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.287 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from the accessible pool
16:00:58.287 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.287 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.288 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 to the inaccessible pool
16:00:58.288 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.288 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.288 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:58.288 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:58.288 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:58.288 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
16:00:58.288 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:58.288 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:58.289 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=2, shardId=0, globalCounter=58, optionMode=2}
16:00:58.289 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.289 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:58.289 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:58.289 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D76900000005]
16:00:58.289 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.289 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.289 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D76900000005
16:00:58.289 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:58.289 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:58.289 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.289 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.289 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from the inaccessible pool
16:00:58.289 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.289 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.289 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.289 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.290 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 to the accessible pool
16:00:58.290 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@42e18b85 was in state NOT_ACCESSIBLE, no need to test it
16:00:58.290 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.290 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:00:58.290 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.290 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.290 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@42e18b85 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D76900000005 : 737072696E672D62746D000001451727D76D00000006]
16:00:58.291 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
16:00:58.291 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 0 -&gt; shardId [1]
16:00:58.291 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -&gt; optionMode [2]
16:00:58.299 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:58.299 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
16:00:58.299 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.299 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@165e079e
16:00:58.299 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.299 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.299 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.299 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.299 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.299 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.299 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.299 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.300 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.300 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.300 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from the accessible pool
16:00:58.300 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.300 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.300 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 to the inaccessible pool
16:00:58.300 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.300 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.300 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:58.300 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:58.300 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.300 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.300 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.300 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) scheduled for Mon Mar 31 16:01:58 CST 2014, total task(s) still queued: 4
16:00:58.300 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:58.300 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.300 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.300 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@337004d5
16:00:58.301 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:58.301 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:58.301 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
16:00:58.301 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:58.301 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:58.301 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=2, shardId=0, globalCounter=58, optionMode=2}
16:00:58.301 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.301 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@21c6b5b9
16:00:58.301 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@42e18b85 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D76900000005 : 737072696E672D62746D000001451727D76D00000006]
16:00:58.301 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@42e18b85 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D76900000005 : 737072696E672D62746D000001451727D76D00000006]
16:00:58.301 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@42e18b85 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D76900000005 : 737072696E672D62746D000001451727D76D00000006] with SUCCESS
16:00:58.301 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@42e18b85 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D76900000005 : 737072696E672D62746D000001451727D76D00000006] with SUCCESS
16:00:58.301 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:58.302 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:58.302 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:58.302 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:58.302 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:58.302 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:58.302 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:58.302 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:58.302 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:58.302 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:58.302 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:58.302 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@42e18b85 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D76900000005 : 737072696E672D62746D000001451727D76D00000006] (with one-phase optimization)
16:00:58.315 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@42e18b85 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D76900000005 : 737072696E672D62746D000001451727D76D00000006]
16:00:58.315 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:58.315 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:58.315 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/sharding]
16:00:58.315 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/sharding]
16:00:58.315 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:58.315 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:58.315 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.315 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:58.315 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727D76900000005 : 737072696E672D62746D000001451727D76D00000006] from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.315 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 cleaned up all transaction states for GTRID [737072696E672D62746D000001451727D76900000005]
16:00:58.315 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:58.315 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@337004d5 with status=COMMITTED
16:00:58.315 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:58.315 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
16:00:58.316 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@21c6b5b9 with status=COMMITTED
16:00:58.316 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) with status=COMMITTED
16:00:58.316 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:58.316 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D76900000005], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.316 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 with status=COMMITTED
16:00:58.316 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.316 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.316 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.316 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 from the inaccessible pool
16:00:58.316 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.316 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.316 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85 to the available pool
16:00:58.316 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@42e18b85
16:00:58.316 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:58.316 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)
16:00:58.316 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002]
16:00:58.316 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:58.317 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null
16:00:58.317 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002]
16:00:58.317 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002]
16:00:58.317 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:58.317 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002]
16:00:58.317 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null&gt;
16:00:58.317 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002] with JOIN
16:00:58.317 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002] with JOIN
16:00:58.317 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D4F800000001 : 737072696E672D62746D000001451727D55600000002]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.317 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727D4F800000001] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f, adding it to the resource's transactions list
16:00:58.317 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D4F800000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:57 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:58.317 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973094912, using strategy: org.hibernate.id.Assigned
16:00:58.342 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'PaymentInstrumentServiceImpl.getById' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly; ''
16:00:58.342 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:58.342 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:58.400 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:58.400 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.400 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:58.400 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:58.400 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:58.400 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.400 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727D82000000008]
16:00:58.401 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:58.401 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:58.401 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:58.401 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) for Mon Mar 31 16:01:58 CST 2014
16:00:58.401 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.401 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) scheduled for Mon Mar 31 16:01:58 CST 2014, total task(s) queued: 5
16:00:58.401 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:58 CST 2014
16:00:58.401 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:58.401 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:58.402 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@b0fa475
16:00:58.402 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:58.402 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528584
16:00:58.402 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@2ff602ff
16:00:58.403 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.403 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (3 still available)
16:00:58.403 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (3 still available)
16:00:58.403 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D82000000008]
16:00:58.403 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:58.403 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (3 still available), waiting if necessary
16:00:58.403 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 - closing time: 1396252914350, now time: 1396252858403
16:00:58.403 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.403 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.403 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.403 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.403 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.403 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:58.403 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state IN_POOL, testing it
16:00:58.403 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, skipping test
16:00:58.403 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.403 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.403 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.403 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.403 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@324d7c25 belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.404 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727D82000000008 : 737072696E672D62746D000001451727D82400000009]
16:00:58.404 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727D82000000008 : 737072696E672D62746D000001451727D82400000009]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID null&gt;
16:00:58.404 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID a Bitronix XID [737072696E672D62746D000001451727D82000000008 : 737072696E672D62746D000001451727D82400000009] with NOFLAGS
16:00:58.404 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D82000000008 : 737072696E672D62746D000001451727D82400000009] with NOFLAGS
16:00:58.404 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D82000000008 : 737072696E672D62746D000001451727D82400000009]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.404 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727D82000000008] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, adding it to the resource's transactions list
16:00:58.404 [Test worker] DEBUG org.hibernate.SQL - select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
Hibernate: select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
16:00:58.408 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.408 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:58.408 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.408 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.409 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.409 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.409 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.409 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.409 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.409 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.409 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.409 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.409 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:58.409 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.409 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.409 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:58.409 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.409 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.409 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:58.409 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:58.409 [Test worker] DEBUG o.h.t.DistinctResultTransformer - Transformed: 0 rows to: 0 distinct results
16:00:58.410 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:58.410 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:58.410 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 654344256, using strategy: org.hibernate.id.Assigned
16:00:58.410 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 654344256, using strategy: org.hibernate.id.Assigned
16:00:58.411 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 654344256, using strategy: org.hibernate.id.Assigned
16:00:58.411 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 654344256, using strategy: org.hibernate.id.Assigned
16:00:58.412 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - parse() - HQL: update com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity set is_default = CASE WHEN payment_instrument_id = 654344256 THEN true ELSE false END where user_id = 123
16:00:58.416 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - --- HQL AST ---
 \-[UPDATE] Node: 'update'
    +-[FROM] Node: 'FROM'
    |  \-[RANGE] Node: 'RANGE'
    |     \-[DOT] Node: '.'
    |        +-[DOT] Node: '.'
    |        |  +-[DOT] Node: '.'
    |        |  |  +-[DOT] Node: '.'
    |        |  |  |  +-[DOT] Node: '.'
    |        |  |  |  |  +-[DOT] Node: '.'
    |        |  |  |  |  |  +-[IDENT] Node: 'com'
    |        |  |  |  |  |  \-[IDENT] Node: 'junbo'
    |        |  |  |  |  \-[IDENT] Node: 'payment'
    |        |  |  |  \-[IDENT] Node: 'db'
    |        |  |  \-[IDENT] Node: 'entity'
    |        |  \-[IDENT] Node: 'paymentinstrument'
    |        \-[IDENT] Node: 'PaymentInstrumentEntity'
    +-[SET] Node: 'set'
    |  \-[EQ] Node: '='
    |     +-[IDENT] Node: 'is_default'
    |     \-[CASE] Node: 'CASE'
    |        +-[WHEN] Node: 'WHEN'
    |        |  +-[EQ] Node: '='
    |        |  |  +-[IDENT] Node: 'payment_instrument_id'
    |        |  |  \-[NUM_INT] Node: '654344256'
    |        |  \-[TRUE] Node: 'true'
    |        \-[ELSE] Node: 'ELSE'
    |           \-[FALSE] Node: 'false'
    \-[WHERE] Node: 'where'
       \-[EQ] Node: '='
          +-[IDENT] Node: 'user_id'
          \-[NUM_INT] Node: '123'

16:00:58.417 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:00:58.417 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - update &lt;&lt; begin [level=1, statement=update]
16:00:58.421 [Test worker] DEBUG o.h.h.internal.ast.tree.FromElement - FromClause{level=1} : com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity (&lt;no alias&gt;) -&gt; paymentins0_
16:00:58.427 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - update : finishing up [level=1, statement=update]
16:00:58.428 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - update &gt;&gt; end [level=1, statement=update]
16:00:58.428 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - --- SQL AST ---
 \-[UPDATE] UpdateStatement: 'update'  querySpaces (payment_instrument)
    +-[FROM] FromClause: 'FROM' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[], fromElementByTableAlias=[paymentins0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
    |  \-[FROM_FRAGMENT] FromElement: 'payment_instrument' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=payment_instrument,tableAlias=paymentins0_,origin=null,columns={,className=com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity}}
    +-[SET] SqlNode: 'set'
    |  \-[EQ] BinaryLogicOperatorNode: '='
    |     +-[IDENT] IdentNode: 'is_default' {originalText=is_default}
    |     \-[CASE] CaseNode: 'CASE'
    |        +-[WHEN] SqlNode: 'WHEN'
    |        |  +-[EQ] BinaryLogicOperatorNode: '='
    |        |  |  +-[IDENT] IdentNode: 'payment_instrument_id' {originalText=payment_instrument_id}
    |        |  |  \-[NUM_INT] LiteralNode: '654344256'
    |        |  \-[TRUE] BooleanLiteralNode: 'true'
    |        \-[ELSE] SqlNode: 'ELSE'
    |           \-[FALSE] BooleanLiteralNode: 'false'
    \-[WHERE] SqlNode: 'where'
       \-[EQ] BinaryLogicOperatorNode: '='
          +-[IDENT] IdentNode: 'user_id' {originalText=user_id}
          \-[NUM_INT] LiteralNode: '123'

16:00:58.429 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:00:58.429 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:00:58.429 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:58.430 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:58.431 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
16:00:58.431 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:58.431 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:58.432 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.AddressEntity{createdTime=Mon Mar 31 16:00:58 CST 2014, state=null, addressLine3=null, addressLine2=null, addressLine1=3rd street, updatedBy=null, city=LA, country=US, id=654344256, postalCode=12345, createdBy=null, unitNumber=null, district=null, updatedTime=Mon Mar 31 16:00:58 CST 2014}
16:00:58.432 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PhoneEntity{id=654344256, phoneExtension=null, createdBy=null, areaCode=null, createdTime=Mon Mar 31 16:00:58 CST 2014, number=12345678, type=0, updatedTime=Mon Mar 31 16:00:58 CST 2014, updatedBy=null}
16:00:58.433 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity{prepaid=UNKNOW, createdTime=Mon Mar 31 16:00:58 CST 2014, externalToken=123, type=0, issueCountry=UNKNOW, updatedBy=null, id=654344256, lastBillingDate=Mon Mar 31 16:00:58 CST 2014, createdBy=null, expireDate=2025-11, debit=UNKNOW, commercial=UNKNOW, updatedTime=Mon Mar 31 16:00:58 CST 2014}
16:00:58.434 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity{relationToHolder=null, status=0, createdTime=Mon Mar 31 16:00:58 CST 2014, type=0, accountNum=1111, addressId=654344256, updatedBy=null, lastValidatedTime=Mon Mar 31 16:00:58 CST 2014, id=654344256, accountName=ut, createdBy=null, email=null, isDefault=true, userId=123, phoneId=654344256, encryptedAccountNO=null, updatedTime=Mon Mar 31 16:00:58 CST 2014}
16:00:58.434 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: payment_instrument
16:00:58.435 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.435 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.435 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.435 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D82000000008]
16:00:58.435 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.435 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.436 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D82000000008
16:00:58.436 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:58.436 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.437 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.437 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.437 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:58.437 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.437 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.437 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.437 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.437 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:58.437 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state NOT_ACCESSIBLE, no need to test it
16:00:58.437 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.438 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.438 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.438 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.438 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D82000000008 : 737072696E672D62746D000001451727D82400000009]
16:00:58.439 [Test worker] DEBUG org.hibernate.SQL - insert into address (created_by, created_time, updated_by, updated_time, address_line_1, address_line_2, address_line_3, city, country_code, district, postal_code, state, unit_number, address_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into address (created_by, created_time, updated_by, updated_time, address_line_1, address_line_2, address_line_3, city, country_code, district, postal_code, state, unit_number, address_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:58.440 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:58.442 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:58.442 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.442 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D82000000008 : 737072696E672D62746D000001451727D82400000009]
16:00:58.443 [Test worker] DEBUG org.hibernate.SQL - insert into phone (created_by, created_time, updated_by, updated_time, phone_area_code, phone_local_number, phone_extension, phone_type_id, phone_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into phone (created_by, created_time, updated_by, updated_time, phone_area_code, phone_local_number, phone_extension, phone_type_id, phone_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:58.443 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:58.446 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:58.446 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.446 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D82000000008 : 737072696E672D62746D000001451727D82400000009]
16:00:58.446 [Test worker] DEBUG org.hibernate.SQL - insert into payment_instrument (created_by, created_time, updated_by, updated_time, payment_instrument_holder_name, account_number, address_id, email, encrypted_account_number, is_default, last_validated_time, phone_id, relation_to_holder, status_id, payment_instrument_type_id, user_id, payment_instrument_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_instrument (created_by, created_time, updated_by, updated_time, payment_instrument_holder_name, account_number, address_id, email, encrypted_account_number, is_default, last_validated_time, phone_id, relation_to_holder, status_id, payment_instrument_type_id, user_id, payment_instrument_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:58.447 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:58.451 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:58.451 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.451 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D82000000008 : 737072696E672D62746D000001451727D82400000009]
16:00:58.452 [Test worker] DEBUG org.hibernate.SQL - insert into credit_card_payment_instrument (created_by, created_time, updated_by, updated_time, commercial, debit, expire_time, external_token, issue_country, last_billing_time, prepaid, credit_card_type_id, payment_instrument_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into credit_card_payment_instrument (created_by, created_time, updated_by, updated_time, commercial, debit, expire_time, external_token, issue_country, last_billing_time, prepaid, credit_card_type_id, payment_instrument_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:58.452 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:58.455 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:58.455 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.455 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:58.455 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.455 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.455 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.455 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.455 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.455 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.455 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.455 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.455 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.456 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.456 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:58.456 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.456 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.456 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:58.456 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.456 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.456 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.456 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.456 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.456 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D82000000008]
16:00:58.456 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.456 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.456 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D82000000008
16:00:58.456 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:58.456 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.456 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.457 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.457 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:58.457 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.457 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.457 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.457 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.457 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:58.457 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state NOT_ACCESSIBLE, no need to test it
16:00:58.457 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.457 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.457 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.457 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.457 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D82000000008 : 737072696E672D62746D000001451727D82400000009]
16:00:58.457 [Test worker] DEBUG org.hibernate.SQL - update payment_instrument set is_default=case when payment_instrument_id=654344256 then true else false end where user_id=123
Hibernate: update payment_instrument set is_default=case when payment_instrument_id=654344256 then true else false end where user_id=123
16:00:58.460 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.460 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:58.460 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.460 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.460 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.460 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.460 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.460 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.461 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.461 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.461 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.461 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.461 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:58.461 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.461 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.461 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:58.461 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.461 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.462 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973111296, using strategy: org.hibernate.id.Assigned
16:00:58.463 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:58.463 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.463 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.463 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.463 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) scheduled for Mon Mar 31 16:01:58 CST 2014, total task(s) still queued: 4
16:00:58.463 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:58.463 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.463 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.463 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@b0fa475
16:00:58.463 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:58.463 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:58.464 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 1 insertions, 0 updates, 0 deletions to 5 objects
16:00:58.464 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:58.464 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:58.464 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.AddressEntity{createdTime=Mon Mar 31 16:00:58 CST 2014, state=null, addressLine3=null, addressLine2=null, addressLine1=3rd street, updatedBy=null, city=LA, country=US, id=654344256, postalCode=12345, createdBy=null, unitNumber=null, district=null, updatedTime=Mon Mar 31 16:00:58 CST 2014}
16:00:58.465 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.TrackingUuidEntity{response={&quot;accountName&quot;:&quot;ut&quot;,&quot;accountNum&quot;:&quot;1111&quot;,&quot;address&quot;:{&quot;addressLine1&quot;:&quot;3rd street&quot;,&quot;city&quot;:&quot;LA&quot;,&quot;country&quot;:&quot;US&quot;,&quot;postalCode&quot;:&quot;12345&quot;},&quot;creditCardRequest&quot;:{&quot;commercial&quot;:&quot;UNKNOW&quot;,&quot;debit&quot;:&quot;UNKNOW&quot;,&quot;encryptedCvmCode&quot;:&quot;111&quot;,&quot;expireDate&quot;:&quot;2025-11&quot;,&quot;externalToken&quot;:&quot;123&quot;,&quot;issueCountry&quot;:&quot;UNKNOW&quot;,&quot;lastBillingDate&quot;:1396252858410,&quot;prepaid&quot;:&quot;UNKNOW&quot;,&quot;type&quot;:&quot;VISA&quot;},&quot;id&quot;:{&quot;paymentInstrumentId&quot;:654344256,&quot;primaryId&quot;:654344256,&quot;userId&quot;:123},&quot;isDefault&quot;:&quot;true&quot;,&quot;isValidated&quot;:true,&quot;lastValidatedTime&quot;:1396252858410,&quot;phone&quot;:{&quot;number&quot;:&quot;12345678&quot;,&quot;type&quot;:&quot;Home&quot;},&quot;status&quot;:&quot;ACTIVE&quot;,&quot;trackingUuid&quot;:&quot;debf52cb-a55b-4353-8481-3ac104ea4a57&quot;,&quot;type&quot;:&quot;CREDITCARD&quot;}, id=973111296, createdBy=null, trackingUuid=debf52cb-a55b-4353-8481-3ac104ea4a57, createdTime=Mon Mar 31 16:00:58 CST 2014, paymentId=null, userId=123, api=0, paymentInstrumentId=654344256, updatedTime=Mon Mar 31 16:00:58 CST 2014, updatedBy=null}
16:00:58.465 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PhoneEntity{id=654344256, phoneExtension=null, createdBy=null, areaCode=null, createdTime=Mon Mar 31 16:00:58 CST 2014, number=12345678, type=0, updatedTime=Mon Mar 31 16:00:58 CST 2014, updatedBy=null}
16:00:58.465 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity{prepaid=UNKNOW, createdTime=Mon Mar 31 16:00:58 CST 2014, externalToken=123, type=0, issueCountry=UNKNOW, updatedBy=null, id=654344256, lastBillingDate=Mon Mar 31 16:00:58 CST 2014, createdBy=null, expireDate=2025-11, debit=UNKNOW, commercial=UNKNOW, updatedTime=Mon Mar 31 16:00:58 CST 2014}
16:00:58.465 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity{relationToHolder=null, status=0, createdTime=Mon Mar 31 16:00:58 CST 2014, type=0, accountNum=1111, addressId=654344256, updatedBy=null, lastValidatedTime=Mon Mar 31 16:00:58 CST 2014, id=654344256, accountName=ut, createdBy=null, email=null, isDefault=true, userId=123, phoneId=654344256, encryptedAccountNO=null, updatedTime=Mon Mar 31 16:00:58 CST 2014}
16:00:58.466 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.466 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.466 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.466 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D82000000008]
16:00:58.466 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.466 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.466 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D82000000008
16:00:58.466 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:58.466 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.466 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.466 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.466 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:58.466 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.466 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.466 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.466 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.466 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:58.466 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state NOT_ACCESSIBLE, no need to test it
16:00:58.467 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.467 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.467 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.467 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.467 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D82000000008 : 737072696E672D62746D000001451727D82400000009]
16:00:58.467 [Test worker] DEBUG org.hibernate.SQL - insert into payment_tracking_uuid (created_by, created_time, updated_by, updated_time, api_id, payment_id, payment_instrument_id, response, tracking_uuid, user_id, tracking_uuid_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_tracking_uuid (created_by, created_time, updated_by, updated_time, api_id, payment_id, payment_instrument_id, response, tracking_uuid, user_id, tracking_uuid_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:58.468 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:58.469 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:58.470 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.470 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:58.470 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.470 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.470 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.470 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.470 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.470 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.470 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.470 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.470 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.470 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.471 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:58.471 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.471 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.471 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:58.471 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.471 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.471 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@2ff602ff
16:00:58.471 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D82000000008 : 737072696E672D62746D000001451727D82400000009]
16:00:58.471 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D82000000008 : 737072696E672D62746D000001451727D82400000009]
16:00:58.471 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D82000000008 : 737072696E672D62746D000001451727D82400000009] with SUCCESS
16:00:58.471 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D82000000008 : 737072696E672D62746D000001451727D82400000009] with SUCCESS
16:00:58.471 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:58.471 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:58.471 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:58.471 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:58.471 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:58.471 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:58.472 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:58.472 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:58.472 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:58.472 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:58.472 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:58.472 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D82000000008 : 737072696E672D62746D000001451727D82400000009] (with one-phase optimization)
16:00:58.473 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D82000000008 : 737072696E672D62746D000001451727D82400000009]
16:00:58.473 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:58.473 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:58.473 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:58.473 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:58.473 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:58.473 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:58.473 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.473 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:58.473 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727D82000000008 : 737072696E672D62746D000001451727D82400000009] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.474 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 cleaned up all transaction states for GTRID [737072696E672D62746D000001451727D82000000008]
16:00:58.474 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:58.474 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@b0fa475 with status=COMMITTED
16:00:58.474 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:58.474 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
16:00:58.474 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@2ff602ff with status=COMMITTED
16:00:58.475 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) with status=COMMITTED
16:00:58.475 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:58.475 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D82000000008], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.475 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 with status=COMMITTED
16:00:58.475 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.475 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.475 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.475 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:58.475 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.475 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.475 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the available pool
16:00:58.475 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.475 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:58.475 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.475 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:58.476 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'PaymentTransactionServiceImpl.authorize' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
16:00:58.477 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:58.477 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:58.477 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:58.477 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:58.477 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@59d559f3
16:00:58.477 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:58.477 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528584
16:00:58.477 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@552dc111
16:00:58.478 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654344256]
16:00:58.478 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.478 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (3 still available)
16:00:58.478 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (3 still available)
16:00:58.478 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D80F00000007]
16:00:58.478 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:58.478 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (3 still available), waiting if necessary
16:00:58.478 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef - closing time: 1396252915560, now time: 1396252858478
16:00:58.478 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.478 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.478 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.478 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.478 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.478 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the accessible pool
16:00:58.478 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7d117aef was in state IN_POOL, testing it
16:00:58.478 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef, skipping test
16:00:58.478 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.478 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.478 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.478 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.479 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@7d117aef belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.479 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.479 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null&gt;
16:00:58.479 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with NOFLAGS
16:00:58.479 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with NOFLAGS
16:00:58.479 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.479 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727D80F00000007] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef, adding it to the resource's transactions list
16:00:58.479 [Test worker] DEBUG org.hibernate.SQL - select paymentins0_.payment_instrument_id as payment1_10_0_, paymentins0_.created_by as created2_10_0_, paymentins0_.created_time as created3_10_0_, paymentins0_.updated_by as updated4_10_0_, paymentins0_.updated_time as updated5_10_0_, paymentins0_.payment_instrument_holder_name as payment6_10_0_, paymentins0_.account_number as account7_10_0_, paymentins0_.address_id as address8_10_0_, paymentins0_.email as email10_0_, paymentins0_.encrypted_account_number as encrypted10_10_0_, paymentins0_.is_default as is11_10_0_, paymentins0_.last_validated_time as last12_10_0_, paymentins0_.phone_id as phone13_10_0_, paymentins0_.relation_to_holder as relation14_10_0_, paymentins0_.status_id as status15_10_0_, paymentins0_.payment_instrument_type_id as payment16_10_0_, paymentins0_.user_id as user17_10_0_ from payment_instrument paymentins0_ where paymentins0_.payment_instrument_id=?
Hibernate: select paymentins0_.payment_instrument_id as payment1_10_0_, paymentins0_.created_by as created2_10_0_, paymentins0_.created_time as created3_10_0_, paymentins0_.updated_by as updated4_10_0_, paymentins0_.updated_time as updated5_10_0_, paymentins0_.payment_instrument_holder_name as payment6_10_0_, paymentins0_.account_number as account7_10_0_, paymentins0_.address_id as address8_10_0_, paymentins0_.email as email10_0_, paymentins0_.encrypted_account_number as encrypted10_10_0_, paymentins0_.is_default as is11_10_0_, paymentins0_.last_validated_time as last12_10_0_, paymentins0_.phone_id as phone13_10_0_, paymentins0_.relation_to_holder as relation14_10_0_, paymentins0_.status_id as status15_10_0_, paymentins0_.payment_instrument_type_id as payment16_10_0_, paymentins0_.user_id as user17_10_0_ from payment_instrument paymentins0_ where paymentins0_.payment_instrument_id=?
16:00:58.482 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:58.483 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654344256]
16:00:58.488 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.488 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@305b8340
16:00:58.488 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.488 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.488 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.489 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.489 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.489 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.489 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.489 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.489 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.489 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.489 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the accessible pool
16:00:58.489 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.489 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.489 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the inaccessible pool
16:00:58.489 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.489 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.489 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:58.490 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654344256]
16:00:58.490 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654344256]
16:00:58.490 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:58.490 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:58.490 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.paymentinstrument.AddressEntity#654344256]
16:00:58.490 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.490 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.490 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.490 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D80F00000007]
16:00:58.491 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.491 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.491 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D80F00000007
16:00:58.491 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:58.491 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.491 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.491 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.491 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the inaccessible pool
16:00:58.491 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.491 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.491 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.491 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.491 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the accessible pool
16:00:58.491 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7d117aef was in state NOT_ACCESSIBLE, no need to test it
16:00:58.491 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.491 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.491 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.491 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.491 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.492 [Test worker] DEBUG org.hibernate.SQL - select addressent0_.address_id as address1_8_0_, addressent0_.created_by as created2_8_0_, addressent0_.created_time as created3_8_0_, addressent0_.updated_by as updated4_8_0_, addressent0_.updated_time as updated5_8_0_, addressent0_.address_line_1 as address6_8_0_, addressent0_.address_line_2 as address7_8_0_, addressent0_.address_line_3 as address8_8_0_, addressent0_.city as city8_0_, addressent0_.country_code as country10_8_0_, addressent0_.district as district8_0_, addressent0_.postal_code as postal12_8_0_, addressent0_.state as state8_0_, addressent0_.unit_number as unit14_8_0_ from address addressent0_ where addressent0_.address_id=?
Hibernate: select addressent0_.address_id as address1_8_0_, addressent0_.created_by as created2_8_0_, addressent0_.created_time as created3_8_0_, addressent0_.updated_by as updated4_8_0_, addressent0_.updated_time as updated5_8_0_, addressent0_.address_line_1 as address6_8_0_, addressent0_.address_line_2 as address7_8_0_, addressent0_.address_line_3 as address8_8_0_, addressent0_.city as city8_0_, addressent0_.country_code as country10_8_0_, addressent0_.district as district8_0_, addressent0_.postal_code as postal12_8_0_, addressent0_.state as state8_0_, addressent0_.unit_number as unit14_8_0_ from address addressent0_ where addressent0_.address_id=?
16:00:58.494 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:58.494 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.paymentinstrument.AddressEntity#654344256]
16:00:58.495 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.495 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@305b8340
16:00:58.495 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.495 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.495 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.495 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.495 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.495 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.495 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.495 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.495 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.495 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.495 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the accessible pool
16:00:58.496 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.496 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.496 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the inaccessible pool
16:00:58.496 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.496 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.496 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.paymentinstrument.AddressEntity#654344256]
16:00:58.496 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.paymentinstrument.AddressEntity#654344256]
16:00:58.496 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:58.496 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:58.496 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.paymentinstrument.PhoneEntity#654344256]
16:00:58.496 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.496 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.497 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.497 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D80F00000007]
16:00:58.497 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.497 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.497 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D80F00000007
16:00:58.497 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:58.497 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.497 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.497 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.497 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the inaccessible pool
16:00:58.497 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.497 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.497 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.497 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.497 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the accessible pool
16:00:58.497 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7d117aef was in state NOT_ACCESSIBLE, no need to test it
16:00:58.497 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.497 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.497 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.498 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.498 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.498 [Test worker] DEBUG org.hibernate.SQL - select phoneentit0_.phone_id as phone1_11_0_, phoneentit0_.created_by as created2_11_0_, phoneentit0_.created_time as created3_11_0_, phoneentit0_.updated_by as updated4_11_0_, phoneentit0_.updated_time as updated5_11_0_, phoneentit0_.phone_area_code as phone6_11_0_, phoneentit0_.phone_local_number as phone7_11_0_, phoneentit0_.phone_extension as phone8_11_0_, phoneentit0_.phone_type_id as phone9_11_0_ from phone phoneentit0_ where phoneentit0_.phone_id=?
Hibernate: select phoneentit0_.phone_id as phone1_11_0_, phoneentit0_.created_by as created2_11_0_, phoneentit0_.created_time as created3_11_0_, phoneentit0_.updated_by as updated4_11_0_, phoneentit0_.updated_time as updated5_11_0_, phoneentit0_.phone_area_code as phone6_11_0_, phoneentit0_.phone_local_number as phone7_11_0_, phoneentit0_.phone_extension as phone8_11_0_, phoneentit0_.phone_type_id as phone9_11_0_ from phone phoneentit0_ where phoneentit0_.phone_id=?
16:00:58.500 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:58.501 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.paymentinstrument.PhoneEntity#654344256]
16:00:58.501 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.501 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@305b8340
16:00:58.501 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.501 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.501 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.501 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.502 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.502 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.502 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.502 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.502 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.502 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.502 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the accessible pool
16:00:58.502 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.502 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.502 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the inaccessible pool
16:00:58.502 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.502 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.502 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.paymentinstrument.PhoneEntity#654344256]
16:00:58.502 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.paymentinstrument.PhoneEntity#654344256]
16:00:58.503 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:58.503 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:58.503 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity#654344256]
16:00:58.503 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.503 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.503 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.503 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D80F00000007]
16:00:58.503 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.503 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.504 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D80F00000007
16:00:58.504 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:58.504 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.504 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.504 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.504 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the inaccessible pool
16:00:58.504 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.504 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.504 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.504 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.504 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the accessible pool
16:00:58.504 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7d117aef was in state NOT_ACCESSIBLE, no need to test it
16:00:58.504 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.504 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.504 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.505 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.505 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.505 [Test worker] DEBUG org.hibernate.SQL - select creditcard0_.payment_instrument_id as payment1_9_0_, creditcard0_.created_by as created2_9_0_, creditcard0_.created_time as created3_9_0_, creditcard0_.updated_by as updated4_9_0_, creditcard0_.updated_time as updated5_9_0_, creditcard0_.commercial as commercial9_0_, creditcard0_.debit as debit9_0_, creditcard0_.expire_time as expire8_9_0_, creditcard0_.external_token as external9_9_0_, creditcard0_.issue_country as issue10_9_0_, creditcard0_.last_billing_time as last11_9_0_, creditcard0_.prepaid as prepaid9_0_, creditcard0_.credit_card_type_id as credit13_9_0_ from credit_card_payment_instrument creditcard0_ where creditcard0_.payment_instrument_id=?
Hibernate: select creditcard0_.payment_instrument_id as payment1_9_0_, creditcard0_.created_by as created2_9_0_, creditcard0_.created_time as created3_9_0_, creditcard0_.updated_by as updated4_9_0_, creditcard0_.updated_time as updated5_9_0_, creditcard0_.commercial as commercial9_0_, creditcard0_.debit as debit9_0_, creditcard0_.expire_time as expire8_9_0_, creditcard0_.external_token as external9_9_0_, creditcard0_.issue_country as issue10_9_0_, creditcard0_.last_billing_time as last11_9_0_, creditcard0_.prepaid as prepaid9_0_, creditcard0_.credit_card_type_id as credit13_9_0_ from credit_card_payment_instrument creditcard0_ where creditcard0_.payment_instrument_id=?
16:00:58.507 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:58.507 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity#654344256]
16:00:58.508 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.508 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@305b8340
16:00:58.508 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.508 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.508 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.508 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.509 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.509 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.509 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.509 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.509 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.509 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.509 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the accessible pool
16:00:58.509 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.509 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.509 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the inaccessible pool
16:00:58.509 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.509 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.509 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity#654344256]
16:00:58.509 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity#654344256]
16:00:58.509 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:58.509 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:58.510 [Test worker] INFO  c.j.p.c.i.PaymentTransactionServiceImpl - authorize for PI:com.junbo.payment.spec.model.PIId@db020ad
16:00:58.510 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:58.511 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.511 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.511 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with SUCCESS
16:00:58.511 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with SUCCESS
16:00:58.511 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:58.511 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:58.511 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:58.511 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.511 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727D88F0000000B]
16:00:58.511 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D88F0000000B], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:58.511 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:58.511 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:58.511 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D88F0000000B], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) for Mon Mar 31 16:01:58 CST 2014
16:00:58.511 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D88F0000000B], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.511 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D88F0000000B], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) scheduled for Mon Mar 31 16:01:58 CST 2014, total task(s) queued: 5
16:00:58.512 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:58 CST 2014
16:00:58.512 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@78897c9f
16:00:58.512 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:58.512 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528585
16:00:58.512 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@29a749f3
16:00:58.513 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.513 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.513 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.513 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D88F0000000B]
16:00:58.513 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.513 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.513 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:58.513 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available), waiting if necessary
16:00:58.513 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f - closing time: 1396252918377, now time: 1396252858513
16:00:58.513 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.513 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.513 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.513 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.514 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.514 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:00:58.514 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state IN_POOL, testing it
16:00:58.514 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f, skipping test
16:00:58.514 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.514 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.514 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.514 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D88F0000000B], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.514 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@69e210f belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.514 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727D88F0000000B : 737072696E672D62746D000001451727D8920000000C]
16:00:58.514 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727D88F0000000B : 737072696E672D62746D000001451727D8920000000C]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null&gt;
16:00:58.514 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID a Bitronix XID [737072696E672D62746D000001451727D88F0000000B : 737072696E672D62746D000001451727D8920000000C] with NOFLAGS
16:00:58.514 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D88F0000000B : 737072696E672D62746D000001451727D8920000000C] with NOFLAGS
16:00:58.514 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D88F0000000B : 737072696E672D62746D000001451727D8920000000C]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.514 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727D88F0000000B] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f, adding it to the resource's transactions list
16:00:58.515 [Test worker] DEBUG org.hibernate.SQL - select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
Hibernate: select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
16:00:58.516 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.516 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:00:58.516 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.516 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D88F0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.516 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.516 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D88F0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.516 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.516 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.516 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D88F0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.517 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.517 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.517 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.517 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:00:58.517 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.517 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.517 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:00:58.517 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.517 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.517 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:58.517 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:58.517 [Test worker] DEBUG o.h.t.DistinctResultTransformer - Transformed: 0 rows to: 0 distinct results
16:00:58.517 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:58.517 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D88F0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.517 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D88F0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.517 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D88F0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.518 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D88F0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) scheduled for Mon Mar 31 16:01:58 CST 2014, total task(s) still queued: 4
16:00:58.518 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:58.518 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.518 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D88F0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.518 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@78897c9f
16:00:58.518 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@29a749f3
16:00:58.518 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D88F0000000B : 737072696E672D62746D000001451727D8920000000C]
16:00:58.518 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D88F0000000B : 737072696E672D62746D000001451727D8920000000C]
16:00:58.518 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D88F0000000B : 737072696E672D62746D000001451727D8920000000C] with SUCCESS
16:00:58.518 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D88F0000000B : 737072696E672D62746D000001451727D8920000000C] with SUCCESS
16:00:58.518 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:58.518 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:58.518 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:58.518 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:58.518 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:58.518 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:58.518 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:58.518 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:58.518 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:58.519 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:58.519 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:58.519 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D88F0000000B : 737072696E672D62746D000001451727D8920000000C] (with one-phase optimization)
16:00:58.519 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D88F0000000B : 737072696E672D62746D000001451727D8920000000C]
16:00:58.519 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:58.519 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:58.519 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:58.519 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:58.519 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:58.519 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:58.519 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D88F0000000B], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.519 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:58.519 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727D88F0000000B : 737072696E672D62746D000001451727D8920000000C] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.519 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f cleaned up all transaction states for GTRID [737072696E672D62746D000001451727D88F0000000B]
16:00:58.519 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:58.520 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@78897c9f with status=COMMITTED
16:00:58.520 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:58.520 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@29a749f3 with status=COMMITTED
16:00:58.520 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D88F0000000B], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) with status=COMMITTED
16:00:58.520 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D88F0000000B], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:58.520 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D88F0000000B], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.520 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f with status=COMMITTED
16:00:58.520 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.520 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.520 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.520 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the inaccessible pool
16:00:58.520 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.520 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.520 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the available pool
16:00:58.520 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.521 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:58.521 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.521 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.521 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:58.521 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null
16:00:58.521 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.521 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.521 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:58.521 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.521 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null&gt;
16:00:58.521 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with JOIN
16:00:58.521 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with JOIN
16:00:58.521 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.521 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727D80F00000007] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef, adding it to the resource's transactions list
16:00:58.521 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:58.522 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:58.522 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:58.523 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - parse() - HQL: from com.junbo.payment.db.entity.payment.PaymentProviderEntity
16:00:58.525 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - --- HQL AST ---
 \-[QUERY] Node: 'query'
    \-[SELECT_FROM] Node: 'SELECT_FROM'
       \-[FROM] Node: 'from'
          \-[RANGE] Node: 'RANGE'
             \-[DOT] Node: '.'
                +-[DOT] Node: '.'
                |  +-[DOT] Node: '.'
                |  |  +-[DOT] Node: '.'
                |  |  |  +-[DOT] Node: '.'
                |  |  |  |  +-[DOT] Node: '.'
                |  |  |  |  |  +-[IDENT] Node: 'com'
                |  |  |  |  |  \-[IDENT] Node: 'junbo'
                |  |  |  |  \-[IDENT] Node: 'payment'
                |  |  |  \-[IDENT] Node: 'db'
                |  |  \-[IDENT] Node: 'entity'
                |  \-[IDENT] Node: 'payment'
                \-[IDENT] Node: 'PaymentProviderEntity'

16:00:58.526 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:00:58.529 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - select &lt;&lt; begin [level=1, statement=select]
16:00:58.531 [Test worker] DEBUG o.h.h.internal.ast.tree.FromElement - FromClause{level=1} : com.junbo.payment.db.entity.payment.PaymentProviderEntity (&lt;no alias&gt;) -&gt; paymentpro0_
16:00:58.531 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - select : finishing up [level=1, statement=select]
16:00:58.532 [Test worker] DEBUG o.h.hql.internal.ast.HqlSqlWalker - processQuery() :  ( SELECT ( FromClause{level=1} payment_provider paymentpro0_ ) )
16:00:58.536 [Test worker] DEBUG o.h.hql.internal.ast.HqlSqlWalker - Derived SELECT clause created.
16:00:58.550 [Test worker] DEBUG o.h.h.i.ast.util.JoinProcessor - Using FROM fragment [payment_provider paymentpro0_]
16:00:58.551 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - select &gt;&gt; end [level=1, statement=select]
16:00:58.552 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (payment_provider)
    +-[SELECT_CLAUSE] SelectClause: '{derived select clause}'
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'paymentpro0_.payment_provider_id as payment1_7_' {FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=payment_provider,tableAlias=paymentpro0_,origin=null,columns={,className=com.junbo.payment.db.entity.payment.PaymentProviderEntity}}}
    |  \-[SQL_TOKEN] SqlFragment: 'paymentpro0_.country_code as country2_7_, paymentpro0_.created_by as created3_7_, paymentpro0_.created_time as created4_7_, paymentpro0_.currency_code as currency5_7_, paymentpro0_.payment_instrument_type_id as payment6_7_, paymentpro0_.payment_provider_name as payment7_7_'
    \-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[], fromElementByTableAlias=[paymentpro0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
       \-[FROM_FRAGMENT] FromElement: 'payment_provider paymentpro0_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=payment_provider,tableAlias=paymentpro0_,origin=null,columns={,className=com.junbo.payment.db.entity.payment.PaymentProviderEntity}}

16:00:58.554 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:00:58.556 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - HQL: from com.junbo.payment.db.entity.payment.PaymentProviderEntity
16:00:58.557 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - SQL: select paymentpro0_.payment_provider_id as payment1_7_, paymentpro0_.country_code as country2_7_, paymentpro0_.created_by as created3_7_, paymentpro0_.created_time as created4_7_, paymentpro0_.currency_code as currency5_7_, paymentpro0_.payment_instrument_type_id as payment6_7_, paymentpro0_.payment_provider_name as payment7_7_ from payment_provider paymentpro0_
16:00:58.558 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:00:58.561 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:58.561 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:58.561 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 4 objects
16:00:58.562 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:58.562 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:58.562 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.AddressEntity{createdTime=2014-03-31 00:00:00.0, state=null, addressLine3=null, addressLine2=null, addressLine1=3rd street, updatedBy=null, city=LA, country=US , id=654344256, postalCode=12345, createdBy=null, unitNumber=null, district=null, updatedTime=2014-03-31 00:00:00.0}
16:00:58.562 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PhoneEntity{id=654344256, phoneExtension=null, createdBy=null, areaCode=null, createdTime=2014-03-31 00:00:00.0, number=12345678, type=0, updatedTime=2014-03-31 00:00:00.0, updatedBy=null}
16:00:58.562 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity{prepaid=UNKNOW, createdTime=2014-03-31 00:00:00.0, externalToken=123, type=0, issueCountry=UNKNOW, updatedBy=null, id=654344256, lastBillingDate=2014-03-31 00:00:00.0, createdBy=null, expireDate=2025-11, debit=UNKNOW, commercial=UNKNOW, updatedTime=2014-03-31 00:00:00.0}
16:00:58.566 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity{relationToHolder=null, status=0, createdTime=2014-03-31 00:00:00.0, type=0, accountNum=1111, addressId=654344256, updatedBy=null, lastValidatedTime=2014-03-31 00:00:00.0, id=654344256, accountName=ut, createdBy=null, email=null, isDefault=true, userId=123, phoneId=654344256, encryptedAccountNO=null, updatedTime=2014-03-31 00:00:00.0}
16:00:58.568 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.568 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.568 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.568 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D80F00000007]
16:00:58.568 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.568 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.569 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D80F00000007
16:00:58.569 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:58.569 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.569 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.569 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.570 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the inaccessible pool
16:00:58.570 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.570 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.570 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.571 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.571 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the accessible pool
16:00:58.571 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7d117aef was in state NOT_ACCESSIBLE, no need to test it
16:00:58.571 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.571 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.571 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.571 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.573 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.574 [Test worker] DEBUG org.hibernate.SQL - select paymentpro0_.payment_provider_id as payment1_7_, paymentpro0_.country_code as country2_7_, paymentpro0_.created_by as created3_7_, paymentpro0_.created_time as created4_7_, paymentpro0_.currency_code as currency5_7_, paymentpro0_.payment_instrument_type_id as payment6_7_, paymentpro0_.payment_provider_name as payment7_7_ from payment_provider paymentpro0_
Hibernate: select paymentpro0_.payment_provider_id as payment1_7_, paymentpro0_.country_code as country2_7_, paymentpro0_.created_by as created3_7_, paymentpro0_.created_time as created4_7_, paymentpro0_.currency_code as currency5_7_, paymentpro0_.payment_instrument_type_id as payment6_7_, paymentpro0_.payment_provider_name as payment7_7_ from payment_provider paymentpro0_
16:00:58.578 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:58.579 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentProviderEntity#0]
16:00:58.580 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.580 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@305b8340
16:00:58.580 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.580 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.580 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.581 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.581 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.581 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.581 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.581 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.581 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.581 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.581 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the accessible pool
16:00:58.581 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.581 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.581 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the inaccessible pool
16:00:58.581 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.581 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.582 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentProviderEntity#0]
16:00:58.582 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentProviderEntity#0]
16:00:58.582 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:58.584 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - parse() - HQL: from com.junbo.payment.db.entity.payment.MerchantAccountEntity
16:00:58.587 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - --- HQL AST ---
 \-[QUERY] Node: 'query'
    \-[SELECT_FROM] Node: 'SELECT_FROM'
       \-[FROM] Node: 'from'
          \-[RANGE] Node: 'RANGE'
             \-[DOT] Node: '.'
                +-[DOT] Node: '.'
                |  +-[DOT] Node: '.'
                |  |  +-[DOT] Node: '.'
                |  |  |  +-[DOT] Node: '.'
                |  |  |  |  +-[DOT] Node: '.'
                |  |  |  |  |  +-[IDENT] Node: 'com'
                |  |  |  |  |  \-[IDENT] Node: 'junbo'
                |  |  |  |  \-[IDENT] Node: 'payment'
                |  |  |  \-[IDENT] Node: 'db'
                |  |  \-[IDENT] Node: 'entity'
                |  \-[IDENT] Node: 'payment'
                \-[IDENT] Node: 'MerchantAccountEntity'

16:00:58.588 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:00:58.588 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - select &lt;&lt; begin [level=1, statement=select]
16:00:58.589 [Test worker] DEBUG o.h.h.internal.ast.tree.FromElement - FromClause{level=1} : com.junbo.payment.db.entity.payment.MerchantAccountEntity (&lt;no alias&gt;) -&gt; merchantac0_
16:00:58.590 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - select : finishing up [level=1, statement=select]
16:00:58.590 [Test worker] DEBUG o.h.hql.internal.ast.HqlSqlWalker - processQuery() :  ( SELECT ( FromClause{level=1} merchant_account merchantac0_ ) )
16:00:58.591 [Test worker] DEBUG o.h.hql.internal.ast.HqlSqlWalker - Derived SELECT clause created.
16:00:58.591 [Test worker] DEBUG o.h.h.i.ast.util.JoinProcessor - Using FROM fragment [merchant_account merchantac0_]
16:00:58.591 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - select &gt;&gt; end [level=1, statement=select]
16:00:58.593 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (merchant_account)
    +-[SELECT_CLAUSE] SelectClause: '{derived select clause}'
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'merchantac0_.merchant_account_id as merchant1_4_' {FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=merchant_account,tableAlias=merchantac0_,origin=null,columns={,className=com.junbo.payment.db.entity.payment.MerchantAccountEntity}}}
    |  \-[SQL_TOKEN] SqlFragment: 'merchantac0_.country_code as country2_4_, merchantac0_.created_by as created3_4_, merchantac0_.created_time as created4_4_, merchantac0_.currency_code as currency5_4_, merchantac0_.merchant_account_ref as merchant6_4_, merchantac0_.payment_provider_id as payment7_4_, merchantac0_.payment_instrument_type_id as payment8_4_, merchantac0_.tenant_id as tenant9_4_'
    \-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[], fromElementByTableAlias=[merchantac0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
       \-[FROM_FRAGMENT] FromElement: 'merchant_account merchantac0_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=merchant_account,tableAlias=merchantac0_,origin=null,columns={,className=com.junbo.payment.db.entity.payment.MerchantAccountEntity}}

16:00:58.593 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:00:58.593 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - HQL: from com.junbo.payment.db.entity.payment.MerchantAccountEntity
16:00:58.593 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - SQL: select merchantac0_.merchant_account_id as merchant1_4_, merchantac0_.country_code as country2_4_, merchantac0_.created_by as created3_4_, merchantac0_.created_time as created4_4_, merchantac0_.currency_code as currency5_4_, merchantac0_.merchant_account_ref as merchant6_4_, merchantac0_.payment_provider_id as payment7_4_, merchantac0_.payment_instrument_type_id as payment8_4_, merchantac0_.tenant_id as tenant9_4_ from merchant_account merchantac0_
16:00:58.593 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:00:58.594 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:58.594 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:58.594 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 5 objects
16:00:58.594 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:58.594 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:58.595 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.AddressEntity{createdTime=2014-03-31 00:00:00.0, state=null, addressLine3=null, addressLine2=null, addressLine1=3rd street, updatedBy=null, city=LA, country=US , id=654344256, postalCode=12345, createdBy=null, unitNumber=null, district=null, updatedTime=2014-03-31 00:00:00.0}
16:00:58.595 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PhoneEntity{id=654344256, phoneExtension=null, createdBy=null, areaCode=null, createdTime=2014-03-31 00:00:00.0, number=12345678, type=0, updatedTime=2014-03-31 00:00:00.0, updatedBy=null}
16:00:58.595 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentProviderEntity{id=0, piType=0, createdBy=wenhongzhu, providerName=BrainTree, createdTime=2014-02-10 00:00:00.0, countryCode=null, currency=USD}
16:00:58.595 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity{prepaid=UNKNOW, createdTime=2014-03-31 00:00:00.0, externalToken=123, type=0, issueCountry=UNKNOW, updatedBy=null, id=654344256, lastBillingDate=2014-03-31 00:00:00.0, createdBy=null, expireDate=2025-11, debit=UNKNOW, commercial=UNKNOW, updatedTime=2014-03-31 00:00:00.0}
16:00:58.595 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity{relationToHolder=null, status=0, createdTime=2014-03-31 00:00:00.0, type=0, accountNum=1111, addressId=654344256, updatedBy=null, lastValidatedTime=2014-03-31 00:00:00.0, id=654344256, accountName=ut, createdBy=null, email=null, isDefault=true, userId=123, phoneId=654344256, encryptedAccountNO=null, updatedTime=2014-03-31 00:00:00.0}
16:00:58.597 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.597 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.597 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.597 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D80F00000007]
16:00:58.597 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.597 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.597 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D80F00000007
16:00:58.597 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:58.597 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.597 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.597 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.597 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the inaccessible pool
16:00:58.597 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.597 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.597 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.597 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.598 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the accessible pool
16:00:58.598 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7d117aef was in state NOT_ACCESSIBLE, no need to test it
16:00:58.598 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.598 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.598 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.598 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.598 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.598 [Test worker] DEBUG org.hibernate.SQL - select merchantac0_.merchant_account_id as merchant1_4_, merchantac0_.country_code as country2_4_, merchantac0_.created_by as created3_4_, merchantac0_.created_time as created4_4_, merchantac0_.currency_code as currency5_4_, merchantac0_.merchant_account_ref as merchant6_4_, merchantac0_.payment_provider_id as payment7_4_, merchantac0_.payment_instrument_type_id as payment8_4_, merchantac0_.tenant_id as tenant9_4_ from merchant_account merchantac0_
Hibernate: select merchantac0_.merchant_account_id as merchant1_4_, merchantac0_.country_code as country2_4_, merchantac0_.created_by as created3_4_, merchantac0_.created_time as created4_4_, merchantac0_.currency_code as currency5_4_, merchantac0_.merchant_account_ref as merchant6_4_, merchantac0_.payment_provider_id as payment7_4_, merchantac0_.payment_instrument_type_id as payment8_4_, merchantac0_.tenant_id as tenant9_4_ from merchant_account merchantac0_
16:00:58.601 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:58.601 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.MerchantAccountEntity#0]
16:00:58.601 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 1
16:00:58.602 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.MerchantAccountEntity#1]
16:00:58.602 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.602 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@305b8340
16:00:58.602 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.602 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.602 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.602 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.602 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.602 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.602 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.603 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.603 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.603 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.603 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the accessible pool
16:00:58.603 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.603 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.603 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the inaccessible pool
16:00:58.603 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.603 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.603 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.MerchantAccountEntity#0]
16:00:58.603 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.MerchantAccountEntity#0]
16:00:58.603 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.MerchantAccountEntity#1]
16:00:58.604 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.MerchantAccountEntity#1]
16:00:58.604 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:58.626 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementUnregisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D000001451727D4F800000001
16:00:58.626 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D000001451727D80F00000007
16:00:58.636 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:58.636 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.636 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.636 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with SUCCESS
16:00:58.636 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with SUCCESS
16:00:58.636 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:58.636 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:58.637 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:58.637 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.637 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727D90D0000000D]
16:00:58.637 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D90D0000000D], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:58.637 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:58.637 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:58.637 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D90D0000000D], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) for Mon Mar 31 16:01:58 CST 2014
16:00:58.637 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D90D0000000D], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.637 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D90D0000000D], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) scheduled for Mon Mar 31 16:01:58 CST 2014, total task(s) queued: 5
16:00:58.637 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:58 CST 2014
16:00:58.639 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@58776060
16:00:58.640 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:58.640 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528586
16:00:58.640 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@701a76bd
16:00:58.640 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973127680, using strategy: org.hibernate.id.Assigned
16:00:58.641 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973144064, using strategy: org.hibernate.id.Assigned
16:00:58.641 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:58.641 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D90D0000000D], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.641 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D90D0000000D], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.641 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D90D0000000D], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.641 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D90D0000000D], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) scheduled for Mon Mar 31 16:01:58 CST 2014, total task(s) still queued: 4
16:00:58.641 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 3 synchronization(s) to execute
16:00:58.641 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D90D0000000D], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.641 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@58776060
16:00:58.641 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:58.641 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:58.642 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 2 objects
16:00:58.642 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:58.642 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:58.642 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEventEntity{response={&quot;result&quot;: &quot;OK&quot;}, id=973144064, createdBy=null, status=0, createdTime=Mon Mar 31 16:00:58 CST 2014, paymentId=973127680, request={&quot;billingRefId&quot;:&quot;123&quot;,&quot;chargeInfo&quot;:{&quot;amount&quot;:100,&quot;businessDescriptor&quot;:&quot;ut&quot;,&quot;currency&quot;:&quot;USD&quot;},&quot;paymentInstrumentId&quot;:{&quot;paymentInstrumentId&quot;:654344256,&quot;primaryId&quot;:654344256,&quot;userId&quot;:123},&quot;trackingUuid&quot;:&quot;9c68a85e-49b4-4204-9fd8-01f72bdf867b&quot;,&quot;userId&quot;:123}, type=0, updatedTime=Mon Mar 31 16:00:58 CST 2014, netAmount=100, currency=USD, updatedBy=null}
16:00:58.642 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEntity{paymentProviderId=0, status=0, createdTime=Mon Mar 31 16:00:58 CST 2014, externalToken=null, countryCode=null, merchantAccountId=0, businessDescriptor=ut, type=0, billingRefId=123, updatedBy=null, currency=USD, id=973127680, createdBy=null, userId=123, paymentInstrumentId=654344256, updatedTime=Mon Mar 31 16:00:58 CST 2014, netAmount=100}
16:00:58.650 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.650 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.650 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.650 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D90D0000000D]
16:00:58.650 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.650 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.650 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:58.651 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available), waiting if necessary
16:00:58.651 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 - closing time: 1396252918475, now time: 1396252858651
16:00:58.651 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.652 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.652 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.652 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.652 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.652 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:58.652 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state IN_POOL, testing it
16:00:58.652 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, skipping test
16:00:58.652 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.652 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.652 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.652 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D90D0000000D], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.652 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@324d7c25 belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.652 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727D90D0000000D : 737072696E672D62746D000001451727D91C0000000E]
16:00:58.652 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727D90D0000000D : 737072696E672D62746D000001451727D91C0000000E]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID null&gt;
16:00:58.652 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID a Bitronix XID [737072696E672D62746D000001451727D90D0000000D : 737072696E672D62746D000001451727D91C0000000E] with NOFLAGS
16:00:58.652 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D90D0000000D : 737072696E672D62746D000001451727D91C0000000E] with NOFLAGS
16:00:58.652 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D90D0000000D : 737072696E672D62746D000001451727D91C0000000E]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.653 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727D90D0000000D] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, adding it to the resource's transactions list
16:00:58.653 [Test worker] DEBUG org.hibernate.SQL - insert into payment (created_by, created_time, updated_by, updated_time, billing_ref_id, business_descriptor, country_code, currency_code, external_token, merchant_account_id, net_amount, payment_instrument_id, payment_provider_id, payment_status_id, payment_type_id, user_id, payment_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment (created_by, created_time, updated_by, updated_time, billing_ref_id, business_descriptor, country_code, currency_code, external_token, merchant_account_id, net_amount, payment_instrument_id, payment_provider_id, payment_status_id, payment_type_id, user_id, payment_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:58.660 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:58.667 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:58.667 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D90D0000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.667 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D90D0000000D : 737072696E672D62746D000001451727D91C0000000E]
16:00:58.668 [Test worker] DEBUG org.hibernate.SQL - insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:58.669 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:58.671 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:58.672 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.672 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:58.672 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.672 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D90D0000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.672 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.672 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D90D0000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.672 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.672 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.672 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D90D0000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.672 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.672 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.672 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.673 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:58.673 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.673 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.673 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:58.673 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.673 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.673 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:58.673 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@701a76bd
16:00:58.673 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D90D0000000D : 737072696E672D62746D000001451727D91C0000000E]
16:00:58.673 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D90D0000000D : 737072696E672D62746D000001451727D91C0000000E]
16:00:58.673 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D90D0000000D : 737072696E672D62746D000001451727D91C0000000E] with SUCCESS
16:00:58.673 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D90D0000000D : 737072696E672D62746D000001451727D91C0000000E] with SUCCESS
16:00:58.673 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:58.673 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:58.673 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:58.674 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:58.674 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:58.674 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:58.674 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:58.674 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:58.674 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:58.674 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:58.674 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:58.674 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D90D0000000D : 737072696E672D62746D000001451727D91C0000000E] (with one-phase optimization)
16:00:58.674 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D90D0000000D : 737072696E672D62746D000001451727D91C0000000E]
16:00:58.674 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:58.675 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:58.675 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:58.675 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:58.675 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:58.675 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:58.675 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D90D0000000D], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.675 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:58.675 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727D90D0000000D : 737072696E672D62746D000001451727D91C0000000E] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.675 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 cleaned up all transaction states for GTRID [737072696E672D62746D000001451727D90D0000000D]
16:00:58.675 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:58.675 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@58776060 with status=COMMITTED
16:00:58.675 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:58.675 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
16:00:58.675 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@701a76bd with status=COMMITTED
16:00:58.675 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D90D0000000D], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) with status=COMMITTED
16:00:58.676 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D90D0000000D], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:58.676 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D90D0000000D], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.676 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 with status=COMMITTED
16:00:58.676 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.676 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.676 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.676 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:58.676 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.676 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.676 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the available pool
16:00:58.676 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.676 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:58.676 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.676 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.676 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:58.676 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null
16:00:58.677 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.677 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.677 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:58.677 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.677 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null&gt;
16:00:58.677 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with JOIN
16:00:58.677 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with JOIN
16:00:58.677 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.677 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727D80F00000007] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef, adding it to the resource's transactions list
16:00:58.677 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:58.680 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:58.680 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.680 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.680 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with SUCCESS
16:00:58.680 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with SUCCESS
16:00:58.680 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:58.680 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:58.680 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:58.680 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.680 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727D9380000000F]
16:00:58.680 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9380000000F], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:58.680 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:58.680 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:58.681 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9380000000F], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) for Mon Mar 31 16:01:58 CST 2014
16:00:58.681 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9380000000F], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.681 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9380000000F], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) scheduled for Mon Mar 31 16:01:58 CST 2014, total task(s) queued: 5
16:00:58.681 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:58 CST 2014
16:00:58.681 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@28c2c59b
16:00:58.681 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:58.681 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528586
16:00:58.681 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@38809843
16:00:58.682 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.payment.PaymentEntity#973127680]
16:00:58.682 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.682 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.682 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.682 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D9380000000F]
16:00:58.682 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.682 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.682 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:58.682 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available), waiting if necessary
16:00:58.683 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f - closing time: 1396252918520, now time: 1396252858682
16:00:58.683 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.683 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.683 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.684 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.684 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.684 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:00:58.684 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state IN_POOL, testing it
16:00:58.684 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f, skipping test
16:00:58.684 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.684 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.684 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.684 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9380000000F], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.684 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@69e210f belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.684 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727D9380000000F : 737072696E672D62746D000001451727D93C00000010]
16:00:58.685 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727D9380000000F : 737072696E672D62746D000001451727D93C00000010]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null&gt;
16:00:58.685 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID a Bitronix XID [737072696E672D62746D000001451727D9380000000F : 737072696E672D62746D000001451727D93C00000010] with NOFLAGS
16:00:58.685 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9380000000F : 737072696E672D62746D000001451727D93C00000010] with NOFLAGS
16:00:58.685 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9380000000F : 737072696E672D62746D000001451727D93C00000010]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.685 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727D9380000000F] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f, adding it to the resource's transactions list
16:00:58.686 [Test worker] DEBUG org.hibernate.SQL - select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
Hibernate: select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
16:00:58.688 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:58.688 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEntity#973127680]
16:00:58.690 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.690 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:00:58.690 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.690 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9380000000F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.690 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.690 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9380000000F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.690 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.690 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.690 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9380000000F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.690 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.690 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.691 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.691 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:00:58.691 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.691 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.691 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:00:58.691 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.691 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.691 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:58.691 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEntity#973127680]
16:00:58.691 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEntity#973127680]
16:00:58.691 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:58.691 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:58.695 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973160448, using strategy: org.hibernate.id.Assigned
16:00:58.718 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973176832, using strategy: org.hibernate.id.Assigned
16:00:58.718 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:58.718 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9380000000F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.719 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9380000000F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.719 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9380000000F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.719 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9380000000F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) scheduled for Mon Mar 31 16:01:58 CST 2014, total task(s) still queued: 4
16:00:58.719 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:58.719 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.719 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9380000000F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.719 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@28c2c59b
16:00:58.719 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:58.719 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:58.719 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 1 updates, 0 deletions to 3 objects
16:00:58.720 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:58.720 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:58.720 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEntity{paymentProviderId=0, status=1, createdTime=2014-03-31 00:00:00.0, externalToken=1234, countryCode=null, merchantAccountId=0, businessDescriptor=ut, type=0, billingRefId=123, updatedBy=null, currency=USD, id=973127680, createdBy=null, userId=123, paymentInstrumentId=654344256, updatedTime=2014-03-31 00:00:00.0, netAmount=100}
16:00:58.720 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEventEntity{response={&quot;result&quot;: &quot;OK&quot;}, id=973160448, createdBy=null, status=1, createdTime=Mon Mar 31 16:00:58 CST 2014, paymentId=973127680, request={&quot;billingRefId&quot;:&quot;123&quot;,&quot;chargeInfo&quot;:{&quot;amount&quot;:100,&quot;businessDescriptor&quot;:&quot;ut&quot;,&quot;currency&quot;:&quot;USD&quot;},&quot;id&quot;:973127680,&quot;paymentInstrumentId&quot;:{&quot;paymentInstrumentId&quot;:654344256,&quot;primaryId&quot;:654344256,&quot;userId&quot;:123},&quot;trackingUuid&quot;:&quot;9c68a85e-49b4-4204-9fd8-01f72bdf867b&quot;,&quot;userId&quot;:123}, type=1, updatedTime=Mon Mar 31 16:00:58 CST 2014, netAmount=100, currency=USD, updatedBy=null}
16:00:58.721 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.TrackingUuidEntity{response={&quot;billingRefId&quot;:&quot;123&quot;,&quot;chargeInfo&quot;:{&quot;amount&quot;:100,&quot;businessDescriptor&quot;:&quot;ut&quot;,&quot;currency&quot;:&quot;USD&quot;},&quot;externalToken&quot;:&quot;1234&quot;,&quot;id&quot;:973127680,&quot;merchantAccount&quot;:&quot;8qnzm4r4ytckyf4d&quot;,&quot;paymentEvents&quot;:[{&quot;chargeInfo&quot;:{&quot;$ref&quot;:&quot;$.chargeInfo&quot;},&quot;paymentId&quot;:973127680,&quot;request&quot;:&quot;{\&quot;billingRefId\&quot;:\&quot;123\&quot;,\&quot;chargeInfo\&quot;:{\&quot;amount\&quot;:100,\&quot;businessDescriptor\&quot;:\&quot;ut\&quot;,\&quot;currency\&quot;:\&quot;USD\&quot;},\&quot;paymentInstrumentId\&quot;:{\&quot;paymentInstrumentId\&quot;:654344256,\&quot;primaryId\&quot;:654344256,\&quot;userId\&quot;:123},\&quot;trackingUuid\&quot;:\&quot;9c68a85e-49b4-4204-9fd8-01f72bdf867b\&quot;,\&quot;userId\&quot;:123}&quot;,&quot;response&quot;:&quot;{\&quot;result\&quot;: \&quot;OK\&quot;}&quot;,&quot;status&quot;:&quot;AUTH_CREATED&quot;,&quot;type&quot;:&quot;AUTH_CREATE&quot;},{&quot;chargeInfo&quot;:{&quot;$ref&quot;:&quot;$.chargeInfo&quot;},&quot;paymentId&quot;:973127680,&quot;request&quot;:&quot;{\&quot;billingRefId\&quot;:\&quot;123\&quot;,\&quot;chargeInfo\&quot;:{\&quot;amount\&quot;:100,\&quot;businessDescriptor\&quot;:\&quot;ut\&quot;,\&quot;currency\&quot;:\&quot;USD\&quot;},\&quot;id\&quot;:973127680,\&quot;paymentInstrumentId\&quot;:{\&quot;paymentInstrumentId\&quot;:654344256,\&quot;primaryId\&quot;:654344256,\&quot;userId\&quot;:123},\&quot;trackingUuid\&quot;:\&quot;9c68a85e-49b4-4204-9fd8-01f72bdf867b\&quot;,\&quot;userId\&quot;:123}&quot;,&quot;response&quot;:&quot;{\&quot;result\&quot;: \&quot;OK\&quot;}&quot;,&quot;status&quot;:&quot;AUTHORIZED&quot;,&quot;type&quot;:&quot;AUTHORIZE&quot;}],&quot;paymentInstrumentId&quot;:{&quot;paymentInstrumentId&quot;:654344256,&quot;primaryId&quot;:654344256,&quot;userId&quot;:123},&quot;paymentProvider&quot;:&quot;BrainTree&quot;,&quot;status&quot;:&quot;AUTHORIZED&quot;,&quot;trackingUuid&quot;:&quot;9c68a85e-49b4-4204-9fd8-01f72bdf867b&quot;,&quot;type&quot;:&quot;AUTHORIZE&quot;,&quot;userId&quot;:123}, id=973176832, createdBy=null, trackingUuid=9c68a85e-49b4-4204-9fd8-01f72bdf867b, createdTime=Mon Mar 31 16:00:58 CST 2014, paymentId=973127680, userId=123, api=3, paymentInstrumentId=null, updatedTime=Mon Mar 31 16:00:58 CST 2014, updatedBy=null}
16:00:58.722 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.722 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.722 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.723 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D9380000000F]
16:00:58.723 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.723 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.723 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.723 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.723 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D9380000000F
16:00:58.723 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:58.723 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.723 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.723 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.723 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f from the inaccessible pool
16:00:58.723 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.724 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.724 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9380000000F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.724 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9380000000F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.724 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:00:58.724 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state NOT_ACCESSIBLE, no need to test it
16:00:58.724 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.725 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.725 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.725 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9380000000F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.725 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9380000000F : 737072696E672D62746D000001451727D93C00000010]
16:00:58.726 [Test worker] DEBUG org.hibernate.SQL - insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:58.726 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:58.729 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:58.729 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9380000000F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.730 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9380000000F : 737072696E672D62746D000001451727D93C00000010]
16:00:58.730 [Test worker] DEBUG org.hibernate.SQL - insert into payment_tracking_uuid (created_by, created_time, updated_by, updated_time, api_id, payment_id, payment_instrument_id, response, tracking_uuid, user_id, tracking_uuid_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_tracking_uuid (created_by, created_time, updated_by, updated_time, api_id, payment_id, payment_instrument_id, response, tracking_uuid, user_id, tracking_uuid_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:58.730 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:58.732 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:58.732 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9380000000F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.732 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9380000000F : 737072696E672D62746D000001451727D93C00000010]
16:00:58.733 [Test worker] DEBUG org.hibernate.SQL - update payment set updated_by=?, updated_time=?, billing_ref_id=?, business_descriptor=?, country_code=?, currency_code=?, external_token=?, merchant_account_id=?, net_amount=?, payment_instrument_id=?, payment_provider_id=?, payment_status_id=?, payment_type_id=?, user_id=? where payment_id=?
Hibernate: update payment set updated_by=?, updated_time=?, billing_ref_id=?, business_descriptor=?, country_code=?, currency_code=?, external_token=?, merchant_account_id=?, net_amount=?, payment_instrument_id=?, payment_provider_id=?, payment_status_id=?, payment_type_id=?, user_id=? where payment_id=?
16:00:58.734 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:58.735 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:58.736 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.736 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:00:58.736 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.736 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9380000000F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.736 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.736 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9380000000F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.736 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.736 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.736 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9380000000F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.736 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.736 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.736 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.737 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:00:58.737 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.737 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.737 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:00:58.737 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.737 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.737 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@38809843
16:00:58.737 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9380000000F : 737072696E672D62746D000001451727D93C00000010]
16:00:58.737 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9380000000F : 737072696E672D62746D000001451727D93C00000010]
16:00:58.737 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9380000000F : 737072696E672D62746D000001451727D93C00000010] with SUCCESS
16:00:58.737 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9380000000F : 737072696E672D62746D000001451727D93C00000010] with SUCCESS
16:00:58.737 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:58.737 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:58.737 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:58.737 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:58.737 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:58.737 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:58.737 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:58.737 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:58.737 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:58.738 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:58.738 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:58.738 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D9380000000F : 737072696E672D62746D000001451727D93C00000010] (with one-phase optimization)
16:00:58.738 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D9380000000F : 737072696E672D62746D000001451727D93C00000010]
16:00:58.739 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:58.739 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:58.739 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:58.739 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:58.739 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:58.739 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:58.739 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9380000000F], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.739 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:58.739 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727D9380000000F : 737072696E672D62746D000001451727D93C00000010] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.739 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f cleaned up all transaction states for GTRID [737072696E672D62746D000001451727D9380000000F]
16:00:58.739 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:58.739 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@28c2c59b with status=COMMITTED
16:00:58.739 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:58.739 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
16:00:58.739 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@38809843 with status=COMMITTED
16:00:58.739 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9380000000F], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) with status=COMMITTED
16:00:58.740 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9380000000F], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:58.740 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9380000000F], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.740 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f with status=COMMITTED
16:00:58.740 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.740 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.740 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.740 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the inaccessible pool
16:00:58.740 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.740 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.740 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the available pool
16:00:58.740 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.740 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:58.740 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.740 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.740 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:58.740 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null
16:00:58.740 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.740 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.741 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:58.741 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.741 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null&gt;
16:00:58.741 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with JOIN
16:00:58.741 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with JOIN
16:00:58.741 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.741 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727D80F00000007] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef, adding it to the resource's transactions list
16:00:58.741 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:58.741 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:58.741 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:58.741 [Test worker] INFO  c.j.p.c.i.PaymentTransactionServiceImpl - reverse for payment:973127680
16:00:58.741 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:58.742 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.742 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.742 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with SUCCESS
16:00:58.742 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with SUCCESS
16:00:58.742 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:58.742 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:58.742 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:58.742 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.742 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727D97600000011]
16:00:58.742 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D97600000011], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:58.742 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:58.742 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:58.742 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D97600000011], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) for Mon Mar 31 16:01:58 CST 2014
16:00:58.742 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D97600000011], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.742 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D97600000011], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) scheduled for Mon Mar 31 16:01:58 CST 2014, total task(s) queued: 5
16:00:58.743 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:58 CST 2014
16:00:58.743 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@5ae86161
16:00:58.743 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:58.744 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528587
16:00:58.744 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@31333b4e
16:00:58.744 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.744 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.744 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.744 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D97600000011]
16:00:58.744 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.744 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.744 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:58.745 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available), waiting if necessary
16:00:58.745 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 - closing time: 1396252918676, now time: 1396252858745
16:00:58.745 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.745 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.745 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.745 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.745 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.745 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:58.745 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state IN_POOL, testing it
16:00:58.745 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, skipping test
16:00:58.745 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.745 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.745 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.745 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D97600000011], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.745 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@324d7c25 belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.745 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727D97600000011 : 737072696E672D62746D000001451727D97900000012]
16:00:58.745 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727D97600000011 : 737072696E672D62746D000001451727D97900000012]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID null&gt;
16:00:58.745 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID a Bitronix XID [737072696E672D62746D000001451727D97600000011 : 737072696E672D62746D000001451727D97900000012] with NOFLAGS
16:00:58.745 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D97600000011 : 737072696E672D62746D000001451727D97900000012] with NOFLAGS
16:00:58.745 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D97600000011 : 737072696E672D62746D000001451727D97900000012]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.746 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727D97600000011] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, adding it to the resource's transactions list
16:00:58.746 [Test worker] DEBUG org.hibernate.SQL - select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
Hibernate: select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
16:00:58.748 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:58.749 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.TrackingUuidEntity#973176832]
16:00:58.750 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.751 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:58.751 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.751 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D97600000011], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.751 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.751 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D97600000011], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.751 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.751 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.751 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D97600000011], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.751 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.751 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.751 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.751 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:58.751 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.751 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.751 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:58.751 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.751 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.752 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:58.752 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.TrackingUuidEntity#973176832]
16:00:58.752 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.TrackingUuidEntity#973176832]
16:00:58.752 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:58.756 [Test worker] DEBUG o.h.t.DistinctResultTransformer - Transformed: 1 rows to: 1 distinct results
16:00:58.756 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:58.756 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D97600000011], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.756 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D97600000011], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.756 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D97600000011], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.756 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D97600000011], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) scheduled for Mon Mar 31 16:01:58 CST 2014, total task(s) still queued: 4
16:00:58.756 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:58.756 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.756 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D97600000011], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.756 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@5ae86161
16:00:58.756 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:58.757 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:58.757 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
16:00:58.757 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:58.757 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:58.757 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.TrackingUuidEntity{response={&quot;billingRefId&quot;:&quot;123&quot;,&quot;chargeInfo&quot;:{&quot;amount&quot;:100,&quot;businessDescriptor&quot;:&quot;ut&quot;,&quot;currency&quot;:&quot;USD&quot;},&quot;externalToken&quot;:&quot;1234&quot;,&quot;id&quot;:973127680,&quot;merchantAccount&quot;:&quot;8qnzm4r4ytckyf4d&quot;,&quot;paymentEvents&quot;:[{&quot;chargeInfo&quot;:{&quot;$ref&quot;:&quot;$.chargeInfo&quot;},&quot;paymentId&quot;:973127680,&quot;request&quot;:&quot;{\&quot;billingRefId\&quot;:\&quot;123\&quot;,\&quot;chargeInfo\&quot;:{\&quot;amount\&quot;:100,\&quot;businessDescriptor\&quot;:\&quot;ut\&quot;,\&quot;currency\&quot;:\&quot;USD\&quot;},\&quot;paymentInstrumentId\&quot;:{\&quot;paymentInstrumentId\&quot;:654344256,\&quot;primaryId\&quot;:654344256,\&quot;userId\&quot;:123},\&quot;trackingUuid\&quot;:\&quot;9c68a85e-49b4-4204-9fd8-01f72bdf867b\&quot;,\&quot;userId\&quot;:123}&quot;,&quot;response&quot;:&quot;{\&quot;result\&quot;: \&quot;OK\&quot;}&quot;,&quot;status&quot;:&quot;AUTH_CREATED&quot;,&quot;type&quot;:&quot;AUTH_CREATE&quot;},{&quot;chargeInfo&quot;:{&quot;$ref&quot;:&quot;$.chargeInfo&quot;},&quot;paymentId&quot;:973127680,&quot;request&quot;:&quot;{\&quot;billingRefId\&quot;:\&quot;123\&quot;,\&quot;chargeInfo\&quot;:{\&quot;amount\&quot;:100,\&quot;businessDescriptor\&quot;:\&quot;ut\&quot;,\&quot;currency\&quot;:\&quot;USD\&quot;},\&quot;id\&quot;:973127680,\&quot;paymentInstrumentId\&quot;:{\&quot;paymentInstrumentId\&quot;:654344256,\&quot;primaryId\&quot;:654344256,\&quot;userId\&quot;:123},\&quot;trackingUuid\&quot;:\&quot;9c68a85e-49b4-4204-9fd8-01f72bdf867b\&quot;,\&quot;userId\&quot;:123}&quot;,&quot;response&quot;:&quot;{\&quot;result\&quot;: \&quot;OK\&quot;}&quot;,&quot;status&quot;:&quot;AUTHORIZED&quot;,&quot;type&quot;:&quot;AUTHORIZE&quot;}],&quot;paymentInstrumentId&quot;:{&quot;paymentInstrumentId&quot;:654344256,&quot;primaryId&quot;:654344256,&quot;userId&quot;:123},&quot;paymentProvider&quot;:&quot;BrainTree&quot;,&quot;status&quot;:&quot;AUTHORIZED&quot;,&quot;trackingUuid&quot;:&quot;9c68a85e-49b4-4204-9fd8-01f72bdf867b&quot;,&quot;type&quot;:&quot;AUTHORIZE&quot;,&quot;userId&quot;:123}, id=973176832, createdBy=null, trackingUuid=9c68a85e-49b4-4204-9fd8-01f72bdf867b, createdTime=2014-03-31 00:00:00.0, paymentId=973127680, userId=123, api=3, paymentInstrumentId=null, updatedTime=2014-03-31 00:00:00.0, updatedBy=null}
16:00:58.757 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.757 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@31333b4e
16:00:58.757 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D97600000011 : 737072696E672D62746D000001451727D97900000012]
16:00:58.757 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D97600000011 : 737072696E672D62746D000001451727D97900000012]
16:00:58.758 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D97600000011 : 737072696E672D62746D000001451727D97900000012] with SUCCESS
16:00:58.758 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D97600000011 : 737072696E672D62746D000001451727D97900000012] with SUCCESS
16:00:58.758 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:58.758 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:58.758 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:58.758 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:58.758 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:58.758 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:58.758 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:58.758 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:58.758 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:58.758 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:58.758 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:58.758 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D97600000011 : 737072696E672D62746D000001451727D97900000012] (with one-phase optimization)
16:00:58.759 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D97600000011 : 737072696E672D62746D000001451727D97900000012]
16:00:58.759 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:58.759 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:58.759 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:58.759 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:58.759 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:58.759 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:58.760 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D97600000011], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.760 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:58.760 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727D97600000011 : 737072696E672D62746D000001451727D97900000012] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.760 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 cleaned up all transaction states for GTRID [737072696E672D62746D000001451727D97600000011]
16:00:58.760 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:58.760 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@5ae86161 with status=COMMITTED
16:00:58.760 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:58.760 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@31333b4e with status=COMMITTED
16:00:58.760 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D97600000011], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) with status=COMMITTED
16:00:58.760 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D97600000011], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:58.760 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D97600000011], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.760 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 with status=COMMITTED
16:00:58.760 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.760 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.760 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.760 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:58.761 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.761 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.761 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the available pool
16:00:58.761 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.761 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:58.761 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.761 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.761 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:58.761 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null
16:00:58.761 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.761 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.761 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:58.761 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.762 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null&gt;
16:00:58.762 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with JOIN
16:00:58.762 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with JOIN
16:00:58.762 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.762 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727D80F00000007] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef, adding it to the resource's transactions list
16:00:58.762 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:58.764 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:58.764 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.764 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.764 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with SUCCESS
16:00:58.764 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with SUCCESS
16:00:58.764 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:58.764 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:58.764 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:58.765 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.765 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727D98D00000013]
16:00:58.765 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D98D00000013], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:58.766 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:58.766 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:58.766 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D98D00000013], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) for Mon Mar 31 16:01:58 CST 2014
16:00:58.766 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D98D00000013], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.766 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D98D00000013], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) scheduled for Mon Mar 31 16:01:58 CST 2014, total task(s) queued: 5
16:00:58.766 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:58 CST 2014
16:00:58.767 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@3992f0af
16:00:58.767 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:58.767 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528587
16:00:58.767 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@5df78eb0
16:00:58.767 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.payment.PaymentEntity#973127680]
16:00:58.767 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.767 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.767 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.767 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D98D00000013]
16:00:58.767 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.767 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.767 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:58.767 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available), waiting if necessary
16:00:58.767 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f - closing time: 1396252918740, now time: 1396252858767
16:00:58.767 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.767 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.768 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.768 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.768 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.768 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:00:58.768 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state IN_POOL, testing it
16:00:58.768 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f, skipping test
16:00:58.768 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.768 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.768 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.768 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D98D00000013], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.768 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@69e210f belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.768 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727D98D00000013 : 737072696E672D62746D000001451727D99000000014]
16:00:58.768 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727D98D00000013 : 737072696E672D62746D000001451727D99000000014]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null&gt;
16:00:58.768 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID a Bitronix XID [737072696E672D62746D000001451727D98D00000013 : 737072696E672D62746D000001451727D99000000014] with NOFLAGS
16:00:58.768 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D98D00000013 : 737072696E672D62746D000001451727D99000000014] with NOFLAGS
16:00:58.768 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D98D00000013 : 737072696E672D62746D000001451727D99000000014]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.768 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727D98D00000013] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f, adding it to the resource's transactions list
16:00:58.769 [Test worker] DEBUG org.hibernate.SQL - select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
Hibernate: select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
16:00:58.772 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:58.772 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEntity#973127680]
16:00:58.773 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.773 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:00:58.773 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.773 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D98D00000013], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.773 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.774 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D98D00000013], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.774 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.774 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.774 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D98D00000013], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.774 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.774 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.774 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.774 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:00:58.774 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.774 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.774 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:00:58.774 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.774 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.777 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:58.777 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEntity#973127680]
16:00:58.777 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEntity#973127680]
16:00:58.777 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:58.778 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:58.778 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654344256]
16:00:58.778 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.778 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.778 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.778 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D98D00000013]
16:00:58.778 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.778 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.778 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.778 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.778 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D98D00000013
16:00:58.778 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:58.778 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.779 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.779 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.779 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f from the inaccessible pool
16:00:58.779 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.779 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.779 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D98D00000013], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.779 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D98D00000013], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.779 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:00:58.779 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state NOT_ACCESSIBLE, no need to test it
16:00:58.779 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.779 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.779 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.779 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D98D00000013], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.779 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D98D00000013 : 737072696E672D62746D000001451727D99000000014]
16:00:58.780 [Test worker] DEBUG org.hibernate.SQL - select paymentins0_.payment_instrument_id as payment1_10_0_, paymentins0_.created_by as created2_10_0_, paymentins0_.created_time as created3_10_0_, paymentins0_.updated_by as updated4_10_0_, paymentins0_.updated_time as updated5_10_0_, paymentins0_.payment_instrument_holder_name as payment6_10_0_, paymentins0_.account_number as account7_10_0_, paymentins0_.address_id as address8_10_0_, paymentins0_.email as email10_0_, paymentins0_.encrypted_account_number as encrypted10_10_0_, paymentins0_.is_default as is11_10_0_, paymentins0_.last_validated_time as last12_10_0_, paymentins0_.phone_id as phone13_10_0_, paymentins0_.relation_to_holder as relation14_10_0_, paymentins0_.status_id as status15_10_0_, paymentins0_.payment_instrument_type_id as payment16_10_0_, paymentins0_.user_id as user17_10_0_ from payment_instrument paymentins0_ where paymentins0_.payment_instrument_id=?
Hibernate: select paymentins0_.payment_instrument_id as payment1_10_0_, paymentins0_.created_by as created2_10_0_, paymentins0_.created_time as created3_10_0_, paymentins0_.updated_by as updated4_10_0_, paymentins0_.updated_time as updated5_10_0_, paymentins0_.payment_instrument_holder_name as payment6_10_0_, paymentins0_.account_number as account7_10_0_, paymentins0_.address_id as address8_10_0_, paymentins0_.email as email10_0_, paymentins0_.encrypted_account_number as encrypted10_10_0_, paymentins0_.is_default as is11_10_0_, paymentins0_.last_validated_time as last12_10_0_, paymentins0_.phone_id as phone13_10_0_, paymentins0_.relation_to_holder as relation14_10_0_, paymentins0_.status_id as status15_10_0_, paymentins0_.payment_instrument_type_id as payment16_10_0_, paymentins0_.user_id as user17_10_0_ from payment_instrument paymentins0_ where paymentins0_.payment_instrument_id=?
16:00:58.784 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:58.784 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654344256]
16:00:58.785 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.785 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:00:58.785 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.785 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D98D00000013], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.785 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.785 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D98D00000013], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.785 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.785 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.785 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D98D00000013], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.785 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.785 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.785 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.785 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:00:58.785 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.785 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.785 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:00:58.786 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.786 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.786 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654344256]
16:00:58.786 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654344256]
16:00:58.786 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:58.786 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:58.786 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:58.786 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D98D00000013], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.786 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D98D00000013], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.786 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D98D00000013], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.787 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D98D00000013], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) scheduled for Mon Mar 31 16:01:58 CST 2014, total task(s) still queued: 4
16:00:58.787 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:58.787 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.787 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D98D00000013], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.787 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@3992f0af
16:00:58.787 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:58.787 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:58.787 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 2 objects
16:00:58.787 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:58.787 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:58.788 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEntity{paymentProviderId=0, status=1, createdTime=2014-03-31 00:00:00.0, externalToken=1234, countryCode=null, merchantAccountId=0, businessDescriptor=ut, type=0, billingRefId=123, updatedBy=null, currency=USD, id=973127680, createdBy=null, userId=123, paymentInstrumentId=654344256, updatedTime=2014-03-31 00:00:00.0, netAmount=100}
16:00:58.788 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity{relationToHolder=null, status=0, createdTime=2014-03-31 00:00:00.0, type=0, accountNum=1111, addressId=654344256, updatedBy=null, lastValidatedTime=2014-03-31 00:00:00.0, id=654344256, accountName=ut, createdBy=null, email=null, isDefault=true, userId=123, phoneId=654344256, encryptedAccountNO=null, updatedTime=2014-03-31 00:00:00.0}
16:00:58.788 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.788 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@5df78eb0
16:00:58.788 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D98D00000013 : 737072696E672D62746D000001451727D99000000014]
16:00:58.788 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D98D00000013 : 737072696E672D62746D000001451727D99000000014]
16:00:58.788 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D98D00000013 : 737072696E672D62746D000001451727D99000000014] with SUCCESS
16:00:58.788 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D98D00000013 : 737072696E672D62746D000001451727D99000000014] with SUCCESS
16:00:58.788 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:58.788 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:58.788 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:58.788 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:58.789 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:58.789 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:58.789 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:58.789 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:58.789 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:58.789 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:58.789 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:58.789 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D98D00000013 : 737072696E672D62746D000001451727D99000000014] (with one-phase optimization)
16:00:58.790 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D98D00000013 : 737072696E672D62746D000001451727D99000000014]
16:00:58.790 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:58.790 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:58.790 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:58.790 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:58.790 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:58.790 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:58.790 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D98D00000013], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.790 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:58.790 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727D98D00000013 : 737072696E672D62746D000001451727D99000000014] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.790 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f cleaned up all transaction states for GTRID [737072696E672D62746D000001451727D98D00000013]
16:00:58.790 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:58.790 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@3992f0af with status=COMMITTED
16:00:58.790 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:58.790 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@5df78eb0 with status=COMMITTED
16:00:58.791 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D98D00000013], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) with status=COMMITTED
16:00:58.791 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D98D00000013], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:58.791 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D98D00000013], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.791 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f with status=COMMITTED
16:00:58.791 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.791 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.791 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.791 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the inaccessible pool
16:00:58.791 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.791 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.791 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the available pool
16:00:58.791 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.791 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:58.791 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.791 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.791 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:58.792 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null
16:00:58.792 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.792 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.792 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:58.792 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.792 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null&gt;
16:00:58.792 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with JOIN
16:00:58.792 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with JOIN
16:00:58.792 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.792 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727D80F00000007] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef, adding it to the resource's transactions list
16:00:58.792 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:58.792 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:58.792 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:58.843 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:58.843 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.843 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.844 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with SUCCESS
16:00:58.844 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with SUCCESS
16:00:58.844 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:58.844 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:58.844 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:58.844 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.844 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727D9DC00000015]
16:00:58.844 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9DC00000015], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:58.844 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:58.844 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:58.844 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9DC00000015], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) for Mon Mar 31 16:01:58 CST 2014
16:00:58.844 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9DC00000015], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.844 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9DC00000015], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) scheduled for Mon Mar 31 16:01:58 CST 2014, total task(s) queued: 5
16:00:58.844 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:58 CST 2014
16:00:58.845 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@4295560d
16:00:58.845 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:58.845 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528588
16:00:58.845 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@3ccf5792
16:00:58.845 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.payment.PaymentEntity#973127680]
16:00:58.846 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.846 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.846 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.846 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D9DC00000015]
16:00:58.846 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.846 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.846 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:58.846 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available), waiting if necessary
16:00:58.846 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 - closing time: 1396252918761, now time: 1396252858846
16:00:58.846 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.846 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.846 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.846 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.846 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.846 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:58.846 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state IN_POOL, testing it
16:00:58.846 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, skipping test
16:00:58.847 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.847 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.847 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.847 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9DC00000015], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.847 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@324d7c25 belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.847 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727D9DC00000015 : 737072696E672D62746D000001451727D9DF00000016]
16:00:58.847 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727D9DC00000015 : 737072696E672D62746D000001451727D9DF00000016]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID null&gt;
16:00:58.847 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID a Bitronix XID [737072696E672D62746D000001451727D9DC00000015 : 737072696E672D62746D000001451727D9DF00000016] with NOFLAGS
16:00:58.847 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9DC00000015 : 737072696E672D62746D000001451727D9DF00000016] with NOFLAGS
16:00:58.848 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9DC00000015 : 737072696E672D62746D000001451727D9DF00000016]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.848 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727D9DC00000015] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, adding it to the resource's transactions list
16:00:58.848 [Test worker] DEBUG org.hibernate.SQL - select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
Hibernate: select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
16:00:58.850 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:58.850 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEntity#973127680]
16:00:58.852 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.852 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:58.852 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.852 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9DC00000015], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.852 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.853 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9DC00000015], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.853 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.853 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.853 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9DC00000015], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.853 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.853 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.854 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.854 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:58.854 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.854 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.854 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:58.854 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.854 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.854 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:58.854 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEntity#973127680]
16:00:58.854 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEntity#973127680]
16:00:58.854 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:58.854 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:58.855 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973193216, using strategy: org.hibernate.id.Assigned
16:00:58.855 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:58.855 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9DC00000015], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.855 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9DC00000015], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.855 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9DC00000015], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.855 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9DC00000015], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) scheduled for Mon Mar 31 16:01:58 CST 2014, total task(s) still queued: 4
16:00:58.855 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:58.855 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.856 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9DC00000015], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.856 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@4295560d
16:00:58.856 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:58.856 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:58.856 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 1 insertions, 1 updates, 0 deletions to 2 objects
16:00:58.856 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:58.856 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:58.856 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEventEntity{response={&quot;result&quot;: &quot;OK&quot;}, id=973193216, createdBy=null, status=8, createdTime=Mon Mar 31 16:00:58 CST 2014, paymentId=973127680, request={&quot;billingRefId&quot;:&quot;123&quot;,&quot;chargeInfo&quot;:{&quot;amount&quot;:100,&quot;businessDescriptor&quot;:&quot;ut&quot;,&quot;currency&quot;:&quot;USD&quot;},&quot;id&quot;:973127680,&quot;paymentInstrumentId&quot;:{&quot;paymentInstrumentId&quot;:654344256,&quot;primaryId&quot;:654344256,&quot;userId&quot;:123},&quot;trackingUuid&quot;:&quot;9c68a85e-49b4-4204-9fd8-01f72bdf867b&quot;,&quot;userId&quot;:123}, type=4, updatedTime=Mon Mar 31 16:00:58 CST 2014, netAmount=100, currency=USD, updatedBy=null}
16:00:58.857 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEntity{paymentProviderId=0, status=8, createdTime=2014-03-31 00:00:00.0, externalToken=1234, countryCode=null, merchantAccountId=0, businessDescriptor=ut, type=0, billingRefId=123, updatedBy=null, currency=USD, id=973127680, createdBy=null, userId=123, paymentInstrumentId=654344256, updatedTime=2014-03-31 00:00:00.0, netAmount=100}
16:00:58.857 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.857 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.857 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.857 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D9DC00000015]
16:00:58.857 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.857 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.857 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.857 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.857 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D9DC00000015
16:00:58.857 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:58.857 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.857 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.857 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.857 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:58.857 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.857 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.857 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9DC00000015], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.858 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9DC00000015], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.858 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:58.858 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state NOT_ACCESSIBLE, no need to test it
16:00:58.858 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.858 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.858 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.858 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9DC00000015], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.858 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9DC00000015 : 737072696E672D62746D000001451727D9DF00000016]
16:00:58.858 [Test worker] DEBUG org.hibernate.SQL - insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:58.859 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:58.861 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:58.861 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9DC00000015], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.861 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9DC00000015 : 737072696E672D62746D000001451727D9DF00000016]
16:00:58.861 [Test worker] DEBUG org.hibernate.SQL - update payment set updated_by=?, updated_time=?, billing_ref_id=?, business_descriptor=?, country_code=?, currency_code=?, external_token=?, merchant_account_id=?, net_amount=?, payment_instrument_id=?, payment_provider_id=?, payment_status_id=?, payment_type_id=?, user_id=? where payment_id=?
Hibernate: update payment set updated_by=?, updated_time=?, billing_ref_id=?, business_descriptor=?, country_code=?, currency_code=?, external_token=?, merchant_account_id=?, net_amount=?, payment_instrument_id=?, payment_provider_id=?, payment_status_id=?, payment_type_id=?, user_id=? where payment_id=?
16:00:58.862 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:58.864 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:58.864 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.864 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:58.864 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.864 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9DC00000015], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.864 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.864 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9DC00000015], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.864 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.864 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.864 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9DC00000015], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.864 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.865 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.865 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.865 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:58.865 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.865 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.865 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:58.865 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.865 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.865 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@3ccf5792
16:00:58.865 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9DC00000015 : 737072696E672D62746D000001451727D9DF00000016]
16:00:58.865 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9DC00000015 : 737072696E672D62746D000001451727D9DF00000016]
16:00:58.865 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9DC00000015 : 737072696E672D62746D000001451727D9DF00000016] with SUCCESS
16:00:58.865 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9DC00000015 : 737072696E672D62746D000001451727D9DF00000016] with SUCCESS
16:00:58.865 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:58.865 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:58.865 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:58.867 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:58.868 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:58.868 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:58.868 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:58.868 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:58.868 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:58.868 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:58.868 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:58.868 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D9DC00000015 : 737072696E672D62746D000001451727D9DF00000016] (with one-phase optimization)
16:00:58.870 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D9DC00000015 : 737072696E672D62746D000001451727D9DF00000016]
16:00:58.870 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:58.870 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:58.870 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:58.870 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:58.870 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:58.870 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:58.870 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9DC00000015], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.870 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:58.870 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727D9DC00000015 : 737072696E672D62746D000001451727D9DF00000016] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.870 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 cleaned up all transaction states for GTRID [737072696E672D62746D000001451727D9DC00000015]
16:00:58.870 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:58.870 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@4295560d with status=COMMITTED
16:00:58.870 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:58.871 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
16:00:58.871 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@3ccf5792 with status=COMMITTED
16:00:58.871 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9DC00000015], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) with status=COMMITTED
16:00:58.871 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9DC00000015], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:58.871 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9DC00000015], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.871 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 with status=COMMITTED
16:00:58.871 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.871 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.871 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.871 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:58.871 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.871 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.871 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the available pool
16:00:58.871 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.871 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:58.871 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.872 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.872 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:58.872 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null
16:00:58.872 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.872 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.872 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:58.872 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.872 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null&gt;
16:00:58.872 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with JOIN
16:00:58.872 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with JOIN
16:00:58.872 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.872 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727D80F00000007] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef, adding it to the resource's transactions list
16:00:58.872 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:58.872 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:58.872 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:58.874 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:58.874 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.874 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.874 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with SUCCESS
16:00:58.874 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with SUCCESS
16:00:58.874 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:58.874 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:58.874 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:58.874 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.874 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727D9FA00000017]
16:00:58.875 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9FA00000017], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:58.875 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:58.875 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:58.875 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9FA00000017], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) for Mon Mar 31 16:01:58 CST 2014
16:00:58.875 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9FA00000017], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.875 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9FA00000017], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) scheduled for Mon Mar 31 16:01:58 CST 2014, total task(s) queued: 5
16:00:58.875 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:58 CST 2014
16:00:58.875 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@1f75f2c7
16:00:58.875 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:58.875 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528588
16:00:58.875 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@618d1f00
16:00:58.876 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.payment.PaymentEntity#973127680]
16:00:58.876 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.877 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.877 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D000001451727D9FA00000017
16:00:58.877 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.877 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D9FA00000017]
16:00:58.877 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.878 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.878 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:58.878 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available), waiting if necessary
16:00:58.878 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f - closing time: 1396252918791, now time: 1396252858878
16:00:58.878 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.878 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.878 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.878 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.878 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.878 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:00:58.878 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state IN_POOL, testing it
16:00:58.878 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f, skipping test
16:00:58.878 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.878 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.878 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.878 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9FA00000017], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.878 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@69e210f belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.878 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727D9FA00000017 : 737072696E672D62746D000001451727D9FE00000018]
16:00:58.878 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727D9FA00000017 : 737072696E672D62746D000001451727D9FE00000018]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null&gt;
16:00:58.878 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID a Bitronix XID [737072696E672D62746D000001451727D9FA00000017 : 737072696E672D62746D000001451727D9FE00000018] with NOFLAGS
16:00:58.878 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9FA00000017 : 737072696E672D62746D000001451727D9FE00000018] with NOFLAGS
16:00:58.879 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9FA00000017 : 737072696E672D62746D000001451727D9FE00000018]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.879 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727D9FA00000017] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f, adding it to the resource's transactions list
16:00:58.879 [Test worker] DEBUG org.hibernate.SQL - select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
Hibernate: select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
16:00:58.881 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:58.882 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEntity#973127680]
16:00:58.882 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.883 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:00:58.883 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.883 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9FA00000017], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.883 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.883 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9FA00000017], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.883 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.883 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.883 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9FA00000017], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.883 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.883 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.883 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.883 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:00:58.883 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.883 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.883 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:00:58.883 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.883 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.883 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:58.884 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEntity#973127680]
16:00:58.884 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEntity#973127680]
16:00:58.884 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:58.884 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:58.884 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973209600, using strategy: org.hibernate.id.Assigned
16:00:58.885 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973225984, using strategy: org.hibernate.id.Assigned
16:00:58.886 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:58.886 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9FA00000017], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.886 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9FA00000017], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.886 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9FA00000017], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.886 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9FA00000017], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) scheduled for Mon Mar 31 16:01:58 CST 2014, total task(s) still queued: 4
16:00:58.886 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:58.886 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.886 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9FA00000017], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.886 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@1f75f2c7
16:00:58.887 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:58.887 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:58.887 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 1 updates, 0 deletions to 3 objects
16:00:58.887 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:58.887 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:58.887 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEventEntity{response={&quot;result&quot;: &quot;OK&quot;}, id=973209600, createdBy=null, status=9, createdTime=Mon Mar 31 16:00:58 CST 2014, paymentId=973127680, request={&quot;billingRefId&quot;:&quot;123&quot;,&quot;id&quot;:973127680,&quot;paymentInstrumentId&quot;:{&quot;paymentInstrumentId&quot;:654344256,&quot;primaryId&quot;:654344256,&quot;userId&quot;:123},&quot;trackingUuid&quot;:&quot;9c68a85e-49b4-4204-9fd8-01f72bdf867b&quot;,&quot;userId&quot;:123}, type=5, updatedTime=Mon Mar 31 16:00:58 CST 2014, netAmount=null, currency=null, updatedBy=null}
16:00:58.888 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.TrackingUuidEntity{response={&quot;billingRefId&quot;:&quot;123&quot;,&quot;chargeInfo&quot;:{&quot;amount&quot;:100,&quot;businessDescriptor&quot;:&quot;ut&quot;,&quot;currency&quot;:&quot;USD&quot;},&quot;externalToken&quot;:&quot;1234&quot;,&quot;id&quot;:973127680,&quot;merchantAccount&quot;:&quot;8qnzm4r4ytckyf4d&quot;,&quot;paymentEvents&quot;:[{&quot;chargeInfo&quot;:{&quot;$ref&quot;:&quot;$.chargeInfo&quot;},&quot;paymentId&quot;:973127680,&quot;request&quot;:&quot;{\&quot;billingRefId\&quot;:\&quot;123\&quot;,\&quot;chargeInfo\&quot;:{\&quot;amount\&quot;:100,\&quot;businessDescriptor\&quot;:\&quot;ut\&quot;,\&quot;currency\&quot;:\&quot;USD\&quot;},\&quot;id\&quot;:973127680,\&quot;paymentInstrumentId\&quot;:{\&quot;paymentInstrumentId\&quot;:654344256,\&quot;primaryId\&quot;:654344256,\&quot;userId\&quot;:123},\&quot;trackingUuid\&quot;:\&quot;9c68a85e-49b4-4204-9fd8-01f72bdf867b\&quot;,\&quot;userId\&quot;:123}&quot;,&quot;response&quot;:&quot;{\&quot;result\&quot;: \&quot;OK\&quot;}&quot;,&quot;status&quot;:&quot;REVERSE_CREATED&quot;,&quot;type&quot;:&quot;REVERSE_CREATE&quot;},{&quot;paymentId&quot;:973127680,&quot;request&quot;:&quot;{\&quot;billingRefId\&quot;:\&quot;123\&quot;,\&quot;id\&quot;:973127680,\&quot;paymentInstrumentId\&quot;:{\&quot;paymentInstrumentId\&quot;:654344256,\&quot;primaryId\&quot;:654344256,\&quot;userId\&quot;:123},\&quot;trackingUuid\&quot;:\&quot;9c68a85e-49b4-4204-9fd8-01f72bdf867b\&quot;,\&quot;userId\&quot;:123}&quot;,&quot;response&quot;:&quot;{\&quot;result\&quot;: \&quot;OK\&quot;}&quot;,&quot;status&quot;:&quot;REVERSED&quot;,&quot;type&quot;:&quot;AUTH_REVERSE&quot;}],&quot;paymentInstrumentId&quot;:{&quot;paymentInstrumentId&quot;:654344256,&quot;primaryId&quot;:654344256,&quot;userId&quot;:123},&quot;paymentProvider&quot;:&quot;BrainTree&quot;,&quot;status&quot;:&quot;REVERSED&quot;,&quot;trackingUuid&quot;:&quot;9c68a85e-49b4-4204-9fd8-01f72bdf867b&quot;,&quot;type&quot;:&quot;AUTHORIZE&quot;,&quot;userId&quot;:123}, id=973225984, createdBy=null, trackingUuid=9c68a85e-49b4-4204-9fd8-01f72bdf867b, createdTime=Mon Mar 31 16:00:58 CST 2014, paymentId=973127680, userId=123, api=6, paymentInstrumentId=null, updatedTime=Mon Mar 31 16:00:58 CST 2014, updatedBy=null}
16:00:58.888 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEntity{paymentProviderId=0, status=9, createdTime=2014-03-31 00:00:00.0, externalToken=1234, countryCode=null, merchantAccountId=0, businessDescriptor=ut, type=0, billingRefId=123, updatedBy=null, currency=USD, id=973127680, createdBy=null, userId=123, paymentInstrumentId=654344256, updatedTime=2014-03-31 00:00:00.0, netAmount=100}
16:00:58.888 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.888 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.888 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.888 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D9FA00000017]
16:00:58.888 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.888 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.888 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.888 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.888 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D9FA00000017
16:00:58.888 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:58.888 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.889 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.889 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.889 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f from the inaccessible pool
16:00:58.889 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.889 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.889 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9FA00000017], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.889 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9FA00000017], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.889 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:00:58.889 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state NOT_ACCESSIBLE, no need to test it
16:00:58.889 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.889 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:58.889 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.889 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9FA00000017], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.890 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9FA00000017 : 737072696E672D62746D000001451727D9FE00000018]
16:00:58.890 [Test worker] DEBUG org.hibernate.SQL - insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:58.891 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:58.893 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:58.893 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9FA00000017], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.893 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9FA00000017 : 737072696E672D62746D000001451727D9FE00000018]
16:00:58.893 [Test worker] DEBUG org.hibernate.SQL - insert into payment_tracking_uuid (created_by, created_time, updated_by, updated_time, api_id, payment_id, payment_instrument_id, response, tracking_uuid, user_id, tracking_uuid_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_tracking_uuid (created_by, created_time, updated_by, updated_time, api_id, payment_id, payment_instrument_id, response, tracking_uuid, user_id, tracking_uuid_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:58.894 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:58.896 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:58.896 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9FA00000017], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.897 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9FA00000017 : 737072696E672D62746D000001451727D9FE00000018]
16:00:58.897 [Test worker] DEBUG org.hibernate.SQL - update payment set updated_by=?, updated_time=?, billing_ref_id=?, business_descriptor=?, country_code=?, currency_code=?, external_token=?, merchant_account_id=?, net_amount=?, payment_instrument_id=?, payment_provider_id=?, payment_status_id=?, payment_type_id=?, user_id=? where payment_id=?
Hibernate: update payment set updated_by=?, updated_time=?, billing_ref_id=?, business_descriptor=?, country_code=?, currency_code=?, external_token=?, merchant_account_id=?, net_amount=?, payment_instrument_id=?, payment_provider_id=?, payment_status_id=?, payment_type_id=?, user_id=? where payment_id=?
16:00:58.898 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:58.900 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:58.900 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.900 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:00:58.900 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.900 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9FA00000017], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.900 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.900 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9FA00000017], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.901 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.901 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.901 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9FA00000017], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.901 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.901 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.901 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.901 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:00:58.901 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.901 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.901 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:00:58.901 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.901 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.901 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@618d1f00
16:00:58.901 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9FA00000017 : 737072696E672D62746D000001451727D9FE00000018]
16:00:58.901 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9FA00000017 : 737072696E672D62746D000001451727D9FE00000018]
16:00:58.901 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9FA00000017 : 737072696E672D62746D000001451727D9FE00000018] with SUCCESS
16:00:58.901 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727D9FA00000017 : 737072696E672D62746D000001451727D9FE00000018] with SUCCESS
16:00:58.901 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:58.901 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:58.901 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:58.902 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:58.902 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:58.902 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:58.902 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:58.902 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:58.902 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:58.902 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:58.902 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:58.903 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D9FA00000017 : 737072696E672D62746D000001451727D9FE00000018] (with one-phase optimization)
16:00:58.904 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D9FA00000017 : 737072696E672D62746D000001451727D9FE00000018]
16:00:58.904 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:58.904 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:58.904 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:58.904 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:58.904 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:58.904 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:58.905 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9FA00000017], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.905 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:58.905 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727D9FA00000017 : 737072696E672D62746D000001451727D9FE00000018] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.905 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f cleaned up all transaction states for GTRID [737072696E672D62746D000001451727D9FA00000017]
16:00:58.905 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:58.905 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@1f75f2c7 with status=COMMITTED
16:00:58.905 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:58.905 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
16:00:58.905 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@618d1f00 with status=COMMITTED
16:00:58.905 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9FA00000017], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) with status=COMMITTED
16:00:58.905 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9FA00000017], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:58.905 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D9FA00000017], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.906 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f with status=COMMITTED
16:00:58.906 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.906 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.906 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.906 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the inaccessible pool
16:00:58.906 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.906 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.906 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the available pool
16:00:58.906 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:58.906 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:58.906 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.906 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.906 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:58.906 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null
16:00:58.906 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.907 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.907 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:58.907 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.907 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null&gt;
16:00:58.907 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with JOIN
16:00:58.907 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A] with JOIN
16:00:58.907 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.907 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727D80F00000007] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef, adding it to the resource's transactions list
16:00:58.907 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:58.908 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'PaymentTransactionServiceImpl.getById' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly; ''
16:00:58.908 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:58.908 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:58.908 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.payment.PaymentEntity#973127680]
16:00:58.908 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.908 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.908 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.908 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D80F00000007]
16:00:58.909 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.909 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.909 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D80F00000007
16:00:58.909 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:58.909 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.909 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.909 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.909 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the inaccessible pool
16:00:58.909 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.909 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.909 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.909 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.909 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the accessible pool
16:00:58.909 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7d117aef was in state NOT_ACCESSIBLE, no need to test it
16:00:58.909 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.909 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.909 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.909 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.909 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.910 [Test worker] DEBUG org.hibernate.SQL - select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
Hibernate: select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
16:00:58.912 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:58.912 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEntity#973127680]
16:00:58.913 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.913 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@305b8340
16:00:58.913 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.913 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.913 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.913 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.913 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.913 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.913 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.913 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.913 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.913 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.913 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the accessible pool
16:00:58.913 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.913 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.913 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the inaccessible pool
16:00:58.914 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.914 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.914 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEntity#973127680]
16:00:58.914 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEntity#973127680]
16:00:58.914 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:58.914 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:58.917 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:58.917 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:58.918 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 8 objects
16:00:58.918 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:58.918 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:58.919 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.MerchantAccountEntity{tenantId=0, piType=null, paymentProviderId=0, createdBy=wenhongzhu, createdTime=2014-02-10 00:00:00.0, countryCode=null, merchantAccountId=1, merchantAccountRef=jb_GBP, currency=GBP}
16:00:58.919 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PhoneEntity{id=654344256, phoneExtension=null, createdBy=null, areaCode=null, createdTime=2014-03-31 00:00:00.0, number=12345678, type=0, updatedTime=2014-03-31 00:00:00.0, updatedBy=null}
16:00:58.919 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEntity{paymentProviderId=0, status=9, createdTime=2014-03-31 00:00:00.0, externalToken=1234, countryCode=null, merchantAccountId=0, businessDescriptor=ut, type=0, billingRefId=123, updatedBy=null, currency=USD, id=973127680, createdBy=null, userId=123, paymentInstrumentId=654344256, updatedTime=2014-03-31 00:00:00.0, netAmount=100}
16:00:58.919 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.MerchantAccountEntity{tenantId=0, piType=null, paymentProviderId=0, createdBy=wenhongzhu, createdTime=2014-02-10 00:00:00.0, countryCode=null, merchantAccountId=0, merchantAccountRef=8qnzm4r4ytckyf4d, currency=USD}
16:00:58.919 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity{relationToHolder=null, status=0, createdTime=2014-03-31 00:00:00.0, type=0, accountNum=1111, addressId=654344256, updatedBy=null, lastValidatedTime=2014-03-31 00:00:00.0, id=654344256, accountName=ut, createdBy=null, email=null, isDefault=true, userId=123, phoneId=654344256, encryptedAccountNO=null, updatedTime=2014-03-31 00:00:00.0}
16:00:58.919 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.AddressEntity{createdTime=2014-03-31 00:00:00.0, state=null, addressLine3=null, addressLine2=null, addressLine1=3rd street, updatedBy=null, city=LA, country=US , id=654344256, postalCode=12345, createdBy=null, unitNumber=null, district=null, updatedTime=2014-03-31 00:00:00.0}
16:00:58.919 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentProviderEntity{id=0, piType=0, createdBy=wenhongzhu, providerName=BrainTree, createdTime=2014-02-10 00:00:00.0, countryCode=null, currency=USD}
16:00:58.919 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity{prepaid=UNKNOW, createdTime=2014-03-31 00:00:00.0, externalToken=123, type=0, issueCountry=UNKNOW, updatedBy=null, id=654344256, lastBillingDate=2014-03-31 00:00:00.0, createdBy=null, expireDate=2025-11, debit=UNKNOW, commercial=UNKNOW, updatedTime=2014-03-31 00:00:00.0}
16:00:58.919 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.920 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.920 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.920 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727D80F00000007]
16:00:58.920 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.920 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.920 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727D80F00000007
16:00:58.920 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:58.920 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.920 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.920 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.920 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the inaccessible pool
16:00:58.920 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.920 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.920 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.920 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.920 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the accessible pool
16:00:58.920 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7d117aef was in state NOT_ACCESSIBLE, no need to test it
16:00:58.920 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.920 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.920 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.920 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.920 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727D80F00000007 : 737072696E672D62746D000001451727D86F0000000A]
16:00:58.921 [Test worker] DEBUG org.hibernate.SQL - select this_.payment_event_id as payment1_6_0_, this_.created_by as created2_6_0_, this_.created_time as created3_6_0_, this_.updated_by as updated4_6_0_, this_.updated_time as updated5_6_0_, this_.currency_code as currency6_6_0_, this_.net_amount as net7_6_0_, this_.payment_id as payment8_6_0_, this_.request as request6_0_, this_.response as response6_0_, this_.event_status_id as event11_6_0_, this_.payment_event_type_id as payment12_6_0_ from payment_event this_ where this_.payment_id=?
Hibernate: select this_.payment_event_id as payment1_6_0_, this_.created_by as created2_6_0_, this_.created_time as created3_6_0_, this_.updated_by as updated4_6_0_, this_.updated_time as updated5_6_0_, this_.currency_code as currency6_6_0_, this_.net_amount as net7_6_0_, this_.payment_id as payment8_6_0_, this_.request as request6_0_, this_.response as response6_0_, this_.event_status_id as event11_6_0_, this_.payment_event_type_id as payment12_6_0_ from payment_event this_ where this_.payment_id=?
16:00:58.930 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:58.930 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEventEntity#973144064]
16:00:58.931 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 1
16:00:58.931 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEventEntity#973160448]
16:00:58.931 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 2
16:00:58.931 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEventEntity#973193216]
16:00:58.932 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 3
16:00:58.932 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEventEntity#973209600]
16:00:58.933 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.933 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@305b8340
16:00:58.933 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.933 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.933 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.933 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.933 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.933 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.933 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727D80F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.933 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.933 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.933 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.933 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the accessible pool
16:00:58.933 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.933 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.933 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the inaccessible pool
16:00:58.933 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:58.933 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.934 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEventEntity#973144064]
16:00:58.934 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEventEntity#973144064]
16:00:58.934 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEventEntity#973160448]
16:00:58.934 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEventEntity#973160448]
16:00:58.934 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEventEntity#973193216]
16:00:58.934 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEventEntity#973193216]
16:00:58.934 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEventEntity#973209600]
16:00:58.934 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEventEntity#973209600]
16:00:58.935 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:58.935 [Test worker] DEBUG o.h.t.DistinctResultTransformer - Transformed: 4 rows to: 4 distinct results
16:00:58.965 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:58.966 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.966 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:58.966 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:58.966 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:58.967 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.967 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727DA570000001A]
16:00:58.967 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:58.967 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:58.967 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:58.967 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) for Mon Mar 31 16:01:58 CST 2014
16:00:58.967 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.968 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) scheduled for Mon Mar 31 16:01:58 CST 2014, total task(s) queued: 5
16:00:58.968 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:58 CST 2014
16:00:58.969 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:58.969 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:58.969 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@785625ea
16:00:58.969 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:58.969 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528589
16:00:58.969 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@10f30cdf
16:00:58.970 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:58.970 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (3 still available)
16:00:58.970 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (3 still available)
16:00:58.970 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DA570000001A]
16:00:58.970 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:58.971 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (3 still available), waiting if necessary
16:00:58.972 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 - closing time: 1396252918871, now time: 1396252858972
16:00:58.972 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.972 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.972 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.972 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.972 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.972 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:58.972 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state IN_POOL, testing it
16:00:58.973 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, skipping test
16:00:58.973 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.973 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.973 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:58.973 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.973 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@324d7c25 belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:58.973 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727DA570000001A : 737072696E672D62746D000001451727DA5D0000001B]
16:00:58.973 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DA570000001A : 737072696E672D62746D000001451727DA5D0000001B]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID null&gt;
16:00:58.973 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID a Bitronix XID [737072696E672D62746D000001451727DA570000001A : 737072696E672D62746D000001451727DA5D0000001B] with NOFLAGS
16:00:58.973 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA570000001A : 737072696E672D62746D000001451727DA5D0000001B] with NOFLAGS
16:00:58.974 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA570000001A : 737072696E672D62746D000001451727DA5D0000001B]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.974 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DA570000001A] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, adding it to the resource's transactions list
16:00:58.974 [Test worker] DEBUG org.hibernate.SQL - select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
Hibernate: select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
16:00:58.976 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:58.976 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:58.976 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.976 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.976 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.976 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.976 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.976 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.976 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:58.976 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.977 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.977 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:58.977 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:58.977 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.977 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.977 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:58.977 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:58.977 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:58.977 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:58.977 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:58.977 [Test worker] DEBUG o.h.t.DistinctResultTransformer - Transformed: 0 rows to: 0 distinct results
16:00:58.977 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:58.977 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:58.978 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 654360640, using strategy: org.hibernate.id.Assigned
16:00:58.978 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 654360640, using strategy: org.hibernate.id.Assigned
16:00:58.978 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 654360640, using strategy: org.hibernate.id.Assigned
16:00:58.979 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 654360640, using strategy: org.hibernate.id.Assigned
16:00:58.980 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - parse() - HQL: update com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity set is_default = CASE WHEN payment_instrument_id = 654360640 THEN true ELSE false END where user_id = 123
16:00:58.984 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - --- HQL AST ---
 \-[UPDATE] Node: 'update'
    +-[FROM] Node: 'FROM'
    |  \-[RANGE] Node: 'RANGE'
    |     \-[DOT] Node: '.'
    |        +-[DOT] Node: '.'
    |        |  +-[DOT] Node: '.'
    |        |  |  +-[DOT] Node: '.'
    |        |  |  |  +-[DOT] Node: '.'
    |        |  |  |  |  +-[DOT] Node: '.'
    |        |  |  |  |  |  +-[IDENT] Node: 'com'
    |        |  |  |  |  |  \-[IDENT] Node: 'junbo'
    |        |  |  |  |  \-[IDENT] Node: 'payment'
    |        |  |  |  \-[IDENT] Node: 'db'
    |        |  |  \-[IDENT] Node: 'entity'
    |        |  \-[IDENT] Node: 'paymentinstrument'
    |        \-[IDENT] Node: 'PaymentInstrumentEntity'
    +-[SET] Node: 'set'
    |  \-[EQ] Node: '='
    |     +-[IDENT] Node: 'is_default'
    |     \-[CASE] Node: 'CASE'
    |        +-[WHEN] Node: 'WHEN'
    |        |  +-[EQ] Node: '='
    |        |  |  +-[IDENT] Node: 'payment_instrument_id'
    |        |  |  \-[NUM_INT] Node: '654360640'
    |        |  \-[TRUE] Node: 'true'
    |        \-[ELSE] Node: 'ELSE'
    |           \-[FALSE] Node: 'false'
    \-[WHERE] Node: 'where'
       \-[EQ] Node: '='
          +-[IDENT] Node: 'user_id'
          \-[NUM_INT] Node: '123'

16:00:58.985 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:00:58.985 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - update &lt;&lt; begin [level=1, statement=update]
16:00:58.985 [Test worker] DEBUG o.h.h.internal.ast.tree.FromElement - FromClause{level=1} : com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity (&lt;no alias&gt;) -&gt; paymentins0_
16:00:58.990 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - update : finishing up [level=1, statement=update]
16:00:58.990 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - update &gt;&gt; end [level=1, statement=update]
16:00:58.992 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - --- SQL AST ---
 \-[UPDATE] UpdateStatement: 'update'  querySpaces (payment_instrument)
    +-[FROM] FromClause: 'FROM' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[], fromElementByTableAlias=[paymentins0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
    |  \-[FROM_FRAGMENT] FromElement: 'payment_instrument' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=payment_instrument,tableAlias=paymentins0_,origin=null,columns={,className=com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity}}
    +-[SET] SqlNode: 'set'
    |  \-[EQ] BinaryLogicOperatorNode: '='
    |     +-[IDENT] IdentNode: 'is_default' {originalText=is_default}
    |     \-[CASE] CaseNode: 'CASE'
    |        +-[WHEN] SqlNode: 'WHEN'
    |        |  +-[EQ] BinaryLogicOperatorNode: '='
    |        |  |  +-[IDENT] IdentNode: 'payment_instrument_id' {originalText=payment_instrument_id}
    |        |  |  \-[NUM_INT] LiteralNode: '654360640'
    |        |  \-[TRUE] BooleanLiteralNode: 'true'
    |        \-[ELSE] SqlNode: 'ELSE'
    |           \-[FALSE] BooleanLiteralNode: 'false'
    \-[WHERE] SqlNode: 'where'
       \-[EQ] BinaryLogicOperatorNode: '='
          +-[IDENT] IdentNode: 'user_id' {originalText=user_id}
          \-[NUM_INT] LiteralNode: '123'

16:00:58.992 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:00:58.994 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:00:58.994 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:58.995 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:58.996 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
16:00:58.996 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:58.996 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:58.996 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity{relationToHolder=null, status=0, createdTime=Mon Mar 31 16:00:58 CST 2014, type=0, accountNum=1111, addressId=654360640, updatedBy=null, lastValidatedTime=Mon Mar 31 16:00:58 CST 2014, id=654360640, accountName=ut, createdBy=null, email=null, isDefault=true, userId=123, phoneId=654360640, encryptedAccountNO=null, updatedTime=Mon Mar 31 16:00:58 CST 2014}
16:00:58.997 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.AddressEntity{createdTime=Mon Mar 31 16:00:58 CST 2014, state=null, addressLine3=null, addressLine2=null, addressLine1=3rd street, updatedBy=null, city=LA, country=US, id=654360640, postalCode=12345, createdBy=null, unitNumber=null, district=null, updatedTime=Mon Mar 31 16:00:58 CST 2014}
16:00:58.997 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity{prepaid=UNKNOW, createdTime=Mon Mar 31 16:00:58 CST 2014, externalToken=123, type=0, issueCountry=UNKNOW, updatedBy=null, id=654360640, lastBillingDate=Mon Mar 31 16:00:58 CST 2014, createdBy=null, expireDate=2025-11, debit=UNKNOW, commercial=UNKNOW, updatedTime=Mon Mar 31 16:00:58 CST 2014}
16:00:58.998 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PhoneEntity{id=654360640, phoneExtension=null, createdBy=null, areaCode=null, createdTime=Mon Mar 31 16:00:58 CST 2014, number=12345678, type=0, updatedTime=Mon Mar 31 16:00:58 CST 2014, updatedBy=null}
16:00:59.001 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: payment_instrument
16:00:59.002 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.002 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.002 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.003 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DA570000001A]
16:00:59.003 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.003 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.003 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DA570000001A
16:00:59.003 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.003 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.003 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.003 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.003 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:59.003 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.003 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.004 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.005 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.005 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:59.005 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state NOT_ACCESSIBLE, no need to test it
16:00:59.005 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.005 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.005 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.005 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.006 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA570000001A : 737072696E672D62746D000001451727DA5D0000001B]
16:00:59.006 [Test worker] DEBUG org.hibernate.SQL - insert into address (created_by, created_time, updated_by, updated_time, address_line_1, address_line_2, address_line_3, city, country_code, district, postal_code, state, unit_number, address_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into address (created_by, created_time, updated_by, updated_time, address_line_1, address_line_2, address_line_3, city, country_code, district, postal_code, state, unit_number, address_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.007 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.010 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.010 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.010 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA570000001A : 737072696E672D62746D000001451727DA5D0000001B]
16:00:59.011 [Test worker] DEBUG org.hibernate.SQL - insert into phone (created_by, created_time, updated_by, updated_time, phone_area_code, phone_local_number, phone_extension, phone_type_id, phone_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into phone (created_by, created_time, updated_by, updated_time, phone_area_code, phone_local_number, phone_extension, phone_type_id, phone_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.011 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.013 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.013 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.013 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA570000001A : 737072696E672D62746D000001451727DA5D0000001B]
16:00:59.014 [Test worker] DEBUG org.hibernate.SQL - insert into payment_instrument (created_by, created_time, updated_by, updated_time, payment_instrument_holder_name, account_number, address_id, email, encrypted_account_number, is_default, last_validated_time, phone_id, relation_to_holder, status_id, payment_instrument_type_id, user_id, payment_instrument_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_instrument (created_by, created_time, updated_by, updated_time, payment_instrument_holder_name, account_number, address_id, email, encrypted_account_number, is_default, last_validated_time, phone_id, relation_to_holder, status_id, payment_instrument_type_id, user_id, payment_instrument_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.015 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.017 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.017 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.018 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA570000001A : 737072696E672D62746D000001451727DA5D0000001B]
16:00:59.018 [Test worker] DEBUG org.hibernate.SQL - insert into credit_card_payment_instrument (created_by, created_time, updated_by, updated_time, commercial, debit, expire_time, external_token, issue_country, last_billing_time, prepaid, credit_card_type_id, payment_instrument_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into credit_card_payment_instrument (created_by, created_time, updated_by, updated_time, commercial, debit, expire_time, external_token, issue_country, last_billing_time, prepaid, credit_card_type_id, payment_instrument_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.018 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.020 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.020 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.020 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:59.020 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.020 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.020 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.020 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.020 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.020 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.021 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.021 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.021 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.021 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.021 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:59.022 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.022 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.022 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:59.022 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.022 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.022 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.023 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.023 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.023 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DA570000001A]
16:00:59.023 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.023 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.023 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DA570000001A
16:00:59.023 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.023 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.023 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.023 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.023 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:59.023 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.023 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.023 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.024 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.024 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:59.024 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state NOT_ACCESSIBLE, no need to test it
16:00:59.024 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.024 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.024 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.024 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.024 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA570000001A : 737072696E672D62746D000001451727DA5D0000001B]
16:00:59.024 [Test worker] DEBUG org.hibernate.SQL - update payment_instrument set is_default=case when payment_instrument_id=654360640 then true else false end where user_id=123
Hibernate: update payment_instrument set is_default=case when payment_instrument_id=654360640 then true else false end where user_id=123
16:00:59.026 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.027 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:59.027 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.027 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.027 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.027 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.027 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.027 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.027 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.027 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.027 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.027 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.027 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:59.027 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.027 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.027 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:59.027 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.027 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.028 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973242368, using strategy: org.hibernate.id.Assigned
16:00:59.029 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:59.029 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.029 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.029 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.029 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) scheduled for Mon Mar 31 16:01:58 CST 2014, total task(s) still queued: 4
16:00:59.029 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:59.029 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.029 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.029 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@785625ea
16:00:59.029 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:59.029 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:59.030 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 1 insertions, 0 updates, 0 deletions to 5 objects
16:00:59.030 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:59.030 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:59.030 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity{relationToHolder=null, status=0, createdTime=Mon Mar 31 16:00:58 CST 2014, type=0, accountNum=1111, addressId=654360640, updatedBy=null, lastValidatedTime=Mon Mar 31 16:00:58 CST 2014, id=654360640, accountName=ut, createdBy=null, email=null, isDefault=true, userId=123, phoneId=654360640, encryptedAccountNO=null, updatedTime=Mon Mar 31 16:00:58 CST 2014}
16:00:59.030 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.AddressEntity{createdTime=Mon Mar 31 16:00:58 CST 2014, state=null, addressLine3=null, addressLine2=null, addressLine1=3rd street, updatedBy=null, city=LA, country=US, id=654360640, postalCode=12345, createdBy=null, unitNumber=null, district=null, updatedTime=Mon Mar 31 16:00:58 CST 2014}
16:00:59.031 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.TrackingUuidEntity{response={&quot;accountName&quot;:&quot;ut&quot;,&quot;accountNum&quot;:&quot;1111&quot;,&quot;address&quot;:{&quot;addressLine1&quot;:&quot;3rd street&quot;,&quot;city&quot;:&quot;LA&quot;,&quot;country&quot;:&quot;US&quot;,&quot;postalCode&quot;:&quot;12345&quot;},&quot;creditCardRequest&quot;:{&quot;commercial&quot;:&quot;UNKNOW&quot;,&quot;debit&quot;:&quot;UNKNOW&quot;,&quot;encryptedCvmCode&quot;:&quot;111&quot;,&quot;expireDate&quot;:&quot;2025-11&quot;,&quot;externalToken&quot;:&quot;123&quot;,&quot;issueCountry&quot;:&quot;UNKNOW&quot;,&quot;lastBillingDate&quot;:1396252858977,&quot;prepaid&quot;:&quot;UNKNOW&quot;,&quot;type&quot;:&quot;VISA&quot;},&quot;id&quot;:{&quot;paymentInstrumentId&quot;:654360640,&quot;primaryId&quot;:654360640,&quot;userId&quot;:123},&quot;isDefault&quot;:&quot;true&quot;,&quot;isValidated&quot;:true,&quot;lastValidatedTime&quot;:1396252858977,&quot;phone&quot;:{&quot;number&quot;:&quot;12345678&quot;,&quot;type&quot;:&quot;Home&quot;},&quot;status&quot;:&quot;ACTIVE&quot;,&quot;trackingUuid&quot;:&quot;e1db37d3-956c-4861-a219-d725935676ea&quot;,&quot;type&quot;:&quot;CREDITCARD&quot;}, id=973242368, createdBy=null, trackingUuid=e1db37d3-956c-4861-a219-d725935676ea, createdTime=Mon Mar 31 16:00:59 CST 2014, paymentId=null, userId=123, api=0, paymentInstrumentId=654360640, updatedTime=Mon Mar 31 16:00:59 CST 2014, updatedBy=null}
16:00:59.031 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity{prepaid=UNKNOW, createdTime=Mon Mar 31 16:00:58 CST 2014, externalToken=123, type=0, issueCountry=UNKNOW, updatedBy=null, id=654360640, lastBillingDate=Mon Mar 31 16:00:58 CST 2014, createdBy=null, expireDate=2025-11, debit=UNKNOW, commercial=UNKNOW, updatedTime=Mon Mar 31 16:00:58 CST 2014}
16:00:59.031 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PhoneEntity{id=654360640, phoneExtension=null, createdBy=null, areaCode=null, createdTime=Mon Mar 31 16:00:58 CST 2014, number=12345678, type=0, updatedTime=Mon Mar 31 16:00:58 CST 2014, updatedBy=null}
16:00:59.031 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.031 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.031 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.031 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DA570000001A]
16:00:59.031 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.031 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.031 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DA570000001A
16:00:59.031 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.031 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.031 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.031 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.031 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:59.032 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.032 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.032 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.032 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.032 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:59.032 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state NOT_ACCESSIBLE, no need to test it
16:00:59.032 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.032 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.032 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.032 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.032 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA570000001A : 737072696E672D62746D000001451727DA5D0000001B]
16:00:59.032 [Test worker] DEBUG org.hibernate.SQL - insert into payment_tracking_uuid (created_by, created_time, updated_by, updated_time, api_id, payment_id, payment_instrument_id, response, tracking_uuid, user_id, tracking_uuid_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_tracking_uuid (created_by, created_time, updated_by, updated_time, api_id, payment_id, payment_instrument_id, response, tracking_uuid, user_id, tracking_uuid_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.033 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.035 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.035 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.035 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:59.036 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.036 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.036 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.036 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.036 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.036 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.036 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.036 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.036 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.036 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.036 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:59.037 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.037 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.037 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:59.037 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.037 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.037 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@10f30cdf
16:00:59.038 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA570000001A : 737072696E672D62746D000001451727DA5D0000001B]
16:00:59.038 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA570000001A : 737072696E672D62746D000001451727DA5D0000001B]
16:00:59.038 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA570000001A : 737072696E672D62746D000001451727DA5D0000001B] with SUCCESS
16:00:59.039 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA570000001A : 737072696E672D62746D000001451727DA5D0000001B] with SUCCESS
16:00:59.039 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:59.039 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:59.039 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:59.039 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:59.039 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:59.039 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:59.040 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:59.040 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:59.040 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:59.040 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:59.040 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:59.040 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA570000001A : 737072696E672D62746D000001451727DA5D0000001B] (with one-phase optimization)
16:00:59.041 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA570000001A : 737072696E672D62746D000001451727DA5D0000001B]
16:00:59.042 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:59.042 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:59.042 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:59.042 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:59.042 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:59.043 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:59.043 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.043 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:59.043 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727DA570000001A : 737072696E672D62746D000001451727DA5D0000001B] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.043 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 cleaned up all transaction states for GTRID [737072696E672D62746D000001451727DA570000001A]
16:00:59.043 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:59.043 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@785625ea with status=COMMITTED
16:00:59.043 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:59.043 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
16:00:59.043 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@10f30cdf with status=COMMITTED
16:00:59.043 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014) with status=COMMITTED
16:00:59.043 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:59.043 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA570000001A], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.043 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 with status=COMMITTED
16:00:59.043 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.043 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.044 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.044 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:59.044 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.044 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.044 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the available pool
16:00:59.044 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.044 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:59.044 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.044 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.044 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:59.044 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:59.044 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:59.044 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:59.045 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@3a8923ff
16:00:59.045 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:59.045 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528590
16:00:59.045 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@2ca6887
16:00:59.046 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654360640]
16:00:59.046 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.046 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (3 still available)
16:00:59.046 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (3 still available)
16:00:59.046 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DA5200000019]
16:00:59.046 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:59.046 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (3 still available), waiting if necessary
16:00:59.047 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f - closing time: 1396252918906, now time: 1396252859047
16:00:59.047 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.047 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.047 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.047 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.047 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.048 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:00:59.048 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state IN_POOL, testing it
16:00:59.049 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f, skipping test
16:00:59.049 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.050 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.050 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.050 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.050 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@69e210f belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.050 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.050 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null&gt;
16:00:59.050 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with NOFLAGS
16:00:59.050 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with NOFLAGS
16:00:59.050 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.050 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DA5200000019] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f, adding it to the resource's transactions list
16:00:59.050 [Test worker] DEBUG org.hibernate.SQL - select paymentins0_.payment_instrument_id as payment1_10_0_, paymentins0_.created_by as created2_10_0_, paymentins0_.created_time as created3_10_0_, paymentins0_.updated_by as updated4_10_0_, paymentins0_.updated_time as updated5_10_0_, paymentins0_.payment_instrument_holder_name as payment6_10_0_, paymentins0_.account_number as account7_10_0_, paymentins0_.address_id as address8_10_0_, paymentins0_.email as email10_0_, paymentins0_.encrypted_account_number as encrypted10_10_0_, paymentins0_.is_default as is11_10_0_, paymentins0_.last_validated_time as last12_10_0_, paymentins0_.phone_id as phone13_10_0_, paymentins0_.relation_to_holder as relation14_10_0_, paymentins0_.status_id as status15_10_0_, paymentins0_.payment_instrument_type_id as payment16_10_0_, paymentins0_.user_id as user17_10_0_ from payment_instrument paymentins0_ where paymentins0_.payment_instrument_id=?
Hibernate: select paymentins0_.payment_instrument_id as payment1_10_0_, paymentins0_.created_by as created2_10_0_, paymentins0_.created_time as created3_10_0_, paymentins0_.updated_by as updated4_10_0_, paymentins0_.updated_time as updated5_10_0_, paymentins0_.payment_instrument_holder_name as payment6_10_0_, paymentins0_.account_number as account7_10_0_, paymentins0_.address_id as address8_10_0_, paymentins0_.email as email10_0_, paymentins0_.encrypted_account_number as encrypted10_10_0_, paymentins0_.is_default as is11_10_0_, paymentins0_.last_validated_time as last12_10_0_, paymentins0_.phone_id as phone13_10_0_, paymentins0_.relation_to_holder as relation14_10_0_, paymentins0_.status_id as status15_10_0_, paymentins0_.payment_instrument_type_id as payment16_10_0_, paymentins0_.user_id as user17_10_0_ from payment_instrument paymentins0_ where paymentins0_.payment_instrument_id=?
16:00:59.052 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.053 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654360640]
16:00:59.054 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.054 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:00:59.054 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.054 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.054 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.054 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.054 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.054 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.054 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.054 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.054 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.054 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.054 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:00:59.054 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.054 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.054 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:00:59.054 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.054 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.055 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:59.055 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654360640]
16:00:59.055 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654360640]
16:00:59.055 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.055 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:59.055 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.paymentinstrument.AddressEntity#654360640]
16:00:59.055 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.055 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.055 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.055 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DA5200000019]
16:00:59.055 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.055 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.056 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DA5200000019
16:00:59.056 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.059 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.059 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.059 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.059 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f from the inaccessible pool
16:00:59.059 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.059 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.060 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.060 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.060 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:00:59.060 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state NOT_ACCESSIBLE, no need to test it
16:00:59.061 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.061 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.061 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.061 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.061 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.061 [Test worker] DEBUG org.hibernate.SQL - select addressent0_.address_id as address1_8_0_, addressent0_.created_by as created2_8_0_, addressent0_.created_time as created3_8_0_, addressent0_.updated_by as updated4_8_0_, addressent0_.updated_time as updated5_8_0_, addressent0_.address_line_1 as address6_8_0_, addressent0_.address_line_2 as address7_8_0_, addressent0_.address_line_3 as address8_8_0_, addressent0_.city as city8_0_, addressent0_.country_code as country10_8_0_, addressent0_.district as district8_0_, addressent0_.postal_code as postal12_8_0_, addressent0_.state as state8_0_, addressent0_.unit_number as unit14_8_0_ from address addressent0_ where addressent0_.address_id=?
Hibernate: select addressent0_.address_id as address1_8_0_, addressent0_.created_by as created2_8_0_, addressent0_.created_time as created3_8_0_, addressent0_.updated_by as updated4_8_0_, addressent0_.updated_time as updated5_8_0_, addressent0_.address_line_1 as address6_8_0_, addressent0_.address_line_2 as address7_8_0_, addressent0_.address_line_3 as address8_8_0_, addressent0_.city as city8_0_, addressent0_.country_code as country10_8_0_, addressent0_.district as district8_0_, addressent0_.postal_code as postal12_8_0_, addressent0_.state as state8_0_, addressent0_.unit_number as unit14_8_0_ from address addressent0_ where addressent0_.address_id=?
16:00:59.063 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.064 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.paymentinstrument.AddressEntity#654360640]
16:00:59.066 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.066 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:00:59.066 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.066 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.066 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.066 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.066 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.066 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.066 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.066 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.066 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.066 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.066 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:00:59.066 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.066 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.066 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:00:59.066 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.067 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.067 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.paymentinstrument.AddressEntity#654360640]
16:00:59.067 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.paymentinstrument.AddressEntity#654360640]
16:00:59.067 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.067 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:59.067 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.paymentinstrument.PhoneEntity#654360640]
16:00:59.067 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.067 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.067 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.067 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DA5200000019]
16:00:59.067 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.067 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.068 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DA5200000019
16:00:59.068 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.068 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.068 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.068 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.068 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f from the inaccessible pool
16:00:59.068 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.068 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.068 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.068 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.068 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:00:59.069 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state NOT_ACCESSIBLE, no need to test it
16:00:59.069 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.069 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.069 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.070 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.070 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.070 [Test worker] DEBUG org.hibernate.SQL - select phoneentit0_.phone_id as phone1_11_0_, phoneentit0_.created_by as created2_11_0_, phoneentit0_.created_time as created3_11_0_, phoneentit0_.updated_by as updated4_11_0_, phoneentit0_.updated_time as updated5_11_0_, phoneentit0_.phone_area_code as phone6_11_0_, phoneentit0_.phone_local_number as phone7_11_0_, phoneentit0_.phone_extension as phone8_11_0_, phoneentit0_.phone_type_id as phone9_11_0_ from phone phoneentit0_ where phoneentit0_.phone_id=?
Hibernate: select phoneentit0_.phone_id as phone1_11_0_, phoneentit0_.created_by as created2_11_0_, phoneentit0_.created_time as created3_11_0_, phoneentit0_.updated_by as updated4_11_0_, phoneentit0_.updated_time as updated5_11_0_, phoneentit0_.phone_area_code as phone6_11_0_, phoneentit0_.phone_local_number as phone7_11_0_, phoneentit0_.phone_extension as phone8_11_0_, phoneentit0_.phone_type_id as phone9_11_0_ from phone phoneentit0_ where phoneentit0_.phone_id=?
16:00:59.074 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.075 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.paymentinstrument.PhoneEntity#654360640]
16:00:59.077 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.078 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:00:59.078 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.078 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.078 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.078 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.078 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.078 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.080 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.080 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.080 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.080 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.081 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:00:59.082 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.082 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.083 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:00:59.083 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.083 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.084 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.paymentinstrument.PhoneEntity#654360640]
16:00:59.084 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.paymentinstrument.PhoneEntity#654360640]
16:00:59.084 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.084 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:59.085 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity#654360640]
16:00:59.085 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.085 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.085 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.085 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DA5200000019]
16:00:59.085 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.085 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.086 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DA5200000019
16:00:59.086 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.086 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.086 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.086 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.086 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f from the inaccessible pool
16:00:59.086 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.086 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.087 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.087 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.088 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:00:59.088 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state NOT_ACCESSIBLE, no need to test it
16:00:59.088 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.088 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.091 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.091 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.091 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.092 [Test worker] DEBUG org.hibernate.SQL - select creditcard0_.payment_instrument_id as payment1_9_0_, creditcard0_.created_by as created2_9_0_, creditcard0_.created_time as created3_9_0_, creditcard0_.updated_by as updated4_9_0_, creditcard0_.updated_time as updated5_9_0_, creditcard0_.commercial as commercial9_0_, creditcard0_.debit as debit9_0_, creditcard0_.expire_time as expire8_9_0_, creditcard0_.external_token as external9_9_0_, creditcard0_.issue_country as issue10_9_0_, creditcard0_.last_billing_time as last11_9_0_, creditcard0_.prepaid as prepaid9_0_, creditcard0_.credit_card_type_id as credit13_9_0_ from credit_card_payment_instrument creditcard0_ where creditcard0_.payment_instrument_id=?
Hibernate: select creditcard0_.payment_instrument_id as payment1_9_0_, creditcard0_.created_by as created2_9_0_, creditcard0_.created_time as created3_9_0_, creditcard0_.updated_by as updated4_9_0_, creditcard0_.updated_time as updated5_9_0_, creditcard0_.commercial as commercial9_0_, creditcard0_.debit as debit9_0_, creditcard0_.expire_time as expire8_9_0_, creditcard0_.external_token as external9_9_0_, creditcard0_.issue_country as issue10_9_0_, creditcard0_.last_billing_time as last11_9_0_, creditcard0_.prepaid as prepaid9_0_, creditcard0_.credit_card_type_id as credit13_9_0_ from credit_card_payment_instrument creditcard0_ where creditcard0_.payment_instrument_id=?
16:00:59.094 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.095 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity#654360640]
16:00:59.095 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.095 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:00:59.095 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.095 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.095 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.095 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.096 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.096 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.096 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.096 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.096 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.096 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.096 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:00:59.096 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.096 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.096 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:00:59.096 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.096 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.097 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity#654360640]
16:00:59.098 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity#654360640]
16:00:59.098 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.098 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:59.099 [Test worker] INFO  c.j.p.c.i.PaymentTransactionServiceImpl - authorize for PI:com.junbo.payment.spec.model.PIId@46d2eca1
16:00:59.100 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:59.100 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.100 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.101 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with SUCCESS
16:00:59.101 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with SUCCESS
16:00:59.101 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:59.101 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:59.102 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:59.102 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.102 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727DADE0000001D]
16:00:59.102 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DADE0000001D], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.102 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:59.103 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:59.103 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DADE0000001D], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) for Mon Mar 31 16:01:59 CST 2014
16:00:59.103 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DADE0000001D], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.103 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DADE0000001D], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) queued: 5
16:00:59.103 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:59 CST 2014
16:00:59.104 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@4ca781d6
16:00:59.104 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:59.105 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528591
16:00:59.105 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@1b275945
16:00:59.106 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.106 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.106 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.106 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DADE0000001D]
16:00:59.107 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.107 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.107 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:59.107 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available), waiting if necessary
16:00:59.107 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef - closing time: 1396252918948, now time: 1396252859107
16:00:59.107 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.107 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.107 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.108 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.108 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.108 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the accessible pool
16:00:59.109 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7d117aef was in state IN_POOL, testing it
16:00:59.109 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef, skipping test
16:00:59.109 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.110 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.110 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.111 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DADE0000001D], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.111 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@7d117aef belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.111 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727DADE0000001D : 737072696E672D62746D000001451727DAE70000001E]
16:00:59.111 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DADE0000001D : 737072696E672D62746D000001451727DAE70000001E]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null&gt;
16:00:59.111 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID a Bitronix XID [737072696E672D62746D000001451727DADE0000001D : 737072696E672D62746D000001451727DAE70000001E] with NOFLAGS
16:00:59.112 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DADE0000001D : 737072696E672D62746D000001451727DAE70000001E] with NOFLAGS
16:00:59.112 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DADE0000001D : 737072696E672D62746D000001451727DAE70000001E]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.112 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DADE0000001D] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef, adding it to the resource's transactions list
16:00:59.113 [Test worker] DEBUG org.hibernate.SQL - select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
Hibernate: select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
16:00:59.115 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.115 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@305b8340
16:00:59.115 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.116 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DADE0000001D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.116 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.116 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DADE0000001D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.116 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.116 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.116 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DADE0000001D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.116 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.116 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.116 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.116 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the accessible pool
16:00:59.116 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.116 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.116 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the inaccessible pool
16:00:59.116 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.116 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.116 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:59.116 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.116 [Test worker] DEBUG o.h.t.DistinctResultTransformer - Transformed: 0 rows to: 0 distinct results
16:00:59.116 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:59.116 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DADE0000001D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.117 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DADE0000001D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.117 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DADE0000001D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.117 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DADE0000001D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) still queued: 4
16:00:59.117 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:59.117 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.117 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DADE0000001D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.117 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@4ca781d6
16:00:59.117 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@1b275945
16:00:59.117 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DADE0000001D : 737072696E672D62746D000001451727DAE70000001E]
16:00:59.117 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DADE0000001D : 737072696E672D62746D000001451727DAE70000001E]
16:00:59.117 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DADE0000001D : 737072696E672D62746D000001451727DAE70000001E] with SUCCESS
16:00:59.117 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DADE0000001D : 737072696E672D62746D000001451727DAE70000001E] with SUCCESS
16:00:59.117 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:59.117 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:59.117 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:59.117 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:59.117 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:59.117 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:59.117 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:59.117 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:59.117 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:59.117 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:59.118 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:59.118 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DADE0000001D : 737072696E672D62746D000001451727DAE70000001E] (with one-phase optimization)
16:00:59.120 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DADE0000001D : 737072696E672D62746D000001451727DAE70000001E]
16:00:59.120 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:59.120 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:59.120 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:59.121 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:59.121 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:59.121 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:59.122 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DADE0000001D], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.122 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:59.122 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727DADE0000001D : 737072696E672D62746D000001451727DAE70000001E] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.123 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef cleaned up all transaction states for GTRID [737072696E672D62746D000001451727DADE0000001D]
16:00:59.125 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:59.125 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@4ca781d6 with status=COMMITTED
16:00:59.126 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:59.126 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@1b275945 with status=COMMITTED
16:00:59.126 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DADE0000001D], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) with status=COMMITTED
16:00:59.126 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DADE0000001D], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.126 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DADE0000001D], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.127 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef with status=COMMITTED
16:00:59.127 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.127 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.127 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.127 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementUnregisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D000001451727D9FA00000017
16:00:59.127 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementUnregisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D000001451727D80F00000007
16:00:59.128 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D000001451727DA5200000019
16:00:59.128 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D000001451727DADE0000001D
16:00:59.128 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the inaccessible pool
16:00:59.128 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.128 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.129 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the available pool
16:00:59.129 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.129 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:59.129 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.129 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.129 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:59.129 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null
16:00:59.130 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.130 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.130 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:59.130 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.130 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null&gt;
16:00:59.131 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with JOIN
16:00:59.131 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with JOIN
16:00:59.131 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.131 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DA5200000019] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f, adding it to the resource's transactions list
16:00:59.131 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.132 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:59.133 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:59.134 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:59.134 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.134 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.134 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with SUCCESS
16:00:59.134 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with SUCCESS
16:00:59.134 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:59.134 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:59.134 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:59.134 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.134 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727DAFE0000001F]
16:00:59.134 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DAFE0000001F], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.134 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:59.135 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:59.135 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DAFE0000001F], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) for Mon Mar 31 16:01:59 CST 2014
16:00:59.135 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DAFE0000001F], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.135 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DAFE0000001F], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) queued: 5
16:00:59.135 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:59 CST 2014
16:00:59.136 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@533bd4fa
16:00:59.136 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:59.136 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528591
16:00:59.136 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@6230d2f8
16:00:59.136 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973258752, using strategy: org.hibernate.id.Assigned
16:00:59.137 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973275136, using strategy: org.hibernate.id.Assigned
16:00:59.137 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:59.137 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DAFE0000001F], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.137 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DAFE0000001F], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.137 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DAFE0000001F], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.137 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DAFE0000001F], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) still queued: 4
16:00:59.137 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 3 synchronization(s) to execute
16:00:59.137 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DAFE0000001F], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.137 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@533bd4fa
16:00:59.137 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:59.137 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:59.139 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 2 objects
16:00:59.139 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:59.139 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:59.140 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEventEntity{response={&quot;result&quot;: &quot;OK&quot;}, id=973275136, createdBy=null, status=0, createdTime=Mon Mar 31 16:00:59 CST 2014, paymentId=973258752, request={&quot;billingRefId&quot;:&quot;123&quot;,&quot;chargeInfo&quot;:{&quot;amount&quot;:100,&quot;businessDescriptor&quot;:&quot;ut&quot;,&quot;currency&quot;:&quot;USD&quot;},&quot;paymentInstrumentId&quot;:{&quot;paymentInstrumentId&quot;:654360640,&quot;primaryId&quot;:654360640,&quot;userId&quot;:123},&quot;trackingUuid&quot;:&quot;81562852-6b08-4347-9816-1c1af1243ee1&quot;,&quot;userId&quot;:123}, type=0, updatedTime=Mon Mar 31 16:00:59 CST 2014, netAmount=100, currency=USD, updatedBy=null}
16:00:59.140 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEntity{paymentProviderId=0, status=0, createdTime=Mon Mar 31 16:00:59 CST 2014, externalToken=null, countryCode=null, merchantAccountId=0, businessDescriptor=ut, type=0, billingRefId=123, updatedBy=null, currency=USD, id=973258752, createdBy=null, userId=123, paymentInstrumentId=654360640, updatedTime=Mon Mar 31 16:00:59 CST 2014, netAmount=100}
16:00:59.142 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.143 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.143 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.143 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DAFE0000001F]
16:00:59.144 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.144 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.144 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:59.144 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available), waiting if necessary
16:00:59.144 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 - closing time: 1396252919044, now time: 1396252859144
16:00:59.145 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.145 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.145 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.146 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.146 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.146 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:59.146 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state IN_POOL, testing it
16:00:59.146 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, skipping test
16:00:59.146 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.146 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.147 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.147 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DAFE0000001F], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.147 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@324d7c25 belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.147 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727DAFE0000001F : 737072696E672D62746D000001451727DB0B00000020]
16:00:59.147 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DAFE0000001F : 737072696E672D62746D000001451727DB0B00000020]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID null&gt;
16:00:59.149 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID a Bitronix XID [737072696E672D62746D000001451727DAFE0000001F : 737072696E672D62746D000001451727DB0B00000020] with NOFLAGS
16:00:59.149 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DAFE0000001F : 737072696E672D62746D000001451727DB0B00000020] with NOFLAGS
16:00:59.149 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DAFE0000001F : 737072696E672D62746D000001451727DB0B00000020]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.149 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DAFE0000001F] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, adding it to the resource's transactions list
16:00:59.150 [Test worker] DEBUG org.hibernate.SQL - insert into payment (created_by, created_time, updated_by, updated_time, billing_ref_id, business_descriptor, country_code, currency_code, external_token, merchant_account_id, net_amount, payment_instrument_id, payment_provider_id, payment_status_id, payment_type_id, user_id, payment_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment (created_by, created_time, updated_by, updated_time, billing_ref_id, business_descriptor, country_code, currency_code, external_token, merchant_account_id, net_amount, payment_instrument_id, payment_provider_id, payment_status_id, payment_type_id, user_id, payment_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.152 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.154 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.154 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DAFE0000001F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.154 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DAFE0000001F : 737072696E672D62746D000001451727DB0B00000020]
16:00:59.154 [Test worker] DEBUG org.hibernate.SQL - insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.155 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.157 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.157 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.157 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:59.159 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.159 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DAFE0000001F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.159 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.159 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DAFE0000001F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.159 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.160 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.160 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DAFE0000001F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.160 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.160 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.160 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.160 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:59.160 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.161 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.161 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:59.161 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.162 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.162 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:59.162 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@6230d2f8
16:00:59.162 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DAFE0000001F : 737072696E672D62746D000001451727DB0B00000020]
16:00:59.162 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DAFE0000001F : 737072696E672D62746D000001451727DB0B00000020]
16:00:59.162 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DAFE0000001F : 737072696E672D62746D000001451727DB0B00000020] with SUCCESS
16:00:59.163 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DAFE0000001F : 737072696E672D62746D000001451727DB0B00000020] with SUCCESS
16:00:59.163 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:59.163 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:59.163 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:59.163 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:59.163 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:59.163 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:59.163 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:59.163 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:59.163 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:59.164 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:59.165 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:59.165 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DAFE0000001F : 737072696E672D62746D000001451727DB0B00000020] (with one-phase optimization)
16:00:59.167 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DAFE0000001F : 737072696E672D62746D000001451727DB0B00000020]
16:00:59.167 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:59.168 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:59.168 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:59.168 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:59.168 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:59.168 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:59.168 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DAFE0000001F], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.169 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:59.169 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727DAFE0000001F : 737072696E672D62746D000001451727DB0B00000020] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.169 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 cleaned up all transaction states for GTRID [737072696E672D62746D000001451727DAFE0000001F]
16:00:59.169 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:59.169 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@533bd4fa with status=COMMITTED
16:00:59.169 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:59.170 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
16:00:59.170 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@6230d2f8 with status=COMMITTED
16:00:59.170 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DAFE0000001F], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) with status=COMMITTED
16:00:59.171 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DAFE0000001F], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.171 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DAFE0000001F], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.172 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 with status=COMMITTED
16:00:59.172 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.172 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.173 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.173 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:59.173 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.173 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.173 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the available pool
16:00:59.173 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.173 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:59.173 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.173 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.173 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:59.173 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null
16:00:59.173 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.173 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.175 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:59.176 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.176 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null&gt;
16:00:59.176 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with JOIN
16:00:59.176 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with JOIN
16:00:59.177 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.177 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DA5200000019] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f, adding it to the resource's transactions list
16:00:59.178 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.179 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:59.179 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.179 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.179 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with SUCCESS
16:00:59.179 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with SUCCESS
16:00:59.179 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:59.179 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:59.179 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:59.179 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.179 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727DB2B00000021]
16:00:59.179 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB2B00000021], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.179 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:59.179 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:59.179 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB2B00000021], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) for Mon Mar 31 16:01:59 CST 2014
16:00:59.180 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB2B00000021], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.180 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB2B00000021], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) queued: 5
16:00:59.180 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:59 CST 2014
16:00:59.180 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@1f54f3ab
16:00:59.180 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:59.180 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528591
16:00:59.180 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@33a1cd92
16:00:59.180 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.181 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.181 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.181 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.181 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DB2B00000021]
16:00:59.181 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.181 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.181 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:59.181 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available), waiting if necessary
16:00:59.181 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef - closing time: 1396252919129, now time: 1396252859181
16:00:59.181 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.181 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.181 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.181 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.181 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.181 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the accessible pool
16:00:59.181 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7d117aef was in state IN_POOL, testing it
16:00:59.181 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef, skipping test
16:00:59.181 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.181 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.181 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.181 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB2B00000021], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.181 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@7d117aef belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.181 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727DB2B00000021 : 737072696E672D62746D000001451727DB2D00000022]
16:00:59.182 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DB2B00000021 : 737072696E672D62746D000001451727DB2D00000022]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null&gt;
16:00:59.182 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID a Bitronix XID [737072696E672D62746D000001451727DB2B00000021 : 737072696E672D62746D000001451727DB2D00000022] with NOFLAGS
16:00:59.182 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB2B00000021 : 737072696E672D62746D000001451727DB2D00000022] with NOFLAGS
16:00:59.182 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB2B00000021 : 737072696E672D62746D000001451727DB2D00000022]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.182 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DB2B00000021] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef, adding it to the resource's transactions list
16:00:59.182 [Test worker] DEBUG org.hibernate.SQL - select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
Hibernate: select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
16:00:59.185 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.185 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.186 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.186 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@305b8340
16:00:59.187 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.187 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB2B00000021], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.187 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.188 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB2B00000021], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.188 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.188 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.189 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB2B00000021], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.189 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.189 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.190 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.190 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the accessible pool
16:00:59.190 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.190 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.190 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the inaccessible pool
16:00:59.190 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.190 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.192 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:59.193 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.193 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.193 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.193 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:59.195 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973291520, using strategy: org.hibernate.id.Assigned
16:00:59.196 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973307904, using strategy: org.hibernate.id.Assigned
16:00:59.197 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:59.197 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB2B00000021], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.197 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB2B00000021], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.198 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB2B00000021], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.198 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB2B00000021], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) still queued: 4
16:00:59.198 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:59.199 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.199 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB2B00000021], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.199 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@1f54f3ab
16:00:59.199 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:59.200 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:59.200 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 1 updates, 0 deletions to 3 objects
16:00:59.201 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:59.201 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:59.201 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEventEntity{response={&quot;result&quot;: &quot;OK&quot;}, id=973291520, createdBy=null, status=1, createdTime=Mon Mar 31 16:00:59 CST 2014, paymentId=973258752, request={&quot;billingRefId&quot;:&quot;123&quot;,&quot;chargeInfo&quot;:{&quot;amount&quot;:100,&quot;businessDescriptor&quot;:&quot;ut&quot;,&quot;currency&quot;:&quot;USD&quot;},&quot;id&quot;:973258752,&quot;paymentInstrumentId&quot;:{&quot;paymentInstrumentId&quot;:654360640,&quot;primaryId&quot;:654360640,&quot;userId&quot;:123},&quot;trackingUuid&quot;:&quot;81562852-6b08-4347-9816-1c1af1243ee1&quot;,&quot;userId&quot;:123}, type=1, updatedTime=Mon Mar 31 16:00:59 CST 2014, netAmount=100, currency=USD, updatedBy=null}
16:00:59.201 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.TrackingUuidEntity{response={&quot;billingRefId&quot;:&quot;123&quot;,&quot;chargeInfo&quot;:{&quot;amount&quot;:100,&quot;businessDescriptor&quot;:&quot;ut&quot;,&quot;currency&quot;:&quot;USD&quot;},&quot;externalToken&quot;:&quot;1234&quot;,&quot;id&quot;:973258752,&quot;merchantAccount&quot;:&quot;8qnzm4r4ytckyf4d&quot;,&quot;paymentEvents&quot;:[{&quot;chargeInfo&quot;:{&quot;$ref&quot;:&quot;$.chargeInfo&quot;},&quot;paymentId&quot;:973258752,&quot;request&quot;:&quot;{\&quot;billingRefId\&quot;:\&quot;123\&quot;,\&quot;chargeInfo\&quot;:{\&quot;amount\&quot;:100,\&quot;businessDescriptor\&quot;:\&quot;ut\&quot;,\&quot;currency\&quot;:\&quot;USD\&quot;},\&quot;paymentInstrumentId\&quot;:{\&quot;paymentInstrumentId\&quot;:654360640,\&quot;primaryId\&quot;:654360640,\&quot;userId\&quot;:123},\&quot;trackingUuid\&quot;:\&quot;81562852-6b08-4347-9816-1c1af1243ee1\&quot;,\&quot;userId\&quot;:123}&quot;,&quot;response&quot;:&quot;{\&quot;result\&quot;: \&quot;OK\&quot;}&quot;,&quot;status&quot;:&quot;AUTH_CREATED&quot;,&quot;type&quot;:&quot;AUTH_CREATE&quot;},{&quot;chargeInfo&quot;:{&quot;$ref&quot;:&quot;$.chargeInfo&quot;},&quot;paymentId&quot;:973258752,&quot;request&quot;:&quot;{\&quot;billingRefId\&quot;:\&quot;123\&quot;,\&quot;chargeInfo\&quot;:{\&quot;amount\&quot;:100,\&quot;businessDescriptor\&quot;:\&quot;ut\&quot;,\&quot;currency\&quot;:\&quot;USD\&quot;},\&quot;id\&quot;:973258752,\&quot;paymentInstrumentId\&quot;:{\&quot;paymentInstrumentId\&quot;:654360640,\&quot;primaryId\&quot;:654360640,\&quot;userId\&quot;:123},\&quot;trackingUuid\&quot;:\&quot;81562852-6b08-4347-9816-1c1af1243ee1\&quot;,\&quot;userId\&quot;:123}&quot;,&quot;response&quot;:&quot;{\&quot;result\&quot;: \&quot;OK\&quot;}&quot;,&quot;status&quot;:&quot;AUTHORIZED&quot;,&quot;type&quot;:&quot;AUTHORIZE&quot;}],&quot;paymentInstrumentId&quot;:{&quot;paymentInstrumentId&quot;:654360640,&quot;primaryId&quot;:654360640,&quot;userId&quot;:123},&quot;paymentProvider&quot;:&quot;BrainTree&quot;,&quot;status&quot;:&quot;AUTHORIZED&quot;,&quot;trackingUuid&quot;:&quot;81562852-6b08-4347-9816-1c1af1243ee1&quot;,&quot;type&quot;:&quot;AUTHORIZE&quot;,&quot;userId&quot;:123}, id=973307904, createdBy=null, trackingUuid=81562852-6b08-4347-9816-1c1af1243ee1, createdTime=Mon Mar 31 16:00:59 CST 2014, paymentId=973258752, userId=123, api=3, paymentInstrumentId=null, updatedTime=Mon Mar 31 16:00:59 CST 2014, updatedBy=null}
16:00:59.201 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEntity{paymentProviderId=0, status=1, createdTime=2014-03-31 00:00:00.0, externalToken=1234, countryCode=null, merchantAccountId=0, businessDescriptor=ut, type=0, billingRefId=123, updatedBy=null, currency=USD, id=973258752, createdBy=null, userId=123, paymentInstrumentId=654360640, updatedTime=2014-03-31 00:00:00.0, netAmount=100}
16:00:59.202 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.202 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.202 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.202 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DB2B00000021]
16:00:59.202 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.202 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.203 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.203 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.203 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DB2B00000021
16:00:59.203 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.203 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.203 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.203 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.203 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the inaccessible pool
16:00:59.203 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.203 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.203 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB2B00000021], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.203 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB2B00000021], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.204 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the accessible pool
16:00:59.204 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7d117aef was in state NOT_ACCESSIBLE, no need to test it
16:00:59.204 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.204 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.204 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.204 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB2B00000021], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.204 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB2B00000021 : 737072696E672D62746D000001451727DB2D00000022]
16:00:59.204 [Test worker] DEBUG org.hibernate.SQL - insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.205 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.209 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.210 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB2B00000021], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.210 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB2B00000021 : 737072696E672D62746D000001451727DB2D00000022]
16:00:59.210 [Test worker] DEBUG org.hibernate.SQL - insert into payment_tracking_uuid (created_by, created_time, updated_by, updated_time, api_id, payment_id, payment_instrument_id, response, tracking_uuid, user_id, tracking_uuid_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_tracking_uuid (created_by, created_time, updated_by, updated_time, api_id, payment_id, payment_instrument_id, response, tracking_uuid, user_id, tracking_uuid_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.211 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.213 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.213 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB2B00000021], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.213 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB2B00000021 : 737072696E672D62746D000001451727DB2D00000022]
16:00:59.213 [Test worker] DEBUG org.hibernate.SQL - update payment set updated_by=?, updated_time=?, billing_ref_id=?, business_descriptor=?, country_code=?, currency_code=?, external_token=?, merchant_account_id=?, net_amount=?, payment_instrument_id=?, payment_provider_id=?, payment_status_id=?, payment_type_id=?, user_id=? where payment_id=?
Hibernate: update payment set updated_by=?, updated_time=?, billing_ref_id=?, business_descriptor=?, country_code=?, currency_code=?, external_token=?, merchant_account_id=?, net_amount=?, payment_instrument_id=?, payment_provider_id=?, payment_status_id=?, payment_type_id=?, user_id=? where payment_id=?
16:00:59.214 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.216 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.216 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.216 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@305b8340
16:00:59.216 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.216 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB2B00000021], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.216 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.216 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB2B00000021], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.217 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.217 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.217 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB2B00000021], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.217 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.217 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.217 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.217 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the accessible pool
16:00:59.217 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.217 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.218 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the inaccessible pool
16:00:59.218 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.218 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.218 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@33a1cd92
16:00:59.218 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB2B00000021 : 737072696E672D62746D000001451727DB2D00000022]
16:00:59.218 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB2B00000021 : 737072696E672D62746D000001451727DB2D00000022]
16:00:59.218 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB2B00000021 : 737072696E672D62746D000001451727DB2D00000022] with SUCCESS
16:00:59.218 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB2B00000021 : 737072696E672D62746D000001451727DB2D00000022] with SUCCESS
16:00:59.218 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:59.218 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:59.218 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:59.218 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:59.218 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:59.219 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:59.219 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:59.219 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:59.219 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:59.219 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:59.219 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:59.219 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DB2B00000021 : 737072696E672D62746D000001451727DB2D00000022] (with one-phase optimization)
16:00:59.220 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DB2B00000021 : 737072696E672D62746D000001451727DB2D00000022]
16:00:59.220 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:59.220 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:59.220 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:59.220 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:59.220 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:59.220 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:59.220 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB2B00000021], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.220 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:59.220 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727DB2B00000021 : 737072696E672D62746D000001451727DB2D00000022] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.220 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef cleaned up all transaction states for GTRID [737072696E672D62746D000001451727DB2B00000021]
16:00:59.220 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:59.220 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@1f54f3ab with status=COMMITTED
16:00:59.220 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:59.221 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
16:00:59.221 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@33a1cd92 with status=COMMITTED
16:00:59.221 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB2B00000021], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) with status=COMMITTED
16:00:59.221 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB2B00000021], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.221 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB2B00000021], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.221 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef with status=COMMITTED
16:00:59.221 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.221 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.221 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.221 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the inaccessible pool
16:00:59.221 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.221 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.221 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the available pool
16:00:59.221 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.221 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:59.221 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.221 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.221 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:59.221 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null
16:00:59.222 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.222 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.222 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:59.222 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.222 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null&gt;
16:00:59.222 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with JOIN
16:00:59.222 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with JOIN
16:00:59.222 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.222 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DA5200000019] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f, adding it to the resource's transactions list
16:00:59.222 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.223 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'PaymentTransactionServiceImpl.capture' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
16:00:59.223 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:59.223 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:59.224 [Test worker] INFO  c.j.p.c.i.PaymentTransactionServiceImpl - capture for payment:973258752
16:00:59.224 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:59.224 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.224 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.224 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with SUCCESS
16:00:59.224 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with SUCCESS
16:00:59.224 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:59.224 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:59.224 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:59.225 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.225 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727DB5900000023]
16:00:59.225 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB5900000023], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.225 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:59.225 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:59.225 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB5900000023], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) for Mon Mar 31 16:01:59 CST 2014
16:00:59.225 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB5900000023], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.225 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB5900000023], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) queued: 5
16:00:59.226 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:59 CST 2014
16:00:59.226 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@3fdc2858
16:00:59.226 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:59.226 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528592
16:00:59.226 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@5f84d41a
16:00:59.226 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.227 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.227 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.227 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DB5900000023]
16:00:59.227 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.227 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.227 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:59.227 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available), waiting if necessary
16:00:59.227 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 - closing time: 1396252919173, now time: 1396252859227
16:00:59.227 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.227 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.227 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.227 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.227 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.227 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:59.227 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state IN_POOL, testing it
16:00:59.227 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, skipping test
16:00:59.227 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.227 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.227 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.228 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB5900000023], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.228 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@324d7c25 belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.228 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727DB5900000023 : 737072696E672D62746D000001451727DB5C00000024]
16:00:59.228 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DB5900000023 : 737072696E672D62746D000001451727DB5C00000024]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID null&gt;
16:00:59.228 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID a Bitronix XID [737072696E672D62746D000001451727DB5900000023 : 737072696E672D62746D000001451727DB5C00000024] with NOFLAGS
16:00:59.228 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB5900000023 : 737072696E672D62746D000001451727DB5C00000024] with NOFLAGS
16:00:59.228 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB5900000023 : 737072696E672D62746D000001451727DB5C00000024]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.228 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DB5900000023] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, adding it to the resource's transactions list
16:00:59.228 [Test worker] DEBUG org.hibernate.SQL - select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
Hibernate: select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
16:00:59.229 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.230 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:59.230 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.230 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB5900000023], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.230 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.230 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB5900000023], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.230 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.230 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.230 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB5900000023], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.230 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.230 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.231 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.231 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:59.231 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.231 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.231 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:59.231 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.231 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.231 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:59.231 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.231 [Test worker] DEBUG o.h.t.DistinctResultTransformer - Transformed: 0 rows to: 0 distinct results
16:00:59.231 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:59.231 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB5900000023], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.231 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB5900000023], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.231 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB5900000023], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.231 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB5900000023], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) still queued: 4
16:00:59.231 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:59.231 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.232 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB5900000023], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.232 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@3fdc2858
16:00:59.232 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@5f84d41a
16:00:59.232 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB5900000023 : 737072696E672D62746D000001451727DB5C00000024]
16:00:59.232 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB5900000023 : 737072696E672D62746D000001451727DB5C00000024]
16:00:59.232 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB5900000023 : 737072696E672D62746D000001451727DB5C00000024] with SUCCESS
16:00:59.232 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB5900000023 : 737072696E672D62746D000001451727DB5C00000024] with SUCCESS
16:00:59.232 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:59.232 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:59.233 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:59.233 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:59.233 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:59.233 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:59.233 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:59.233 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:59.234 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:59.234 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:59.234 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:59.234 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DB5900000023 : 737072696E672D62746D000001451727DB5C00000024] (with one-phase optimization)
16:00:59.234 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DB5900000023 : 737072696E672D62746D000001451727DB5C00000024]
16:00:59.234 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:59.234 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:59.234 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:59.235 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:59.235 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:59.235 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:59.235 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB5900000023], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.235 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:59.235 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727DB5900000023 : 737072696E672D62746D000001451727DB5C00000024] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.235 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 cleaned up all transaction states for GTRID [737072696E672D62746D000001451727DB5900000023]
16:00:59.235 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:59.235 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@3fdc2858 with status=COMMITTED
16:00:59.236 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:59.236 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@5f84d41a with status=COMMITTED
16:00:59.236 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB5900000023], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) with status=COMMITTED
16:00:59.236 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB5900000023], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.237 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB5900000023], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.237 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 with status=COMMITTED
16:00:59.237 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.237 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.237 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.237 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:59.237 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.237 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.237 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the available pool
16:00:59.237 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.237 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:59.238 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.238 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.238 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:59.238 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null
16:00:59.238 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.238 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.239 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:59.239 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.239 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null&gt;
16:00:59.239 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with JOIN
16:00:59.239 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with JOIN
16:00:59.240 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.240 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DA5200000019] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f, adding it to the resource's transactions list
16:00:59.240 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.240 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:59.241 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.241 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.241 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with SUCCESS
16:00:59.241 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with SUCCESS
16:00:59.241 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:59.241 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:59.241 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:59.241 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.241 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727DB6900000025]
16:00:59.241 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB6900000025], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.241 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:59.241 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:59.241 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB6900000025], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) for Mon Mar 31 16:01:59 CST 2014
16:00:59.241 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB6900000025], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.241 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB6900000025], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) queued: 5
16:00:59.241 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:59 CST 2014
16:00:59.242 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@f6ba5a1
16:00:59.242 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:59.243 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528592
16:00:59.243 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@3b91c505
16:00:59.243 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.243 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.243 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.244 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.244 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DB6900000025]
16:00:59.244 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.244 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.244 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:59.244 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available), waiting if necessary
16:00:59.244 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef - closing time: 1396252919221, now time: 1396252859244
16:00:59.244 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.244 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.244 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.244 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.244 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.244 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the accessible pool
16:00:59.244 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7d117aef was in state IN_POOL, testing it
16:00:59.244 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef, skipping test
16:00:59.244 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.244 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.244 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.244 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB6900000025], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.244 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@7d117aef belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.244 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727DB6900000025 : 737072696E672D62746D000001451727DB6C00000026]
16:00:59.245 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DB6900000025 : 737072696E672D62746D000001451727DB6C00000026]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null&gt;
16:00:59.245 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID a Bitronix XID [737072696E672D62746D000001451727DB6900000025 : 737072696E672D62746D000001451727DB6C00000026] with NOFLAGS
16:00:59.245 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB6900000025 : 737072696E672D62746D000001451727DB6C00000026] with NOFLAGS
16:00:59.245 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB6900000025 : 737072696E672D62746D000001451727DB6C00000026]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.245 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DB6900000025] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef, adding it to the resource's transactions list
16:00:59.245 [Test worker] DEBUG org.hibernate.SQL - select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
Hibernate: select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
16:00:59.247 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.247 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.248 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.248 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@305b8340
16:00:59.248 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.248 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB6900000025], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.248 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.248 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB6900000025], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.248 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.248 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.248 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB6900000025], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.248 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.248 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.248 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.248 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the accessible pool
16:00:59.248 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.248 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.248 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the inaccessible pool
16:00:59.248 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.248 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.249 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:59.249 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.249 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.249 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.249 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:59.250 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654360640]
16:00:59.250 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.250 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.250 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.250 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DB6900000025]
16:00:59.250 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.250 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.250 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.250 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.250 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DB6900000025
16:00:59.250 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.250 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.250 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.250 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.250 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the inaccessible pool
16:00:59.250 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.250 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.250 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB6900000025], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.251 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB6900000025], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.251 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the accessible pool
16:00:59.251 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7d117aef was in state NOT_ACCESSIBLE, no need to test it
16:00:59.251 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.251 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.251 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.251 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB6900000025], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.251 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB6900000025 : 737072696E672D62746D000001451727DB6C00000026]
16:00:59.251 [Test worker] DEBUG org.hibernate.SQL - select paymentins0_.payment_instrument_id as payment1_10_0_, paymentins0_.created_by as created2_10_0_, paymentins0_.created_time as created3_10_0_, paymentins0_.updated_by as updated4_10_0_, paymentins0_.updated_time as updated5_10_0_, paymentins0_.payment_instrument_holder_name as payment6_10_0_, paymentins0_.account_number as account7_10_0_, paymentins0_.address_id as address8_10_0_, paymentins0_.email as email10_0_, paymentins0_.encrypted_account_number as encrypted10_10_0_, paymentins0_.is_default as is11_10_0_, paymentins0_.last_validated_time as last12_10_0_, paymentins0_.phone_id as phone13_10_0_, paymentins0_.relation_to_holder as relation14_10_0_, paymentins0_.status_id as status15_10_0_, paymentins0_.payment_instrument_type_id as payment16_10_0_, paymentins0_.user_id as user17_10_0_ from payment_instrument paymentins0_ where paymentins0_.payment_instrument_id=?
Hibernate: select paymentins0_.payment_instrument_id as payment1_10_0_, paymentins0_.created_by as created2_10_0_, paymentins0_.created_time as created3_10_0_, paymentins0_.updated_by as updated4_10_0_, paymentins0_.updated_time as updated5_10_0_, paymentins0_.payment_instrument_holder_name as payment6_10_0_, paymentins0_.account_number as account7_10_0_, paymentins0_.address_id as address8_10_0_, paymentins0_.email as email10_0_, paymentins0_.encrypted_account_number as encrypted10_10_0_, paymentins0_.is_default as is11_10_0_, paymentins0_.last_validated_time as last12_10_0_, paymentins0_.phone_id as phone13_10_0_, paymentins0_.relation_to_holder as relation14_10_0_, paymentins0_.status_id as status15_10_0_, paymentins0_.payment_instrument_type_id as payment16_10_0_, paymentins0_.user_id as user17_10_0_ from payment_instrument paymentins0_ where paymentins0_.payment_instrument_id=?
16:00:59.253 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.253 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654360640]
16:00:59.254 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.254 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@305b8340
16:00:59.254 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.254 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB6900000025], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.254 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.255 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB6900000025], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.255 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.255 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.255 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB6900000025], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.255 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.255 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.255 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.255 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the accessible pool
16:00:59.256 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.256 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.256 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the inaccessible pool
16:00:59.256 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.256 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.256 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654360640]
16:00:59.257 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654360640]
16:00:59.257 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.257 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:59.259 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:59.259 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB6900000025], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.259 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB6900000025], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.259 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB6900000025], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.259 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB6900000025], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) still queued: 4
16:00:59.259 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:59.261 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.262 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB6900000025], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.262 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@f6ba5a1
16:00:59.262 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:59.262 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:59.262 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 2 objects
16:00:59.262 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:59.263 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:59.263 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity{relationToHolder=null, status=0, createdTime=2014-03-31 00:00:00.0, type=0, accountNum=1111, addressId=654360640, updatedBy=null, lastValidatedTime=2014-03-31 00:00:00.0, id=654360640, accountName=ut, createdBy=null, email=null, isDefault=true, userId=123, phoneId=654360640, encryptedAccountNO=null, updatedTime=2014-03-31 00:00:00.0}
16:00:59.263 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEntity{paymentProviderId=0, status=1, createdTime=2014-03-31 00:00:00.0, externalToken=1234, countryCode=null, merchantAccountId=0, businessDescriptor=ut, type=0, billingRefId=123, updatedBy=null, currency=USD, id=973258752, createdBy=null, userId=123, paymentInstrumentId=654360640, updatedTime=2014-03-31 00:00:00.0, netAmount=100}
16:00:59.263 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.263 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@3b91c505
16:00:59.263 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB6900000025 : 737072696E672D62746D000001451727DB6C00000026]
16:00:59.263 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB6900000025 : 737072696E672D62746D000001451727DB6C00000026]
16:00:59.263 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB6900000025 : 737072696E672D62746D000001451727DB6C00000026] with SUCCESS
16:00:59.263 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB6900000025 : 737072696E672D62746D000001451727DB6C00000026] with SUCCESS
16:00:59.263 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:59.263 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:59.263 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:59.263 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:59.263 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:59.264 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:59.264 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:59.264 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:59.264 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:59.264 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:59.264 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:59.264 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DB6900000025 : 737072696E672D62746D000001451727DB6C00000026] (with one-phase optimization)
16:00:59.265 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DB6900000025 : 737072696E672D62746D000001451727DB6C00000026]
16:00:59.265 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:59.265 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:59.266 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:59.266 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:59.266 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:59.266 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:59.266 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB6900000025], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.266 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:59.266 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727DB6900000025 : 737072696E672D62746D000001451727DB6C00000026] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.266 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef cleaned up all transaction states for GTRID [737072696E672D62746D000001451727DB6900000025]
16:00:59.266 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:59.266 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@f6ba5a1 with status=COMMITTED
16:00:59.266 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:59.266 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@3b91c505 with status=COMMITTED
16:00:59.266 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB6900000025], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) with status=COMMITTED
16:00:59.266 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB6900000025], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.266 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB6900000025], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.267 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef with status=COMMITTED
16:00:59.267 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.267 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.267 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.267 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the inaccessible pool
16:00:59.267 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.267 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.267 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the available pool
16:00:59.267 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.267 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:59.267 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.267 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.267 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:59.267 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null
16:00:59.267 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.267 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.267 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:59.267 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.268 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null&gt;
16:00:59.268 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with JOIN
16:00:59.268 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with JOIN
16:00:59.268 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.268 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DA5200000019] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f, adding it to the resource's transactions list
16:00:59.268 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.269 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:59.269 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.269 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.269 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with SUCCESS
16:00:59.270 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with SUCCESS
16:00:59.270 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:59.270 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:59.270 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:59.270 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.270 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727DB8600000027]
16:00:59.270 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB8600000027], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.270 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:59.270 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:59.270 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB8600000027], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) for Mon Mar 31 16:01:59 CST 2014
16:00:59.271 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB8600000027], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.271 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB8600000027], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) queued: 5
16:00:59.271 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:59 CST 2014
16:00:59.271 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@6e933fe4
16:00:59.271 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:59.271 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528592
16:00:59.271 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@16561485
16:00:59.271 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.271 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.271 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.271 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.272 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DB8600000027]
16:00:59.272 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.272 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.272 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:59.272 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available), waiting if necessary
16:00:59.272 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 - closing time: 1396252919237, now time: 1396252859272
16:00:59.272 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.272 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.272 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.272 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.272 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.272 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:59.272 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state IN_POOL, testing it
16:00:59.272 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, skipping test
16:00:59.272 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.272 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.272 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.272 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB8600000027], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.272 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@324d7c25 belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.272 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727DB8600000027 : 737072696E672D62746D000001451727DB8800000028]
16:00:59.272 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DB8600000027 : 737072696E672D62746D000001451727DB8800000028]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID null&gt;
16:00:59.272 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID a Bitronix XID [737072696E672D62746D000001451727DB8600000027 : 737072696E672D62746D000001451727DB8800000028] with NOFLAGS
16:00:59.272 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB8600000027 : 737072696E672D62746D000001451727DB8800000028] with NOFLAGS
16:00:59.273 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB8600000027 : 737072696E672D62746D000001451727DB8800000028]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.273 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DB8600000027] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, adding it to the resource's transactions list
16:00:59.273 [Test worker] DEBUG org.hibernate.SQL - select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
Hibernate: select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
16:00:59.274 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.275 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.275 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.275 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:59.275 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.276 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB8600000027], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.276 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.276 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB8600000027], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.276 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.276 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.276 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB8600000027], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.276 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.277 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.277 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.277 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:59.277 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.278 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.278 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:59.278 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.278 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.278 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:59.278 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.278 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.278 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.278 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:59.279 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973324288, using strategy: org.hibernate.id.Assigned
16:00:59.279 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:59.279 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB8600000027], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.279 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB8600000027], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.279 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB8600000027], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.279 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB8600000027], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) still queued: 4
16:00:59.279 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:59.279 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.279 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB8600000027], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.279 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@6e933fe4
16:00:59.279 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:59.279 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:59.280 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 1 insertions, 1 updates, 0 deletions to 2 objects
16:00:59.280 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:59.280 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:59.280 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEventEntity{response={&quot;result&quot;: &quot;OK&quot;}, id=973324288, createdBy=null, status=5, createdTime=Mon Mar 31 16:00:59 CST 2014, paymentId=973258752, request={&quot;billingRefId&quot;:&quot;123&quot;,&quot;chargeInfo&quot;:{&quot;amount&quot;:100,&quot;businessDescriptor&quot;:&quot;ut&quot;,&quot;currency&quot;:&quot;USD&quot;},&quot;id&quot;:973258752,&quot;paymentInstrumentId&quot;:{&quot;paymentInstrumentId&quot;:654360640,&quot;primaryId&quot;:654360640,&quot;userId&quot;:123},&quot;trackingUuid&quot;:&quot;f435f805-28d2-4e00-b24b-cd3e119232aa&quot;,&quot;userId&quot;:123}, type=2, updatedTime=Mon Mar 31 16:00:59 CST 2014, netAmount=100, currency=USD, updatedBy=null}
16:00:59.280 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEntity{paymentProviderId=0, status=5, createdTime=2014-03-31 00:00:00.0, externalToken=1234, countryCode=null, merchantAccountId=0, businessDescriptor=ut, type=0, billingRefId=123, updatedBy=null, currency=USD, id=973258752, createdBy=null, userId=123, paymentInstrumentId=654360640, updatedTime=2014-03-31 00:00:00.0, netAmount=100}
16:00:59.281 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.281 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.281 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.281 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DB8600000027]
16:00:59.281 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.281 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.281 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.281 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.281 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DB8600000027
16:00:59.281 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.281 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.281 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.281 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.281 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:59.281 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.281 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.281 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB8600000027], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.281 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB8600000027], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.281 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:59.281 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state NOT_ACCESSIBLE, no need to test it
16:00:59.281 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.282 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.282 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.282 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB8600000027], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.282 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB8600000027 : 737072696E672D62746D000001451727DB8800000028]
16:00:59.282 [Test worker] DEBUG org.hibernate.SQL - insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.282 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.284 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.285 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB8600000027], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.285 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB8600000027 : 737072696E672D62746D000001451727DB8800000028]
16:00:59.285 [Test worker] DEBUG org.hibernate.SQL - update payment set updated_by=?, updated_time=?, billing_ref_id=?, business_descriptor=?, country_code=?, currency_code=?, external_token=?, merchant_account_id=?, net_amount=?, payment_instrument_id=?, payment_provider_id=?, payment_status_id=?, payment_type_id=?, user_id=? where payment_id=?
Hibernate: update payment set updated_by=?, updated_time=?, billing_ref_id=?, business_descriptor=?, country_code=?, currency_code=?, external_token=?, merchant_account_id=?, net_amount=?, payment_instrument_id=?, payment_provider_id=?, payment_status_id=?, payment_type_id=?, user_id=? where payment_id=?
16:00:59.286 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.287 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.288 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.288 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:59.288 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.288 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB8600000027], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.288 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.288 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB8600000027], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.288 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.288 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.288 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB8600000027], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.288 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.288 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.288 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.289 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:59.289 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.289 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.289 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:59.289 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.289 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.289 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@16561485
16:00:59.289 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB8600000027 : 737072696E672D62746D000001451727DB8800000028]
16:00:59.289 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB8600000027 : 737072696E672D62746D000001451727DB8800000028]
16:00:59.289 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB8600000027 : 737072696E672D62746D000001451727DB8800000028] with SUCCESS
16:00:59.289 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DB8600000027 : 737072696E672D62746D000001451727DB8800000028] with SUCCESS
16:00:59.289 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:59.289 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:59.289 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:59.289 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:59.289 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:59.289 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:59.289 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:59.289 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:59.289 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:59.289 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:59.289 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:59.289 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DB8600000027 : 737072696E672D62746D000001451727DB8800000028] (with one-phase optimization)
16:00:59.290 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DB8600000027 : 737072696E672D62746D000001451727DB8800000028]
16:00:59.290 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:59.290 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:59.291 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:59.291 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:59.291 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:59.291 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:59.291 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB8600000027], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.291 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:59.291 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727DB8600000027 : 737072696E672D62746D000001451727DB8800000028] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.291 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 cleaned up all transaction states for GTRID [737072696E672D62746D000001451727DB8600000027]
16:00:59.291 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:59.291 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@6e933fe4 with status=COMMITTED
16:00:59.291 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:59.291 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
16:00:59.291 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@16561485 with status=COMMITTED
16:00:59.291 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB8600000027], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) with status=COMMITTED
16:00:59.291 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB8600000027], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.291 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DB8600000027], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.291 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 with status=COMMITTED
16:00:59.292 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.292 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.292 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.292 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:59.292 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.292 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.292 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the available pool
16:00:59.292 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.292 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:59.292 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.292 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.292 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:59.292 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null
16:00:59.292 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.292 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.292 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:59.292 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.292 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null&gt;
16:00:59.292 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with JOIN
16:00:59.292 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with JOIN
16:00:59.292 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.292 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DA5200000019] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f, adding it to the resource's transactions list
16:00:59.292 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.292 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:59.293 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:59.293 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:59.293 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:59.297 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:59.297 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.297 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.297 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with SUCCESS
16:00:59.297 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with SUCCESS
16:00:59.297 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:59.297 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:59.297 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:59.298 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.298 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727DBA200000029]
16:00:59.298 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBA200000029], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.298 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:59.298 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:59.299 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBA200000029], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) for Mon Mar 31 16:01:59 CST 2014
16:00:59.299 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBA200000029], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.299 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBA200000029], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) queued: 5
16:00:59.300 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:59 CST 2014
16:00:59.301 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@335a8c36
16:00:59.301 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:59.301 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528593
16:00:59.301 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@11a4bafb
16:00:59.301 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.301 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.301 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.301 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.301 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DBA200000029]
16:00:59.301 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.301 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.301 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:59.301 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available), waiting if necessary
16:00:59.301 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef - closing time: 1396252919267, now time: 1396252859301
16:00:59.301 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.302 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.302 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.302 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.302 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.302 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the accessible pool
16:00:59.302 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7d117aef was in state IN_POOL, testing it
16:00:59.302 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef, skipping test
16:00:59.302 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.302 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.302 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.302 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBA200000029], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.302 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@7d117aef belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.302 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727DBA200000029 : 737072696E672D62746D000001451727DBA60000002A]
16:00:59.302 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DBA200000029 : 737072696E672D62746D000001451727DBA60000002A]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null&gt;
16:00:59.302 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID a Bitronix XID [737072696E672D62746D000001451727DBA200000029 : 737072696E672D62746D000001451727DBA60000002A] with NOFLAGS
16:00:59.302 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBA200000029 : 737072696E672D62746D000001451727DBA60000002A] with NOFLAGS
16:00:59.302 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBA200000029 : 737072696E672D62746D000001451727DBA60000002A]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.302 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DBA200000029] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef, adding it to the resource's transactions list
16:00:59.303 [Test worker] DEBUG org.hibernate.SQL - select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
Hibernate: select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
16:00:59.304 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.304 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.305 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.306 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@305b8340
16:00:59.306 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.306 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBA200000029], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.307 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.307 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBA200000029], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.307 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.307 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.307 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBA200000029], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.307 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.307 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.307 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.307 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the accessible pool
16:00:59.307 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.307 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.307 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the inaccessible pool
16:00:59.307 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.307 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.308 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:59.308 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.308 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.308 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.308 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:59.309 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973340672, using strategy: org.hibernate.id.Assigned
16:00:59.310 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973357056, using strategy: org.hibernate.id.Assigned
16:00:59.310 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:59.310 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBA200000029], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.310 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBA200000029], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.310 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBA200000029], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.310 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBA200000029], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) still queued: 4
16:00:59.310 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:59.311 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.311 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBA200000029], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.311 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@335a8c36
16:00:59.311 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:59.311 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:59.311 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 1 updates, 0 deletions to 3 objects
16:00:59.311 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:59.311 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:59.312 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.TrackingUuidEntity{response={&quot;billingRefId&quot;:&quot;123&quot;,&quot;chargeInfo&quot;:{&quot;amount&quot;:100,&quot;businessDescriptor&quot;:&quot;ut&quot;,&quot;currency&quot;:&quot;USD&quot;},&quot;externalToken&quot;:&quot;1234&quot;,&quot;id&quot;:973258752,&quot;merchantAccount&quot;:&quot;8qnzm4r4ytckyf4d&quot;,&quot;paymentEvents&quot;:[{&quot;chargeInfo&quot;:{&quot;amount&quot;:100,&quot;businessDescriptor&quot;:&quot;ut&quot;,&quot;currency&quot;:&quot;USD&quot;},&quot;paymentId&quot;:973258752,&quot;request&quot;:&quot;{\&quot;billingRefId\&quot;:\&quot;123\&quot;,\&quot;chargeInfo\&quot;:{\&quot;amount\&quot;:100,\&quot;businessDescriptor\&quot;:\&quot;ut\&quot;,\&quot;currency\&quot;:\&quot;USD\&quot;},\&quot;id\&quot;:973258752,\&quot;paymentInstrumentId\&quot;:{\&quot;paymentInstrumentId\&quot;:654360640,\&quot;primaryId\&quot;:654360640,\&quot;userId\&quot;:123},\&quot;trackingUuid\&quot;:\&quot;f435f805-28d2-4e00-b24b-cd3e119232aa\&quot;,\&quot;userId\&quot;:123}&quot;,&quot;response&quot;:&quot;{\&quot;result\&quot;: \&quot;OK\&quot;}&quot;,&quot;status&quot;:&quot;SETTLE_CREATED&quot;,&quot;type&quot;:&quot;SUBMIT_SETTLE_CREATE&quot;},{&quot;chargeInfo&quot;:{&quot;$ref&quot;:&quot;$.paymentEvents[0].chargeInfo&quot;},&quot;paymentId&quot;:973258752,&quot;request&quot;:&quot;{\&quot;billingRefId\&quot;:\&quot;123\&quot;,\&quot;chargeInfo\&quot;:{\&quot;amount\&quot;:100,\&quot;businessDescriptor\&quot;:\&quot;ut\&quot;,\&quot;currency\&quot;:\&quot;USD\&quot;},\&quot;id\&quot;:973258752,\&quot;paymentInstrumentId\&quot;:{\&quot;paymentInstrumentId\&quot;:654360640,\&quot;primaryId\&quot;:654360640,\&quot;userId\&quot;:123},\&quot;trackingUuid\&quot;:\&quot;f435f805-28d2-4e00-b24b-cd3e119232aa\&quot;,\&quot;userId\&quot;:123}&quot;,&quot;response&quot;:&quot;{\&quot;result\&quot;: \&quot;OK\&quot;}&quot;,&quot;status&quot;:&quot;SETTLEMENT_SUBMITTED&quot;,&quot;type&quot;:&quot;SUBMIT_SETTLE&quot;}],&quot;paymentInstrumentId&quot;:{&quot;paymentInstrumentId&quot;:654360640,&quot;primaryId&quot;:654360640,&quot;userId&quot;:123},&quot;paymentProvider&quot;:&quot;BrainTree&quot;,&quot;status&quot;:&quot;SETTLEMENT_SUBMITTED&quot;,&quot;trackingUuid&quot;:&quot;f435f805-28d2-4e00-b24b-cd3e119232aa&quot;,&quot;type&quot;:&quot;AUTHORIZE&quot;,&quot;userId&quot;:123}, id=973357056, createdBy=null, trackingUuid=f435f805-28d2-4e00-b24b-cd3e119232aa, createdTime=Mon Mar 31 16:00:59 CST 2014, paymentId=973258752, userId=123, api=4, paymentInstrumentId=null, updatedTime=Mon Mar 31 16:00:59 CST 2014, updatedBy=null}
16:00:59.312 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEventEntity{response={&quot;result&quot;: &quot;OK&quot;}, id=973340672, createdBy=null, status=6, createdTime=Mon Mar 31 16:00:59 CST 2014, paymentId=973258752, request={&quot;billingRefId&quot;:&quot;123&quot;,&quot;chargeInfo&quot;:{&quot;amount&quot;:100,&quot;businessDescriptor&quot;:&quot;ut&quot;,&quot;currency&quot;:&quot;USD&quot;},&quot;id&quot;:973258752,&quot;paymentInstrumentId&quot;:{&quot;paymentInstrumentId&quot;:654360640,&quot;primaryId&quot;:654360640,&quot;userId&quot;:123},&quot;trackingUuid&quot;:&quot;f435f805-28d2-4e00-b24b-cd3e119232aa&quot;,&quot;userId&quot;:123}, type=3, updatedTime=Mon Mar 31 16:00:59 CST 2014, netAmount=100, currency=USD, updatedBy=null}
16:00:59.312 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEntity{paymentProviderId=0, status=6, createdTime=2014-03-31 00:00:00.0, externalToken=1234, countryCode=null, merchantAccountId=0, businessDescriptor=ut, type=0, billingRefId=123, updatedBy=null, currency=USD, id=973258752, createdBy=null, userId=123, paymentInstrumentId=654360640, updatedTime=2014-03-31 00:00:00.0, netAmount=100}
16:00:59.313 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.313 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DBA200000029]
16:00:59.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DBA200000029
16:00:59.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.313 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.313 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the inaccessible pool
16:00:59.313 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.313 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.313 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBA200000029], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.313 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBA200000029], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the accessible pool
16:00:59.313 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7d117aef was in state NOT_ACCESSIBLE, no need to test it
16:00:59.314 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.314 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.314 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.314 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBA200000029], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.314 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBA200000029 : 737072696E672D62746D000001451727DBA60000002A]
16:00:59.314 [Test worker] DEBUG org.hibernate.SQL - insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.315 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.317 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.318 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBA200000029], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.318 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBA200000029 : 737072696E672D62746D000001451727DBA60000002A]
16:00:59.318 [Test worker] DEBUG org.hibernate.SQL - insert into payment_tracking_uuid (created_by, created_time, updated_by, updated_time, api_id, payment_id, payment_instrument_id, response, tracking_uuid, user_id, tracking_uuid_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_tracking_uuid (created_by, created_time, updated_by, updated_time, api_id, payment_id, payment_instrument_id, response, tracking_uuid, user_id, tracking_uuid_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.319 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.320 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.321 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBA200000029], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.321 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBA200000029 : 737072696E672D62746D000001451727DBA60000002A]
16:00:59.321 [Test worker] DEBUG org.hibernate.SQL - update payment set updated_by=?, updated_time=?, billing_ref_id=?, business_descriptor=?, country_code=?, currency_code=?, external_token=?, merchant_account_id=?, net_amount=?, payment_instrument_id=?, payment_provider_id=?, payment_status_id=?, payment_type_id=?, user_id=? where payment_id=?
Hibernate: update payment set updated_by=?, updated_time=?, billing_ref_id=?, business_descriptor=?, country_code=?, currency_code=?, external_token=?, merchant_account_id=?, net_amount=?, payment_instrument_id=?, payment_provider_id=?, payment_status_id=?, payment_type_id=?, user_id=? where payment_id=?
16:00:59.322 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.324 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.324 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.324 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@305b8340
16:00:59.324 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.324 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBA200000029], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.325 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.325 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBA200000029], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.325 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.325 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.325 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBA200000029], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.325 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.325 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.325 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.325 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the accessible pool
16:00:59.325 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.325 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.325 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the inaccessible pool
16:00:59.325 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.326 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.326 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@11a4bafb
16:00:59.326 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBA200000029 : 737072696E672D62746D000001451727DBA60000002A]
16:00:59.326 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBA200000029 : 737072696E672D62746D000001451727DBA60000002A]
16:00:59.326 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBA200000029 : 737072696E672D62746D000001451727DBA60000002A] with SUCCESS
16:00:59.326 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBA200000029 : 737072696E672D62746D000001451727DBA60000002A] with SUCCESS
16:00:59.326 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:59.326 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:59.326 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:59.327 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:59.329 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:59.329 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:59.329 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:59.329 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:59.329 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:59.330 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:59.330 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:59.330 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DBA200000029 : 737072696E672D62746D000001451727DBA60000002A] (with one-phase optimization)
16:00:59.330 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DBA200000029 : 737072696E672D62746D000001451727DBA60000002A]
16:00:59.330 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:59.330 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:59.330 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:59.330 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:59.330 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:59.330 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:59.331 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBA200000029], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.331 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:59.331 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727DBA200000029 : 737072696E672D62746D000001451727DBA60000002A] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.331 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef cleaned up all transaction states for GTRID [737072696E672D62746D000001451727DBA200000029]
16:00:59.331 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:59.331 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@335a8c36 with status=COMMITTED
16:00:59.331 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:59.332 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
16:00:59.332 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@11a4bafb with status=COMMITTED
16:00:59.332 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBA200000029], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) with status=COMMITTED
16:00:59.332 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBA200000029], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.332 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBA200000029], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.332 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef with status=COMMITTED
16:00:59.333 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.333 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.333 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.333 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the inaccessible pool
16:00:59.333 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.333 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.333 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the available pool
16:00:59.333 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.333 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:59.333 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.333 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.333 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:59.333 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null
16:00:59.333 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.333 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.333 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:59.333 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.333 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null&gt;
16:00:59.333 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with JOIN
16:00:59.333 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with JOIN
16:00:59.333 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.333 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DA5200000019] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f, adding it to the resource's transactions list
16:00:59.333 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.334 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:59.334 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:59.335 [Test worker] INFO  c.j.p.c.i.PaymentTransactionServiceImpl - reverse for payment:973258752
16:00:59.335 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:59.335 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.335 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.335 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with SUCCESS
16:00:59.336 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with SUCCESS
16:00:59.336 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:59.336 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:59.336 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:59.336 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.337 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727DBC80000002B]
16:00:59.337 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBC80000002B], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.337 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:59.337 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:59.337 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBC80000002B], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) for Mon Mar 31 16:01:59 CST 2014
16:00:59.337 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBC80000002B], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.338 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBC80000002B], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) queued: 5
16:00:59.338 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:59 CST 2014
16:00:59.339 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@466797ce
16:00:59.340 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:59.340 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528593
16:00:59.340 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@3a0fb9d9
16:00:59.341 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.341 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.341 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.341 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DBC80000002B]
16:00:59.341 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.341 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.341 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:59.341 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available), waiting if necessary
16:00:59.341 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 - closing time: 1396252919292, now time: 1396252859341
16:00:59.341 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.341 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.341 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.341 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.341 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.341 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:59.341 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state IN_POOL, testing it
16:00:59.341 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, skipping test
16:00:59.341 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.342 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.342 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.342 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBC80000002B], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.342 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@324d7c25 belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.342 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727DBC80000002B : 737072696E672D62746D000001451727DBCE0000002C]
16:00:59.342 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DBC80000002B : 737072696E672D62746D000001451727DBCE0000002C]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID null&gt;
16:00:59.342 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID a Bitronix XID [737072696E672D62746D000001451727DBC80000002B : 737072696E672D62746D000001451727DBCE0000002C] with NOFLAGS
16:00:59.342 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBC80000002B : 737072696E672D62746D000001451727DBCE0000002C] with NOFLAGS
16:00:59.342 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBC80000002B : 737072696E672D62746D000001451727DBCE0000002C]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.342 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DBC80000002B] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, adding it to the resource's transactions list
16:00:59.342 [Test worker] DEBUG org.hibernate.SQL - select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
Hibernate: select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
16:00:59.344 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.344 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:59.344 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.345 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBC80000002B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.345 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.345 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBC80000002B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.346 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.346 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.347 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBC80000002B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.347 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.347 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.347 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.347 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:59.347 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.347 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.347 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:59.347 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.347 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.347 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:59.347 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.347 [Test worker] DEBUG o.h.t.DistinctResultTransformer - Transformed: 0 rows to: 0 distinct results
16:00:59.348 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:59.348 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBC80000002B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.348 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBC80000002B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.348 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBC80000002B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.348 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBC80000002B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) still queued: 4
16:00:59.348 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:59.348 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.348 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBC80000002B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.348 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@466797ce
16:00:59.348 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@3a0fb9d9
16:00:59.348 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBC80000002B : 737072696E672D62746D000001451727DBCE0000002C]
16:00:59.348 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBC80000002B : 737072696E672D62746D000001451727DBCE0000002C]
16:00:59.348 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBC80000002B : 737072696E672D62746D000001451727DBCE0000002C] with SUCCESS
16:00:59.348 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBC80000002B : 737072696E672D62746D000001451727DBCE0000002C] with SUCCESS
16:00:59.348 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:59.348 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:59.348 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:59.348 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:59.349 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:59.349 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:59.349 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:59.349 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:59.349 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:59.349 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:59.349 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:59.349 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DBC80000002B : 737072696E672D62746D000001451727DBCE0000002C] (with one-phase optimization)
16:00:59.349 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DBC80000002B : 737072696E672D62746D000001451727DBCE0000002C]
16:00:59.349 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:59.349 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:59.349 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:59.349 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:59.349 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:59.349 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:59.350 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBC80000002B], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.350 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:59.350 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727DBC80000002B : 737072696E672D62746D000001451727DBCE0000002C] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.350 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 cleaned up all transaction states for GTRID [737072696E672D62746D000001451727DBC80000002B]
16:00:59.350 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:59.350 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@466797ce with status=COMMITTED
16:00:59.350 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:59.350 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@3a0fb9d9 with status=COMMITTED
16:00:59.350 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBC80000002B], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) with status=COMMITTED
16:00:59.350 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBC80000002B], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.350 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBC80000002B], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.350 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 with status=COMMITTED
16:00:59.350 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.350 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.350 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.350 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:59.350 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.350 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.351 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the available pool
16:00:59.351 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.351 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:59.351 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.351 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.351 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:59.351 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null
16:00:59.351 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.351 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.351 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:59.351 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.351 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null&gt;
16:00:59.351 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with JOIN
16:00:59.351 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with JOIN
16:00:59.351 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.351 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DA5200000019] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f, adding it to the resource's transactions list
16:00:59.351 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.351 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:59.351 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.351 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.351 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with SUCCESS
16:00:59.352 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with SUCCESS
16:00:59.352 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:59.352 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:59.352 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:59.352 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.352 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727DBD80000002D]
16:00:59.352 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBD80000002D], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.352 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:59.352 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:59.352 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBD80000002D], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) for Mon Mar 31 16:01:59 CST 2014
16:00:59.352 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBD80000002D], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.352 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBD80000002D], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) queued: 5
16:00:59.352 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:59 CST 2014
16:00:59.352 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@68ce71fe
16:00:59.353 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:59.353 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528593
16:00:59.353 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@244f4cae
16:00:59.353 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.353 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.353 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.353 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.353 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DBD80000002D]
16:00:59.353 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.353 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.354 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:59.354 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available), waiting if necessary
16:00:59.354 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef - closing time: 1396252919333, now time: 1396252859354
16:00:59.354 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.354 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.354 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.354 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.354 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.354 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the accessible pool
16:00:59.354 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7d117aef was in state IN_POOL, testing it
16:00:59.354 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef, skipping test
16:00:59.354 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.354 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.354 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.355 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBD80000002D], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.355 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@7d117aef belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.355 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727DBD80000002D : 737072696E672D62746D000001451727DBDB0000002E]
16:00:59.355 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DBD80000002D : 737072696E672D62746D000001451727DBDB0000002E]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null&gt;
16:00:59.355 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID a Bitronix XID [737072696E672D62746D000001451727DBD80000002D : 737072696E672D62746D000001451727DBDB0000002E] with NOFLAGS
16:00:59.355 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBD80000002D : 737072696E672D62746D000001451727DBDB0000002E] with NOFLAGS
16:00:59.355 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBD80000002D : 737072696E672D62746D000001451727DBDB0000002E]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.355 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DBD80000002D] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef, adding it to the resource's transactions list
16:00:59.355 [Test worker] DEBUG org.hibernate.SQL - select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
Hibernate: select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
16:00:59.357 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.357 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.358 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.358 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@305b8340
16:00:59.358 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.358 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBD80000002D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.358 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.359 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBD80000002D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.359 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.359 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.359 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBD80000002D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.360 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.360 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.360 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.360 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the accessible pool
16:00:59.360 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.360 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.360 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the inaccessible pool
16:00:59.360 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.361 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.361 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:59.361 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.363 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.363 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.363 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:59.364 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654360640]
16:00:59.364 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.365 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.368 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.368 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DBD80000002D]
16:00:59.368 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.369 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.369 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.369 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.369 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DBD80000002D
16:00:59.369 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.370 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.370 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.370 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.370 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the inaccessible pool
16:00:59.370 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.370 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.370 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBD80000002D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.370 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBD80000002D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.370 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the accessible pool
16:00:59.370 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7d117aef was in state NOT_ACCESSIBLE, no need to test it
16:00:59.370 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.371 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.371 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.371 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBD80000002D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.371 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBD80000002D : 737072696E672D62746D000001451727DBDB0000002E]
16:00:59.372 [Test worker] DEBUG org.hibernate.SQL - select paymentins0_.payment_instrument_id as payment1_10_0_, paymentins0_.created_by as created2_10_0_, paymentins0_.created_time as created3_10_0_, paymentins0_.updated_by as updated4_10_0_, paymentins0_.updated_time as updated5_10_0_, paymentins0_.payment_instrument_holder_name as payment6_10_0_, paymentins0_.account_number as account7_10_0_, paymentins0_.address_id as address8_10_0_, paymentins0_.email as email10_0_, paymentins0_.encrypted_account_number as encrypted10_10_0_, paymentins0_.is_default as is11_10_0_, paymentins0_.last_validated_time as last12_10_0_, paymentins0_.phone_id as phone13_10_0_, paymentins0_.relation_to_holder as relation14_10_0_, paymentins0_.status_id as status15_10_0_, paymentins0_.payment_instrument_type_id as payment16_10_0_, paymentins0_.user_id as user17_10_0_ from payment_instrument paymentins0_ where paymentins0_.payment_instrument_id=?
Hibernate: select paymentins0_.payment_instrument_id as payment1_10_0_, paymentins0_.created_by as created2_10_0_, paymentins0_.created_time as created3_10_0_, paymentins0_.updated_by as updated4_10_0_, paymentins0_.updated_time as updated5_10_0_, paymentins0_.payment_instrument_holder_name as payment6_10_0_, paymentins0_.account_number as account7_10_0_, paymentins0_.address_id as address8_10_0_, paymentins0_.email as email10_0_, paymentins0_.encrypted_account_number as encrypted10_10_0_, paymentins0_.is_default as is11_10_0_, paymentins0_.last_validated_time as last12_10_0_, paymentins0_.phone_id as phone13_10_0_, paymentins0_.relation_to_holder as relation14_10_0_, paymentins0_.status_id as status15_10_0_, paymentins0_.payment_instrument_type_id as payment16_10_0_, paymentins0_.user_id as user17_10_0_ from payment_instrument paymentins0_ where paymentins0_.payment_instrument_id=?
16:00:59.374 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.374 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654360640]
16:00:59.375 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.376 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@305b8340
16:00:59.376 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.376 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBD80000002D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.376 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.376 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBD80000002D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.376 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.376 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.376 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBD80000002D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.376 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.376 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.376 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.376 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the accessible pool
16:00:59.376 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.376 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.376 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the inaccessible pool
16:00:59.376 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.376 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.377 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654360640]
16:00:59.377 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654360640]
16:00:59.377 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.377 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:59.379 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementUnregisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D000001451727DADE0000001D
16:00:59.380 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D000001451727DBD80000002D
16:00:59.383 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:59.383 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBD80000002D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.383 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBD80000002D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.383 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBD80000002D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.383 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBD80000002D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) still queued: 4
16:00:59.383 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:59.383 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.383 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBD80000002D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.383 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@68ce71fe
16:00:59.383 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:59.383 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:59.384 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 2 objects
16:00:59.384 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:59.384 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:59.384 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity{relationToHolder=null, status=0, createdTime=2014-03-31 00:00:00.0, type=0, accountNum=1111, addressId=654360640, updatedBy=null, lastValidatedTime=2014-03-31 00:00:00.0, id=654360640, accountName=ut, createdBy=null, email=null, isDefault=true, userId=123, phoneId=654360640, encryptedAccountNO=null, updatedTime=2014-03-31 00:00:00.0}
16:00:59.384 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEntity{paymentProviderId=0, status=6, createdTime=2014-03-31 00:00:00.0, externalToken=1234, countryCode=null, merchantAccountId=0, businessDescriptor=ut, type=0, billingRefId=123, updatedBy=null, currency=USD, id=973258752, createdBy=null, userId=123, paymentInstrumentId=654360640, updatedTime=2014-03-31 00:00:00.0, netAmount=100}
16:00:59.384 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.384 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@244f4cae
16:00:59.384 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBD80000002D : 737072696E672D62746D000001451727DBDB0000002E]
16:00:59.385 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBD80000002D : 737072696E672D62746D000001451727DBDB0000002E]
16:00:59.385 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBD80000002D : 737072696E672D62746D000001451727DBDB0000002E] with SUCCESS
16:00:59.385 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBD80000002D : 737072696E672D62746D000001451727DBDB0000002E] with SUCCESS
16:00:59.385 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:59.385 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:59.385 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:59.385 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:59.385 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:59.385 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:59.385 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:59.385 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:59.385 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:59.385 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:59.385 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:59.385 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DBD80000002D : 737072696E672D62746D000001451727DBDB0000002E] (with one-phase optimization)
16:00:59.386 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DBD80000002D : 737072696E672D62746D000001451727DBDB0000002E]
16:00:59.386 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:59.386 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:59.386 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:59.386 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:59.386 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:59.386 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:59.386 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBD80000002D], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.386 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:59.386 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727DBD80000002D : 737072696E672D62746D000001451727DBDB0000002E] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.386 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef cleaned up all transaction states for GTRID [737072696E672D62746D000001451727DBD80000002D]
16:00:59.386 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:59.386 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@68ce71fe with status=COMMITTED
16:00:59.386 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:59.386 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@244f4cae with status=COMMITTED
16:00:59.387 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBD80000002D], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) with status=COMMITTED
16:00:59.387 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBD80000002D], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.387 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBD80000002D], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.387 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef with status=COMMITTED
16:00:59.387 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.387 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.387 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.387 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the inaccessible pool
16:00:59.387 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.387 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.387 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the available pool
16:00:59.387 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.387 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:59.388 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.388 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.388 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:59.388 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null
16:00:59.388 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.388 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.388 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:59.388 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.388 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null&gt;
16:00:59.388 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with JOIN
16:00:59.388 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with JOIN
16:00:59.388 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.388 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DA5200000019] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f, adding it to the resource's transactions list
16:00:59.388 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.388 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:59.388 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:59.389 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:59.389 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.389 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.389 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with SUCCESS
16:00:59.389 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with SUCCESS
16:00:59.389 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:59.390 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:59.390 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:59.390 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.390 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727DBFE0000002F]
16:00:59.390 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBFE0000002F], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.390 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:59.390 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:59.390 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBFE0000002F], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) for Mon Mar 31 16:01:59 CST 2014
16:00:59.390 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBFE0000002F], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.390 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBFE0000002F], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) queued: 5
16:00:59.390 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:59 CST 2014
16:00:59.390 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@4494e742
16:00:59.390 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:59.391 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528593
16:00:59.391 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@96db0e1
16:00:59.391 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.391 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.391 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.391 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.391 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DBFE0000002F]
16:00:59.391 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.391 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.391 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:59.391 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available), waiting if necessary
16:00:59.391 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 - closing time: 1396252919351, now time: 1396252859391
16:00:59.391 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.391 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.391 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.391 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.391 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.391 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:59.391 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state IN_POOL, testing it
16:00:59.391 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, skipping test
16:00:59.391 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.392 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.392 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.392 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBFE0000002F], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.392 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@324d7c25 belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.392 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727DBFE0000002F : 737072696E672D62746D000001451727DC0000000030]
16:00:59.392 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DBFE0000002F : 737072696E672D62746D000001451727DC0000000030]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID null&gt;
16:00:59.392 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID a Bitronix XID [737072696E672D62746D000001451727DBFE0000002F : 737072696E672D62746D000001451727DC0000000030] with NOFLAGS
16:00:59.392 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBFE0000002F : 737072696E672D62746D000001451727DC0000000030] with NOFLAGS
16:00:59.392 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBFE0000002F : 737072696E672D62746D000001451727DC0000000030]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.392 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DBFE0000002F] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, adding it to the resource's transactions list
16:00:59.392 [Test worker] DEBUG org.hibernate.SQL - select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
Hibernate: select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
16:00:59.394 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.394 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.394 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.395 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:59.395 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.395 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBFE0000002F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.395 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.395 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBFE0000002F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.395 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.395 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.395 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBFE0000002F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.395 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.395 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.395 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.395 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:59.395 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.395 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.395 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:59.395 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.395 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.396 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:59.396 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.397 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.397 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.397 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:59.398 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973373440, using strategy: org.hibernate.id.Assigned
16:00:59.398 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:59.398 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBFE0000002F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.398 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBFE0000002F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.398 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBFE0000002F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.398 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBFE0000002F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) still queued: 4
16:00:59.398 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:59.398 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.398 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBFE0000002F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.398 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@4494e742
16:00:59.398 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:59.398 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:59.402 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 1 insertions, 1 updates, 0 deletions to 2 objects
16:00:59.402 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:59.402 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:59.403 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEventEntity{response={&quot;result&quot;: &quot;OK&quot;}, id=973373440, createdBy=null, status=8, createdTime=Mon Mar 31 16:00:59 CST 2014, paymentId=973258752, request={&quot;billingRefId&quot;:&quot;123&quot;,&quot;chargeInfo&quot;:{&quot;amount&quot;:100,&quot;businessDescriptor&quot;:&quot;ut&quot;,&quot;currency&quot;:&quot;USD&quot;},&quot;id&quot;:973258752,&quot;paymentInstrumentId&quot;:{&quot;paymentInstrumentId&quot;:654360640,&quot;primaryId&quot;:654360640,&quot;userId&quot;:123},&quot;trackingUuid&quot;:&quot;2d86ad14-06c3-4db6-bf08-79dbacfd3d2a&quot;,&quot;userId&quot;:123}, type=4, updatedTime=Mon Mar 31 16:00:59 CST 2014, netAmount=100, currency=USD, updatedBy=null}
16:00:59.404 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEntity{paymentProviderId=0, status=8, createdTime=2014-03-31 00:00:00.0, externalToken=1234, countryCode=null, merchantAccountId=0, businessDescriptor=ut, type=0, billingRefId=123, updatedBy=null, currency=USD, id=973258752, createdBy=null, userId=123, paymentInstrumentId=654360640, updatedTime=2014-03-31 00:00:00.0, netAmount=100}
16:00:59.405 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.405 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.405 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.405 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DBFE0000002F]
16:00:59.405 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.405 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.405 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.405 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.405 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DBFE0000002F
16:00:59.405 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.405 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.405 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.405 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.405 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:59.405 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.405 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.405 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBFE0000002F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.405 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBFE0000002F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.405 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:59.406 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state NOT_ACCESSIBLE, no need to test it
16:00:59.406 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.406 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.406 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.406 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBFE0000002F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.406 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBFE0000002F : 737072696E672D62746D000001451727DC0000000030]
16:00:59.406 [Test worker] DEBUG org.hibernate.SQL - insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.407 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.410 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.410 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBFE0000002F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.410 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBFE0000002F : 737072696E672D62746D000001451727DC0000000030]
16:00:59.410 [Test worker] DEBUG org.hibernate.SQL - update payment set updated_by=?, updated_time=?, billing_ref_id=?, business_descriptor=?, country_code=?, currency_code=?, external_token=?, merchant_account_id=?, net_amount=?, payment_instrument_id=?, payment_provider_id=?, payment_status_id=?, payment_type_id=?, user_id=? where payment_id=?
Hibernate: update payment set updated_by=?, updated_time=?, billing_ref_id=?, business_descriptor=?, country_code=?, currency_code=?, external_token=?, merchant_account_id=?, net_amount=?, payment_instrument_id=?, payment_provider_id=?, payment_status_id=?, payment_type_id=?, user_id=? where payment_id=?
16:00:59.411 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.413 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.413 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.413 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:59.413 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.413 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBFE0000002F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.414 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.414 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBFE0000002F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.414 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.414 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.414 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBFE0000002F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.414 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.414 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.414 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.414 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:59.414 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.415 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.415 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:59.415 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.415 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.415 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@96db0e1
16:00:59.415 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBFE0000002F : 737072696E672D62746D000001451727DC0000000030]
16:00:59.415 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBFE0000002F : 737072696E672D62746D000001451727DC0000000030]
16:00:59.415 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBFE0000002F : 737072696E672D62746D000001451727DC0000000030] with SUCCESS
16:00:59.415 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DBFE0000002F : 737072696E672D62746D000001451727DC0000000030] with SUCCESS
16:00:59.415 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:59.415 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:59.415 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:59.415 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:59.416 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:59.416 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:59.416 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:59.416 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:59.416 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:59.416 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:59.417 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:59.417 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DBFE0000002F : 737072696E672D62746D000001451727DC0000000030] (with one-phase optimization)
16:00:59.417 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DBFE0000002F : 737072696E672D62746D000001451727DC0000000030]
16:00:59.417 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:59.417 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:59.417 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:59.417 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:59.417 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:59.417 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:59.417 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBFE0000002F], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.417 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:59.417 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727DBFE0000002F : 737072696E672D62746D000001451727DC0000000030] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.417 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 cleaned up all transaction states for GTRID [737072696E672D62746D000001451727DBFE0000002F]
16:00:59.417 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:59.417 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@4494e742 with status=COMMITTED
16:00:59.418 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:59.418 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
16:00:59.418 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@96db0e1 with status=COMMITTED
16:00:59.418 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBFE0000002F], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) with status=COMMITTED
16:00:59.419 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBFE0000002F], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.419 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DBFE0000002F], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.419 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 with status=COMMITTED
16:00:59.419 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.420 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.420 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.420 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:59.420 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.420 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.420 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the available pool
16:00:59.420 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.420 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:59.420 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.420 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.420 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:59.420 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null
16:00:59.420 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.420 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.420 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:59.420 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.420 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null&gt;
16:00:59.420 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with JOIN
16:00:59.420 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with JOIN
16:00:59.420 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.420 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DA5200000019] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f, adding it to the resource's transactions list
16:00:59.420 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.420 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:59.420 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:59.421 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:59.421 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.421 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.421 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with SUCCESS
16:00:59.421 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with SUCCESS
16:00:59.421 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014), default timeout 60s
16:00:59.421 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:59.421 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:59.421 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.421 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727DC1D00000031]
16:00:59.421 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC1D00000031], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.421 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:59.421 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:59.421 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC1D00000031], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) for Mon Mar 31 16:01:59 CST 2014
16:00:59.421 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC1D00000031], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.421 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC1D00000031], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) queued: 5
16:00:59.421 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:59 CST 2014
16:00:59.422 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@6a5fe7c9
16:00:59.422 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:59.422 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528594
16:00:59.422 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@ab3369c
16:00:59.422 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.422 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.422 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.422 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.422 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DC1D00000031]
16:00:59.422 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.422 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.422 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:59.422 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available), waiting if necessary
16:00:59.422 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef - closing time: 1396252919387, now time: 1396252859422
16:00:59.422 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.422 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.422 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.422 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.422 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.423 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the accessible pool
16:00:59.423 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7d117aef was in state IN_POOL, testing it
16:00:59.423 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef, skipping test
16:00:59.423 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.423 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.423 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.423 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC1D00000031], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.423 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@7d117aef belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.423 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727DC1D00000031 : 737072696E672D62746D000001451727DC1F00000032]
16:00:59.423 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DC1D00000031 : 737072696E672D62746D000001451727DC1F00000032]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null&gt;
16:00:59.423 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID a Bitronix XID [737072696E672D62746D000001451727DC1D00000031 : 737072696E672D62746D000001451727DC1F00000032] with NOFLAGS
16:00:59.423 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC1D00000031 : 737072696E672D62746D000001451727DC1F00000032] with NOFLAGS
16:00:59.423 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC1D00000031 : 737072696E672D62746D000001451727DC1F00000032]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.423 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DC1D00000031] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef, adding it to the resource's transactions list
16:00:59.423 [Test worker] DEBUG org.hibernate.SQL - select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
Hibernate: select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
16:00:59.425 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.425 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.426 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.426 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@305b8340
16:00:59.426 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.426 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC1D00000031], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.426 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.426 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC1D00000031], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.426 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.426 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.426 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC1D00000031], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.426 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.426 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.427 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.427 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the accessible pool
16:00:59.427 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.427 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.427 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the inaccessible pool
16:00:59.427 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.427 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.427 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:59.427 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.427 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.427 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.427 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:59.428 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973389824, using strategy: org.hibernate.id.Assigned
16:00:59.429 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973406208, using strategy: org.hibernate.id.Assigned
16:00:59.429 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:59.429 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC1D00000031], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.429 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC1D00000031], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.429 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC1D00000031], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.429 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC1D00000031], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) still queued: 4
16:00:59.429 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:59.430 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.430 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC1D00000031], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.430 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@6a5fe7c9
16:00:59.430 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:59.430 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:59.431 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 1 updates, 0 deletions to 3 objects
16:00:59.431 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:59.431 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:59.432 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEventEntity{response={&quot;result&quot;: &quot;OK&quot;}, id=973389824, createdBy=null, status=9, createdTime=Mon Mar 31 16:00:59 CST 2014, paymentId=973258752, request={&quot;billingRefId&quot;:&quot;123&quot;,&quot;id&quot;:973258752,&quot;paymentInstrumentId&quot;:{&quot;paymentInstrumentId&quot;:654360640,&quot;primaryId&quot;:654360640,&quot;userId&quot;:123},&quot;trackingUuid&quot;:&quot;2d86ad14-06c3-4db6-bf08-79dbacfd3d2a&quot;,&quot;userId&quot;:123}, type=6, updatedTime=Mon Mar 31 16:00:59 CST 2014, netAmount=null, currency=null, updatedBy=null}
16:00:59.433 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.TrackingUuidEntity{response={&quot;billingRefId&quot;:&quot;123&quot;,&quot;chargeInfo&quot;:{&quot;amount&quot;:100,&quot;businessDescriptor&quot;:&quot;ut&quot;,&quot;currency&quot;:&quot;USD&quot;},&quot;externalToken&quot;:&quot;1234&quot;,&quot;id&quot;:973258752,&quot;merchantAccount&quot;:&quot;8qnzm4r4ytckyf4d&quot;,&quot;paymentEvents&quot;:[{&quot;chargeInfo&quot;:{&quot;$ref&quot;:&quot;$.chargeInfo&quot;},&quot;paymentId&quot;:973258752,&quot;request&quot;:&quot;{\&quot;billingRefId\&quot;:\&quot;123\&quot;,\&quot;chargeInfo\&quot;:{\&quot;amount\&quot;:100,\&quot;businessDescriptor\&quot;:\&quot;ut\&quot;,\&quot;currency\&quot;:\&quot;USD\&quot;},\&quot;id\&quot;:973258752,\&quot;paymentInstrumentId\&quot;:{\&quot;paymentInstrumentId\&quot;:654360640,\&quot;primaryId\&quot;:654360640,\&quot;userId\&quot;:123},\&quot;trackingUuid\&quot;:\&quot;2d86ad14-06c3-4db6-bf08-79dbacfd3d2a\&quot;,\&quot;userId\&quot;:123}&quot;,&quot;response&quot;:&quot;{\&quot;result\&quot;: \&quot;OK\&quot;}&quot;,&quot;status&quot;:&quot;REVERSE_CREATED&quot;,&quot;type&quot;:&quot;REVERSE_CREATE&quot;},{&quot;paymentId&quot;:973258752,&quot;request&quot;:&quot;{\&quot;billingRefId\&quot;:\&quot;123\&quot;,\&quot;id\&quot;:973258752,\&quot;paymentInstrumentId\&quot;:{\&quot;paymentInstrumentId\&quot;:654360640,\&quot;primaryId\&quot;:654360640,\&quot;userId\&quot;:123},\&quot;trackingUuid\&quot;:\&quot;2d86ad14-06c3-4db6-bf08-79dbacfd3d2a\&quot;,\&quot;userId\&quot;:123}&quot;,&quot;response&quot;:&quot;{\&quot;result\&quot;: \&quot;OK\&quot;}&quot;,&quot;status&quot;:&quot;REVERSED&quot;,&quot;type&quot;:&quot;SUBMIT_SETTLE_REVERSE&quot;}],&quot;paymentInstrumentId&quot;:{&quot;paymentInstrumentId&quot;:654360640,&quot;primaryId&quot;:654360640,&quot;userId&quot;:123},&quot;paymentProvider&quot;:&quot;BrainTree&quot;,&quot;status&quot;:&quot;REVERSED&quot;,&quot;trackingUuid&quot;:&quot;2d86ad14-06c3-4db6-bf08-79dbacfd3d2a&quot;,&quot;type&quot;:&quot;AUTHORIZE&quot;,&quot;userId&quot;:123}, id=973406208, createdBy=null, trackingUuid=2d86ad14-06c3-4db6-bf08-79dbacfd3d2a, createdTime=Mon Mar 31 16:00:59 CST 2014, paymentId=973258752, userId=123, api=6, paymentInstrumentId=null, updatedTime=Mon Mar 31 16:00:59 CST 2014, updatedBy=null}
16:00:59.433 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEntity{paymentProviderId=0, status=9, createdTime=2014-03-31 00:00:00.0, externalToken=1234, countryCode=null, merchantAccountId=0, businessDescriptor=ut, type=0, billingRefId=123, updatedBy=null, currency=USD, id=973258752, createdBy=null, userId=123, paymentInstrumentId=654360640, updatedTime=2014-03-31 00:00:00.0, netAmount=100}
16:00:59.434 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.434 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.434 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.434 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DC1D00000031]
16:00:59.434 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.434 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.435 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.435 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.435 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DC1D00000031
16:00:59.435 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.435 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.435 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.435 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.435 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the inaccessible pool
16:00:59.435 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.436 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.436 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC1D00000031], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.436 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC1D00000031], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.436 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the accessible pool
16:00:59.436 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7d117aef was in state NOT_ACCESSIBLE, no need to test it
16:00:59.437 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.437 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.437 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.437 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC1D00000031], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.437 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC1D00000031 : 737072696E672D62746D000001451727DC1F00000032]
16:00:59.438 [Test worker] DEBUG org.hibernate.SQL - insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.439 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.441 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.442 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC1D00000031], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.442 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC1D00000031 : 737072696E672D62746D000001451727DC1F00000032]
16:00:59.442 [Test worker] DEBUG org.hibernate.SQL - insert into payment_tracking_uuid (created_by, created_time, updated_by, updated_time, api_id, payment_id, payment_instrument_id, response, tracking_uuid, user_id, tracking_uuid_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_tracking_uuid (created_by, created_time, updated_by, updated_time, api_id, payment_id, payment_instrument_id, response, tracking_uuid, user_id, tracking_uuid_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.443 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.444 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.445 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC1D00000031], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.445 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC1D00000031 : 737072696E672D62746D000001451727DC1F00000032]
16:00:59.445 [Test worker] DEBUG org.hibernate.SQL - update payment set updated_by=?, updated_time=?, billing_ref_id=?, business_descriptor=?, country_code=?, currency_code=?, external_token=?, merchant_account_id=?, net_amount=?, payment_instrument_id=?, payment_provider_id=?, payment_status_id=?, payment_type_id=?, user_id=? where payment_id=?
Hibernate: update payment set updated_by=?, updated_time=?, billing_ref_id=?, business_descriptor=?, country_code=?, currency_code=?, external_token=?, merchant_account_id=?, net_amount=?, payment_instrument_id=?, payment_provider_id=?, payment_status_id=?, payment_type_id=?, user_id=? where payment_id=?
16:00:59.446 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.449 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.450 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.450 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@305b8340
16:00:59.450 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.450 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC1D00000031], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.450 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.450 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC1D00000031], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.450 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.450 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.450 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC1D00000031], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.450 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.451 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.451 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.451 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the accessible pool
16:00:59.451 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.451 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.451 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the inaccessible pool
16:00:59.451 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.451 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.451 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@ab3369c
16:00:59.451 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC1D00000031 : 737072696E672D62746D000001451727DC1F00000032]
16:00:59.451 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC1D00000031 : 737072696E672D62746D000001451727DC1F00000032]
16:00:59.451 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC1D00000031 : 737072696E672D62746D000001451727DC1F00000032] with SUCCESS
16:00:59.451 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC1D00000031 : 737072696E672D62746D000001451727DC1F00000032] with SUCCESS
16:00:59.451 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:59.452 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:59.452 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:59.452 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:59.452 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:59.452 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:59.452 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:59.452 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:59.452 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:59.452 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:59.452 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:59.452 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC1D00000031 : 737072696E672D62746D000001451727DC1F00000032] (with one-phase optimization)
16:00:59.453 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC1D00000031 : 737072696E672D62746D000001451727DC1F00000032]
16:00:59.453 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:59.453 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:59.453 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:59.453 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:59.453 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:59.454 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:59.454 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC1D00000031], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.454 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:59.454 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727DC1D00000031 : 737072696E672D62746D000001451727DC1F00000032] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.454 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef cleaned up all transaction states for GTRID [737072696E672D62746D000001451727DC1D00000031]
16:00:59.454 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:59.454 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@6a5fe7c9 with status=COMMITTED
16:00:59.455 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:59.455 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
16:00:59.455 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@ab3369c with status=COMMITTED
16:00:59.456 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC1D00000031], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) with status=COMMITTED
16:00:59.456 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC1D00000031], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.456 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC1D00000031], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.456 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef with status=COMMITTED
16:00:59.456 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.456 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.457 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.457 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the inaccessible pool
16:00:59.458 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.458 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.458 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the available pool
16:00:59.458 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.458 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:59.458 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.458 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.458 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:59.458 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null
16:00:59.458 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.458 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.458 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:59.459 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.459 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null&gt;
16:00:59.459 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with JOIN
16:00:59.459 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C] with JOIN
16:00:59.460 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.460 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DA5200000019] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f, adding it to the resource's transactions list
16:00:59.460 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.460 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:59.461 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:59.461 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.461 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.461 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.461 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.461 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DA5200000019]
16:00:59.461 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.461 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.461 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DA5200000019
16:00:59.461 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.461 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.461 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.461 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.461 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f from the inaccessible pool
16:00:59.461 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.461 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.461 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.461 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.462 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:00:59.462 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state NOT_ACCESSIBLE, no need to test it
16:00:59.462 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.462 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.462 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.462 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.462 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.462 [Test worker] DEBUG org.hibernate.SQL - select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
Hibernate: select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
16:00:59.464 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.465 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.467 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.467 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:00:59.467 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.467 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.468 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.468 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.468 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.468 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.468 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.468 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.468 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.468 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.468 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:00:59.468 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.468 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.468 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:00:59.468 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.468 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.468 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.469 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEntity#973258752]
16:00:59.469 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.469 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:59.470 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:59.471 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:59.472 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 5 objects
16:00:59.472 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:59.472 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:59.472 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity{relationToHolder=null, status=0, createdTime=2014-03-31 00:00:00.0, type=0, accountNum=1111, addressId=654360640, updatedBy=null, lastValidatedTime=2014-03-31 00:00:00.0, id=654360640, accountName=ut, createdBy=null, email=null, isDefault=true, userId=123, phoneId=654360640, encryptedAccountNO=null, updatedTime=2014-03-31 00:00:00.0}
16:00:59.472 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.AddressEntity{createdTime=2014-03-31 00:00:00.0, state=null, addressLine3=null, addressLine2=null, addressLine1=3rd street, updatedBy=null, city=LA, country=US , id=654360640, postalCode=12345, createdBy=null, unitNumber=null, district=null, updatedTime=2014-03-31 00:00:00.0}
16:00:59.473 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEntity{paymentProviderId=0, status=9, createdTime=2014-03-31 00:00:00.0, externalToken=1234, countryCode=null, merchantAccountId=0, businessDescriptor=ut, type=0, billingRefId=123, updatedBy=null, currency=USD, id=973258752, createdBy=null, userId=123, paymentInstrumentId=654360640, updatedTime=2014-03-31 00:00:00.0, netAmount=100}
16:00:59.473 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity{prepaid=UNKNOW, createdTime=2014-03-31 00:00:00.0, externalToken=123, type=0, issueCountry=UNKNOW, updatedBy=null, id=654360640, lastBillingDate=2014-03-31 00:00:00.0, createdBy=null, expireDate=2025-11, debit=UNKNOW, commercial=UNKNOW, updatedTime=2014-03-31 00:00:00.0}
16:00:59.473 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PhoneEntity{id=654360640, phoneExtension=null, createdBy=null, areaCode=null, createdTime=2014-03-31 00:00:00.0, number=12345678, type=0, updatedTime=2014-03-31 00:00:00.0, updatedBy=null}
16:00:59.474 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.474 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.474 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.474 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DA5200000019]
16:00:59.475 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.475 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.475 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DA5200000019
16:00:59.475 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.475 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.475 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.476 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.476 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f from the inaccessible pool
16:00:59.476 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.476 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.476 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.476 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.476 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:00:59.476 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state NOT_ACCESSIBLE, no need to test it
16:00:59.476 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.476 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.476 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.476 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.476 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DA5200000019 : 737072696E672D62746D000001451727DAAA0000001C]
16:00:59.477 [Test worker] DEBUG org.hibernate.SQL - select this_.payment_event_id as payment1_6_0_, this_.created_by as created2_6_0_, this_.created_time as created3_6_0_, this_.updated_by as updated4_6_0_, this_.updated_time as updated5_6_0_, this_.currency_code as currency6_6_0_, this_.net_amount as net7_6_0_, this_.payment_id as payment8_6_0_, this_.request as request6_0_, this_.response as response6_0_, this_.event_status_id as event11_6_0_, this_.payment_event_type_id as payment12_6_0_ from payment_event this_ where this_.payment_id=?
Hibernate: select this_.payment_event_id as payment1_6_0_, this_.created_by as created2_6_0_, this_.created_time as created3_6_0_, this_.updated_by as updated4_6_0_, this_.updated_time as updated5_6_0_, this_.currency_code as currency6_6_0_, this_.net_amount as net7_6_0_, this_.payment_id as payment8_6_0_, this_.request as request6_0_, this_.response as response6_0_, this_.event_status_id as event11_6_0_, this_.payment_event_type_id as payment12_6_0_ from payment_event this_ where this_.payment_id=?
16:00:59.478 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.479 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEventEntity#973275136]
16:00:59.479 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 1
16:00:59.479 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEventEntity#973291520]
16:00:59.480 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 2
16:00:59.480 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEventEntity#973324288]
16:00:59.480 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 3
16:00:59.480 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEventEntity#973340672]
16:00:59.481 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 4
16:00:59.481 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEventEntity#973373440]
16:00:59.481 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 5
16:00:59.481 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEventEntity#973389824]
16:00:59.482 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.482 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:00:59.482 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.482 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.482 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.482 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.482 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.482 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.482 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DA5200000019], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:58 CST 2014)
16:00:59.482 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.482 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.482 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.482 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:00:59.482 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.482 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.483 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:00:59.483 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.483 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.483 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEventEntity#973275136]
16:00:59.483 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEventEntity#973275136]
16:00:59.483 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEventEntity#973291520]
16:00:59.484 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEventEntity#973291520]
16:00:59.484 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEventEntity#973324288]
16:00:59.484 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEventEntity#973324288]
16:00:59.484 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEventEntity#973340672]
16:00:59.484 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEventEntity#973340672]
16:00:59.484 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEventEntity#973373440]
16:00:59.484 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEventEntity#973373440]
16:00:59.484 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEventEntity#973389824]
16:00:59.484 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEventEntity#973389824]
16:00:59.484 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.484 [Test worker] DEBUG o.h.t.DistinctResultTransformer - Transformed: 6 rows to: 6 distinct results
16:00:59.497 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:59.497 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.497 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.497 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:59.497 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:59.497 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.497 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727DC6900000034]
16:00:59.497 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.497 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:59.497 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:59.497 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) for Mon Mar 31 16:01:59 CST 2014
16:00:59.497 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.498 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) queued: 5
16:00:59.498 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:59 CST 2014
16:00:59.498 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:59.499 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:59.499 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@27e5d1e3
16:00:59.499 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:59.499 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528594
16:00:59.499 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@6136a28b
16:00:59.500 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.501 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (3 still available)
16:00:59.501 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (3 still available)
16:00:59.501 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DC6900000034]
16:00:59.501 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:59.501 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (3 still available), waiting if necessary
16:00:59.501 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 - closing time: 1396252919420, now time: 1396252859501
16:00:59.501 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.501 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.501 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.501 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.502 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.502 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:59.502 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state IN_POOL, testing it
16:00:59.502 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, skipping test
16:00:59.502 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.502 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.502 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.503 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.503 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@324d7c25 belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.503 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727DC6900000034 : 737072696E672D62746D000001451727DC6F00000035]
16:00:59.503 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DC6900000034 : 737072696E672D62746D000001451727DC6F00000035]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID null&gt;
16:00:59.504 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID a Bitronix XID [737072696E672D62746D000001451727DC6900000034 : 737072696E672D62746D000001451727DC6F00000035] with NOFLAGS
16:00:59.504 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6900000034 : 737072696E672D62746D000001451727DC6F00000035] with NOFLAGS
16:00:59.504 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6900000034 : 737072696E672D62746D000001451727DC6F00000035]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.504 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DC6900000034] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, adding it to the resource's transactions list
16:00:59.504 [Test worker] DEBUG org.hibernate.SQL - select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
Hibernate: select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
16:00:59.505 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.506 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:59.506 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.506 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.507 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.507 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.507 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.507 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.507 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.507 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.507 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.507 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.507 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:59.507 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.507 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.507 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:59.508 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.508 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.508 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:59.508 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.508 [Test worker] DEBUG o.h.t.DistinctResultTransformer - Transformed: 0 rows to: 0 distinct results
16:00:59.508 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:59.508 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:59.508 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 654377024, using strategy: org.hibernate.id.Assigned
16:00:59.509 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 654377024, using strategy: org.hibernate.id.Assigned
16:00:59.509 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 654377024, using strategy: org.hibernate.id.Assigned
16:00:59.510 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 654377024, using strategy: org.hibernate.id.Assigned
16:00:59.511 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - parse() - HQL: update com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity set is_default = CASE WHEN payment_instrument_id = 654377024 THEN true ELSE false END where user_id = 123
16:00:59.516 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - --- HQL AST ---
 \-[UPDATE] Node: 'update'
    +-[FROM] Node: 'FROM'
    |  \-[RANGE] Node: 'RANGE'
    |     \-[DOT] Node: '.'
    |        +-[DOT] Node: '.'
    |        |  +-[DOT] Node: '.'
    |        |  |  +-[DOT] Node: '.'
    |        |  |  |  +-[DOT] Node: '.'
    |        |  |  |  |  +-[DOT] Node: '.'
    |        |  |  |  |  |  +-[IDENT] Node: 'com'
    |        |  |  |  |  |  \-[IDENT] Node: 'junbo'
    |        |  |  |  |  \-[IDENT] Node: 'payment'
    |        |  |  |  \-[IDENT] Node: 'db'
    |        |  |  \-[IDENT] Node: 'entity'
    |        |  \-[IDENT] Node: 'paymentinstrument'
    |        \-[IDENT] Node: 'PaymentInstrumentEntity'
    +-[SET] Node: 'set'
    |  \-[EQ] Node: '='
    |     +-[IDENT] Node: 'is_default'
    |     \-[CASE] Node: 'CASE'
    |        +-[WHEN] Node: 'WHEN'
    |        |  +-[EQ] Node: '='
    |        |  |  +-[IDENT] Node: 'payment_instrument_id'
    |        |  |  \-[NUM_INT] Node: '654377024'
    |        |  \-[TRUE] Node: 'true'
    |        \-[ELSE] Node: 'ELSE'
    |           \-[FALSE] Node: 'false'
    \-[WHERE] Node: 'where'
       \-[EQ] Node: '='
          +-[IDENT] Node: 'user_id'
          \-[NUM_INT] Node: '123'

16:00:59.516 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:00:59.517 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - update &lt;&lt; begin [level=1, statement=update]
16:00:59.517 [Test worker] DEBUG o.h.h.internal.ast.tree.FromElement - FromClause{level=1} : com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity (&lt;no alias&gt;) -&gt; paymentins0_
16:00:59.523 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - update : finishing up [level=1, statement=update]
16:00:59.523 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - update &gt;&gt; end [level=1, statement=update]
16:00:59.524 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - --- SQL AST ---
 \-[UPDATE] UpdateStatement: 'update'  querySpaces (payment_instrument)
    +-[FROM] FromClause: 'FROM' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[], fromElementByTableAlias=[paymentins0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
    |  \-[FROM_FRAGMENT] FromElement: 'payment_instrument' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=payment_instrument,tableAlias=paymentins0_,origin=null,columns={,className=com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity}}
    +-[SET] SqlNode: 'set'
    |  \-[EQ] BinaryLogicOperatorNode: '='
    |     +-[IDENT] IdentNode: 'is_default' {originalText=is_default}
    |     \-[CASE] CaseNode: 'CASE'
    |        +-[WHEN] SqlNode: 'WHEN'
    |        |  +-[EQ] BinaryLogicOperatorNode: '='
    |        |  |  +-[IDENT] IdentNode: 'payment_instrument_id' {originalText=payment_instrument_id}
    |        |  |  \-[NUM_INT] LiteralNode: '654377024'
    |        |  \-[TRUE] BooleanLiteralNode: 'true'
    |        \-[ELSE] SqlNode: 'ELSE'
    |           \-[FALSE] BooleanLiteralNode: 'false'
    \-[WHERE] SqlNode: 'where'
       \-[EQ] BinaryLogicOperatorNode: '='
          +-[IDENT] IdentNode: 'user_id' {originalText=user_id}
          \-[NUM_INT] LiteralNode: '123'

16:00:59.524 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:00:59.524 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:00:59.525 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:59.525 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:59.525 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
16:00:59.525 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:59.525 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:59.525 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.AddressEntity{createdTime=Mon Mar 31 16:00:59 CST 2014, state=null, addressLine3=null, addressLine2=null, addressLine1=3rd street, updatedBy=null, city=LA, country=US, id=654377024, postalCode=12345, createdBy=null, unitNumber=null, district=null, updatedTime=Mon Mar 31 16:00:59 CST 2014}
16:00:59.526 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity{prepaid=UNKNOW, createdTime=Mon Mar 31 16:00:59 CST 2014, externalToken=123, type=0, issueCountry=UNKNOW, updatedBy=null, id=654377024, lastBillingDate=Mon Mar 31 16:00:59 CST 2014, createdBy=null, expireDate=2025-11, debit=UNKNOW, commercial=UNKNOW, updatedTime=Mon Mar 31 16:00:59 CST 2014}
16:00:59.526 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PhoneEntity{id=654377024, phoneExtension=null, createdBy=null, areaCode=null, createdTime=Mon Mar 31 16:00:59 CST 2014, number=12345678, type=0, updatedTime=Mon Mar 31 16:00:59 CST 2014, updatedBy=null}
16:00:59.526 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity{relationToHolder=null, status=0, createdTime=Mon Mar 31 16:00:59 CST 2014, type=0, accountNum=1111, addressId=654377024, updatedBy=null, lastValidatedTime=Mon Mar 31 16:00:59 CST 2014, id=654377024, accountName=ut, createdBy=null, email=null, isDefault=true, userId=123, phoneId=654377024, encryptedAccountNO=null, updatedTime=Mon Mar 31 16:00:59 CST 2014}
16:00:59.526 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: payment_instrument
16:00:59.526 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.526 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.526 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.526 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DC6900000034]
16:00:59.526 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.526 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.526 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DC6900000034
16:00:59.526 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.526 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.526 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.527 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.527 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:59.527 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.527 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.527 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.527 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.527 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:59.527 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state NOT_ACCESSIBLE, no need to test it
16:00:59.527 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.527 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.527 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.527 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.527 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6900000034 : 737072696E672D62746D000001451727DC6F00000035]
16:00:59.527 [Test worker] DEBUG org.hibernate.SQL - insert into address (created_by, created_time, updated_by, updated_time, address_line_1, address_line_2, address_line_3, city, country_code, district, postal_code, state, unit_number, address_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into address (created_by, created_time, updated_by, updated_time, address_line_1, address_line_2, address_line_3, city, country_code, district, postal_code, state, unit_number, address_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.528 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.529 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.529 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.529 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6900000034 : 737072696E672D62746D000001451727DC6F00000035]
16:00:59.529 [Test worker] DEBUG org.hibernate.SQL - insert into phone (created_by, created_time, updated_by, updated_time, phone_area_code, phone_local_number, phone_extension, phone_type_id, phone_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into phone (created_by, created_time, updated_by, updated_time, phone_area_code, phone_local_number, phone_extension, phone_type_id, phone_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.530 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.531 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.531 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.531 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6900000034 : 737072696E672D62746D000001451727DC6F00000035]
16:00:59.531 [Test worker] DEBUG org.hibernate.SQL - insert into payment_instrument (created_by, created_time, updated_by, updated_time, payment_instrument_holder_name, account_number, address_id, email, encrypted_account_number, is_default, last_validated_time, phone_id, relation_to_holder, status_id, payment_instrument_type_id, user_id, payment_instrument_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_instrument (created_by, created_time, updated_by, updated_time, payment_instrument_holder_name, account_number, address_id, email, encrypted_account_number, is_default, last_validated_time, phone_id, relation_to_holder, status_id, payment_instrument_type_id, user_id, payment_instrument_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.532 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.534 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.534 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.534 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6900000034 : 737072696E672D62746D000001451727DC6F00000035]
16:00:59.535 [Test worker] DEBUG org.hibernate.SQL - insert into credit_card_payment_instrument (created_by, created_time, updated_by, updated_time, commercial, debit, expire_time, external_token, issue_country, last_billing_time, prepaid, credit_card_type_id, payment_instrument_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into credit_card_payment_instrument (created_by, created_time, updated_by, updated_time, commercial, debit, expire_time, external_token, issue_country, last_billing_time, prepaid, credit_card_type_id, payment_instrument_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.536 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.537 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.537 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.537 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:59.537 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.537 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.537 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.537 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.537 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.537 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.538 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.538 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.538 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.538 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.538 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:59.538 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.538 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.538 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:59.538 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.538 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.538 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.538 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.538 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.538 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DC6900000034]
16:00:59.538 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.538 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.538 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DC6900000034
16:00:59.538 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.538 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.538 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.538 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.538 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:59.538 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.538 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.538 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.538 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.538 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:59.538 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state NOT_ACCESSIBLE, no need to test it
16:00:59.538 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.538 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.538 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.538 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.538 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6900000034 : 737072696E672D62746D000001451727DC6F00000035]
16:00:59.539 [Test worker] DEBUG org.hibernate.SQL - update payment_instrument set is_default=case when payment_instrument_id=654377024 then true else false end where user_id=123
Hibernate: update payment_instrument set is_default=case when payment_instrument_id=654377024 then true else false end where user_id=123
16:00:59.540 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.541 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:59.541 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.541 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.541 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.541 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.541 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.541 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.541 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.541 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.541 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.541 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.541 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:59.541 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.541 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.541 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:59.541 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.541 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.542 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973422592, using strategy: org.hibernate.id.Assigned
16:00:59.542 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:59.543 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.543 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.543 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.543 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) still queued: 4
16:00:59.543 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:59.543 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.543 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.543 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@27e5d1e3
16:00:59.543 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:59.543 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:59.543 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 1 insertions, 0 updates, 0 deletions to 5 objects
16:00:59.544 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:59.544 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:59.544 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.TrackingUuidEntity{response={&quot;accountName&quot;:&quot;ut&quot;,&quot;accountNum&quot;:&quot;1111&quot;,&quot;address&quot;:{&quot;addressLine1&quot;:&quot;3rd street&quot;,&quot;city&quot;:&quot;LA&quot;,&quot;country&quot;:&quot;US&quot;,&quot;postalCode&quot;:&quot;12345&quot;},&quot;creditCardRequest&quot;:{&quot;commercial&quot;:&quot;UNKNOW&quot;,&quot;debit&quot;:&quot;UNKNOW&quot;,&quot;encryptedCvmCode&quot;:&quot;111&quot;,&quot;expireDate&quot;:&quot;2025-11&quot;,&quot;externalToken&quot;:&quot;123&quot;,&quot;issueCountry&quot;:&quot;UNKNOW&quot;,&quot;lastBillingDate&quot;:1396252859508,&quot;prepaid&quot;:&quot;UNKNOW&quot;,&quot;type&quot;:&quot;VISA&quot;},&quot;id&quot;:{&quot;paymentInstrumentId&quot;:654377024,&quot;primaryId&quot;:654377024,&quot;userId&quot;:123},&quot;isDefault&quot;:&quot;true&quot;,&quot;isValidated&quot;:true,&quot;lastValidatedTime&quot;:1396252859508,&quot;phone&quot;:{&quot;number&quot;:&quot;12345678&quot;,&quot;type&quot;:&quot;Home&quot;},&quot;status&quot;:&quot;ACTIVE&quot;,&quot;trackingUuid&quot;:&quot;b4357866-ee48-4941-8792-960791d4b0b4&quot;,&quot;type&quot;:&quot;CREDITCARD&quot;}, id=973422592, createdBy=null, trackingUuid=b4357866-ee48-4941-8792-960791d4b0b4, createdTime=Mon Mar 31 16:00:59 CST 2014, paymentId=null, userId=123, api=0, paymentInstrumentId=654377024, updatedTime=Mon Mar 31 16:00:59 CST 2014, updatedBy=null}
16:00:59.544 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.AddressEntity{createdTime=Mon Mar 31 16:00:59 CST 2014, state=null, addressLine3=null, addressLine2=null, addressLine1=3rd street, updatedBy=null, city=LA, country=US, id=654377024, postalCode=12345, createdBy=null, unitNumber=null, district=null, updatedTime=Mon Mar 31 16:00:59 CST 2014}
16:00:59.544 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity{prepaid=UNKNOW, createdTime=Mon Mar 31 16:00:59 CST 2014, externalToken=123, type=0, issueCountry=UNKNOW, updatedBy=null, id=654377024, lastBillingDate=Mon Mar 31 16:00:59 CST 2014, createdBy=null, expireDate=2025-11, debit=UNKNOW, commercial=UNKNOW, updatedTime=Mon Mar 31 16:00:59 CST 2014}
16:00:59.544 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PhoneEntity{id=654377024, phoneExtension=null, createdBy=null, areaCode=null, createdTime=Mon Mar 31 16:00:59 CST 2014, number=12345678, type=0, updatedTime=Mon Mar 31 16:00:59 CST 2014, updatedBy=null}
16:00:59.544 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity{relationToHolder=null, status=0, createdTime=Mon Mar 31 16:00:59 CST 2014, type=0, accountNum=1111, addressId=654377024, updatedBy=null, lastValidatedTime=Mon Mar 31 16:00:59 CST 2014, id=654377024, accountName=ut, createdBy=null, email=null, isDefault=true, userId=123, phoneId=654377024, encryptedAccountNO=null, updatedTime=Mon Mar 31 16:00:59 CST 2014}
16:00:59.544 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.544 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.544 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.544 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DC6900000034]
16:00:59.544 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.544 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.545 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DC6900000034
16:00:59.545 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.545 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.545 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.545 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.545 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:59.545 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.545 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.545 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.545 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.545 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:59.545 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state NOT_ACCESSIBLE, no need to test it
16:00:59.545 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.545 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.545 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.545 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.545 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6900000034 : 737072696E672D62746D000001451727DC6F00000035]
16:00:59.545 [Test worker] DEBUG org.hibernate.SQL - insert into payment_tracking_uuid (created_by, created_time, updated_by, updated_time, api_id, payment_id, payment_instrument_id, response, tracking_uuid, user_id, tracking_uuid_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_tracking_uuid (created_by, created_time, updated_by, updated_time, api_id, payment_id, payment_instrument_id, response, tracking_uuid, user_id, tracking_uuid_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.546 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.547 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.548 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.548 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:59.548 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.548 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.548 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.548 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.548 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.548 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.548 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.548 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.548 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.548 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.548 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:59.548 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.548 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.548 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:59.548 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.548 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.548 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@6136a28b
16:00:59.548 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6900000034 : 737072696E672D62746D000001451727DC6F00000035]
16:00:59.548 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6900000034 : 737072696E672D62746D000001451727DC6F00000035]
16:00:59.548 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6900000034 : 737072696E672D62746D000001451727DC6F00000035] with SUCCESS
16:00:59.548 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6900000034 : 737072696E672D62746D000001451727DC6F00000035] with SUCCESS
16:00:59.548 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:59.548 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:59.548 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:59.548 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:59.549 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:59.549 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:59.549 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:59.549 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:59.549 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:59.549 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:59.549 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:59.549 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6900000034 : 737072696E672D62746D000001451727DC6F00000035] (with one-phase optimization)
16:00:59.551 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6900000034 : 737072696E672D62746D000001451727DC6F00000035]
16:00:59.551 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:59.551 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:59.551 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:59.551 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:59.551 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:59.551 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:59.551 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.551 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:59.551 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727DC6900000034 : 737072696E672D62746D000001451727DC6F00000035] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.551 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 cleaned up all transaction states for GTRID [737072696E672D62746D000001451727DC6900000034]
16:00:59.551 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:59.551 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@27e5d1e3 with status=COMMITTED
16:00:59.551 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:59.552 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
16:00:59.552 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@6136a28b with status=COMMITTED
16:00:59.552 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) with status=COMMITTED
16:00:59.552 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.552 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6900000034], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.552 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 with status=COMMITTED
16:00:59.552 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.552 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.552 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.552 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:59.552 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.552 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.552 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the available pool
16:00:59.552 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.552 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:59.552 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.552 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.554 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'PaymentTransactionServiceImpl.charge' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
16:00:59.554 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:59.554 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:59.554 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:59.554 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:59.554 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@354fa679
16:00:59.554 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:59.554 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528595
16:00:59.554 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@30df7afb
16:00:59.554 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654377024]
16:00:59.554 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.554 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (3 still available)
16:00:59.554 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (3 still available)
16:00:59.554 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DC6800000033]
16:00:59.555 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:59.555 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (3 still available), waiting if necessary
16:00:59.555 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef - closing time: 1396252919458, now time: 1396252859555
16:00:59.555 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.555 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.555 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.555 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.555 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.555 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the accessible pool
16:00:59.555 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7d117aef was in state IN_POOL, testing it
16:00:59.555 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef, skipping test
16:00:59.555 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.555 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.555 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.555 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.555 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@7d117aef belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.555 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.555 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null&gt;
16:00:59.555 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with NOFLAGS
16:00:59.555 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with NOFLAGS
16:00:59.555 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.555 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DC6800000033] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef, adding it to the resource's transactions list
16:00:59.555 [Test worker] DEBUG org.hibernate.SQL - select paymentins0_.payment_instrument_id as payment1_10_0_, paymentins0_.created_by as created2_10_0_, paymentins0_.created_time as created3_10_0_, paymentins0_.updated_by as updated4_10_0_, paymentins0_.updated_time as updated5_10_0_, paymentins0_.payment_instrument_holder_name as payment6_10_0_, paymentins0_.account_number as account7_10_0_, paymentins0_.address_id as address8_10_0_, paymentins0_.email as email10_0_, paymentins0_.encrypted_account_number as encrypted10_10_0_, paymentins0_.is_default as is11_10_0_, paymentins0_.last_validated_time as last12_10_0_, paymentins0_.phone_id as phone13_10_0_, paymentins0_.relation_to_holder as relation14_10_0_, paymentins0_.status_id as status15_10_0_, paymentins0_.payment_instrument_type_id as payment16_10_0_, paymentins0_.user_id as user17_10_0_ from payment_instrument paymentins0_ where paymentins0_.payment_instrument_id=?
Hibernate: select paymentins0_.payment_instrument_id as payment1_10_0_, paymentins0_.created_by as created2_10_0_, paymentins0_.created_time as created3_10_0_, paymentins0_.updated_by as updated4_10_0_, paymentins0_.updated_time as updated5_10_0_, paymentins0_.payment_instrument_holder_name as payment6_10_0_, paymentins0_.account_number as account7_10_0_, paymentins0_.address_id as address8_10_0_, paymentins0_.email as email10_0_, paymentins0_.encrypted_account_number as encrypted10_10_0_, paymentins0_.is_default as is11_10_0_, paymentins0_.last_validated_time as last12_10_0_, paymentins0_.phone_id as phone13_10_0_, paymentins0_.relation_to_holder as relation14_10_0_, paymentins0_.status_id as status15_10_0_, paymentins0_.payment_instrument_type_id as payment16_10_0_, paymentins0_.user_id as user17_10_0_ from payment_instrument paymentins0_ where paymentins0_.payment_instrument_id=?
16:00:59.557 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.557 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654377024]
16:00:59.558 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.558 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@305b8340
16:00:59.558 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.558 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.558 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.558 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.558 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.558 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.558 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.558 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.558 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.558 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.558 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the accessible pool
16:00:59.558 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.558 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.558 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the inaccessible pool
16:00:59.558 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.558 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.558 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:59.559 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654377024]
16:00:59.559 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654377024]
16:00:59.559 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.559 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:59.559 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.paymentinstrument.AddressEntity#654377024]
16:00:59.560 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.560 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.560 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.560 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DC6800000033]
16:00:59.560 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.560 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.560 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DC6800000033
16:00:59.561 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.561 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.561 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.561 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.561 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the inaccessible pool
16:00:59.561 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.561 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.561 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.561 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.561 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the accessible pool
16:00:59.561 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7d117aef was in state NOT_ACCESSIBLE, no need to test it
16:00:59.561 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.561 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.561 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.561 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.561 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.561 [Test worker] DEBUG org.hibernate.SQL - select addressent0_.address_id as address1_8_0_, addressent0_.created_by as created2_8_0_, addressent0_.created_time as created3_8_0_, addressent0_.updated_by as updated4_8_0_, addressent0_.updated_time as updated5_8_0_, addressent0_.address_line_1 as address6_8_0_, addressent0_.address_line_2 as address7_8_0_, addressent0_.address_line_3 as address8_8_0_, addressent0_.city as city8_0_, addressent0_.country_code as country10_8_0_, addressent0_.district as district8_0_, addressent0_.postal_code as postal12_8_0_, addressent0_.state as state8_0_, addressent0_.unit_number as unit14_8_0_ from address addressent0_ where addressent0_.address_id=?
Hibernate: select addressent0_.address_id as address1_8_0_, addressent0_.created_by as created2_8_0_, addressent0_.created_time as created3_8_0_, addressent0_.updated_by as updated4_8_0_, addressent0_.updated_time as updated5_8_0_, addressent0_.address_line_1 as address6_8_0_, addressent0_.address_line_2 as address7_8_0_, addressent0_.address_line_3 as address8_8_0_, addressent0_.city as city8_0_, addressent0_.country_code as country10_8_0_, addressent0_.district as district8_0_, addressent0_.postal_code as postal12_8_0_, addressent0_.state as state8_0_, addressent0_.unit_number as unit14_8_0_ from address addressent0_ where addressent0_.address_id=?
16:00:59.563 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.563 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.paymentinstrument.AddressEntity#654377024]
16:00:59.564 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.564 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@305b8340
16:00:59.564 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.564 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.564 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.564 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.564 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.564 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.564 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.565 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.565 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.565 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.565 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the accessible pool
16:00:59.565 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.565 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.565 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the inaccessible pool
16:00:59.565 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.565 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.566 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.paymentinstrument.AddressEntity#654377024]
16:00:59.566 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.paymentinstrument.AddressEntity#654377024]
16:00:59.566 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.568 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:59.568 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.paymentinstrument.PhoneEntity#654377024]
16:00:59.568 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.568 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.568 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.568 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DC6800000033]
16:00:59.568 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.568 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.568 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DC6800000033
16:00:59.568 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.568 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.568 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.568 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.568 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the inaccessible pool
16:00:59.568 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.568 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.568 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.568 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.568 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the accessible pool
16:00:59.568 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7d117aef was in state NOT_ACCESSIBLE, no need to test it
16:00:59.569 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.569 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.569 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.569 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.569 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.569 [Test worker] DEBUG org.hibernate.SQL - select phoneentit0_.phone_id as phone1_11_0_, phoneentit0_.created_by as created2_11_0_, phoneentit0_.created_time as created3_11_0_, phoneentit0_.updated_by as updated4_11_0_, phoneentit0_.updated_time as updated5_11_0_, phoneentit0_.phone_area_code as phone6_11_0_, phoneentit0_.phone_local_number as phone7_11_0_, phoneentit0_.phone_extension as phone8_11_0_, phoneentit0_.phone_type_id as phone9_11_0_ from phone phoneentit0_ where phoneentit0_.phone_id=?
Hibernate: select phoneentit0_.phone_id as phone1_11_0_, phoneentit0_.created_by as created2_11_0_, phoneentit0_.created_time as created3_11_0_, phoneentit0_.updated_by as updated4_11_0_, phoneentit0_.updated_time as updated5_11_0_, phoneentit0_.phone_area_code as phone6_11_0_, phoneentit0_.phone_local_number as phone7_11_0_, phoneentit0_.phone_extension as phone8_11_0_, phoneentit0_.phone_type_id as phone9_11_0_ from phone phoneentit0_ where phoneentit0_.phone_id=?
16:00:59.571 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.571 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.paymentinstrument.PhoneEntity#654377024]
16:00:59.572 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.573 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@305b8340
16:00:59.573 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.573 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.573 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.573 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.573 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.573 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.573 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.573 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.573 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.573 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.574 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the accessible pool
16:00:59.574 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.574 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.574 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the inaccessible pool
16:00:59.574 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.574 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.574 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.paymentinstrument.PhoneEntity#654377024]
16:00:59.574 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.paymentinstrument.PhoneEntity#654377024]
16:00:59.574 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.574 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:59.574 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity#654377024]
16:00:59.574 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.574 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.574 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.574 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DC6800000033]
16:00:59.575 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.575 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.575 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DC6800000033
16:00:59.575 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.575 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.575 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.575 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.575 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the inaccessible pool
16:00:59.575 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.575 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.575 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.575 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.575 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the accessible pool
16:00:59.575 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7d117aef was in state NOT_ACCESSIBLE, no need to test it
16:00:59.575 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.575 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.575 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.575 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.575 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.575 [Test worker] DEBUG org.hibernate.SQL - select creditcard0_.payment_instrument_id as payment1_9_0_, creditcard0_.created_by as created2_9_0_, creditcard0_.created_time as created3_9_0_, creditcard0_.updated_by as updated4_9_0_, creditcard0_.updated_time as updated5_9_0_, creditcard0_.commercial as commercial9_0_, creditcard0_.debit as debit9_0_, creditcard0_.expire_time as expire8_9_0_, creditcard0_.external_token as external9_9_0_, creditcard0_.issue_country as issue10_9_0_, creditcard0_.last_billing_time as last11_9_0_, creditcard0_.prepaid as prepaid9_0_, creditcard0_.credit_card_type_id as credit13_9_0_ from credit_card_payment_instrument creditcard0_ where creditcard0_.payment_instrument_id=?
Hibernate: select creditcard0_.payment_instrument_id as payment1_9_0_, creditcard0_.created_by as created2_9_0_, creditcard0_.created_time as created3_9_0_, creditcard0_.updated_by as updated4_9_0_, creditcard0_.updated_time as updated5_9_0_, creditcard0_.commercial as commercial9_0_, creditcard0_.debit as debit9_0_, creditcard0_.expire_time as expire8_9_0_, creditcard0_.external_token as external9_9_0_, creditcard0_.issue_country as issue10_9_0_, creditcard0_.last_billing_time as last11_9_0_, creditcard0_.prepaid as prepaid9_0_, creditcard0_.credit_card_type_id as credit13_9_0_ from credit_card_payment_instrument creditcard0_ where creditcard0_.payment_instrument_id=?
16:00:59.576 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.577 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity#654377024]
16:00:59.577 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.577 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@305b8340
16:00:59.577 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.577 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.577 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.577 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.577 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.577 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.578 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.578 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.578 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.578 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.578 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the accessible pool
16:00:59.578 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.578 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.578 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the inaccessible pool
16:00:59.578 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.578 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.578 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity#654377024]
16:00:59.579 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity#654377024]
16:00:59.579 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.579 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:59.579 [Test worker] INFO  c.j.p.c.i.PaymentTransactionServiceImpl - charge for PI:com.junbo.payment.spec.model.PIId@20d0f60e
16:00:59.579 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:59.579 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.579 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.579 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with SUCCESS
16:00:59.579 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with SUCCESS
16:00:59.579 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.579 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:59.579 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:59.579 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.579 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727DCBB00000037]
16:00:59.580 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCBB00000037], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.580 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:59.580 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:59.580 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCBB00000037], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) for Mon Mar 31 16:01:59 CST 2014
16:00:59.580 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCBB00000037], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.580 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCBB00000037], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) queued: 5
16:00:59.580 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:59 CST 2014
16:00:59.580 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@66ff4233
16:00:59.580 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:59.580 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528595
16:00:59.580 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@7fef950b
16:00:59.581 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.581 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.581 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.581 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DCBB00000037]
16:00:59.581 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.581 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.581 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:59.581 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available), waiting if necessary
16:00:59.581 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f - closing time: 1396252919491, now time: 1396252859581
16:00:59.581 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.581 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.581 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.581 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.581 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.582 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:00:59.582 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state IN_POOL, testing it
16:00:59.582 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f, skipping test
16:00:59.582 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.582 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.582 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.582 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCBB00000037], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.582 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@69e210f belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.582 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727DCBB00000037 : 737072696E672D62746D000001451727DCBE00000038]
16:00:59.582 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DCBB00000037 : 737072696E672D62746D000001451727DCBE00000038]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null&gt;
16:00:59.582 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID a Bitronix XID [737072696E672D62746D000001451727DCBB00000037 : 737072696E672D62746D000001451727DCBE00000038] with NOFLAGS
16:00:59.582 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCBB00000037 : 737072696E672D62746D000001451727DCBE00000038] with NOFLAGS
16:00:59.582 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCBB00000037 : 737072696E672D62746D000001451727DCBE00000038]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.582 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DCBB00000037] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f, adding it to the resource's transactions list
16:00:59.583 [Test worker] DEBUG org.hibernate.SQL - select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
Hibernate: select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
16:00:59.584 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.584 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:00:59.584 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.584 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCBB00000037], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.585 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.585 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCBB00000037], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.585 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.585 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.585 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCBB00000037], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.585 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.585 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.585 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.585 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:00:59.585 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.585 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.585 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:00:59.585 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.585 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.585 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:59.585 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.585 [Test worker] DEBUG o.h.t.DistinctResultTransformer - Transformed: 0 rows to: 0 distinct results
16:00:59.585 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:59.586 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCBB00000037], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.586 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCBB00000037], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.586 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCBB00000037], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.586 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCBB00000037], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) still queued: 4
16:00:59.586 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:59.586 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.586 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCBB00000037], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.586 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@66ff4233
16:00:59.586 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@7fef950b
16:00:59.586 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCBB00000037 : 737072696E672D62746D000001451727DCBE00000038]
16:00:59.586 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCBB00000037 : 737072696E672D62746D000001451727DCBE00000038]
16:00:59.586 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCBB00000037 : 737072696E672D62746D000001451727DCBE00000038] with SUCCESS
16:00:59.586 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCBB00000037 : 737072696E672D62746D000001451727DCBE00000038] with SUCCESS
16:00:59.586 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:59.586 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:59.586 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:59.586 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:59.586 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:59.586 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:59.586 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:59.586 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:59.586 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:59.586 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:59.586 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:59.586 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DCBB00000037 : 737072696E672D62746D000001451727DCBE00000038] (with one-phase optimization)
16:00:59.587 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DCBB00000037 : 737072696E672D62746D000001451727DCBE00000038]
16:00:59.587 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:59.587 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:59.587 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:59.587 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:59.587 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:59.587 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:59.587 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCBB00000037], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.587 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:59.587 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727DCBB00000037 : 737072696E672D62746D000001451727DCBE00000038] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.587 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f cleaned up all transaction states for GTRID [737072696E672D62746D000001451727DCBB00000037]
16:00:59.587 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:59.587 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@66ff4233 with status=COMMITTED
16:00:59.587 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:59.587 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@7fef950b with status=COMMITTED
16:00:59.587 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCBB00000037], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) with status=COMMITTED
16:00:59.587 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCBB00000037], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.587 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCBB00000037], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.587 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f with status=COMMITTED
16:00:59.587 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.587 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.588 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.588 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the inaccessible pool
16:00:59.588 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.588 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.588 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the available pool
16:00:59.588 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.588 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:59.588 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.588 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.588 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:59.588 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null
16:00:59.588 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.588 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.588 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:59.588 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.588 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null&gt;
16:00:59.588 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with JOIN
16:00:59.588 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with JOIN
16:00:59.588 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.588 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DC6800000033] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef, adding it to the resource's transactions list
16:00:59.588 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.589 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:59.589 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:59.589 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:59.589 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.589 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.589 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with SUCCESS
16:00:59.589 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with SUCCESS
16:00:59.589 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.589 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:59.589 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:59.589 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.589 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727DCC500000039]
16:00:59.589 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCC500000039], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.589 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:59.589 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:59.589 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCC500000039], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) for Mon Mar 31 16:01:59 CST 2014
16:00:59.589 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCC500000039], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.590 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCC500000039], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) queued: 5
16:00:59.590 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:59 CST 2014
16:00:59.590 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@b9a38be
16:00:59.590 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:59.590 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528595
16:00:59.590 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@3a0347e5
16:00:59.590 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973438976, using strategy: org.hibernate.id.Assigned
16:00:59.590 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973455360, using strategy: org.hibernate.id.Assigned
16:00:59.590 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:59.590 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCC500000039], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.590 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCC500000039], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.590 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCC500000039], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.590 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCC500000039], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) still queued: 4
16:00:59.590 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 3 synchronization(s) to execute
16:00:59.590 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCC500000039], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.591 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@b9a38be
16:00:59.591 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:59.591 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:59.591 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 2 objects
16:00:59.591 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:59.591 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:59.591 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEventEntity{response={&quot;result&quot;: &quot;OK&quot;}, id=973455360, createdBy=null, status=5, createdTime=Mon Mar 31 16:00:59 CST 2014, paymentId=973438976, request={&quot;billingRefId&quot;:&quot;123&quot;,&quot;chargeInfo&quot;:{&quot;amount&quot;:100,&quot;businessDescriptor&quot;:&quot;ut&quot;,&quot;currency&quot;:&quot;USD&quot;},&quot;paymentInstrumentId&quot;:{&quot;paymentInstrumentId&quot;:654377024,&quot;primaryId&quot;:654377024,&quot;userId&quot;:123},&quot;trackingUuid&quot;:&quot;4deaf450-2c68-4790-a3ac-27450ae24460&quot;,&quot;userId&quot;:123}, type=2, updatedTime=Mon Mar 31 16:00:59 CST 2014, netAmount=100, currency=USD, updatedBy=null}
16:00:59.591 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEntity{paymentProviderId=0, status=5, createdTime=Mon Mar 31 16:00:59 CST 2014, externalToken=null, countryCode=null, merchantAccountId=0, businessDescriptor=ut, type=2, billingRefId=123, updatedBy=null, currency=USD, id=973438976, createdBy=null, userId=123, paymentInstrumentId=654377024, updatedTime=Mon Mar 31 16:00:59 CST 2014, netAmount=100}
16:00:59.591 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.591 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.592 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.592 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DCC500000039]
16:00:59.592 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.592 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.592 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:59.592 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available), waiting if necessary
16:00:59.592 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 - closing time: 1396252919552, now time: 1396252859592
16:00:59.592 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.592 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.592 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.592 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.592 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.592 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:59.592 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state IN_POOL, testing it
16:00:59.592 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, skipping test
16:00:59.592 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.592 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.592 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.592 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCC500000039], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.592 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@324d7c25 belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.592 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727DCC500000039 : 737072696E672D62746D000001451727DCC80000003A]
16:00:59.592 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DCC500000039 : 737072696E672D62746D000001451727DCC80000003A]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID null&gt;
16:00:59.592 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID a Bitronix XID [737072696E672D62746D000001451727DCC500000039 : 737072696E672D62746D000001451727DCC80000003A] with NOFLAGS
16:00:59.592 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCC500000039 : 737072696E672D62746D000001451727DCC80000003A] with NOFLAGS
16:00:59.592 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCC500000039 : 737072696E672D62746D000001451727DCC80000003A]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.592 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DCC500000039] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, adding it to the resource's transactions list
16:00:59.592 [Test worker] DEBUG org.hibernate.SQL - insert into payment (created_by, created_time, updated_by, updated_time, billing_ref_id, business_descriptor, country_code, currency_code, external_token, merchant_account_id, net_amount, payment_instrument_id, payment_provider_id, payment_status_id, payment_type_id, user_id, payment_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment (created_by, created_time, updated_by, updated_time, billing_ref_id, business_descriptor, country_code, currency_code, external_token, merchant_account_id, net_amount, payment_instrument_id, payment_provider_id, payment_status_id, payment_type_id, user_id, payment_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.593 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.594 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.595 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCC500000039], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.595 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCC500000039 : 737072696E672D62746D000001451727DCC80000003A]
16:00:59.595 [Test worker] DEBUG org.hibernate.SQL - insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.595 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.597 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.597 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.597 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:59.597 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.597 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCC500000039], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.597 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.597 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCC500000039], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.597 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.597 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.597 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCC500000039], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.597 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.597 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.597 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.597 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:59.597 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.597 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.597 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:59.597 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.597 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.597 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:59.597 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@3a0347e5
16:00:59.598 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCC500000039 : 737072696E672D62746D000001451727DCC80000003A]
16:00:59.598 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCC500000039 : 737072696E672D62746D000001451727DCC80000003A]
16:00:59.598 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCC500000039 : 737072696E672D62746D000001451727DCC80000003A] with SUCCESS
16:00:59.598 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCC500000039 : 737072696E672D62746D000001451727DCC80000003A] with SUCCESS
16:00:59.598 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:59.598 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:59.598 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:59.598 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:59.598 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:59.598 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:59.598 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:59.598 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:59.598 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:59.598 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:59.598 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:59.598 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DCC500000039 : 737072696E672D62746D000001451727DCC80000003A] (with one-phase optimization)
16:00:59.599 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DCC500000039 : 737072696E672D62746D000001451727DCC80000003A]
16:00:59.599 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:59.599 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:59.599 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:59.599 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:59.599 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:59.599 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:59.599 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCC500000039], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.599 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:59.599 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727DCC500000039 : 737072696E672D62746D000001451727DCC80000003A] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.599 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 cleaned up all transaction states for GTRID [737072696E672D62746D000001451727DCC500000039]
16:00:59.599 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:59.599 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@b9a38be with status=COMMITTED
16:00:59.599 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:59.599 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
16:00:59.599 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@3a0347e5 with status=COMMITTED
16:00:59.599 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCC500000039], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) with status=COMMITTED
16:00:59.599 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCC500000039], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.599 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCC500000039], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.600 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 with status=COMMITTED
16:00:59.600 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.600 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.600 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.600 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:59.600 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.600 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.600 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the available pool
16:00:59.600 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.600 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:59.600 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.600 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.600 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:59.600 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null
16:00:59.600 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.600 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.600 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:59.600 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.600 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null&gt;
16:00:59.600 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with JOIN
16:00:59.600 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with JOIN
16:00:59.600 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.600 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DC6800000033] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef, adding it to the resource's transactions list
16:00:59.600 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.602 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:59.602 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.602 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.602 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with SUCCESS
16:00:59.602 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with SUCCESS
16:00:59.602 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.602 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:59.602 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:59.602 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.602 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727DCD20000003B]
16:00:59.602 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCD20000003B], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.602 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:59.602 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:59.602 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCD20000003B], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) for Mon Mar 31 16:01:59 CST 2014
16:00:59.603 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCD20000003B], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.603 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCD20000003B], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) queued: 5
16:00:59.603 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:59 CST 2014
16:00:59.603 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@380996df
16:00:59.603 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:59.603 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528596
16:00:59.603 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@7d902736
16:00:59.603 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.payment.PaymentEntity#973438976]
16:00:59.603 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.603 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.603 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.603 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DCD20000003B]
16:00:59.603 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.603 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.603 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:59.603 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available), waiting if necessary
16:00:59.603 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f - closing time: 1396252919588, now time: 1396252859603
16:00:59.603 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.603 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.603 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.603 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.603 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.603 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:00:59.603 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state IN_POOL, testing it
16:00:59.603 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f, skipping test
16:00:59.603 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.603 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.603 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.603 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCD20000003B], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.603 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@69e210f belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.603 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727DCD20000003B : 737072696E672D62746D000001451727DCD30000003C]
16:00:59.603 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DCD20000003B : 737072696E672D62746D000001451727DCD30000003C]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null&gt;
16:00:59.603 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID a Bitronix XID [737072696E672D62746D000001451727DCD20000003B : 737072696E672D62746D000001451727DCD30000003C] with NOFLAGS
16:00:59.603 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCD20000003B : 737072696E672D62746D000001451727DCD30000003C] with NOFLAGS
16:00:59.603 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCD20000003B : 737072696E672D62746D000001451727DCD30000003C]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.604 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DCD20000003B] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f, adding it to the resource's transactions list
16:00:59.604 [Test worker] DEBUG org.hibernate.SQL - select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
Hibernate: select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
16:00:59.605 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.605 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEntity#973438976]
16:00:59.605 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.605 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:00:59.605 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.605 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCD20000003B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.605 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.605 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCD20000003B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.605 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.605 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.605 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCD20000003B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.605 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.605 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.605 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.605 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:00:59.605 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.606 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.606 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:00:59.606 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.606 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.606 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:59.606 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEntity#973438976]
16:00:59.606 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEntity#973438976]
16:00:59.606 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.606 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:59.606 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973471744, using strategy: org.hibernate.id.Assigned
16:00:59.607 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973488128, using strategy: org.hibernate.id.Assigned
16:00:59.607 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:59.607 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCD20000003B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.607 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCD20000003B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.607 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCD20000003B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.607 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCD20000003B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) still queued: 4
16:00:59.607 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:59.607 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.607 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCD20000003B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.607 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@380996df
16:00:59.607 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:59.607 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:59.607 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 1 updates, 0 deletions to 3 objects
16:00:59.607 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:59.607 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:59.608 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEventEntity{response={&quot;result&quot;: &quot;OK&quot;}, id=973471744, createdBy=null, status=6, createdTime=Mon Mar 31 16:00:59 CST 2014, paymentId=973438976, request={&quot;billingRefId&quot;:&quot;123&quot;,&quot;chargeInfo&quot;:{&quot;amount&quot;:100,&quot;businessDescriptor&quot;:&quot;ut&quot;,&quot;currency&quot;:&quot;USD&quot;},&quot;id&quot;:973438976,&quot;paymentInstrumentId&quot;:{&quot;paymentInstrumentId&quot;:654377024,&quot;primaryId&quot;:654377024,&quot;userId&quot;:123},&quot;trackingUuid&quot;:&quot;4deaf450-2c68-4790-a3ac-27450ae24460&quot;,&quot;userId&quot;:123}, type=3, updatedTime=Mon Mar 31 16:00:59 CST 2014, netAmount=100, currency=USD, updatedBy=null}
16:00:59.608 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEntity{paymentProviderId=0, status=6, createdTime=2014-03-31 00:00:00.0, externalToken=12345, countryCode=null, merchantAccountId=0, businessDescriptor=ut, type=2, billingRefId=123, updatedBy=null, currency=USD, id=973438976, createdBy=null, userId=123, paymentInstrumentId=654377024, updatedTime=2014-03-31 00:00:00.0, netAmount=100}
16:00:59.608 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.TrackingUuidEntity{response={&quot;billingRefId&quot;:&quot;123&quot;,&quot;chargeInfo&quot;:{&quot;amount&quot;:100,&quot;businessDescriptor&quot;:&quot;ut&quot;,&quot;currency&quot;:&quot;USD&quot;},&quot;externalToken&quot;:&quot;12345&quot;,&quot;id&quot;:973438976,&quot;merchantAccount&quot;:&quot;8qnzm4r4ytckyf4d&quot;,&quot;paymentEvents&quot;:[{&quot;chargeInfo&quot;:{&quot;$ref&quot;:&quot;$.chargeInfo&quot;},&quot;paymentId&quot;:973438976,&quot;request&quot;:&quot;{\&quot;billingRefId\&quot;:\&quot;123\&quot;,\&quot;chargeInfo\&quot;:{\&quot;amount\&quot;:100,\&quot;businessDescriptor\&quot;:\&quot;ut\&quot;,\&quot;currency\&quot;:\&quot;USD\&quot;},\&quot;paymentInstrumentId\&quot;:{\&quot;paymentInstrumentId\&quot;:654377024,\&quot;primaryId\&quot;:654377024,\&quot;userId\&quot;:123},\&quot;trackingUuid\&quot;:\&quot;4deaf450-2c68-4790-a3ac-27450ae24460\&quot;,\&quot;userId\&quot;:123}&quot;,&quot;response&quot;:&quot;{\&quot;result\&quot;: \&quot;OK\&quot;}&quot;,&quot;status&quot;:&quot;SETTLE_CREATED&quot;,&quot;type&quot;:&quot;SUBMIT_SETTLE_CREATE&quot;},{&quot;chargeInfo&quot;:{&quot;$ref&quot;:&quot;$.chargeInfo&quot;},&quot;paymentId&quot;:973438976,&quot;request&quot;:&quot;{\&quot;billingRefId\&quot;:\&quot;123\&quot;,\&quot;chargeInfo\&quot;:{\&quot;amount\&quot;:100,\&quot;businessDescriptor\&quot;:\&quot;ut\&quot;,\&quot;currency\&quot;:\&quot;USD\&quot;},\&quot;id\&quot;:973438976,\&quot;paymentInstrumentId\&quot;:{\&quot;paymentInstrumentId\&quot;:654377024,\&quot;primaryId\&quot;:654377024,\&quot;userId\&quot;:123},\&quot;trackingUuid\&quot;:\&quot;4deaf450-2c68-4790-a3ac-27450ae24460\&quot;,\&quot;userId\&quot;:123}&quot;,&quot;response&quot;:&quot;{\&quot;result\&quot;: \&quot;OK\&quot;}&quot;,&quot;status&quot;:&quot;SETTLEMENT_SUBMITTED&quot;,&quot;type&quot;:&quot;SUBMIT_SETTLE&quot;}],&quot;paymentInstrumentId&quot;:{&quot;paymentInstrumentId&quot;:654377024,&quot;primaryId&quot;:654377024,&quot;userId&quot;:123},&quot;paymentProvider&quot;:&quot;BrainTree&quot;,&quot;status&quot;:&quot;SETTLEMENT_SUBMITTED&quot;,&quot;trackingUuid&quot;:&quot;4deaf450-2c68-4790-a3ac-27450ae24460&quot;,&quot;type&quot;:&quot;CHARGE&quot;,&quot;userId&quot;:123}, id=973488128, createdBy=null, trackingUuid=4deaf450-2c68-4790-a3ac-27450ae24460, createdTime=Mon Mar 31 16:00:59 CST 2014, paymentId=973438976, userId=123, api=5, paymentInstrumentId=null, updatedTime=Mon Mar 31 16:00:59 CST 2014, updatedBy=null}
16:00:59.608 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.608 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.608 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.608 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DCD20000003B]
16:00:59.608 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.608 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.608 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.608 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.608 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DCD20000003B
16:00:59.608 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.608 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.608 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.608 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.608 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f from the inaccessible pool
16:00:59.608 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.608 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.608 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCD20000003B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.608 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCD20000003B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.608 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:00:59.608 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state NOT_ACCESSIBLE, no need to test it
16:00:59.608 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.608 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.608 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.608 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCD20000003B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.608 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCD20000003B : 737072696E672D62746D000001451727DCD30000003C]
16:00:59.609 [Test worker] DEBUG org.hibernate.SQL - insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.609 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.611 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.611 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCD20000003B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.611 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCD20000003B : 737072696E672D62746D000001451727DCD30000003C]
16:00:59.611 [Test worker] DEBUG org.hibernate.SQL - insert into payment_tracking_uuid (created_by, created_time, updated_by, updated_time, api_id, payment_id, payment_instrument_id, response, tracking_uuid, user_id, tracking_uuid_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_tracking_uuid (created_by, created_time, updated_by, updated_time, api_id, payment_id, payment_instrument_id, response, tracking_uuid, user_id, tracking_uuid_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.612 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.613 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.613 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCD20000003B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.613 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCD20000003B : 737072696E672D62746D000001451727DCD30000003C]
16:00:59.613 [Test worker] DEBUG org.hibernate.SQL - update payment set updated_by=?, updated_time=?, billing_ref_id=?, business_descriptor=?, country_code=?, currency_code=?, external_token=?, merchant_account_id=?, net_amount=?, payment_instrument_id=?, payment_provider_id=?, payment_status_id=?, payment_type_id=?, user_id=? where payment_id=?
Hibernate: update payment set updated_by=?, updated_time=?, billing_ref_id=?, business_descriptor=?, country_code=?, currency_code=?, external_token=?, merchant_account_id=?, net_amount=?, payment_instrument_id=?, payment_provider_id=?, payment_status_id=?, payment_type_id=?, user_id=? where payment_id=?
16:00:59.614 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.615 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.615 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.615 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:00:59.615 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.615 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCD20000003B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.615 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.615 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCD20000003B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.615 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.615 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.615 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCD20000003B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.616 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.616 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.616 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.616 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:00:59.616 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.616 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.616 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:00:59.616 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.616 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.616 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@7d902736
16:00:59.616 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCD20000003B : 737072696E672D62746D000001451727DCD30000003C]
16:00:59.616 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCD20000003B : 737072696E672D62746D000001451727DCD30000003C]
16:00:59.616 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCD20000003B : 737072696E672D62746D000001451727DCD30000003C] with SUCCESS
16:00:59.616 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCD20000003B : 737072696E672D62746D000001451727DCD30000003C] with SUCCESS
16:00:59.616 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:59.616 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:59.616 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:59.616 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:59.616 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:59.616 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:59.616 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:59.616 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:59.616 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:59.616 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:59.616 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:59.616 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DCD20000003B : 737072696E672D62746D000001451727DCD30000003C] (with one-phase optimization)
16:00:59.622 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DCD20000003B : 737072696E672D62746D000001451727DCD30000003C]
16:00:59.622 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:59.622 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:59.622 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:59.623 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:59.623 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:59.623 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:59.623 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCD20000003B], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.623 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:59.623 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727DCD20000003B : 737072696E672D62746D000001451727DCD30000003C] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.623 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f cleaned up all transaction states for GTRID [737072696E672D62746D000001451727DCD20000003B]
16:00:59.623 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:59.623 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@380996df with status=COMMITTED
16:00:59.623 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:59.623 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
16:00:59.623 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@7d902736 with status=COMMITTED
16:00:59.623 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCD20000003B], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) with status=COMMITTED
16:00:59.623 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCD20000003B], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.623 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCD20000003B], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.623 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f with status=COMMITTED
16:00:59.623 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.623 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.623 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.623 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the inaccessible pool
16:00:59.623 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.623 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.623 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the available pool
16:00:59.623 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.623 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:59.623 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.623 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.623 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:59.623 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null
16:00:59.623 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.623 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.623 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:59.623 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.623 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null&gt;
16:00:59.623 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with JOIN
16:00:59.623 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with JOIN
16:00:59.623 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.623 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DC6800000033] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef, adding it to the resource's transactions list
16:00:59.623 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.624 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:59.624 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:59.624 [Test worker] INFO  c.j.p.c.i.PaymentTransactionServiceImpl - reverse for payment:973438976
16:00:59.624 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:59.624 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.624 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.624 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with SUCCESS
16:00:59.624 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with SUCCESS
16:00:59.624 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.624 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:59.624 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:59.624 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.624 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727DCE80000003D]
16:00:59.624 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCE80000003D], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.624 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:59.624 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:59.624 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCE80000003D], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) for Mon Mar 31 16:01:59 CST 2014
16:00:59.624 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCE80000003D], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.624 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCE80000003D], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) queued: 5
16:00:59.624 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:59 CST 2014
16:00:59.625 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@16283d99
16:00:59.625 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:59.625 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528596
16:00:59.625 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@2be4132c
16:00:59.625 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.625 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.625 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.625 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DCE80000003D]
16:00:59.625 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.625 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.625 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:59.625 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available), waiting if necessary
16:00:59.625 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 - closing time: 1396252919600, now time: 1396252859625
16:00:59.625 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.625 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.625 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.625 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.626 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.626 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:59.626 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state IN_POOL, testing it
16:00:59.626 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, skipping test
16:00:59.626 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.626 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.626 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.626 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCE80000003D], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.626 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@324d7c25 belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.626 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727DCE80000003D : 737072696E672D62746D000001451727DCEA0000003E]
16:00:59.626 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DCE80000003D : 737072696E672D62746D000001451727DCEA0000003E]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID null&gt;
16:00:59.626 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID a Bitronix XID [737072696E672D62746D000001451727DCE80000003D : 737072696E672D62746D000001451727DCEA0000003E] with NOFLAGS
16:00:59.626 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCE80000003D : 737072696E672D62746D000001451727DCEA0000003E] with NOFLAGS
16:00:59.626 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCE80000003D : 737072696E672D62746D000001451727DCEA0000003E]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.626 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DCE80000003D] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, adding it to the resource's transactions list
16:00:59.626 [Test worker] DEBUG org.hibernate.SQL - select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
Hibernate: select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
16:00:59.627 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.627 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.TrackingUuidEntity#973488128]
16:00:59.628 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.628 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:59.628 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.628 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCE80000003D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.628 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.628 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCE80000003D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.628 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.628 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.628 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCE80000003D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.628 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.628 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.628 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.628 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:59.628 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.628 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.628 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:59.628 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.628 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.628 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:59.628 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.TrackingUuidEntity#973488128]
16:00:59.628 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.TrackingUuidEntity#973488128]
16:00:59.628 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.628 [Test worker] DEBUG o.h.t.DistinctResultTransformer - Transformed: 1 rows to: 1 distinct results
16:00:59.628 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:59.628 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCE80000003D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.628 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCE80000003D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.628 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCE80000003D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.629 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCE80000003D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) still queued: 4
16:00:59.629 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:59.629 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.629 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCE80000003D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.629 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@16283d99
16:00:59.629 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:59.629 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:59.629 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
16:00:59.629 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:59.629 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:59.629 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.TrackingUuidEntity{response={&quot;billingRefId&quot;:&quot;123&quot;,&quot;chargeInfo&quot;:{&quot;amount&quot;:100,&quot;businessDescriptor&quot;:&quot;ut&quot;,&quot;currency&quot;:&quot;USD&quot;},&quot;externalToken&quot;:&quot;12345&quot;,&quot;id&quot;:973438976,&quot;merchantAccount&quot;:&quot;8qnzm4r4ytckyf4d&quot;,&quot;paymentEvents&quot;:[{&quot;chargeInfo&quot;:{&quot;$ref&quot;:&quot;$.chargeInfo&quot;},&quot;paymentId&quot;:973438976,&quot;request&quot;:&quot;{\&quot;billingRefId\&quot;:\&quot;123\&quot;,\&quot;chargeInfo\&quot;:{\&quot;amount\&quot;:100,\&quot;businessDescriptor\&quot;:\&quot;ut\&quot;,\&quot;currency\&quot;:\&quot;USD\&quot;},\&quot;paymentInstrumentId\&quot;:{\&quot;paymentInstrumentId\&quot;:654377024,\&quot;primaryId\&quot;:654377024,\&quot;userId\&quot;:123},\&quot;trackingUuid\&quot;:\&quot;4deaf450-2c68-4790-a3ac-27450ae24460\&quot;,\&quot;userId\&quot;:123}&quot;,&quot;response&quot;:&quot;{\&quot;result\&quot;: \&quot;OK\&quot;}&quot;,&quot;status&quot;:&quot;SETTLE_CREATED&quot;,&quot;type&quot;:&quot;SUBMIT_SETTLE_CREATE&quot;},{&quot;chargeInfo&quot;:{&quot;$ref&quot;:&quot;$.chargeInfo&quot;},&quot;paymentId&quot;:973438976,&quot;request&quot;:&quot;{\&quot;billingRefId\&quot;:\&quot;123\&quot;,\&quot;chargeInfo\&quot;:{\&quot;amount\&quot;:100,\&quot;businessDescriptor\&quot;:\&quot;ut\&quot;,\&quot;currency\&quot;:\&quot;USD\&quot;},\&quot;id\&quot;:973438976,\&quot;paymentInstrumentId\&quot;:{\&quot;paymentInstrumentId\&quot;:654377024,\&quot;primaryId\&quot;:654377024,\&quot;userId\&quot;:123},\&quot;trackingUuid\&quot;:\&quot;4deaf450-2c68-4790-a3ac-27450ae24460\&quot;,\&quot;userId\&quot;:123}&quot;,&quot;response&quot;:&quot;{\&quot;result\&quot;: \&quot;OK\&quot;}&quot;,&quot;status&quot;:&quot;SETTLEMENT_SUBMITTED&quot;,&quot;type&quot;:&quot;SUBMIT_SETTLE&quot;}],&quot;paymentInstrumentId&quot;:{&quot;paymentInstrumentId&quot;:654377024,&quot;primaryId&quot;:654377024,&quot;userId&quot;:123},&quot;paymentProvider&quot;:&quot;BrainTree&quot;,&quot;status&quot;:&quot;SETTLEMENT_SUBMITTED&quot;,&quot;trackingUuid&quot;:&quot;4deaf450-2c68-4790-a3ac-27450ae24460&quot;,&quot;type&quot;:&quot;CHARGE&quot;,&quot;userId&quot;:123}, id=973488128, createdBy=null, trackingUuid=4deaf450-2c68-4790-a3ac-27450ae24460, createdTime=2014-03-31 00:00:00.0, paymentId=973438976, userId=123, api=5, paymentInstrumentId=null, updatedTime=2014-03-31 00:00:00.0, updatedBy=null}
16:00:59.629 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.629 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@2be4132c
16:00:59.629 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCE80000003D : 737072696E672D62746D000001451727DCEA0000003E]
16:00:59.629 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCE80000003D : 737072696E672D62746D000001451727DCEA0000003E]
16:00:59.629 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCE80000003D : 737072696E672D62746D000001451727DCEA0000003E] with SUCCESS
16:00:59.629 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCE80000003D : 737072696E672D62746D000001451727DCEA0000003E] with SUCCESS
16:00:59.629 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:59.629 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:59.629 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:59.629 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:59.629 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:59.629 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:59.629 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:59.629 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:59.629 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:59.629 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:59.629 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:59.629 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DCE80000003D : 737072696E672D62746D000001451727DCEA0000003E] (with one-phase optimization)
16:00:59.630 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DCE80000003D : 737072696E672D62746D000001451727DCEA0000003E]
16:00:59.630 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:59.630 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:59.630 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:59.630 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:59.630 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:59.630 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:59.630 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCE80000003D], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.630 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:59.630 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727DCE80000003D : 737072696E672D62746D000001451727DCEA0000003E] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.630 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 cleaned up all transaction states for GTRID [737072696E672D62746D000001451727DCE80000003D]
16:00:59.630 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:59.630 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementUnregisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D000001451727DBD80000002D
16:00:59.630 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@16283d99 with status=COMMITTED
16:00:59.630 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:59.630 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementUnregisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D000001451727DA5200000019
16:00:59.630 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@2be4132c with status=COMMITTED
16:00:59.630 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCE80000003D], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) with status=COMMITTED
16:00:59.630 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D000001451727DC6800000033
16:00:59.630 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCE80000003D], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.630 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCE80000003D], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.630 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 with status=COMMITTED
16:00:59.630 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D000001451727DCE80000003D
16:00:59.630 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.630 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.630 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.630 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:59.630 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.630 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.630 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the available pool
16:00:59.631 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.631 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:59.631 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.631 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.631 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:59.631 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null
16:00:59.631 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.631 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.631 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:59.631 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.631 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null&gt;
16:00:59.631 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with JOIN
16:00:59.631 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with JOIN
16:00:59.631 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.631 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DC6800000033] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef, adding it to the resource's transactions list
16:00:59.631 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.631 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:59.631 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.631 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.631 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with SUCCESS
16:00:59.631 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with SUCCESS
16:00:59.631 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.631 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:59.631 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:59.631 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.631 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727DCEF0000003F]
16:00:59.631 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCEF0000003F], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.631 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:59.632 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:59.632 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCEF0000003F], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) for Mon Mar 31 16:01:59 CST 2014
16:00:59.632 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCEF0000003F], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.632 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCEF0000003F], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) queued: 5
16:00:59.632 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:59 CST 2014
16:00:59.632 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@74cab896
16:00:59.632 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:59.632 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528596
16:00:59.632 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@291cbbc1
16:00:59.632 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.payment.PaymentEntity#973438976]
16:00:59.632 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.632 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.632 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.632 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DCEF0000003F]
16:00:59.632 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.632 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.632 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:59.633 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available), waiting if necessary
16:00:59.633 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f - closing time: 1396252919623, now time: 1396252859633
16:00:59.633 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.633 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.633 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.633 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.633 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.633 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:00:59.633 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state IN_POOL, testing it
16:00:59.633 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f, skipping test
16:00:59.633 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.633 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.633 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.633 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCEF0000003F], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.633 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@69e210f belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.633 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727DCEF0000003F : 737072696E672D62746D000001451727DCF100000040]
16:00:59.633 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DCEF0000003F : 737072696E672D62746D000001451727DCF100000040]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null&gt;
16:00:59.633 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID a Bitronix XID [737072696E672D62746D000001451727DCEF0000003F : 737072696E672D62746D000001451727DCF100000040] with NOFLAGS
16:00:59.633 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCEF0000003F : 737072696E672D62746D000001451727DCF100000040] with NOFLAGS
16:00:59.633 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCEF0000003F : 737072696E672D62746D000001451727DCF100000040]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.633 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DCEF0000003F] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f, adding it to the resource's transactions list
16:00:59.633 [Test worker] DEBUG org.hibernate.SQL - select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
Hibernate: select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
16:00:59.636 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.636 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEntity#973438976]
16:00:59.636 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.636 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:00:59.636 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.637 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCEF0000003F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.637 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.637 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCEF0000003F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.637 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.637 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.637 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCEF0000003F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.637 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.637 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.637 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.637 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:00:59.637 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.637 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.637 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:00:59.637 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.637 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.637 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:59.637 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEntity#973438976]
16:00:59.637 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEntity#973438976]
16:00:59.637 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.637 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:59.638 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654377024]
16:00:59.638 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.638 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.638 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.638 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DCEF0000003F]
16:00:59.638 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.638 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.638 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.638 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.638 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DCEF0000003F
16:00:59.638 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.638 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.638 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.638 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.638 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f from the inaccessible pool
16:00:59.638 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.638 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.638 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCEF0000003F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.638 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCEF0000003F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.638 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:00:59.638 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state NOT_ACCESSIBLE, no need to test it
16:00:59.638 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.638 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.638 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.638 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCEF0000003F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.638 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCEF0000003F : 737072696E672D62746D000001451727DCF100000040]
16:00:59.638 [Test worker] DEBUG org.hibernate.SQL - select paymentins0_.payment_instrument_id as payment1_10_0_, paymentins0_.created_by as created2_10_0_, paymentins0_.created_time as created3_10_0_, paymentins0_.updated_by as updated4_10_0_, paymentins0_.updated_time as updated5_10_0_, paymentins0_.payment_instrument_holder_name as payment6_10_0_, paymentins0_.account_number as account7_10_0_, paymentins0_.address_id as address8_10_0_, paymentins0_.email as email10_0_, paymentins0_.encrypted_account_number as encrypted10_10_0_, paymentins0_.is_default as is11_10_0_, paymentins0_.last_validated_time as last12_10_0_, paymentins0_.phone_id as phone13_10_0_, paymentins0_.relation_to_holder as relation14_10_0_, paymentins0_.status_id as status15_10_0_, paymentins0_.payment_instrument_type_id as payment16_10_0_, paymentins0_.user_id as user17_10_0_ from payment_instrument paymentins0_ where paymentins0_.payment_instrument_id=?
Hibernate: select paymentins0_.payment_instrument_id as payment1_10_0_, paymentins0_.created_by as created2_10_0_, paymentins0_.created_time as created3_10_0_, paymentins0_.updated_by as updated4_10_0_, paymentins0_.updated_time as updated5_10_0_, paymentins0_.payment_instrument_holder_name as payment6_10_0_, paymentins0_.account_number as account7_10_0_, paymentins0_.address_id as address8_10_0_, paymentins0_.email as email10_0_, paymentins0_.encrypted_account_number as encrypted10_10_0_, paymentins0_.is_default as is11_10_0_, paymentins0_.last_validated_time as last12_10_0_, paymentins0_.phone_id as phone13_10_0_, paymentins0_.relation_to_holder as relation14_10_0_, paymentins0_.status_id as status15_10_0_, paymentins0_.payment_instrument_type_id as payment16_10_0_, paymentins0_.user_id as user17_10_0_ from payment_instrument paymentins0_ where paymentins0_.payment_instrument_id=?
16:00:59.640 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.640 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654377024]
16:00:59.640 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.641 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:00:59.641 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.641 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCEF0000003F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.641 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.641 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCEF0000003F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.641 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.641 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.641 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCEF0000003F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.641 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.641 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.641 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.641 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:00:59.641 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.641 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.641 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:00:59.641 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.641 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.641 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654377024]
16:00:59.641 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity#654377024]
16:00:59.641 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.641 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:59.641 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:59.641 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCEF0000003F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.641 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCEF0000003F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.641 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCEF0000003F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.642 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCEF0000003F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) still queued: 4
16:00:59.642 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:59.642 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.642 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCEF0000003F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.642 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@74cab896
16:00:59.642 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:59.642 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:59.642 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 2 objects
16:00:59.642 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:59.642 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:59.642 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEntity{paymentProviderId=0, status=6, createdTime=2014-03-31 00:00:00.0, externalToken=12345, countryCode=null, merchantAccountId=0, businessDescriptor=ut, type=2, billingRefId=123, updatedBy=null, currency=USD, id=973438976, createdBy=null, userId=123, paymentInstrumentId=654377024, updatedTime=2014-03-31 00:00:00.0, netAmount=100}
16:00:59.642 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity{relationToHolder=null, status=0, createdTime=2014-03-31 00:00:00.0, type=0, accountNum=1111, addressId=654377024, updatedBy=null, lastValidatedTime=2014-03-31 00:00:00.0, id=654377024, accountName=ut, createdBy=null, email=null, isDefault=true, userId=123, phoneId=654377024, encryptedAccountNO=null, updatedTime=2014-03-31 00:00:00.0}
16:00:59.642 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.642 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@291cbbc1
16:00:59.643 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCEF0000003F : 737072696E672D62746D000001451727DCF100000040]
16:00:59.643 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCEF0000003F : 737072696E672D62746D000001451727DCF100000040]
16:00:59.643 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCEF0000003F : 737072696E672D62746D000001451727DCF100000040] with SUCCESS
16:00:59.643 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCEF0000003F : 737072696E672D62746D000001451727DCF100000040] with SUCCESS
16:00:59.643 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:59.643 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:59.643 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:59.643 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:59.643 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:59.643 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:59.643 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:59.643 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:59.643 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:59.643 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:59.643 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:59.643 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DCEF0000003F : 737072696E672D62746D000001451727DCF100000040] (with one-phase optimization)
16:00:59.643 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DCEF0000003F : 737072696E672D62746D000001451727DCF100000040]
16:00:59.643 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:59.643 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:59.643 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:59.643 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:59.643 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:59.644 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:59.644 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCEF0000003F], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.644 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:59.644 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727DCEF0000003F : 737072696E672D62746D000001451727DCF100000040] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.644 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f cleaned up all transaction states for GTRID [737072696E672D62746D000001451727DCEF0000003F]
16:00:59.644 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:59.644 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@74cab896 with status=COMMITTED
16:00:59.644 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:59.644 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@291cbbc1 with status=COMMITTED
16:00:59.644 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCEF0000003F], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) with status=COMMITTED
16:00:59.644 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCEF0000003F], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.644 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCEF0000003F], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.644 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f with status=COMMITTED
16:00:59.644 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.644 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.644 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.644 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the inaccessible pool
16:00:59.644 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.644 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.644 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the available pool
16:00:59.644 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.644 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:59.644 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.644 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.644 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:59.644 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null
16:00:59.644 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.644 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.644 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:59.645 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.645 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null&gt;
16:00:59.645 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with JOIN
16:00:59.645 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with JOIN
16:00:59.645 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.645 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DC6800000033] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef, adding it to the resource's transactions list
16:00:59.645 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.645 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:59.645 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:59.645 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:59.646 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.646 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.646 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with SUCCESS
16:00:59.646 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with SUCCESS
16:00:59.646 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.646 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:59.646 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:59.646 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.646 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727DCFE00000041]
16:00:59.646 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCFE00000041], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.646 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:59.646 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:59.646 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCFE00000041], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) for Mon Mar 31 16:01:59 CST 2014
16:00:59.646 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCFE00000041], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.646 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCFE00000041], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) queued: 5
16:00:59.647 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:59 CST 2014
16:00:59.647 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@5a27d94
16:00:59.647 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:59.647 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528596
16:00:59.647 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@6ee2826f
16:00:59.647 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.payment.PaymentEntity#973438976]
16:00:59.647 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.647 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.647 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.647 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DCFE00000041]
16:00:59.647 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.647 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.647 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:59.647 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available), waiting if necessary
16:00:59.647 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 - closing time: 1396252919630, now time: 1396252859647
16:00:59.647 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.647 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.647 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.647 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.647 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.647 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:59.647 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state IN_POOL, testing it
16:00:59.647 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, skipping test
16:00:59.647 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.647 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.647 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.648 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCFE00000041], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.648 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@324d7c25 belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.648 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727DCFE00000041 : 737072696E672D62746D000001451727DD0000000042]
16:00:59.648 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DCFE00000041 : 737072696E672D62746D000001451727DD0000000042]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID null&gt;
16:00:59.648 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID a Bitronix XID [737072696E672D62746D000001451727DCFE00000041 : 737072696E672D62746D000001451727DD0000000042] with NOFLAGS
16:00:59.648 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCFE00000041 : 737072696E672D62746D000001451727DD0000000042] with NOFLAGS
16:00:59.648 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCFE00000041 : 737072696E672D62746D000001451727DD0000000042]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.648 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DCFE00000041] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, adding it to the resource's transactions list
16:00:59.648 [Test worker] DEBUG org.hibernate.SQL - select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
Hibernate: select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
16:00:59.649 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.650 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEntity#973438976]
16:00:59.651 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.651 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:59.651 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.651 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCFE00000041], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.651 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.651 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCFE00000041], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.651 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.651 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.651 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCFE00000041], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.651 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.651 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.651 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.651 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:59.651 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.651 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.651 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:59.651 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.651 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.651 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:59.651 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEntity#973438976]
16:00:59.652 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEntity#973438976]
16:00:59.652 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.652 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:59.652 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973504512, using strategy: org.hibernate.id.Assigned
16:00:59.652 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:59.653 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCFE00000041], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.653 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCFE00000041], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.653 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCFE00000041], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.653 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCFE00000041], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) still queued: 4
16:00:59.653 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:59.653 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.653 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCFE00000041], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.653 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@5a27d94
16:00:59.653 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:59.653 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:59.654 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 1 insertions, 1 updates, 0 deletions to 2 objects
16:00:59.654 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:59.654 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:59.654 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEventEntity{response={&quot;result&quot;: &quot;OK&quot;}, id=973504512, createdBy=null, status=8, createdTime=Mon Mar 31 16:00:59 CST 2014, paymentId=973438976, request={&quot;billingRefId&quot;:&quot;123&quot;,&quot;chargeInfo&quot;:{&quot;amount&quot;:100,&quot;businessDescriptor&quot;:&quot;ut&quot;,&quot;currency&quot;:&quot;USD&quot;},&quot;id&quot;:973438976,&quot;paymentInstrumentId&quot;:{&quot;paymentInstrumentId&quot;:654377024,&quot;primaryId&quot;:654377024,&quot;userId&quot;:123},&quot;trackingUuid&quot;:&quot;4deaf450-2c68-4790-a3ac-27450ae24460&quot;,&quot;userId&quot;:123}, type=4, updatedTime=Mon Mar 31 16:00:59 CST 2014, netAmount=100, currency=USD, updatedBy=null}
16:00:59.654 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEntity{paymentProviderId=0, status=8, createdTime=2014-03-31 00:00:00.0, externalToken=12345, countryCode=null, merchantAccountId=0, businessDescriptor=ut, type=2, billingRefId=123, updatedBy=null, currency=USD, id=973438976, createdBy=null, userId=123, paymentInstrumentId=654377024, updatedTime=2014-03-31 00:00:00.0, netAmount=100}
16:00:59.655 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.655 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.655 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.655 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DCFE00000041]
16:00:59.655 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.655 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.655 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.655 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.655 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DCFE00000041
16:00:59.655 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.655 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.655 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.655 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.655 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:59.655 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.655 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.655 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCFE00000041], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.656 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCFE00000041], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.656 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:59.656 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state NOT_ACCESSIBLE, no need to test it
16:00:59.656 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.656 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.656 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.656 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCFE00000041], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.656 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCFE00000041 : 737072696E672D62746D000001451727DD0000000042]
16:00:59.656 [Test worker] DEBUG org.hibernate.SQL - insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.657 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.658 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.659 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCFE00000041], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.659 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCFE00000041 : 737072696E672D62746D000001451727DD0000000042]
16:00:59.659 [Test worker] DEBUG org.hibernate.SQL - update payment set updated_by=?, updated_time=?, billing_ref_id=?, business_descriptor=?, country_code=?, currency_code=?, external_token=?, merchant_account_id=?, net_amount=?, payment_instrument_id=?, payment_provider_id=?, payment_status_id=?, payment_type_id=?, user_id=? where payment_id=?
Hibernate: update payment set updated_by=?, updated_time=?, billing_ref_id=?, business_descriptor=?, country_code=?, currency_code=?, external_token=?, merchant_account_id=?, net_amount=?, payment_instrument_id=?, payment_provider_id=?, payment_status_id=?, payment_type_id=?, user_id=? where payment_id=?
16:00:59.660 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.661 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.661 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.662 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:59.662 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.662 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCFE00000041], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.662 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.662 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCFE00000041], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.662 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.662 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.662 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCFE00000041], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.662 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.662 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.662 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.662 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:59.662 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.662 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.662 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:59.662 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.662 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.662 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@6ee2826f
16:00:59.662 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCFE00000041 : 737072696E672D62746D000001451727DD0000000042]
16:00:59.662 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCFE00000041 : 737072696E672D62746D000001451727DD0000000042]
16:00:59.662 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCFE00000041 : 737072696E672D62746D000001451727DD0000000042] with SUCCESS
16:00:59.662 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DCFE00000041 : 737072696E672D62746D000001451727DD0000000042] with SUCCESS
16:00:59.662 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:59.662 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:59.662 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:59.663 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:59.663 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:59.663 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:59.663 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:59.663 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:59.663 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:59.663 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:59.663 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:59.663 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DCFE00000041 : 737072696E672D62746D000001451727DD0000000042] (with one-phase optimization)
16:00:59.663 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DCFE00000041 : 737072696E672D62746D000001451727DD0000000042]
16:00:59.663 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:59.663 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:59.663 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:59.663 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:59.663 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:59.663 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:59.663 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCFE00000041], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.664 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:59.664 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727DCFE00000041 : 737072696E672D62746D000001451727DD0000000042] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.664 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 cleaned up all transaction states for GTRID [737072696E672D62746D000001451727DCFE00000041]
16:00:59.664 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:59.664 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@5a27d94 with status=COMMITTED
16:00:59.664 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:59.664 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
16:00:59.664 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@6ee2826f with status=COMMITTED
16:00:59.664 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCFE00000041], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) with status=COMMITTED
16:00:59.664 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCFE00000041], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.664 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DCFE00000041], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.664 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 with status=COMMITTED
16:00:59.664 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.664 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.664 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.664 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:59.664 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.664 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.664 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the available pool
16:00:59.664 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.665 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:59.665 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.665 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.665 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:59.665 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null
16:00:59.665 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.665 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.665 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:59.665 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.665 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null&gt;
16:00:59.665 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with JOIN
16:00:59.665 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with JOIN
16:00:59.665 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.665 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DC6800000033] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef, adding it to the resource's transactions list
16:00:59.665 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.665 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:59.665 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:59.666 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [null]
16:00:59.666 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.666 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.666 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with SUCCESS
16:00:59.666 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with SUCCESS
16:00:59.666 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.666 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:00:59.666 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:00:59.666 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.666 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D000001451727DD1200000043]
16:00:59.666 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD1200000043], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.666 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:00:59.666 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:00:59.666 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD1200000043], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) for Mon Mar 31 16:01:59 CST 2014
16:00:59.666 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD1200000043], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.666 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD1200000043], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) queued: 5
16:00:59.666 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:00:59 CST 2014
16:00:59.667 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@4582575c
16:00:59.667 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:59.667 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528596
16:00:59.667 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@70357caa
16:00:59.667 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.payment.PaymentEntity#973438976]
16:00:59.667 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.667 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.667 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.667 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DD1200000043]
16:00:59.667 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.667 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.667 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:59.667 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available), waiting if necessary
16:00:59.667 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f - closing time: 1396252919644, now time: 1396252859667
16:00:59.667 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.667 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.667 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.667 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.667 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.667 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:00:59.667 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state IN_POOL, testing it
16:00:59.667 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f, skipping test
16:00:59.667 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.667 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.667 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.667 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD1200000043], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.668 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@69e210f belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.668 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727DD1200000043 : 737072696E672D62746D000001451727DD1400000044]
16:00:59.668 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DD1200000043 : 737072696E672D62746D000001451727DD1400000044]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null&gt;
16:00:59.668 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID a Bitronix XID [737072696E672D62746D000001451727DD1200000043 : 737072696E672D62746D000001451727DD1400000044] with NOFLAGS
16:00:59.668 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DD1200000043 : 737072696E672D62746D000001451727DD1400000044] with NOFLAGS
16:00:59.668 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DD1200000043 : 737072696E672D62746D000001451727DD1400000044]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.668 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DD1200000043] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f, adding it to the resource's transactions list
16:00:59.668 [Test worker] DEBUG org.hibernate.SQL - select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
Hibernate: select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
16:00:59.669 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.669 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEntity#973438976]
16:00:59.670 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.670 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:00:59.670 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.670 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD1200000043], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.670 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.670 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD1200000043], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.670 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.670 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.670 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD1200000043], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.670 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.670 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.670 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.670 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:00:59.670 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.670 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.670 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:00:59.670 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.670 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.670 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:59.671 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEntity#973438976]
16:00:59.671 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEntity#973438976]
16:00:59.671 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.671 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:59.671 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973520896, using strategy: org.hibernate.id.Assigned
16:00:59.672 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973537280, using strategy: org.hibernate.id.Assigned
16:00:59.673 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:00:59.673 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD1200000043], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.673 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD1200000043], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.673 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD1200000043], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.673 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD1200000043], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) scheduled for Mon Mar 31 16:01:59 CST 2014, total task(s) still queued: 4
16:00:59.673 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:00:59.673 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.673 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD1200000043], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.673 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@4582575c
16:00:59.673 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:59.673 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:59.673 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 1 updates, 0 deletions to 3 objects
16:00:59.673 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:59.674 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:59.674 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEventEntity{response={&quot;result&quot;: &quot;OK&quot;}, id=973520896, createdBy=null, status=9, createdTime=Mon Mar 31 16:00:59 CST 2014, paymentId=973438976, request={&quot;billingRefId&quot;:&quot;123&quot;,&quot;id&quot;:973438976,&quot;paymentInstrumentId&quot;:{&quot;paymentInstrumentId&quot;:654377024,&quot;primaryId&quot;:654377024,&quot;userId&quot;:123},&quot;trackingUuid&quot;:&quot;4deaf450-2c68-4790-a3ac-27450ae24460&quot;,&quot;userId&quot;:123}, type=6, updatedTime=Mon Mar 31 16:00:59 CST 2014, netAmount=null, currency=null, updatedBy=null}
16:00:59.674 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.TrackingUuidEntity{response={&quot;billingRefId&quot;:&quot;123&quot;,&quot;chargeInfo&quot;:{&quot;amount&quot;:100,&quot;businessDescriptor&quot;:&quot;ut&quot;,&quot;currency&quot;:&quot;USD&quot;},&quot;externalToken&quot;:&quot;12345&quot;,&quot;id&quot;:973438976,&quot;merchantAccount&quot;:&quot;8qnzm4r4ytckyf4d&quot;,&quot;paymentEvents&quot;:[{&quot;chargeInfo&quot;:{&quot;$ref&quot;:&quot;$.chargeInfo&quot;},&quot;paymentId&quot;:973438976,&quot;request&quot;:&quot;{\&quot;billingRefId\&quot;:\&quot;123\&quot;,\&quot;chargeInfo\&quot;:{\&quot;amount\&quot;:100,\&quot;businessDescriptor\&quot;:\&quot;ut\&quot;,\&quot;currency\&quot;:\&quot;USD\&quot;},\&quot;id\&quot;:973438976,\&quot;paymentInstrumentId\&quot;:{\&quot;paymentInstrumentId\&quot;:654377024,\&quot;primaryId\&quot;:654377024,\&quot;userId\&quot;:123},\&quot;trackingUuid\&quot;:\&quot;4deaf450-2c68-4790-a3ac-27450ae24460\&quot;,\&quot;userId\&quot;:123}&quot;,&quot;response&quot;:&quot;{\&quot;result\&quot;: \&quot;OK\&quot;}&quot;,&quot;status&quot;:&quot;REVERSE_CREATED&quot;,&quot;type&quot;:&quot;REVERSE_CREATE&quot;},{&quot;paymentId&quot;:973438976,&quot;request&quot;:&quot;{\&quot;billingRefId\&quot;:\&quot;123\&quot;,\&quot;id\&quot;:973438976,\&quot;paymentInstrumentId\&quot;:{\&quot;paymentInstrumentId\&quot;:654377024,\&quot;primaryId\&quot;:654377024,\&quot;userId\&quot;:123},\&quot;trackingUuid\&quot;:\&quot;4deaf450-2c68-4790-a3ac-27450ae24460\&quot;,\&quot;userId\&quot;:123}&quot;,&quot;response&quot;:&quot;{\&quot;result\&quot;: \&quot;OK\&quot;}&quot;,&quot;status&quot;:&quot;REVERSED&quot;,&quot;type&quot;:&quot;SUBMIT_SETTLE_REVERSE&quot;}],&quot;paymentInstrumentId&quot;:{&quot;paymentInstrumentId&quot;:654377024,&quot;primaryId&quot;:654377024,&quot;userId&quot;:123},&quot;paymentProvider&quot;:&quot;BrainTree&quot;,&quot;status&quot;:&quot;REVERSED&quot;,&quot;trackingUuid&quot;:&quot;4deaf450-2c68-4790-a3ac-27450ae24460&quot;,&quot;type&quot;:&quot;CHARGE&quot;,&quot;userId&quot;:123}, id=973537280, createdBy=null, trackingUuid=4deaf450-2c68-4790-a3ac-27450ae24460, createdTime=Mon Mar 31 16:00:59 CST 2014, paymentId=973438976, userId=123, api=6, paymentInstrumentId=null, updatedTime=Mon Mar 31 16:00:59 CST 2014, updatedBy=null}
16:00:59.679 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEntity{paymentProviderId=0, status=9, createdTime=2014-03-31 00:00:00.0, externalToken=12345, countryCode=null, merchantAccountId=0, businessDescriptor=ut, type=2, billingRefId=123, updatedBy=null, currency=USD, id=973438976, createdBy=null, userId=123, paymentInstrumentId=654377024, updatedTime=2014-03-31 00:00:00.0, netAmount=100}
16:00:59.680 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.680 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.680 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.680 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DD1200000043]
16:00:59.680 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.680 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.680 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.680 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.680 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DD1200000043
16:00:59.680 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.680 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.680 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.680 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.680 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f from the inaccessible pool
16:00:59.680 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.680 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.680 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD1200000043], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.680 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD1200000043], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.680 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:00:59.680 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state NOT_ACCESSIBLE, no need to test it
16:00:59.680 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.680 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (1 still available)
16:00:59.680 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.680 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD1200000043], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.680 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DD1200000043 : 737072696E672D62746D000001451727DD1400000044]
16:00:59.680 [Test worker] DEBUG org.hibernate.SQL - insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_event (created_by, created_time, updated_by, updated_time, currency_code, net_amount, payment_id, request, response, event_status_id, payment_event_type_id, payment_event_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.681 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.687 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.687 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD1200000043], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.687 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DD1200000043 : 737072696E672D62746D000001451727DD1400000044]
16:00:59.687 [Test worker] DEBUG org.hibernate.SQL - insert into payment_tracking_uuid (created_by, created_time, updated_by, updated_time, api_id, payment_id, payment_instrument_id, response, tracking_uuid, user_id, tracking_uuid_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_tracking_uuid (created_by, created_time, updated_by, updated_time, api_id, payment_id, payment_instrument_id, response, tracking_uuid, user_id, tracking_uuid_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.688 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.693 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.694 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD1200000043], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.694 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DD1200000043 : 737072696E672D62746D000001451727DD1400000044]
16:00:59.694 [Test worker] DEBUG org.hibernate.SQL - update payment set updated_by=?, updated_time=?, billing_ref_id=?, business_descriptor=?, country_code=?, currency_code=?, external_token=?, merchant_account_id=?, net_amount=?, payment_instrument_id=?, payment_provider_id=?, payment_status_id=?, payment_type_id=?, user_id=? where payment_id=?
Hibernate: update payment set updated_by=?, updated_time=?, billing_ref_id=?, business_descriptor=?, country_code=?, currency_code=?, external_token=?, merchant_account_id=?, net_amount=?, payment_instrument_id=?, payment_provider_id=?, payment_status_id=?, payment_type_id=?, user_id=? where payment_id=?
16:00:59.696 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.705 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.705 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.705 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:00:59.705 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.705 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD1200000043], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.705 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.705 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD1200000043], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.705 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.705 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.705 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD1200000043], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.705 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.705 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.706 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.706 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:00:59.706 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.706 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.706 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:00:59.706 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.706 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.706 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@70357caa
16:00:59.706 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DD1200000043 : 737072696E672D62746D000001451727DD1400000044]
16:00:59.706 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DD1200000043 : 737072696E672D62746D000001451727DD1400000044]
16:00:59.706 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DD1200000043 : 737072696E672D62746D000001451727DD1400000044] with SUCCESS
16:00:59.706 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DD1200000043 : 737072696E672D62746D000001451727DD1400000044] with SUCCESS
16:00:59.706 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:00:59.706 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:00:59.706 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:00:59.706 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:00:59.706 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:00:59.706 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:00:59.706 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:00:59.706 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:00:59.706 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:00:59.706 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:00:59.706 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:00:59.706 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DD1200000043 : 737072696E672D62746D000001451727DD1400000044] (with one-phase optimization)
16:00:59.713 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DD1200000043 : 737072696E672D62746D000001451727DD1400000044]
16:00:59.713 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:00:59.713 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:00:59.713 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/payment]
16:00:59.713 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/payment]
16:00:59.713 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:00:59.713 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:00:59.713 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD1200000043], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.713 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:00:59.713 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D000001451727DD1200000043 : 737072696E672D62746D000001451727DD1400000044] from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.713 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f cleaned up all transaction states for GTRID [737072696E672D62746D000001451727DD1200000043]
16:00:59.713 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:00:59.713 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@4582575c with status=COMMITTED
16:00:59.713 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:00:59.713 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
16:00:59.713 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@70357caa with status=COMMITTED
16:00:59.713 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD1200000043], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014) with status=COMMITTED
16:00:59.713 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (739399500) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD1200000043], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014), default timeout 60s
16:00:59.714 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD1200000043], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.714 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f with status=COMMITTED
16:00:59.714 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.714 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.714 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.714 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the inaccessible pool
16:00:59.714 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.714 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.714 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the available pool
16:00:59.714 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.714 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:00:59.714 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.714 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.714 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:00:59.714 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null
16:00:59.714 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.714 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.714 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:00:59.714 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null with an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (ended) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.714 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID null&gt;
16:00:59.714 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with JOIN
16:00:59.714 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036] with JOIN
16:00:59.714 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]] on a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.714 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DC6800000033] previously known to a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef, adding it to the resource's transactions list
16:00:59.714 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)&gt; to &lt;a ThreadContext (739399500) with transaction null, default timeout 60s&gt;
16:00:59.715 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:59.715 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:59.715 [Test worker] DEBUG org.hibernate.loader.Loader - Loading entity: [com.junbo.payment.db.entity.payment.PaymentEntity#973438976]
16:00:59.716 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.716 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.716 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.716 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DC6800000033]
16:00:59.716 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.716 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.716 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DC6800000033
16:00:59.716 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.716 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.716 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.716 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.716 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the inaccessible pool
16:00:59.716 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.716 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.716 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.716 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.716 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the accessible pool
16:00:59.716 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7d117aef was in state NOT_ACCESSIBLE, no need to test it
16:00:59.716 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.716 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.716 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.716 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.716 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.717 [Test worker] DEBUG org.hibernate.SQL - select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
Hibernate: select paymentent0_.payment_id as payment1_5_0_, paymentent0_.created_by as created2_5_0_, paymentent0_.created_time as created3_5_0_, paymentent0_.updated_by as updated4_5_0_, paymentent0_.updated_time as updated5_5_0_, paymentent0_.billing_ref_id as billing6_5_0_, paymentent0_.business_descriptor as business7_5_0_, paymentent0_.country_code as country8_5_0_, paymentent0_.currency_code as currency9_5_0_, paymentent0_.external_token as external10_5_0_, paymentent0_.merchant_account_id as merchant11_5_0_, paymentent0_.net_amount as net12_5_0_, paymentent0_.payment_instrument_id as payment13_5_0_, paymentent0_.payment_provider_id as payment14_5_0_, paymentent0_.payment_status_id as payment15_5_0_, paymentent0_.payment_type_id as payment16_5_0_, paymentent0_.user_id as user17_5_0_ from payment paymentent0_ where paymentent0_.payment_id=?
16:00:59.718 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.719 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEntity#973438976]
16:00:59.719 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.719 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@305b8340
16:00:59.719 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.719 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.719 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.719 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.719 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.719 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.719 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.719 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.719 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.719 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.719 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the accessible pool
16:00:59.719 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.719 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.719 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the inaccessible pool
16:00:59.719 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.719 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.720 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEntity#973438976]
16:00:59.720 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEntity#973438976]
16:00:59.720 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.720 [Test worker] DEBUG org.hibernate.loader.Loader - Done entity load
16:00:59.721 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:59.721 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:59.721 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 5 objects
16:00:59.721 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:59.721 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:59.721 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.AddressEntity{createdTime=2014-03-31 00:00:00.0, state=null, addressLine3=null, addressLine2=null, addressLine1=3rd street, updatedBy=null, city=LA, country=US , id=654377024, postalCode=12345, createdBy=null, unitNumber=null, district=null, updatedTime=2014-03-31 00:00:00.0}
16:00:59.722 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity{prepaid=UNKNOW, createdTime=2014-03-31 00:00:00.0, externalToken=123, type=0, issueCountry=UNKNOW, updatedBy=null, id=654377024, lastBillingDate=2014-03-31 00:00:00.0, createdBy=null, expireDate=2025-11, debit=UNKNOW, commercial=UNKNOW, updatedTime=2014-03-31 00:00:00.0}
16:00:59.722 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PhoneEntity{id=654377024, phoneExtension=null, createdBy=null, areaCode=null, createdTime=2014-03-31 00:00:00.0, number=12345678, type=0, updatedTime=2014-03-31 00:00:00.0, updatedBy=null}
16:00:59.722 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.payment.PaymentEntity{paymentProviderId=0, status=9, createdTime=2014-03-31 00:00:00.0, externalToken=12345, countryCode=null, merchantAccountId=0, businessDescriptor=ut, type=2, billingRefId=123, updatedBy=null, currency=USD, id=973438976, createdBy=null, userId=123, paymentInstrumentId=654377024, updatedTime=2014-03-31 00:00:00.0, netAmount=100}
16:00:59.722 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity{relationToHolder=null, status=0, createdTime=2014-03-31 00:00:00.0, type=0, accountNum=1111, addressId=654377024, updatedBy=null, lastValidatedTime=2014-03-31 00:00:00.0, id=654377024, accountName=ut, createdBy=null, email=null, isDefault=true, userId=123, phoneId=654377024, encryptedAccountNO=null, updatedTime=2014-03-31 00:00:00.0}
16:00:59.722 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.722 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.722 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.722 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DC6800000033]
16:00:59.722 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.722 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.722 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DC6800000033
16:00:59.722 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.722 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.722 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.722 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.722 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the inaccessible pool
16:00:59.722 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.722 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.722 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.722 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.722 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the accessible pool
16:00:59.722 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7d117aef was in state NOT_ACCESSIBLE, no need to test it
16:00:59.722 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.722 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.722 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.722 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.723 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@7d117aef (started) with XID a Bitronix XID [737072696E672D62746D000001451727DC6800000033 : 737072696E672D62746D000001451727DCA300000036]
16:00:59.723 [Test worker] DEBUG org.hibernate.SQL - select this_.payment_event_id as payment1_6_0_, this_.created_by as created2_6_0_, this_.created_time as created3_6_0_, this_.updated_by as updated4_6_0_, this_.updated_time as updated5_6_0_, this_.currency_code as currency6_6_0_, this_.net_amount as net7_6_0_, this_.payment_id as payment8_6_0_, this_.request as request6_0_, this_.response as response6_0_, this_.event_status_id as event11_6_0_, this_.payment_event_type_id as payment12_6_0_ from payment_event this_ where this_.payment_id=?
Hibernate: select this_.payment_event_id as payment1_6_0_, this_.created_by as created2_6_0_, this_.created_time as created3_6_0_, this_.updated_by as updated4_6_0_, this_.updated_time as updated5_6_0_, this_.currency_code as currency6_6_0_, this_.net_amount as net7_6_0_, this_.payment_id as payment8_6_0_, this_.request as request6_0_, this_.response as response6_0_, this_.event_status_id as event11_6_0_, this_.payment_event_type_id as payment12_6_0_ from payment_event this_ where this_.payment_id=?
16:00:59.725 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:00:59.725 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEventEntity#973455360]
16:00:59.725 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 1
16:00:59.725 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEventEntity#973504512]
16:00:59.726 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 2
16:00:59.726 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEventEntity#973471744]
16:00:59.726 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 3
16:00:59.726 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.payment.db.entity.payment.PaymentEventEntity#973520896]
16:00:59.727 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.727 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@305b8340
16:00:59.727 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.727 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.727 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.727 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.727 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.727 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.727 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DC6800000033], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.727 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.727 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.727 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.727 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef from the accessible pool
16:00:59.727 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.727 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.727 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef to the inaccessible pool
16:00:59.727 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7d117aef
16:00:59.727 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.727 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEventEntity#973455360]
16:00:59.727 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEventEntity#973455360]
16:00:59.727 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEventEntity#973504512]
16:00:59.728 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEventEntity#973504512]
16:00:59.728 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEventEntity#973471744]
16:00:59.728 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEventEntity#973471744]
16:00:59.728 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.payment.db.entity.payment.PaymentEventEntity#973520896]
16:00:59.728 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.payment.db.entity.payment.PaymentEventEntity#973520896]
16:00:59.728 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.728 [Test worker] DEBUG o.h.t.DistinctResultTransformer - Transformed: 4 rows to: 4 distinct results
16:00:59.742 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:59.742 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:59.742 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@631b4ff9
16:00:59.742 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:59.742 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528597
16:00:59.743 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@161f9744
16:00:59.743 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.743 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (3 still available)
16:00:59.743 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (3 still available)
16:00:59.743 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DD5C00000045]
16:00:59.743 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:59.743 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (3 still available), waiting if necessary
16:00:59.743 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 - closing time: 1396252919664, now time: 1396252859743
16:00:59.743 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.743 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.743 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.743 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.743 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.743 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:59.743 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state IN_POOL, testing it
16:00:59.743 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, skipping test
16:00:59.743 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.743 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.743 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.743 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD5C00000045], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.743 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@324d7c25 belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.743 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727DD5C00000045 : 737072696E672D62746D000001451727DD5F00000046]
16:00:59.743 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DD5C00000045 : 737072696E672D62746D000001451727DD5F00000046]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID null&gt;
16:00:59.743 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 with XID a Bitronix XID [737072696E672D62746D000001451727DD5C00000045 : 737072696E672D62746D000001451727DD5F00000046] with NOFLAGS
16:00:59.743 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DD5C00000045 : 737072696E672D62746D000001451727DD5F00000046] with NOFLAGS
16:00:59.744 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DD5C00000045 : 737072696E672D62746D000001451727DD5F00000046]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.744 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DD5C00000045] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25, adding it to the resource's transactions list
16:00:59.744 [Test worker] DEBUG org.hibernate.SQL - select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
Hibernate: select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
16:00:59.745 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.745 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:59.745 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.745 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD5C00000045], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.745 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.745 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD5C00000045], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.745 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.745 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.745 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD5C00000045], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.745 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.745 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.745 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.745 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:59.745 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.746 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.746 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:59.746 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.746 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.746 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:59.746 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.746 [Test worker] DEBUG o.h.t.DistinctResultTransformer - Transformed: 0 rows to: 0 distinct results
16:00:59.746 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:59.746 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:59.746 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 654393408, using strategy: org.hibernate.id.Assigned
16:00:59.747 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 654393408, using strategy: org.hibernate.id.Assigned
16:00:59.747 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 654393408, using strategy: org.hibernate.id.Assigned
16:00:59.747 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 654393408, using strategy: org.hibernate.id.Assigned
16:00:59.748 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - parse() - HQL: update com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity set is_default = CASE WHEN payment_instrument_id = 654393408 THEN true ELSE false END where user_id = 123
16:00:59.754 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - --- HQL AST ---
 \-[UPDATE] Node: 'update'
    +-[FROM] Node: 'FROM'
    |  \-[RANGE] Node: 'RANGE'
    |     \-[DOT] Node: '.'
    |        +-[DOT] Node: '.'
    |        |  +-[DOT] Node: '.'
    |        |  |  +-[DOT] Node: '.'
    |        |  |  |  +-[DOT] Node: '.'
    |        |  |  |  |  +-[DOT] Node: '.'
    |        |  |  |  |  |  +-[IDENT] Node: 'com'
    |        |  |  |  |  |  \-[IDENT] Node: 'junbo'
    |        |  |  |  |  \-[IDENT] Node: 'payment'
    |        |  |  |  \-[IDENT] Node: 'db'
    |        |  |  \-[IDENT] Node: 'entity'
    |        |  \-[IDENT] Node: 'paymentinstrument'
    |        \-[IDENT] Node: 'PaymentInstrumentEntity'
    +-[SET] Node: 'set'
    |  \-[EQ] Node: '='
    |     +-[IDENT] Node: 'is_default'
    |     \-[CASE] Node: 'CASE'
    |        +-[WHEN] Node: 'WHEN'
    |        |  +-[EQ] Node: '='
    |        |  |  +-[IDENT] Node: 'payment_instrument_id'
    |        |  |  \-[NUM_INT] Node: '654393408'
    |        |  \-[TRUE] Node: 'true'
    |        \-[ELSE] Node: 'ELSE'
    |           \-[FALSE] Node: 'false'
    \-[WHERE] Node: 'where'
       \-[EQ] Node: '='
          +-[IDENT] Node: 'user_id'
          \-[NUM_INT] Node: '123'

16:00:59.754 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:00:59.755 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - update &lt;&lt; begin [level=1, statement=update]
16:00:59.755 [Test worker] DEBUG o.h.h.internal.ast.tree.FromElement - FromClause{level=1} : com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity (&lt;no alias&gt;) -&gt; paymentins0_
16:00:59.758 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - update : finishing up [level=1, statement=update]
16:00:59.758 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - update &gt;&gt; end [level=1, statement=update]
16:00:59.758 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - --- SQL AST ---
 \-[UPDATE] UpdateStatement: 'update'  querySpaces (payment_instrument)
    +-[FROM] FromClause: 'FROM' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[], fromElementByTableAlias=[paymentins0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
    |  \-[FROM_FRAGMENT] FromElement: 'payment_instrument' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=payment_instrument,tableAlias=paymentins0_,origin=null,columns={,className=com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity}}
    +-[SET] SqlNode: 'set'
    |  \-[EQ] BinaryLogicOperatorNode: '='
    |     +-[IDENT] IdentNode: 'is_default' {originalText=is_default}
    |     \-[CASE] CaseNode: 'CASE'
    |        +-[WHEN] SqlNode: 'WHEN'
    |        |  +-[EQ] BinaryLogicOperatorNode: '='
    |        |  |  +-[IDENT] IdentNode: 'payment_instrument_id' {originalText=payment_instrument_id}
    |        |  |  \-[NUM_INT] LiteralNode: '654393408'
    |        |  \-[TRUE] BooleanLiteralNode: 'true'
    |        \-[ELSE] SqlNode: 'ELSE'
    |           \-[FALSE] BooleanLiteralNode: 'false'
    \-[WHERE] SqlNode: 'where'
       \-[EQ] BinaryLogicOperatorNode: '='
          +-[IDENT] IdentNode: 'user_id' {originalText=user_id}
          \-[NUM_INT] LiteralNode: '123'

16:00:59.758 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:00:59.759 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:00:59.759 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:59.759 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:59.759 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
16:00:59.759 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:59.759 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:59.760 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity{relationToHolder=null, status=0, createdTime=Mon Mar 31 16:00:59 CST 2014, type=0, accountNum=1111, addressId=654393408, updatedBy=null, lastValidatedTime=Mon Mar 31 16:00:59 CST 2014, id=654393408, accountName=ut, createdBy=null, email=null, isDefault=true, userId=123, phoneId=654393408, encryptedAccountNO=null, updatedTime=Mon Mar 31 16:00:59 CST 2014}
16:00:59.760 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.AddressEntity{createdTime=Mon Mar 31 16:00:59 CST 2014, state=null, addressLine3=null, addressLine2=null, addressLine1=3rd street, updatedBy=null, city=LA, country=US, id=654393408, postalCode=12345, createdBy=null, unitNumber=null, district=null, updatedTime=Mon Mar 31 16:00:59 CST 2014}
16:00:59.760 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity{prepaid=UNKNOW, createdTime=Mon Mar 31 16:00:59 CST 2014, externalToken=123, type=0, issueCountry=UNKNOW, updatedBy=null, id=654393408, lastBillingDate=Mon Mar 31 16:00:59 CST 2014, createdBy=null, expireDate=2025-11, debit=UNKNOW, commercial=UNKNOW, updatedTime=Mon Mar 31 16:00:59 CST 2014}
16:00:59.760 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PhoneEntity{id=654393408, phoneExtension=null, createdBy=null, areaCode=null, createdTime=Mon Mar 31 16:00:59 CST 2014, number=12345678, type=0, updatedTime=Mon Mar 31 16:00:59 CST 2014, updatedBy=null}
16:00:59.760 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: payment_instrument
16:00:59.760 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.760 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.760 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.760 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DD5C00000045]
16:00:59.760 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.760 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.760 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DD5C00000045
16:00:59.760 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.760 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.760 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.760 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.760 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:59.760 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.760 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.760 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD5C00000045], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.760 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD5C00000045], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.760 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:59.760 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state NOT_ACCESSIBLE, no need to test it
16:00:59.760 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.760 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.760 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.760 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD5C00000045], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.760 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DD5C00000045 : 737072696E672D62746D000001451727DD5F00000046]
16:00:59.761 [Test worker] DEBUG org.hibernate.SQL - insert into address (created_by, created_time, updated_by, updated_time, address_line_1, address_line_2, address_line_3, city, country_code, district, postal_code, state, unit_number, address_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into address (created_by, created_time, updated_by, updated_time, address_line_1, address_line_2, address_line_3, city, country_code, district, postal_code, state, unit_number, address_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.761 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.762 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.762 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD5C00000045], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.763 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DD5C00000045 : 737072696E672D62746D000001451727DD5F00000046]
16:00:59.763 [Test worker] DEBUG org.hibernate.SQL - insert into phone (created_by, created_time, updated_by, updated_time, phone_area_code, phone_local_number, phone_extension, phone_type_id, phone_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into phone (created_by, created_time, updated_by, updated_time, phone_area_code, phone_local_number, phone_extension, phone_type_id, phone_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.763 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.765 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.767 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD5C00000045], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.767 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DD5C00000045 : 737072696E672D62746D000001451727DD5F00000046]
16:00:59.767 [Test worker] DEBUG org.hibernate.SQL - insert into payment_instrument (created_by, created_time, updated_by, updated_time, payment_instrument_holder_name, account_number, address_id, email, encrypted_account_number, is_default, last_validated_time, phone_id, relation_to_holder, status_id, payment_instrument_type_id, user_id, payment_instrument_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_instrument (created_by, created_time, updated_by, updated_time, payment_instrument_holder_name, account_number, address_id, email, encrypted_account_number, is_default, last_validated_time, phone_id, relation_to_holder, status_id, payment_instrument_type_id, user_id, payment_instrument_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.768 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.770 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.770 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD5C00000045], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.770 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DD5C00000045 : 737072696E672D62746D000001451727DD5F00000046]
16:00:59.770 [Test worker] DEBUG org.hibernate.SQL - insert into credit_card_payment_instrument (created_by, created_time, updated_by, updated_time, commercial, debit, expire_time, external_token, issue_country, last_billing_time, prepaid, credit_card_type_id, payment_instrument_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into credit_card_payment_instrument (created_by, created_time, updated_by, updated_time, commercial, debit, expire_time, external_token, issue_country, last_billing_time, prepaid, credit_card_type_id, payment_instrument_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.771 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.773 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.773 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.773 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:59.773 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.773 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD5C00000045], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.773 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.773 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD5C00000045], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.773 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.773 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.773 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD5C00000045], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.773 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.773 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.773 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.773 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:59.773 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.773 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.773 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:59.774 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.774 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.774 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.774 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.774 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.774 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DD5C00000045]
16:00:59.774 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.774 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.774 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DD5C00000045
16:00:59.774 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.774 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.774 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.774 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.774 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the inaccessible pool
16:00:59.774 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.774 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.774 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD5C00000045], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.774 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD5C00000045], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.774 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the accessible pool
16:00:59.774 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@324d7c25 was in state NOT_ACCESSIBLE, no need to test it
16:00:59.774 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.774 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.774 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.774 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD5C00000045], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.774 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@324d7c25 (started) with XID a Bitronix XID [737072696E672D62746D000001451727DD5C00000045 : 737072696E672D62746D000001451727DD5F00000046]
16:00:59.774 [Test worker] DEBUG org.hibernate.SQL - update payment_instrument set is_default=case when payment_instrument_id=654393408 then true else false end where user_id=123
Hibernate: update payment_instrument set is_default=case when payment_instrument_id=654393408 then true else false end where user_id=123
16:00:59.776 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.776 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@bda23fa
16:00:59.776 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.776 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD5C00000045], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.776 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.776 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD5C00000045], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.776 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.776 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.776 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DD5C00000045], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.776 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.776 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.776 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.776 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 from the accessible pool
16:00:59.776 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.776 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.776 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25 to the inaccessible pool
16:00:59.776 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@324d7c25
16:00:59.777 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.778 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973553664, using strategy: org.hibernate.id.Assigned
16:00:59.779 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'PaymentInstrumentServiceImpl.update' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
16:00:59.779 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:59.779 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:59.782 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:59.782 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:59.951 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:59.951 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:59.952 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@6933ca1
16:00:59.952 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:00:59.953 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962528599
16:00:59.953 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@332dffde
16:00:59.954 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.954 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (3 still available)
16:00:59.954 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (3 still available)
16:00:59.954 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DE2E00000047]
16:00:59.954 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:00:59.954 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/payment with 3 connection(s) (3 still available), waiting if necessary
16:00:59.954 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f - closing time: 1396252919714, now time: 1396252859954
16:00:59.954 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.954 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.954 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.954 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.954 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.954 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:00:59.954 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state IN_POOL, testing it
16:00:59.954 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f, skipping test
16:00:59.954 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.954 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.954 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.954 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DE2E00000047], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.954 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@69e210f belongs to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.954 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D000001451727DE2E00000047 : 737072696E672D62746D000001451727DE3200000048]
16:00:59.954 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D000001451727DE2E00000047 : 737072696E672D62746D000001451727DE3200000048]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID null&gt;
16:00:59.954 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f with XID a Bitronix XID [737072696E672D62746D000001451727DE2E00000047 : 737072696E672D62746D000001451727DE3200000048] with NOFLAGS
16:00:59.954 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DE2E00000047 : 737072696E672D62746D000001451727DE3200000048] with NOFLAGS
16:00:59.954 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DE2E00000047 : 737072696E672D62746D000001451727DE3200000048]] on a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.954 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D000001451727DE2E00000047] previously unknown to a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f, adding it to the resource's transactions list
16:00:59.959 [Test worker] DEBUG org.hibernate.SQL - select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
Hibernate: select this_.tracking_uuid_id as tracking1_3_0_, this_.created_by as created2_3_0_, this_.created_time as created3_3_0_, this_.updated_by as updated4_3_0_, this_.updated_time as updated5_3_0_, this_.api_id as api6_3_0_, this_.payment_id as payment7_3_0_, this_.payment_instrument_id as payment8_3_0_, this_.response as response3_0_, this_.tracking_uuid as tracking10_3_0_, this_.user_id as user11_3_0_ from payment_tracking_uuid this_ where this_.user_id=? and this_.tracking_uuid=?
16:00:59.961 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:00:59.961 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:00:59.961 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.961 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DE2E00000047], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.961 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.961 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DE2E00000047], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.961 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.961 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.961 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DE2E00000047], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.961 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.961 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.961 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:00:59.961 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:00:59.961 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.961 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.961 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:00:59.961 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.961 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:00:59.961 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:00:59.961 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:00:59.961 [Test worker] DEBUG o.h.t.DistinctResultTransformer - Transformed: 0 rows to: 0 distinct results
16:00:59.961 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:00:59.962 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:00:59.962 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 654409792, using strategy: org.hibernate.id.Assigned
16:00:59.963 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 654409792, using strategy: org.hibernate.id.Assigned
16:00:59.963 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 654409792, using strategy: org.hibernate.id.Assigned
16:00:59.963 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 654409792, using strategy: org.hibernate.id.Assigned
16:00:59.972 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - parse() - HQL: update com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity set is_default = CASE WHEN payment_instrument_id = 654409792 THEN true ELSE false END where user_id = 123
16:00:59.976 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - --- HQL AST ---
 \-[UPDATE] Node: 'update'
    +-[FROM] Node: 'FROM'
    |  \-[RANGE] Node: 'RANGE'
    |     \-[DOT] Node: '.'
    |        +-[DOT] Node: '.'
    |        |  +-[DOT] Node: '.'
    |        |  |  +-[DOT] Node: '.'
    |        |  |  |  +-[DOT] Node: '.'
    |        |  |  |  |  +-[DOT] Node: '.'
    |        |  |  |  |  |  +-[IDENT] Node: 'com'
    |        |  |  |  |  |  \-[IDENT] Node: 'junbo'
    |        |  |  |  |  \-[IDENT] Node: 'payment'
    |        |  |  |  \-[IDENT] Node: 'db'
    |        |  |  \-[IDENT] Node: 'entity'
    |        |  \-[IDENT] Node: 'paymentinstrument'
    |        \-[IDENT] Node: 'PaymentInstrumentEntity'
    +-[SET] Node: 'set'
    |  \-[EQ] Node: '='
    |     +-[IDENT] Node: 'is_default'
    |     \-[CASE] Node: 'CASE'
    |        +-[WHEN] Node: 'WHEN'
    |        |  +-[EQ] Node: '='
    |        |  |  +-[IDENT] Node: 'payment_instrument_id'
    |        |  |  \-[NUM_INT] Node: '654409792'
    |        |  \-[TRUE] Node: 'true'
    |        \-[ELSE] Node: 'ELSE'
    |           \-[FALSE] Node: 'false'
    \-[WHERE] Node: 'where'
       \-[EQ] Node: '='
          +-[IDENT] Node: 'user_id'
          \-[NUM_INT] Node: '123'

16:00:59.976 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:00:59.977 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - update &lt;&lt; begin [level=1, statement=update]
16:00:59.977 [Test worker] DEBUG o.h.h.internal.ast.tree.FromElement - FromClause{level=1} : com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity (&lt;no alias&gt;) -&gt; paymentins0_
16:00:59.980 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - update : finishing up [level=1, statement=update]
16:00:59.980 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - update &gt;&gt; end [level=1, statement=update]
16:00:59.981 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - --- SQL AST ---
 \-[UPDATE] UpdateStatement: 'update'  querySpaces (payment_instrument)
    +-[FROM] FromClause: 'FROM' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[], fromElementByTableAlias=[paymentins0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
    |  \-[FROM_FRAGMENT] FromElement: 'payment_instrument' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=payment_instrument,tableAlias=paymentins0_,origin=null,columns={,className=com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity}}
    +-[SET] SqlNode: 'set'
    |  \-[EQ] BinaryLogicOperatorNode: '='
    |     +-[IDENT] IdentNode: 'is_default' {originalText=is_default}
    |     \-[CASE] CaseNode: 'CASE'
    |        +-[WHEN] SqlNode: 'WHEN'
    |        |  +-[EQ] BinaryLogicOperatorNode: '='
    |        |  |  +-[IDENT] IdentNode: 'payment_instrument_id' {originalText=payment_instrument_id}
    |        |  |  \-[NUM_INT] LiteralNode: '654409792'
    |        |  \-[TRUE] BooleanLiteralNode: 'true'
    |        \-[ELSE] SqlNode: 'ELSE'
    |           \-[FALSE] BooleanLiteralNode: 'false'
    \-[WHERE] SqlNode: 'where'
       \-[EQ] BinaryLogicOperatorNode: '='
          +-[IDENT] IdentNode: 'user_id' {originalText=user_id}
          \-[NUM_INT] LiteralNode: '123'

16:00:59.981 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:00:59.981 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:00:59.981 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:00:59.981 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:00:59.982 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 0 updates, 0 deletions to 4 objects
16:00:59.982 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:00:59.982 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:00:59.982 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.AddressEntity{createdTime=Mon Mar 31 16:00:59 CST 2014, state=null, addressLine3=null, addressLine2=null, addressLine1=3rd street, updatedBy=null, city=LA, country=US, id=654409792, postalCode=12345, createdBy=null, unitNumber=null, district=null, updatedTime=Mon Mar 31 16:00:59 CST 2014}
16:00:59.982 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PhoneEntity{id=654409792, phoneExtension=null, createdBy=null, areaCode=null, createdTime=Mon Mar 31 16:00:59 CST 2014, number=12345678, type=0, updatedTime=Mon Mar 31 16:00:59 CST 2014, updatedBy=null}
16:00:59.982 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.CreditCardPaymentInstrumentEntity{prepaid=UNKNOW, createdTime=Mon Mar 31 16:00:59 CST 2014, externalToken=123, type=0, issueCountry=UNKNOW, updatedBy=null, id=654409792, lastBillingDate=Mon Mar 31 16:00:59 CST 2014, createdBy=null, expireDate=2025-11, debit=UNKNOW, commercial=UNKNOW, updatedTime=Mon Mar 31 16:00:59 CST 2014}
16:00:59.985 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.payment.db.entity.paymentinstrument.PaymentInstrumentEntity{relationToHolder=null, status=0, createdTime=Mon Mar 31 16:00:59 CST 2014, type=0, accountNum=1111, addressId=654409792, updatedBy=null, lastValidatedTime=Mon Mar 31 16:00:59 CST 2014, id=654409792, accountName=ut, createdBy=null, email=null, isDefault=true, userId=123, phoneId=654409792, encryptedAccountNO=null, updatedTime=Mon Mar 31 16:00:59 CST 2014}
16:00:59.985 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: payment_instrument
16:00:59.986 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:00:59.986 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.986 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.986 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DE2E00000047]
16:00:59.986 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.986 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.986 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DE2E00000047
16:00:59.986 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:00:59.986 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.986 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.986 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.986 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f from the inaccessible pool
16:00:59.986 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.986 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.986 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DE2E00000047], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.986 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DE2E00000047], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.986 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:00:59.986 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state NOT_ACCESSIBLE, no need to test it
16:00:59.986 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:00:59.986 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:00:59.986 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:00:59.986 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DE2E00000047], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.987 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DE2E00000047 : 737072696E672D62746D000001451727DE3200000048]
16:00:59.987 [Test worker] DEBUG org.hibernate.SQL - insert into address (created_by, created_time, updated_by, updated_time, address_line_1, address_line_2, address_line_3, city, country_code, district, postal_code, state, unit_number, address_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into address (created_by, created_time, updated_by, updated_time, address_line_1, address_line_2, address_line_3, city, country_code, district, postal_code, state, unit_number, address_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.987 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.991 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.991 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DE2E00000047], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.991 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DE2E00000047 : 737072696E672D62746D000001451727DE3200000048]
16:00:59.992 [Test worker] DEBUG org.hibernate.SQL - insert into phone (created_by, created_time, updated_by, updated_time, phone_area_code, phone_local_number, phone_extension, phone_type_id, phone_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into phone (created_by, created_time, updated_by, updated_time, phone_area_code, phone_local_number, phone_extension, phone_type_id, phone_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.993 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:00:59.995 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:00:59.995 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DE2E00000047], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:00:59.995 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DE2E00000047 : 737072696E672D62746D000001451727DE3200000048]
16:00:59.995 [Test worker] DEBUG org.hibernate.SQL - insert into payment_instrument (created_by, created_time, updated_by, updated_time, payment_instrument_holder_name, account_number, address_id, email, encrypted_account_number, is_default, last_validated_time, phone_id, relation_to_holder, status_id, payment_instrument_type_id, user_id, payment_instrument_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into payment_instrument (created_by, created_time, updated_by, updated_time, payment_instrument_holder_name, account_number, address_id, email, encrypted_account_number, is_default, last_validated_time, phone_id, relation_to_holder, status_id, payment_instrument_type_id, user_id, payment_instrument_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:00:59.997 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:01:00.000 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:01:00.001 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DE2E00000047], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:01:00.001 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DE2E00000047 : 737072696E672D62746D000001451727DE3200000048]
16:01:00.001 [Test worker] DEBUG org.hibernate.SQL - insert into credit_card_payment_instrument (created_by, created_time, updated_by, updated_time, commercial, debit, expire_time, external_token, issue_country, last_billing_time, prepaid, credit_card_type_id, payment_instrument_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into credit_card_payment_instrument (created_by, created_time, updated_by, updated_time, commercial, debit, expire_time, external_token, issue_country, last_billing_time, prepaid, credit_card_type_id, payment_instrument_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:01:00.002 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:01:00.005 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:01:00.005 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:01:00.006 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:01:00.006 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:01:00.006 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DE2E00000047], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:01:00.006 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:01:00.006 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DE2E00000047], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:01:00.006 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:01:00.006 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:01:00.009 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DE2E00000047], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:01:00.009 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:01:00.009 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:01:00.009 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:01:00.009 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:01:00.009 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:01:00.009 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:01:00.009 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:01:00.009 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:01:00.009 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:01:00.010 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:01:00.010 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:01:00.010 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:01:00.010 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D000001451727DE2E00000047]
16:01:00.010 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:01:00.010 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:01:00.010 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D000001451727DE2E00000047
16:01:00.010 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:01:00.010 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:01:00.010 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:01:00.010 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:01:00.010 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f from the inaccessible pool
16:01:00.010 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:01:00.010 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:01:00.010 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DE2E00000047], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:01:00.010 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DE2E00000047], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:01:00.010 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f to the accessible pool
16:01:00.010 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@69e210f was in state NOT_ACCESSIBLE, no need to test it
16:01:00.010 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:01:00.010 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/payment with 3 connection(s) (2 still available)
16:01:00.010 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:01:00.010 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f into a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DE2E00000047], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:01:00.011 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/payment XAResource=org.postgresql.xa.PGXAConnection@69e210f (started) with XID a Bitronix XID [737072696E672D62746D000001451727DE2E00000047 : 737072696E672D62746D000001451727DE3200000048]
16:01:00.011 [Test worker] DEBUG org.hibernate.SQL - update payment_instrument set is_default=case when payment_instrument_id=654409792 then true else false end where user_id=123
Hibernate: update payment_instrument set is_default=case when payment_instrument_id=654409792 then true else false end where user_id=123
16:01:00.013 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:01:00.013 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@681d4f93
16:01:00.013 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:01:00.014 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DE2E00000047], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:01:00.014 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:01:00.014 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DE2E00000047], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:01:00.014 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:01:00.014 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:01:00.014 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D000001451727DE2E00000047], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:00:59 CST 2014)
16:01:00.014 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:01:00.014 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:01:00.014 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:01:00.014 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f from the accessible pool
16:01:00.014 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:01:00.014 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:01:00.014 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f to the inaccessible pool
16:01:00.014 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/payment in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@69e210f
16:01:00.014 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:01:00.015 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 973570048, using strategy: org.hibernate.id.Assigned
16:01:00.015 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'PaymentInstrumentServiceImpl.delete' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
16:01:00.015 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:01:00.016 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
</pre>
</span>
</div>
</div>
<div id="footer">
<p>Generated by 
<a href="http://www.gradle.org">Gradle 1.10</a> at 2014-3-31 16:01:01</p>
</div>
</div>
</body>