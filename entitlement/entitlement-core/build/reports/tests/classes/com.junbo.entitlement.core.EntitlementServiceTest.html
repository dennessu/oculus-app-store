<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta httpEquiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Test results - Class com.junbo.entitlement.core.EntitlementServiceTest</title>
<link href="css/base-style.css" rel="stylesheet" type="text/css"/>
<link href="css/style.css" rel="stylesheet" type="text/css"/>
<script src="js/report.js" type="text/javascript"></script>
</head>
<body>
<div id="content">
<h1>Class com.junbo.entitlement.core.EntitlementServiceTest</h1>
<div class="breadcrumbs">
<a href="../index.html">all</a> &gt; 
<a href="../packages/com.junbo.entitlement.core.html">com.junbo.entitlement.core</a> &gt; EntitlementServiceTest</div>
<div id="summary">
<table>
<tr>
<td>
<div class="summaryGroup">
<table>
<tr>
<td>
<div class="infoBox" id="tests">
<div class="counter">8</div>
<p>tests</p>
</div>
</td>
<td>
<div class="infoBox" id="failures">
<div class="counter">0</div>
<p>failures</p>
</div>
</td>
<td>
<div class="infoBox" id="duration">
<div class="counter">2.104s</div>
<p>duration</p>
</div>
</td>
</tr>
</table>
</div>
</td>
<td>
<div class="infoBox success" id="successRate">
<div class="percent">100%</div>
<p>successful</p>
</div>
</td>
</tr>
</table>
</div>
<div id="tabs">
<ul class="tabLinks">
<li>
<a href="#tab0">Tests</a>
</li>
<li>
<a href="#tab1">Standard output</a>
</li>
</ul>
<div id="tab0" class="tab">
<h2>Tests</h2>
<table>
<thead>
<tr>
<th>Test</th>
<th>Duration</th>
<th>Result</th>
</tr>
</thead>
<tr>
<td class="success">testAddEntitlement</td>
<td>0.305s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testAddWrongDateEntitlement</td>
<td>0.317s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testDeleteEntitlement</td>
<td>0.011s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testGetEntitlementWithManagedLifecycle</td>
<td>0.182s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testSearchEntitlements</td>
<td>1.057s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testStackableEntitlement</td>
<td>0.223s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testTransferEntitlement</td>
<td>0.005s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateEntitlement</td>
<td>0.004s</td>
<td class="success">passed</td>
</tr>
</table>
</div>
<div id="tab1" class="tab">
<h2>Standard output</h2>
<span class="code">
<pre>15:59:25.255 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'
15:59:25.258 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'OculusGlobalCounterInDBImpl.getAndIncrease' with attribute: PROPAGATION_REQUIRES_NEW,ISOLATION_DEFAULT; ''
15:59:25.260 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:25.261 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [com.junbo.sharding.id.oculus.OculusGlobalCounterInDBImpl.getAndIncrease]
15:59:25.262 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C3F00000001], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.262 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (1115509543) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C3F00000001], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014), default timeout 60s
15:59:25.262 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
15:59:25.262 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
15:59:25.262 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C3F00000001], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.262 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D0000014517266C4E00000002]
15:59:25.263 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (1115509543) with transaction null, default timeout 60s&gt;
15:59:25.263 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
15:59:25.263 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
15:59:25.263 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014) for Mon Mar 31 16:00:25 CST 2014
15:59:25.263 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.263 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014) scheduled for Mon Mar 31 16:00:25 CST 2014, total task(s) queued: 5
15:59:25.263 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 15:59:25 CST 2014
15:59:25.268 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'IdGlobalCounterDAOImpl.get' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
15:59:25.268 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:25.268 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:25.304 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@2143aff9
15:59:25.305 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
15:59:25.305 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962527652
15:59:25.306 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@4c3e8cbf
15:59:25.342 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:25.342 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available)
15:59:25.343 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available)
15:59:25.343 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266C4E00000002]
15:59:25.343 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
15:59:25.343 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available), waiting if necessary
15:59:25.343 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab - closing time: 1396252824119, now time: 1396252765343
15:59:25.343 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.343 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.343 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.343 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.343 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.343 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab to the accessible pool
15:59:25.343 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@203f9cab was in state IN_POOL, testing it
15:59:25.343 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab, skipping test
15:59:25.343 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.343 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.343 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:25.343 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.344 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@203f9cab does not belong to any resource of a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (3 still available)
15:59:25.344 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@203f9cab belongs to a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.345 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D0000014517266C4E00000002 : 737072696E672D62746D0000014517266CA100000003]
15:59:25.345 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D0000014517266C4E00000002 : 737072696E672D62746D0000014517266CA100000003]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@203f9cab with XID null&gt;
15:59:25.345 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@203f9cab with XID a Bitronix XID [737072696E672D62746D0000014517266C4E00000002 : 737072696E672D62746D0000014517266CA100000003] with NOFLAGS
15:59:25.345 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@203f9cab (started) with XID a Bitronix XID [737072696E672D62746D0000014517266C4E00000002 : 737072696E672D62746D0000014517266CA100000003] with NOFLAGS
15:59:25.345 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@203f9cab (started) with XID a Bitronix XID [737072696E672D62746D0000014517266C4E00000002 : 737072696E672D62746D0000014517266CA100000003]] on a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.345 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D0000014517266C4E00000002] previously unknown to a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab, adding it to the resource's transactions list
15:59:25.360 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
15:59:25.370 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 0 -&gt; shardId [1]
15:59:25.372 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -&gt; optionMode [2]
15:59:25.394 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
15:59:25.397 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
15:59:25.402 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:25.402 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@7c458b57
15:59:25.402 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.402 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.402 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.403 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.403 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.403 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.404 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.404 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.405 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.405 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:25.405 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab from the accessible pool
15:59:25.405 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.405 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.405 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab to the inaccessible pool
15:59:25.405 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.405 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:25.406 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
15:59:25.407 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
15:59:25.410 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
15:59:25.410 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:25.412 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'IdGlobalCounterDAOImpl.saveOrUpdate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
15:59:25.412 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:25.412 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:25.414 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:25.416 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:25.420 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 1 updates, 0 deletions to 1 objects
15:59:25.421 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:25.422 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:25.422 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=2, shardId=0, globalCounter=56, optionMode=2}
15:59:25.422 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: id_global_counter
15:59:25.442 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:25.442 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.442 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.442 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266C4E00000002]
15:59:25.442 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.442 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.442 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266C4E00000002
15:59:25.442 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:25.443 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.443 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.443 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.443 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab from the inaccessible pool
15:59:25.443 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.443 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.443 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.443 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.443 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab to the accessible pool
15:59:25.443 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@203f9cab was in state NOT_ACCESSIBLE, no need to test it
15:59:25.443 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.443 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.443 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:25.443 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.443 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@203f9cab (started) with XID a Bitronix XID [737072696E672D62746D0000014517266C4E00000002 : 737072696E672D62746D0000014517266CA100000003]
15:59:25.443 [Test worker] DEBUG org.hibernate.SQL - update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
Hibernate: update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
15:59:25.474 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:25.477 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:25.477 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:25.477 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@7c458b57
15:59:25.477 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.478 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.478 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.478 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.478 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.478 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.478 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.478 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.478 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.478 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:25.479 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab from the accessible pool
15:59:25.479 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.479 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.479 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab to the inaccessible pool
15:59:25.479 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.479 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:25.480 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:25.480 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.480 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.480 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266C4E00000002]
15:59:25.480 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.480 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.480 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266C4E00000002
15:59:25.480 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:25.480 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.480 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.480 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.480 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab from the inaccessible pool
15:59:25.480 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.480 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.481 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.481 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.481 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab to the accessible pool
15:59:25.481 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@203f9cab was in state NOT_ACCESSIBLE, no need to test it
15:59:25.481 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.481 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.481 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:25.481 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.481 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@203f9cab (started) with XID a Bitronix XID [737072696E672D62746D0000014517266C4E00000002 : 737072696E672D62746D0000014517266CA100000003]
15:59:25.482 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
15:59:25.482 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D0000014517266C3F00000001
15:59:25.482 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 0 -&gt; shardId [1]
15:59:25.482 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -&gt; optionMode [2]
15:59:25.483 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D0000014517266C4E00000002
15:59:25.487 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
15:59:25.488 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
15:59:25.488 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:25.488 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@7c458b57
15:59:25.489 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.489 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.489 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.489 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.489 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.489 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.489 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.489 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.489 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.489 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:25.489 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab from the accessible pool
15:59:25.489 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.489 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.489 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab to the inaccessible pool
15:59:25.489 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.489 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:25.490 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:25.498 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:25.498 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:25.499 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 1 updates, 0 deletions to 1 objects
15:59:25.499 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:25.499 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:25.499 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=2, shardId=0, globalCounter=56, optionMode=2}
15:59:25.499 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: id_global_counter
15:59:25.499 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:25.499 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.499 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.499 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266C4E00000002]
15:59:25.499 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.500 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.500 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266C4E00000002
15:59:25.500 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:25.500 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.500 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.500 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.500 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab from the inaccessible pool
15:59:25.500 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.500 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.500 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.500 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.500 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab to the accessible pool
15:59:25.500 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@203f9cab was in state NOT_ACCESSIBLE, no need to test it
15:59:25.500 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.500 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.500 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:25.500 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.501 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@203f9cab (started) with XID a Bitronix XID [737072696E672D62746D0000014517266C4E00000002 : 737072696E672D62746D0000014517266CA100000003]
15:59:25.501 [Test worker] DEBUG org.hibernate.SQL - update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
Hibernate: update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
15:59:25.501 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:25.503 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:25.503 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:25.503 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@7c458b57
15:59:25.503 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.503 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.503 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.503 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.503 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.504 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.504 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.504 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.504 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.504 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:25.504 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab from the accessible pool
15:59:25.504 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.504 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.504 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab to the inaccessible pool
15:59:25.504 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.504 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:25.504 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:25.504 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.504 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.504 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266C4E00000002]
15:59:25.504 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.505 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.505 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266C4E00000002
15:59:25.505 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:25.505 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.505 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.505 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.505 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab from the inaccessible pool
15:59:25.505 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.505 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.505 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.507 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.508 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab to the accessible pool
15:59:25.508 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@203f9cab was in state NOT_ACCESSIBLE, no need to test it
15:59:25.508 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.508 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.508 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:25.508 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.508 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@203f9cab (started) with XID a Bitronix XID [737072696E672D62746D0000014517266C4E00000002 : 737072696E672D62746D0000014517266CA100000003]
15:59:25.508 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
15:59:25.508 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 0 -&gt; shardId [1]
15:59:25.509 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -&gt; optionMode [2]
15:59:25.512 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
15:59:25.512 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
15:59:25.512 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:25.512 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@7c458b57
15:59:25.512 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.513 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.513 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.513 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.513 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.513 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.513 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.513 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.513 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.513 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:25.513 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab from the accessible pool
15:59:25.513 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.513 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.513 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab to the inaccessible pool
15:59:25.513 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.513 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:25.514 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:25.514 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:25.514 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:25.515 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
15:59:25.515 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:25.515 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:25.515 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=2, shardId=0, globalCounter=56, optionMode=2}
15:59:25.516 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:25.516 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.516 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.516 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266C4E00000002]
15:59:25.516 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.516 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.516 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266C4E00000002
15:59:25.516 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:25.516 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.516 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.516 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.516 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab from the inaccessible pool
15:59:25.516 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.516 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.516 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.517 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.517 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab to the accessible pool
15:59:25.517 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@203f9cab was in state NOT_ACCESSIBLE, no need to test it
15:59:25.517 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.517 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.517 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:25.517 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.517 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@203f9cab (started) with XID a Bitronix XID [737072696E672D62746D0000014517266C4E00000002 : 737072696E672D62746D0000014517266CA100000003]
15:59:25.518 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
15:59:25.518 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 0 -&gt; shardId [1]
15:59:25.518 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -&gt; optionMode [2]
15:59:25.520 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
15:59:25.521 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
15:59:25.521 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:25.521 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@7c458b57
15:59:25.521 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.521 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.521 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.521 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.521 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.521 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.521 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.521 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.522 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.522 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:25.522 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab from the accessible pool
15:59:25.522 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.522 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.522 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab to the inaccessible pool
15:59:25.522 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.522 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:25.522 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:25.522 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
15:59:25.522 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.523 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.523 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.523 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014) scheduled for Mon Mar 31 16:00:25 CST 2014, total task(s) still queued: 4
15:59:25.523 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
15:59:25.524 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.524 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.524 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@2143aff9
15:59:25.524 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:25.524 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:25.524 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
15:59:25.524 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:25.525 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:25.525 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=2, shardId=0, globalCounter=56, optionMode=2}
15:59:25.525 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:25.525 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@4c3e8cbf
15:59:25.525 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@203f9cab (started) with XID a Bitronix XID [737072696E672D62746D0000014517266C4E00000002 : 737072696E672D62746D0000014517266CA100000003]
15:59:25.525 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@203f9cab (started) with XID a Bitronix XID [737072696E672D62746D0000014517266C4E00000002 : 737072696E672D62746D0000014517266CA100000003]
15:59:25.525 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@203f9cab (started) with XID a Bitronix XID [737072696E672D62746D0000014517266C4E00000002 : 737072696E672D62746D0000014517266CA100000003] with SUCCESS
15:59:25.525 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@203f9cab (started) with XID a Bitronix XID [737072696E672D62746D0000014517266C4E00000002 : 737072696E672D62746D0000014517266CA100000003] with SUCCESS
15:59:25.525 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
15:59:25.526 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
15:59:25.526 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
15:59:25.526 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
15:59:25.526 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
15:59:25.526 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
15:59:25.526 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
15:59:25.526 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
15:59:25.526 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
15:59:25.526 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
15:59:25.527 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
15:59:25.527 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@203f9cab (ended) with XID a Bitronix XID [737072696E672D62746D0000014517266C4E00000002 : 737072696E672D62746D0000014517266CA100000003] (with one-phase optimization)
15:59:25.530 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@203f9cab (ended) with XID a Bitronix XID [737072696E672D62746D0000014517266C4E00000002 : 737072696E672D62746D0000014517266CA100000003]
15:59:25.530 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
15:59:25.531 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
15:59:25.531 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/sharding]
15:59:25.531 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/sharding]
15:59:25.531 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
15:59:25.532 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
15:59:25.532 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.532 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
15:59:25.532 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D0000014517266C4E00000002 : 737072696E672D62746D0000014517266CA100000003] from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.532 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab cleaned up all transaction states for GTRID [737072696E672D62746D0000014517266C4E00000002]
15:59:25.532 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
15:59:25.532 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@2143aff9 with status=COMMITTED
15:59:25.532 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
15:59:25.532 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
15:59:25.534 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@4c3e8cbf with status=COMMITTED
15:59:25.534 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014) with status=COMMITTED
15:59:25.534 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (1115509543) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014), default timeout 60s
15:59:25.535 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C4E00000002], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.535 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab with status=COMMITTED
15:59:25.535 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.535 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.535 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:25.535 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab from the inaccessible pool
15:59:25.535 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.535 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.535 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab to the available pool
15:59:25.535 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@203f9cab
15:59:25.536 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
15:59:25.539 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C3F00000001], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.539 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266C3F00000001], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)&gt; to &lt;a ThreadContext (1115509543) with transaction null, default timeout 60s&gt;
15:59:25.541 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:25.541 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:25.541 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:25.542 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@4ded567b
15:59:25.542 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
15:59:25.543 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962527655
15:59:25.543 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@18c8cd35
15:59:25.547 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 939606016, using strategy: org.hibernate.id.Assigned
15:59:25.553 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155862286336016, using strategy: org.hibernate.id.Assigned
15:59:25.570 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:25.570 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [com.junbo.sharding.id.oculus.OculusGlobalCounterInDBImpl.getAndIncrease]
15:59:25.570 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8000000004], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.570 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (1115509543) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8000000004], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014), default timeout 60s
15:59:25.570 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
15:59:25.570 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
15:59:25.570 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8000000004], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.570 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D0000014517266D8200000005]
15:59:25.571 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (1115509543) with transaction null, default timeout 60s&gt;
15:59:25.571 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
15:59:25.571 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
15:59:25.571 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014) for Mon Mar 31 16:00:25 CST 2014
15:59:25.571 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.571 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014) scheduled for Mon Mar 31 16:00:25 CST 2014, total task(s) queued: 5
15:59:25.571 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 15:59:25 CST 2014
15:59:25.571 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:25.571 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:25.572 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@4e60571
15:59:25.572 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
15:59:25.572 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962527655
15:59:25.572 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@298fd36c
15:59:25.573 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:25.573 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available)
15:59:25.573 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available)
15:59:25.573 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266D8200000005]
15:59:25.573 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
15:59:25.573 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available), waiting if necessary
15:59:25.573 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 - closing time: 1396252824127, now time: 1396252765573
15:59:25.573 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.575 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.575 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.575 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.575 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.575 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 to the accessible pool
15:59:25.575 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@438cb277 was in state IN_POOL, testing it
15:59:25.575 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277, skipping test
15:59:25.575 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.575 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.576 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:25.576 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.576 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@438cb277 does not belong to any resource of a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (3 still available)
15:59:25.576 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@438cb277 belongs to a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.576 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D0000014517266D8200000005 : 737072696E672D62746D0000014517266D8800000006]
15:59:25.576 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D0000014517266D8200000005 : 737072696E672D62746D0000014517266D8800000006]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@438cb277 with XID null&gt;
15:59:25.576 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@438cb277 with XID a Bitronix XID [737072696E672D62746D0000014517266D8200000005 : 737072696E672D62746D0000014517266D8800000006] with NOFLAGS
15:59:25.576 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@438cb277 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266D8200000005 : 737072696E672D62746D0000014517266D8800000006] with NOFLAGS
15:59:25.576 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@438cb277 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266D8200000005 : 737072696E672D62746D0000014517266D8800000006]] on a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.576 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D0000014517266D8200000005] previously unknown to a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277, adding it to the resource's transactions list
15:59:25.576 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
15:59:25.577 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 1 -&gt; shardId [1]
15:59:25.577 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -&gt; optionMode [2]
15:59:25.582 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
15:59:25.583 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
15:59:25.583 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:25.583 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@62f86a4
15:59:25.583 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.583 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.584 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.584 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.584 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.584 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.585 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.585 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.585 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.586 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:25.586 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 from the accessible pool
15:59:25.586 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.586 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.586 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 to the inaccessible pool
15:59:25.586 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.586 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:25.586 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
15:59:25.586 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
15:59:25.588 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
15:59:25.588 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:25.588 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:25.588 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:25.589 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:25.589 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:25.589 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 1 updates, 0 deletions to 1 objects
15:59:25.589 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:25.589 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:25.589 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=1, shardId=1, globalCounter=37, optionMode=2}
15:59:25.589 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: id_global_counter
15:59:25.590 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:25.590 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.590 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.590 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266D8200000005]
15:59:25.590 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.590 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.590 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266D8200000005
15:59:25.590 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:25.590 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.590 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.590 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.591 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 from the inaccessible pool
15:59:25.591 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.591 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.591 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.594 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.594 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 to the accessible pool
15:59:25.594 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@438cb277 was in state NOT_ACCESSIBLE, no need to test it
15:59:25.594 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.594 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.594 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:25.595 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.595 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@438cb277 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266D8200000005 : 737072696E672D62746D0000014517266D8800000006]
15:59:25.595 [Test worker] DEBUG org.hibernate.SQL - update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
Hibernate: update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
15:59:25.595 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:25.599 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:25.599 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:25.599 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@62f86a4
15:59:25.600 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.600 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.600 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.600 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.600 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.600 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.600 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.600 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.600 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.600 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:25.600 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 from the accessible pool
15:59:25.600 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.600 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.600 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 to the inaccessible pool
15:59:25.600 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.600 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:25.600 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:25.601 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.601 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.601 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266D8200000005]
15:59:25.601 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.601 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.601 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266D8200000005
15:59:25.601 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:25.601 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.601 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.601 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.601 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 from the inaccessible pool
15:59:25.601 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.601 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.601 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.601 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.601 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 to the accessible pool
15:59:25.601 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@438cb277 was in state NOT_ACCESSIBLE, no need to test it
15:59:25.601 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.601 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.602 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:25.602 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.602 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@438cb277 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266D8200000005 : 737072696E672D62746D0000014517266D8800000006]
15:59:25.602 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
15:59:25.602 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 1 -&gt; shardId [1]
15:59:25.605 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -&gt; optionMode [2]
15:59:25.610 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
15:59:25.610 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
15:59:25.610 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:25.611 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@62f86a4
15:59:25.611 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.611 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.611 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.611 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.611 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.611 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.611 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.611 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.611 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.611 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:25.612 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 from the accessible pool
15:59:25.612 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.612 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.612 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 to the inaccessible pool
15:59:25.612 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.612 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:25.612 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:25.613 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:25.613 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:25.613 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 1 updates, 0 deletions to 1 objects
15:59:25.613 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:25.613 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:25.614 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=1, shardId=1, globalCounter=37, optionMode=2}
15:59:25.614 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: id_global_counter
15:59:25.614 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:25.614 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.614 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.615 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266D8200000005]
15:59:25.615 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.615 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.615 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266D8200000005
15:59:25.615 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:25.615 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.615 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.615 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.615 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 from the inaccessible pool
15:59:25.615 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.615 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.615 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.615 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.615 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 to the accessible pool
15:59:25.615 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@438cb277 was in state NOT_ACCESSIBLE, no need to test it
15:59:25.615 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.615 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.616 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:25.616 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.616 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@438cb277 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266D8200000005 : 737072696E672D62746D0000014517266D8800000006]
15:59:25.616 [Test worker] DEBUG org.hibernate.SQL - update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
Hibernate: update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
15:59:25.616 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:25.618 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:25.618 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:25.618 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@62f86a4
15:59:25.619 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.619 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.619 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.619 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.619 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.619 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.619 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.619 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.619 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.619 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:25.619 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 from the accessible pool
15:59:25.619 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.619 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.619 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 to the inaccessible pool
15:59:25.619 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.620 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:25.620 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:25.620 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.620 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.620 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266D8200000005]
15:59:25.620 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.620 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.620 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266D8200000005
15:59:25.620 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:25.620 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.620 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.620 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.620 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 from the inaccessible pool
15:59:25.620 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.620 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.620 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.620 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.620 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 to the accessible pool
15:59:25.621 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@438cb277 was in state NOT_ACCESSIBLE, no need to test it
15:59:25.621 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.621 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.621 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:25.621 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.621 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@438cb277 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266D8200000005 : 737072696E672D62746D0000014517266D8800000006]
15:59:25.621 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
15:59:25.621 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 1 -&gt; shardId [1]
15:59:25.622 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -&gt; optionMode [2]
15:59:25.623 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
15:59:25.623 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
15:59:25.623 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:25.623 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@62f86a4
15:59:25.623 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.623 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.623 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.623 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.624 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.624 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.624 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.624 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.624 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.624 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:25.624 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 from the accessible pool
15:59:25.624 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.624 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.624 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 to the inaccessible pool
15:59:25.624 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.624 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:25.624 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:25.625 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:25.625 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:25.625 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
15:59:25.625 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:25.625 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:25.625 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=1, shardId=1, globalCounter=37, optionMode=2}
15:59:25.625 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:25.625 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.625 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.625 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266D8200000005]
15:59:25.625 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.625 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.626 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266D8200000005
15:59:25.626 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:25.626 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.626 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.626 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.626 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 from the inaccessible pool
15:59:25.626 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.626 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.626 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.626 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.626 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 to the accessible pool
15:59:25.626 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@438cb277 was in state NOT_ACCESSIBLE, no need to test it
15:59:25.626 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.627 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
15:59:25.627 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:25.627 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.627 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@438cb277 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266D8200000005 : 737072696E672D62746D0000014517266D8800000006]
15:59:25.627 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
15:59:25.628 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 1 -&gt; shardId [1]
15:59:25.628 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -&gt; optionMode [2]
15:59:25.630 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
15:59:25.630 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
15:59:25.630 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:25.631 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@62f86a4
15:59:25.631 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.631 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.631 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.631 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.631 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.631 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.631 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.631 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.631 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.631 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:25.631 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 from the accessible pool
15:59:25.631 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.631 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.631 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 to the inaccessible pool
15:59:25.631 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.631 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:25.631 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:25.632 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
15:59:25.632 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.632 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.632 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.632 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014) scheduled for Mon Mar 31 16:00:25 CST 2014, total task(s) still queued: 4
15:59:25.632 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
15:59:25.632 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.632 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.632 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@4e60571
15:59:25.632 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:25.632 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:25.633 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
15:59:25.633 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:25.633 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:25.633 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=1, shardId=1, globalCounter=37, optionMode=2}
15:59:25.633 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:25.633 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@298fd36c
15:59:25.633 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@438cb277 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266D8200000005 : 737072696E672D62746D0000014517266D8800000006]
15:59:25.633 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@438cb277 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266D8200000005 : 737072696E672D62746D0000014517266D8800000006]
15:59:25.633 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@438cb277 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266D8200000005 : 737072696E672D62746D0000014517266D8800000006] with SUCCESS
15:59:25.633 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@438cb277 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266D8200000005 : 737072696E672D62746D0000014517266D8800000006] with SUCCESS
15:59:25.633 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
15:59:25.633 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
15:59:25.633 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
15:59:25.633 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
15:59:25.633 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
15:59:25.634 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
15:59:25.634 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
15:59:25.634 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
15:59:25.634 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
15:59:25.634 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
15:59:25.634 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
15:59:25.634 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@438cb277 (ended) with XID a Bitronix XID [737072696E672D62746D0000014517266D8200000005 : 737072696E672D62746D0000014517266D8800000006] (with one-phase optimization)
15:59:25.636 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@438cb277 (ended) with XID a Bitronix XID [737072696E672D62746D0000014517266D8200000005 : 737072696E672D62746D0000014517266D8800000006]
15:59:25.636 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
15:59:25.636 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
15:59:25.636 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/sharding]
15:59:25.636 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/sharding]
15:59:25.636 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
15:59:25.636 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
15:59:25.636 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.636 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
15:59:25.636 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D0000014517266D8200000005 : 737072696E672D62746D0000014517266D8800000006] from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.636 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 cleaned up all transaction states for GTRID [737072696E672D62746D0000014517266D8200000005]
15:59:25.636 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
15:59:25.636 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@4e60571 with status=COMMITTED
15:59:25.636 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
15:59:25.637 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
15:59:25.637 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@298fd36c with status=COMMITTED
15:59:25.637 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014) with status=COMMITTED
15:59:25.637 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (1115509543) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014), default timeout 60s
15:59:25.637 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8200000005], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.637 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 with status=COMMITTED
15:59:25.637 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.637 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.637 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:25.637 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 from the inaccessible pool
15:59:25.637 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.637 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.637 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277 to the available pool
15:59:25.637 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@438cb277
15:59:25.638 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
15:59:25.638 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8000000004], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.638 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8000000004], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)&gt; to &lt;a ThreadContext (1115509543) with transaction null, default timeout 60s&gt;
15:59:25.638 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:25.638 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:25.638 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:25.733 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementUnregisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D0000014517266C4E00000002
15:59:25.733 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementUnregisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D0000014517266C3F00000001
15:59:25.734 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D0000014517266D8000000004
15:59:25.885 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating transaction failed - marking existing transaction as rollback-only
15:59:25.885 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Setting JTA transaction rollback-only
15:59:25.885 [Test worker] DEBUG b.tm.BitronixTransactionManager - marking transaction as rollback only: a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266D8000000004], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:25.885 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to MARKED_ROLLBACK
15:59:25.885 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to MARKED_ROLLBACK - executing 0 listener(s)
15:59:25.895 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:25.895 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:25.895 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:25.895 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@3afdd787
15:59:25.895 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
15:59:25.896 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962527658
15:59:25.896 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@2741265d
15:59:25.896 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 939704320, using strategy: org.hibernate.id.Assigned
15:59:25.896 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155862287360320, using strategy: org.hibernate.id.Assigned
15:59:25.898 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'EntitlementServiceImpl.deleteEntitlement' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
15:59:25.898 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:25.898 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:25.898 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155862287361320, using strategy: org.hibernate.id.Assigned
15:59:25.904 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'EntitlementServiceImpl.getEntitlement' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
15:59:25.904 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:25.904 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:25.915 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:25.915 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:25.915 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:25.915 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@385c915
15:59:25.915 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
15:59:25.915 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962527659
15:59:25.915 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@19febc4d
15:59:25.958 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - parse() - HQL: from com.junbo.entitlement.db.entity.EntitlementEntity where userId = (:userId) and entitlementDefinitionId = (:definitionId) and status &gt;= 0 and managedLifecycle = true
15:59:25.969 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - --- HQL AST ---
 \-[QUERY] Node: 'query'
    +-[SELECT_FROM] Node: 'SELECT_FROM'
    |  \-[FROM] Node: 'from'
    |     \-[RANGE] Node: 'RANGE'
    |        \-[DOT] Node: '.'
    |           +-[DOT] Node: '.'
    |           |  +-[DOT] Node: '.'
    |           |  |  +-[DOT] Node: '.'
    |           |  |  |  +-[DOT] Node: '.'
    |           |  |  |  |  +-[IDENT] Node: 'com'
    |           |  |  |  |  \-[IDENT] Node: 'junbo'
    |           |  |  |  \-[IDENT] Node: 'entitlement'
    |           |  |  \-[IDENT] Node: 'db'
    |           |  \-[IDENT] Node: 'entity'
    |           \-[IDENT] Node: 'EntitlementEntity'
    \-[WHERE] Node: 'where'
       \-[AND] Node: 'and'
          +-[AND] Node: 'and'
          |  +-[AND] Node: 'and'
          |  |  +-[EQ] Node: '='
          |  |  |  +-[IDENT] Node: 'userId'
          |  |  |  \-[COLON] Node: ':'
          |  |  |     \-[IDENT] Node: 'userId'
          |  |  \-[EQ] Node: '='
          |  |     +-[IDENT] Node: 'entitlementDefinitionId'
          |  |     \-[COLON] Node: ':'
          |  |        \-[IDENT] Node: 'definitionId'
          |  \-[GE] Node: '&gt;='
          |     +-[IDENT] Node: 'status'
          |     \-[NUM_INT] Node: '0'
          \-[EQ] Node: '='
             +-[IDENT] Node: 'managedLifecycle'
             \-[TRUE] Node: 'true'

15:59:25.970 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
15:59:25.984 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementUnregisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D0000014517266D8000000004
15:59:25.985 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D0000014517266ED900000008
15:59:26.005 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - select &lt;&lt; begin [level=1, statement=select]
15:59:26.024 [Test worker] DEBUG o.h.h.internal.ast.tree.FromElement - FromClause{level=1} : com.junbo.entitlement.db.entity.EntitlementEntity (&lt;no alias&gt;) -&gt; entitlemen0_
15:59:26.027 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias} -&gt; {synthetic-alias}
15:59:26.028 [Test worker] DEBUG o.h.hql.internal.ast.tree.DotNode - getDataType() : userId -&gt; org.hibernate.type.LongType@36c2b1d3
15:59:26.029 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias}.userId -&gt; entitlemen0_.user_id
15:59:26.032 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias} -&gt; {synthetic-alias}
15:59:26.032 [Test worker] DEBUG o.h.hql.internal.ast.tree.DotNode - getDataType() : entitlementDefinitionId -&gt; org.hibernate.type.LongType@36c2b1d3
15:59:26.032 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias}.entitlementDefinitionId -&gt; entitlemen0_.entitlement_definition_id
15:59:26.032 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias} -&gt; {synthetic-alias}
15:59:26.032 [Test worker] DEBUG o.h.hql.internal.ast.tree.DotNode - getDataType() : status -&gt; org.hibernate.type.CustomType@59f54456
15:59:26.033 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias}.status -&gt; entitlemen0_.status
15:59:26.035 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias} -&gt; {synthetic-alias}
15:59:26.035 [Test worker] DEBUG o.h.hql.internal.ast.tree.DotNode - getDataType() : managedLifecycle -&gt; org.hibernate.type.BooleanType@5f7b530d
15:59:26.035 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias}.managedLifecycle -&gt; entitlemen0_.managed_lifecycle
15:59:26.036 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - select : finishing up [level=1, statement=select]
15:59:26.037 [Test worker] DEBUG o.h.hql.internal.ast.HqlSqlWalker - processQuery() :  ( SELECT ( FromClause{level=1} entitlement entitlemen0_ ) ( where ( and ( and ( and ( = ( entitlemen0_.user_id {synthetic-alias} userId ) ? ) ( = ( entitlemen0_.entitlement_definition_id {synthetic-alias} entitlementDefinitionId ) ? ) ) ( &gt;= ( entitlemen0_.status {synthetic-alias} status ) 0 ) ) ( = ( entitlemen0_.managed_lifecycle {synthetic-alias} managedLifecycle ) true ) ) ) )
15:59:26.041 [Test worker] DEBUG o.h.hql.internal.ast.HqlSqlWalker - Derived SELECT clause created.
15:59:26.048 [Test worker] DEBUG o.h.h.i.ast.util.JoinProcessor - Using FROM fragment [entitlement entitlemen0_]
15:59:26.048 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - select &gt;&gt; end [level=1, statement=select]
15:59:26.050 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (entitlement)
    +-[SELECT_CLAUSE] SelectClause: '{derived select clause}'
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'entitlemen0_.entitlement_id as entitlem1_0_' {FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=entitlement,tableAlias=entitlemen0_,origin=null,columns={,className=com.junbo.entitlement.db.entity.EntitlementEntity}}}
    |  \-[SQL_TOKEN] SqlFragment: 'entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_'
    +-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[], fromElementByTableAlias=[entitlemen0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
    |  \-[FROM_FRAGMENT] FromElement: 'entitlement entitlemen0_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=entitlement,tableAlias=entitlemen0_,origin=null,columns={,className=com.junbo.entitlement.db.entity.EntitlementEntity}}
    \-[WHERE] SqlNode: 'where'
       \-[AND] SqlNode: 'and'
          +-[AND] SqlNode: 'and'
          |  +-[AND] SqlNode: 'and'
          |  |  +-[EQ] BinaryLogicOperatorNode: '='
          |  |  |  +-[DOT] DotNode: 'entitlemen0_.user_id' {propertyName=userId,dereferenceType=ALL,propertyPath=userId,path={synthetic-alias}.userId,tableAlias=entitlemen0_,className=com.junbo.entitlement.db.entity.EntitlementEntity,classAlias=null}
          |  |  |  |  +-[IDENT] IdentNode: '{synthetic-alias}' {originalText={synthetic-alias}}
          |  |  |  |  \-[IDENT] IdentNode: 'userId' {originalText=userId}
          |  |  |  \-[NAMED_PARAM] ParameterNode: '?' {name=userId, expectedType=org.hibernate.type.LongType@36c2b1d3}
          |  |  \-[EQ] BinaryLogicOperatorNode: '='
          |  |     +-[DOT] DotNode: 'entitlemen0_.entitlement_definition_id' {propertyName=entitlementDefinitionId,dereferenceType=ALL,propertyPath=entitlementDefinitionId,path={synthetic-alias}.entitlementDefinitionId,tableAlias=entitlemen0_,className=com.junbo.entitlement.db.entity.EntitlementEntity,classAlias=null}
          |  |     |  +-[IDENT] IdentNode: '{synthetic-alias}' {originalText={synthetic-alias}}
          |  |     |  \-[IDENT] IdentNode: 'entitlementDefinitionId' {originalText=entitlementDefinitionId}
          |  |     \-[NAMED_PARAM] ParameterNode: '?' {name=definitionId, expectedType=org.hibernate.type.LongType@36c2b1d3}
          |  \-[GE] BinaryLogicOperatorNode: '&gt;='
          |     +-[DOT] DotNode: 'entitlemen0_.status' {propertyName=status,dereferenceType=ALL,propertyPath=status,path={synthetic-alias}.status,tableAlias=entitlemen0_,className=com.junbo.entitlement.db.entity.EntitlementEntity,classAlias=null}
          |     |  +-[IDENT] IdentNode: '{synthetic-alias}' {originalText={synthetic-alias}}
          |     |  \-[IDENT] IdentNode: 'status' {originalText=status}
          |     \-[NUM_INT] LiteralNode: '0'
          \-[EQ] BinaryLogicOperatorNode: '='
             +-[DOT] DotNode: 'entitlemen0_.managed_lifecycle' {propertyName=managedLifecycle,dereferenceType=ALL,propertyPath=managedLifecycle,path={synthetic-alias}.managedLifecycle,tableAlias=entitlemen0_,className=com.junbo.entitlement.db.entity.EntitlementEntity,classAlias=null}
             |  +-[IDENT] IdentNode: '{synthetic-alias}' {originalText={synthetic-alias}}
             |  \-[IDENT] IdentNode: 'managedLifecycle' {originalText=managedLifecycle}
             \-[TRUE] BooleanLiteralNode: 'true'

15:59:26.050 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
15:59:26.061 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - HQL: from com.junbo.entitlement.db.entity.EntitlementEntity where userId = (:userId) and entitlementDefinitionId = (:definitionId) and status &gt;= 0 and managedLifecycle = true
15:59:26.061 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - SQL: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.061 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
15:59:26.066 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.066 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (3 still available)
15:59:26.066 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (3 still available)
15:59:26.066 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266ED900000008]
15:59:26.066 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
15:59:26.066 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (3 still available), waiting if necessary
15:59:26.066 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@110ca871 - closing time: 1396252822480, now time: 1396252766066
15:59:26.067 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@110ca871 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.067 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@110ca871
15:59:26.067 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@110ca871
15:59:26.067 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@110ca871
15:59:26.067 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@110ca871
15:59:26.067 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@110ca871 to the accessible pool
15:59:26.067 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@110ca871 was in state IN_POOL, testing it
15:59:26.067 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@110ca871, skipping test
15:59:26.067 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@110ca871
15:59:26.067 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.067 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.067 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@110ca871 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266ED900000008], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:26.067 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@110ca871 belongs to a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@110ca871 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.067 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D0000014517266ED900000008 : 737072696E672D62746D0000014517266F7300000009]
15:59:26.067 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D0000014517266ED900000008 : 737072696E672D62746D0000014517266F7300000009]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@110ca871 with XID null&gt;
15:59:26.067 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@110ca871 with XID a Bitronix XID [737072696E672D62746D0000014517266ED900000008 : 737072696E672D62746D0000014517266F7300000009] with NOFLAGS
15:59:26.067 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@110ca871 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266ED900000008 : 737072696E672D62746D0000014517266F7300000009] with NOFLAGS
15:59:26.067 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@110ca871 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266ED900000008 : 737072696E672D62746D0000014517266F7300000009]] on a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@110ca871
15:59:26.067 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D0000014517266ED900000008] previously unknown to a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@110ca871, adding it to the resource's transactions list
15:59:26.068 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.092 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.092 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@110ca871 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5200fffb
15:59:26.092 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@110ca871
15:59:26.092 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@110ca871 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266ED900000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:26.092 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@110ca871
15:59:26.093 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@110ca871 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266ED900000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:26.093 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@110ca871
15:59:26.093 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@110ca871
15:59:26.093 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@110ca871 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266ED900000008], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:25 CST 2014)
15:59:26.093 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@110ca871
15:59:26.093 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@110ca871
15:59:26.093 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.093 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@110ca871 from the accessible pool
15:59:26.093 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@110ca871
15:59:26.093 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@110ca871
15:59:26.093 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@110ca871 to the inaccessible pool
15:59:26.093 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@110ca871
15:59:26.093 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.093 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
15:59:26.094 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.094 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 939737088, using strategy: org.hibernate.id.Assigned
15:59:26.095 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866482688088, using strategy: org.hibernate.id.Assigned
15:59:26.110 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.110 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.110 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.110 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@7c9b1fc4
15:59:26.110 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
15:59:26.110 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962527661
15:59:26.110 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@2c42bcc5
15:59:26.111 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.111 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (3 still available)
15:59:26.111 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (3 still available)
15:59:26.111 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.111 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
15:59:26.111 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (3 still available), waiting if necessary
15:59:26.111 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 - closing time: 1396252822917, now time: 1396252766111
15:59:26.111 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.111 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.111 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.111 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.111 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.111 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.111 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state IN_POOL, testing it
15:59:26.111 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883, skipping test
15:59:26.111 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.111 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.111 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.111 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.111 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@7429883 belongs to a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.111 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.112 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 with XID null&gt;
15:59:26.112 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B] with NOFLAGS
15:59:26.112 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B] with NOFLAGS
15:59:26.112 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]] on a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.112 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D0000014517266F9C0000000A] previously unknown to a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883, adding it to the resource's transactions list
15:59:26.112 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.115 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.116 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.116 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.116 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.116 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.116 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.116 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.116 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.116 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.116 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.116 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.116 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.116 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.116 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.116 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.116 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.117 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.117 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.117 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
15:59:26.117 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.117 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 939835392, using strategy: org.hibernate.id.Assigned
15:59:26.118 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866483712392, using strategy: org.hibernate.id.Assigned
15:59:26.118 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.118 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.118 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.118 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.118 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.119 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 2 objects
15:59:26.119 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.119 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.120 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.120 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939835392, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, group=TEST, offerId=939802624}
15:59:26.120 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.146 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.146 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.146 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.146 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.146 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.146 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.146 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.146 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.146 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.146 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.146 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.146 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.146 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.146 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.146 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.146 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.147 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.147 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.147 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.147 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.147 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.147 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.147 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.147 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.168 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.170 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.171 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.171 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.171 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.174 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.177 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.177 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.177 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.177 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.177 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.177 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.177 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.177 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.177 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.178 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.178 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.178 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.178 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.178 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.178 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.178 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.178 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.178 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.178 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.178 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.178 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.178 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.178 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.178 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.178 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.178 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.178 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.178 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.178 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.178 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.178 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.178 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.179 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.179 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.179 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.179 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.179 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.179 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.179 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.179 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.179 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.179 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.180 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.181 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.182 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.182 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.182 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.182 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.182 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.182 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.182 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.182 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.182 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.182 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.182 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.182 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.182 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.182 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.183 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.183 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.183 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.183 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.183 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 939933696, using strategy: org.hibernate.id.Assigned
15:59:26.184 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866484736696, using strategy: org.hibernate.id.Assigned
15:59:26.184 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.184 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.184 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.185 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.185 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.185 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 4 objects
15:59:26.185 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.185 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.186 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.186 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939933696, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, group=TEST, offerId=939900928}
15:59:26.186 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939835392, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, group=TEST, offerId=939802624}
15:59:26.186 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.186 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.187 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.187 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.187 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.187 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.187 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.187 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.187 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.187 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.187 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.187 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.187 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.187 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.187 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.187 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.187 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.188 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.188 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.188 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.188 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.188 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.188 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.188 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.188 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.188 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.190 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.191 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.191 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.191 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.192 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.193 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.195 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.195 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.195 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.196 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.196 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.196 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.196 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.196 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.196 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.196 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.196 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.196 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.196 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.196 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.196 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.196 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.196 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.196 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.196 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.197 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.197 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.197 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.197 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.197 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.197 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.197 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.197 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.197 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.197 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.197 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.197 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.197 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.197 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.197 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.197 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.197 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.197 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.197 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.198 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.198 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.198 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.198 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.198 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.200 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.200 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.200 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.200 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.200 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.200 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.200 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.200 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.200 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.200 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.200 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.200 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.200 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.200 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.200 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.200 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.200 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.201 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.201 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.201 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 939999232, using strategy: org.hibernate.id.Assigned
15:59:26.201 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866485760232, using strategy: org.hibernate.id.Assigned
15:59:26.202 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.202 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.202 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.202 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.202 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.210 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 6 objects
15:59:26.210 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.210 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.211 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.211 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939999232, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=620904512, entitlementHistoryId=740155866485760232}
15:59:26.211 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939999232, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, group=TEST, offerId=620904512}
15:59:26.211 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939933696, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, group=TEST, offerId=939900928}
15:59:26.212 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939835392, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, group=TEST, offerId=939802624}
15:59:26.212 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.212 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.212 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.212 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.212 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.212 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.212 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.212 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.213 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.213 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.213 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.213 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.213 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.213 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.213 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.213 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.213 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.213 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.214 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.214 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.214 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.214 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.214 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.214 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.214 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.214 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.216 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.217 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.217 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.218 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.218 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.219 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.220 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.220 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.220 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.220 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.220 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.221 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.221 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.221 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.221 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.221 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.221 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.221 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.221 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.221 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.221 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.221 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.221 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.221 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.221 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.222 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.222 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.222 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.222 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.222 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.222 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.222 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.222 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.222 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.222 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.222 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.222 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.222 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.222 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.222 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.222 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.222 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.222 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.223 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.223 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.223 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.223 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.223 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.223 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.225 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.225 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.225 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.225 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.225 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.225 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.225 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.225 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.225 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.225 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.225 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.225 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.225 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.225 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.226 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.226 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.226 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.226 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.226 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.226 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 940064768, using strategy: org.hibernate.id.Assigned
15:59:26.227 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866486784768, using strategy: org.hibernate.id.Assigned
15:59:26.227 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.227 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.227 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.227 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.227 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.228 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 8 objects
15:59:26.228 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.228 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.228 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940064768, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940032000, entitlementHistoryId=740155866486784768}
15:59:26.229 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939999232, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, group=TEST, offerId=620904512}
15:59:26.229 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939933696, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, group=TEST, offerId=939900928}
15:59:26.229 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.229 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.229 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.229 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939999232, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=620904512, entitlementHistoryId=740155866485760232}
15:59:26.230 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939835392, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, group=TEST, offerId=939802624}
15:59:26.230 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.230 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.230 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.230 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.230 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.230 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.230 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.230 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.230 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.230 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.230 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.230 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.231 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.231 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.231 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.231 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.231 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.231 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.231 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.231 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.231 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.231 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.231 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.231 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.231 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.232 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.234 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.235 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.235 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.235 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.236 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.238 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementUnregisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D0000014517266ED900000008
15:59:26.238 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D0000014517266F9C0000000A
15:59:26.239 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.239 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.239 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.239 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.239 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.239 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.239 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.239 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.239 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.239 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.239 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.239 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.240 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.240 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.240 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.240 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.240 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.240 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.240 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.240 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.240 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.240 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.240 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.240 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.240 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.240 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.240 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.240 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.240 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.240 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.240 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.241 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.241 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.241 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.241 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.241 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.241 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.241 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.241 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.241 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.241 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.241 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.242 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.245 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.245 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.245 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.245 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.245 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.246 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.246 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.246 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.246 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.246 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.246 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.246 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.246 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.246 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.246 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.246 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.246 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.246 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.247 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.247 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 940163072, using strategy: org.hibernate.id.Assigned
15:59:26.248 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866487808072, using strategy: org.hibernate.id.Assigned
15:59:26.248 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.248 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.248 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.249 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.249 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.250 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 10 objects
15:59:26.250 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.250 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.250 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940163072, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, group=TEST, offerId=940130304}
15:59:26.251 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940064768, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940032000, entitlementHistoryId=740155866486784768}
15:59:26.251 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939999232, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, group=TEST, offerId=620904512}
15:59:26.251 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939933696, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, group=TEST, offerId=939900928}
15:59:26.251 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.251 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.252 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.252 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939999232, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=620904512, entitlementHistoryId=740155866485760232}
15:59:26.252 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939835392, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, group=TEST, offerId=939802624}
15:59:26.252 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.252 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.253 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.253 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.253 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.253 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.253 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.253 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.253 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.253 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.253 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.253 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.253 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.253 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.253 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.253 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.253 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.253 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.253 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.253 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.254 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.254 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.254 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.254 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.254 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.254 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.255 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.260 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.260 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.260 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.261 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.261 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.263 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.263 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.263 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.263 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.263 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.264 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.264 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.264 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.264 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.264 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.264 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.264 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.264 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.264 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.264 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.264 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.264 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.264 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.264 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.264 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.264 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.265 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.265 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.265 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.265 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.265 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.265 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.265 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.265 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.265 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.265 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.265 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.265 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.265 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.265 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.265 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.265 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.265 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.265 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.265 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.265 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.266 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.266 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.268 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.268 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.268 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.268 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.268 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.268 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.268 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.268 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.268 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.268 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.268 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.268 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.269 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.269 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.269 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.269 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.269 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.269 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.269 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.269 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 940244992, using strategy: org.hibernate.id.Assigned
15:59:26.270 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866488832992, using strategy: org.hibernate.id.Assigned
15:59:26.270 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.270 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.270 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.271 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.271 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.272 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 12 objects
15:59:26.272 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.272 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.272 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940163072, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, group=TEST, offerId=940130304}
15:59:26.273 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940064768, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940032000, entitlementHistoryId=740155866486784768}
15:59:26.273 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940244992, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940212224, entitlementHistoryId=740155866488832992}
15:59:26.273 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939999232, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, group=TEST, offerId=620904512}
15:59:26.273 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.273 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939933696, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, group=TEST, offerId=939900928}
15:59:26.274 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.274 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.274 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.275 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939999232, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=620904512, entitlementHistoryId=740155866485760232}
15:59:26.275 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939835392, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, group=TEST, offerId=939802624}
15:59:26.275 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.275 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.275 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.275 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.276 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.276 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.276 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.276 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.276 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.276 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.276 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.276 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.276 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.276 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.276 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.276 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.277 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.277 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.277 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.277 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.277 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.277 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.277 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.277 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.277 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.277 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.278 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.283 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.284 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.284 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.284 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.285 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.287 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.287 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.287 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.287 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.287 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.287 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.287 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.287 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.287 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.287 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.287 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.287 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.287 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.287 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.287 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.287 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.287 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.288 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.289 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.289 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.289 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.289 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.289 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.289 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.289 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.289 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.289 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.289 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.289 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.289 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.289 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.289 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.289 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.289 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.289 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.290 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.290 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.290 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.291 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.291 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.291 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.291 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.291 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.295 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.296 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.296 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.296 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.296 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.296 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.296 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.296 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.296 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.296 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.296 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.296 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.296 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.296 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.296 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.296 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.296 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.296 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.296 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.297 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 940261376, using strategy: org.hibernate.id.Assigned
15:59:26.297 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866489856376, using strategy: org.hibernate.id.Assigned
15:59:26.298 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.298 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.298 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.298 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.298 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.300 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 14 objects
15:59:26.300 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.300 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.300 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940064768, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940032000, entitlementHistoryId=740155866486784768}
15:59:26.300 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939999232, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, group=TEST, offerId=620904512}
15:59:26.301 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940244992, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940212224, entitlementHistoryId=740155866488832992}
15:59:26.301 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.301 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940261376, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, group=TEST, offerId=621019200}
15:59:26.301 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939999232, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=620904512, entitlementHistoryId=740155866485760232}
15:59:26.301 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939835392, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, group=TEST, offerId=939802624}
15:59:26.302 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.302 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940163072, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, group=TEST, offerId=940130304}
15:59:26.302 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939933696, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, group=TEST, offerId=939900928}
15:59:26.302 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.302 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.303 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.303 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.303 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.303 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.303 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.303 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.304 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.304 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.304 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.304 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.304 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.304 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.304 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.304 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.304 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.304 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.304 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.304 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.304 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.304 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.304 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.304 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.305 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.307 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.307 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.307 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.307 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.308 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.310 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.310 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.310 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.310 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.311 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.312 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.312 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.312 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.312 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.312 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.312 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.312 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.312 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.312 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.313 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.313 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.313 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.313 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.313 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.313 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.313 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.313 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.313 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.313 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.313 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.313 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.313 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.313 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.314 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.314 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.314 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.314 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.314 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.314 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.314 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.314 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.314 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.314 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.314 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.316 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.316 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.316 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.316 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.316 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.316 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.316 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.316 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.316 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.316 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.316 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.316 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.316 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.316 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.317 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.317 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.317 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.317 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.317 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.317 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 940326912, using strategy: org.hibernate.id.Assigned
15:59:26.318 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866490880912, using strategy: org.hibernate.id.Assigned
15:59:26.318 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.318 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.318 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.319 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.319 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.320 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 16 objects
15:59:26.320 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.321 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.321 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940064768, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940032000, entitlementHistoryId=740155866486784768}
15:59:26.321 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939999232, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, group=TEST, offerId=620904512}
15:59:26.321 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940244992, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940212224, entitlementHistoryId=740155866488832992}
15:59:26.321 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.321 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940261376, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, group=TEST, offerId=621019200}
15:59:26.322 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939999232, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=620904512, entitlementHistoryId=740155866485760232}
15:59:26.322 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939835392, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, group=TEST, offerId=939802624}
15:59:26.322 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.322 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940163072, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, group=TEST, offerId=940130304}
15:59:26.322 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939933696, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, group=TEST, offerId=939900928}
15:59:26.323 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.323 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.323 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.323 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.323 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940277760, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940326912, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940310528, userId=939753472, statusReason=null, group=TEST, offerId=940294144}
15:59:26.323 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940277760, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940326912, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940310528, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940294144, entitlementHistoryId=740155866490880912}
15:59:26.324 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.324 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.324 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.324 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.324 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.324 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.324 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.324 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.324 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.324 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.324 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.324 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.324 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.324 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.324 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.325 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.325 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.325 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.325 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.325 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.325 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.325 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.325 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.325 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.325 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.328 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.330 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.331 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.331 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.331 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.332 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.334 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.335 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.335 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.335 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.335 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.335 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.335 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.335 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.335 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.335 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.335 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.335 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.335 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.335 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.335 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.335 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.335 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.335 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.335 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.336 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.336 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.336 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.336 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.336 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.336 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.336 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.336 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.336 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.336 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.336 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.336 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.336 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.336 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.336 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.336 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.336 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.336 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.336 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.336 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.336 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.336 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.337 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.337 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.341 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.341 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.341 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.341 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.341 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.342 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.342 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.342 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.342 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.342 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.342 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.342 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.342 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.342 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.342 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.342 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.342 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.342 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.342 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.342 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 940392448, using strategy: org.hibernate.id.Assigned
15:59:26.343 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866491904448, using strategy: org.hibernate.id.Assigned
15:59:26.344 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.344 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.344 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.344 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.344 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.346 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 18 objects
15:59:26.346 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.346 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.347 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940392448, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621101120, entitlementHistoryId=740155866491904448}
15:59:26.347 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940064768, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940032000, entitlementHistoryId=740155866486784768}
15:59:26.347 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939999232, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, group=TEST, offerId=620904512}
15:59:26.347 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940244992, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940212224, entitlementHistoryId=740155866488832992}
15:59:26.348 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.348 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940261376, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, group=TEST, offerId=621019200}
15:59:26.348 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939999232, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=620904512, entitlementHistoryId=740155866485760232}
15:59:26.348 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939835392, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, group=TEST, offerId=939802624}
15:59:26.348 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940392448, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, group=TEST, offerId=621101120}
15:59:26.349 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.349 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940163072, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, group=TEST, offerId=940130304}
15:59:26.349 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939933696, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, group=TEST, offerId=939900928}
15:59:26.349 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.349 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.350 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.350 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.350 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940277760, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940326912, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940310528, userId=939753472, statusReason=null, group=TEST, offerId=940294144}
15:59:26.350 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940277760, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940326912, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940310528, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940294144, entitlementHistoryId=740155866490880912}
15:59:26.350 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.351 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.351 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.351 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.351 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.351 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.351 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.351 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.351 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.351 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.351 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.351 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.351 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.351 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.351 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.351 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.351 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.351 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.351 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.352 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.352 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.352 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.352 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.352 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.352 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.353 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.354 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.355 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.355 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.355 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.356 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.357 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.357 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.357 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.357 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.358 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.358 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.358 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.358 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.358 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.358 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.358 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.358 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.358 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.358 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.358 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.358 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.358 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.358 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.358 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.358 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.358 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.358 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.359 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.359 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.359 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.359 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.359 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.359 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.359 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.359 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.359 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.359 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.359 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.359 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.359 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.359 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.359 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.359 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.359 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.360 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.360 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.360 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.360 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.362 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.362 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.362 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.362 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.362 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.362 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.362 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.362 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.362 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.362 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.362 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.363 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.363 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.363 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.363 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.363 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.363 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.363 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.363 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.363 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 940441600, using strategy: org.hibernate.id.Assigned
15:59:26.364 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866492928600, using strategy: org.hibernate.id.Assigned
15:59:26.365 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.365 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.365 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.365 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.365 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.367 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 20 objects
15:59:26.367 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.367 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.367 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940392448, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621101120, entitlementHistoryId=740155866491904448}
15:59:26.367 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940064768, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940032000, entitlementHistoryId=740155866486784768}
15:59:26.367 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939999232, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, group=TEST, offerId=620904512}
15:59:26.368 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940244992, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940212224, entitlementHistoryId=740155866488832992}
15:59:26.368 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.368 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940261376, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, group=TEST, offerId=621019200}
15:59:26.368 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939999232, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=620904512, entitlementHistoryId=740155866485760232}
15:59:26.368 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940408832, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940441600, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621150272, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940425216, entitlementHistoryId=740155866492928600}
15:59:26.369 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939835392, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, group=TEST, offerId=939802624}
15:59:26.369 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940392448, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, group=TEST, offerId=621101120}
15:59:26.369 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.369 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940408832, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940441600, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621150272, userId=939753472, statusReason=null, group=TEST, offerId=940425216}
15:59:26.369 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940163072, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, group=TEST, offerId=940130304}
15:59:26.369 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939933696, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, group=TEST, offerId=939900928}
15:59:26.370 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.370 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.370 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.370 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.370 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940277760, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940326912, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940310528, userId=939753472, statusReason=null, group=TEST, offerId=940294144}
15:59:26.371 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940277760, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940326912, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940310528, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940294144, entitlementHistoryId=740155866490880912}
15:59:26.371 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.371 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.371 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.371 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.371 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.371 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.371 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.371 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.371 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.371 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.371 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.371 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.371 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.371 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.371 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.372 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.372 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.372 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.372 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.372 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.372 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.372 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.372 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.372 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.372 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.374 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.375 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.375 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.375 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.376 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.376 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.378 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.378 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.378 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.378 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.379 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.379 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.379 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.379 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.379 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.379 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.379 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.379 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.379 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.380 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.380 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.380 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.380 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.380 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.380 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.380 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.380 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.380 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.380 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.380 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.380 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.380 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.380 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.380 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.380 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.380 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.380 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.380 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.380 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.381 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.381 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.381 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.381 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.381 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.381 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.381 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.381 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.381 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.381 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.383 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.383 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.383 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.383 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.383 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.383 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.383 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.383 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.383 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.383 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.383 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.383 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.383 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.383 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.384 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.384 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.384 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.384 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.384 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.384 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 940490752, using strategy: org.hibernate.id.Assigned
15:59:26.385 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866493952752, using strategy: org.hibernate.id.Assigned
15:59:26.385 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.385 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.386 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.386 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.386 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.388 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 22 objects
15:59:26.388 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.388 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.388 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940392448, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621101120, entitlementHistoryId=740155866491904448}
15:59:26.388 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940064768, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940032000, entitlementHistoryId=740155866486784768}
15:59:26.388 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621183040, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940490752, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940474368, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621199424, entitlementHistoryId=740155866493952752}
15:59:26.389 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939999232, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, group=TEST, offerId=620904512}
15:59:26.389 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940244992, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940212224, entitlementHistoryId=740155866488832992}
15:59:26.389 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621183040, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940490752, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940474368, userId=939753472, statusReason=null, group=TEST, offerId=621199424}
15:59:26.389 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.389 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940261376, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, group=TEST, offerId=621019200}
15:59:26.389 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939999232, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=620904512, entitlementHistoryId=740155866485760232}
15:59:26.390 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940408832, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940441600, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621150272, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940425216, entitlementHistoryId=740155866492928600}
15:59:26.390 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939835392, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, group=TEST, offerId=939802624}
15:59:26.390 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940392448, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, group=TEST, offerId=621101120}
15:59:26.390 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.391 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940408832, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940441600, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621150272, userId=939753472, statusReason=null, group=TEST, offerId=940425216}
15:59:26.391 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940163072, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, group=TEST, offerId=940130304}
15:59:26.391 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939933696, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, group=TEST, offerId=939900928}
15:59:26.391 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.391 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.392 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.392 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.392 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940277760, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940326912, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940310528, userId=939753472, statusReason=null, group=TEST, offerId=940294144}
15:59:26.392 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.392 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.392 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.392 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.392 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.392 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.392 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.392 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.392 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.393 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.393 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.393 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.393 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.393 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.393 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.393 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.393 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.393 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.393 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.393 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.393 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.393 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.393 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.393 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.393 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.393 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.394 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.395 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.395 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.395 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.396 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.396 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.398 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.398 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.398 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.398 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.398 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.398 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.398 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.398 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.398 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.398 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.398 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.398 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.398 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.398 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.398 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.398 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.398 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.399 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.399 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.399 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.399 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.399 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.399 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.399 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.399 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.399 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.399 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.399 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.399 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.399 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.399 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.399 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.399 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.399 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.399 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.400 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.400 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.400 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.400 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.400 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.400 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.400 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.400 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.401 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.401 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.401 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.401 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.401 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.402 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.402 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.402 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.402 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.402 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.402 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.402 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.402 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.402 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.402 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.402 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.402 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.402 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.402 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.403 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 940556288, using strategy: org.hibernate.id.Assigned
15:59:26.403 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866494976288, using strategy: org.hibernate.id.Assigned
15:59:26.404 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.404 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.404 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.404 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.405 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.407 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 24 objects
15:59:26.407 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.407 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.407 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940392448, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621101120, entitlementHistoryId=740155866491904448}
15:59:26.408 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940064768, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940032000, entitlementHistoryId=740155866486784768}
15:59:26.408 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621183040, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940490752, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940474368, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621199424, entitlementHistoryId=740155866493952752}
15:59:26.408 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939999232, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, group=TEST, offerId=620904512}
15:59:26.408 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940244992, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940212224, entitlementHistoryId=740155866488832992}
15:59:26.408 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621183040, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940490752, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940474368, userId=939753472, statusReason=null, group=TEST, offerId=621199424}
15:59:26.409 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.409 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.409 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940261376, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, group=TEST, offerId=621019200}
15:59:26.409 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.409 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939999232, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=620904512, entitlementHistoryId=740155866485760232}
15:59:26.410 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940408832, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940441600, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621150272, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940425216, entitlementHistoryId=740155866492928600}
15:59:26.410 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939835392, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, group=TEST, offerId=939802624}
15:59:26.410 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940392448, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, group=TEST, offerId=621101120}
15:59:26.410 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.410 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940408832, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940441600, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621150272, userId=939753472, statusReason=null, group=TEST, offerId=940425216}
15:59:26.410 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940163072, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, group=TEST, offerId=940130304}
15:59:26.410 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939933696, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, group=TEST, offerId=939900928}
15:59:26.411 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.411 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.411 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.411 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.411 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.411 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.411 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.411 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.411 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.411 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.412 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.412 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.412 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.412 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.412 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.412 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.412 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.412 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.412 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.412 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.412 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.412 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.412 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.412 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.412 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.412 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.412 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.412 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.413 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.413 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.415 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.415 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.415 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.415 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.416 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.417 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.417 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.417 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.417 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.417 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.417 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.417 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.418 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.418 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.418 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.418 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.418 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.418 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.418 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.418 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.418 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.418 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.418 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.418 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.418 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.418 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.418 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.418 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.418 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.418 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.418 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.418 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.419 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.419 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.419 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.419 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.419 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.419 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.419 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.419 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.419 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.419 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.419 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.419 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.419 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.419 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.419 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.419 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.420 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.421 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.421 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.421 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.421 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.421 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.421 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.421 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.421 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.421 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.421 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.421 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.421 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.421 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.421 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.421 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.421 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.422 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.422 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.422 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 940589056, using strategy: org.hibernate.id.Assigned
15:59:26.423 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866496000056, using strategy: org.hibernate.id.Assigned
15:59:26.423 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.423 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.423 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.423 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.423 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.425 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 26 objects
15:59:26.425 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.425 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.425 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.426 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940589056, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621281344, entitlementHistoryId=740155866496000056}
15:59:26.426 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940244992, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940212224, entitlementHistoryId=740155866488832992}
15:59:26.426 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.426 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.426 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939835392, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, group=TEST, offerId=939802624}
15:59:26.426 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.427 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940392448, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, group=TEST, offerId=621101120}
15:59:26.427 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.427 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.427 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.427 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.427 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940277760, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940326912, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940310528, userId=939753472, statusReason=null, group=TEST, offerId=940294144}
15:59:26.427 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940392448, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621101120, entitlementHistoryId=740155866491904448}
15:59:26.428 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940064768, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940032000, entitlementHistoryId=740155866486784768}
15:59:26.428 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621183040, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940490752, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940474368, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621199424, entitlementHistoryId=740155866493952752}
15:59:26.428 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939999232, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, group=TEST, offerId=620904512}
15:59:26.428 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.428 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621183040, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940490752, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940474368, userId=939753472, statusReason=null, group=TEST, offerId=621199424}
15:59:26.428 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940261376, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, group=TEST, offerId=621019200}
15:59:26.428 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939999232, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=620904512, entitlementHistoryId=740155866485760232}
15:59:26.428 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.429 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.429 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.429 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.429 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.429 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.429 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.429 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.429 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.429 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.429 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.429 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.429 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.429 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.429 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.429 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.430 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.430 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.430 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.430 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.430 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.430 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.430 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.430 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.430 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.430 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.431 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.432 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.432 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.432 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.433 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.433 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.435 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.435 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.435 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.435 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.435 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.435 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.435 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.435 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.435 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.435 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.435 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.435 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.436 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.436 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.436 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.436 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.436 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.436 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.436 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.436 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.436 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.436 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.436 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.436 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.436 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.437 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.437 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.437 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.437 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.437 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.437 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.437 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.437 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.437 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.437 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.437 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.437 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.437 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.437 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.437 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.437 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.438 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.438 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.439 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.439 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.439 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.439 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.439 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.439 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.439 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.439 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.439 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.439 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.439 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.439 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.439 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.440 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.440 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.440 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.440 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.440 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.440 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.440 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 940638208, using strategy: org.hibernate.id.Assigned
15:59:26.441 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866497024208, using strategy: org.hibernate.id.Assigned
15:59:26.441 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.441 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.441 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.442 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.442 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.444 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 28 objects
15:59:26.444 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.444 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.444 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.445 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940589056, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621281344, entitlementHistoryId=740155866496000056}
15:59:26.445 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940244992, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940212224, entitlementHistoryId=740155866488832992}
15:59:26.445 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.445 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.445 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939835392, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, group=TEST, offerId=939802624}
15:59:26.445 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.446 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940392448, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, group=TEST, offerId=621101120}
15:59:26.446 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.446 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.446 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.446 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.446 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.447 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940277760, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940326912, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940310528, userId=939753472, statusReason=null, group=TEST, offerId=940294144}
15:59:26.447 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:26.447 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940392448, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621101120, entitlementHistoryId=740155866491904448}
15:59:26.447 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940064768, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940032000, entitlementHistoryId=740155866486784768}
15:59:26.447 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621183040, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940490752, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940474368, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621199424, entitlementHistoryId=740155866493952752}
15:59:26.447 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939999232, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, group=TEST, offerId=620904512}
15:59:26.448 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.448 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621183040, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940490752, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940474368, userId=939753472, statusReason=null, group=TEST, offerId=621199424}
15:59:26.448 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.448 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.448 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.448 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.448 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.448 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.448 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.448 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.449 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.449 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.449 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.449 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.449 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.449 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.449 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.449 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.449 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.449 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.449 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.449 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.449 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.449 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.449 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.449 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.449 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.449 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.450 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.452 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.452 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.452 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.452 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.453 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.454 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.455 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.455 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.455 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.455 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.455 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.455 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.455 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.455 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.455 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.455 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.455 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.455 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.455 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.455 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.455 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.455 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.455 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.455 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.456 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.456 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.456 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.456 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.456 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.456 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.456 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.456 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.456 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.456 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.456 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.456 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.456 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.456 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.457 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.457 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.457 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.457 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.457 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.457 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.457 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.457 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.457 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.458 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.459 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.459 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.460 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.460 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.460 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.460 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.460 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.460 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.460 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.460 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.460 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.460 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.460 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.460 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.460 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.460 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.460 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.460 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.461 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.461 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 940687360, using strategy: org.hibernate.id.Assigned
15:59:26.461 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866498048360, using strategy: org.hibernate.id.Assigned
15:59:26.462 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.462 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.462 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.462 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.462 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.464 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 30 objects
15:59:26.464 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.464 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.464 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.464 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940589056, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621281344, entitlementHistoryId=740155866496000056}
15:59:26.465 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940244992, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940212224, entitlementHistoryId=740155866488832992}
15:59:26.465 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.465 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.465 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939835392, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, group=TEST, offerId=939802624}
15:59:26.465 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.465 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940392448, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, group=TEST, offerId=621101120}
15:59:26.466 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.466 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.466 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.466 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.466 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.466 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940277760, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940326912, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940310528, userId=939753472, statusReason=null, group=TEST, offerId=940294144}
15:59:26.466 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:26.467 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940392448, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621101120, entitlementHistoryId=740155866491904448}
15:59:26.467 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940064768, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940032000, entitlementHistoryId=740155866486784768}
15:59:26.467 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621183040, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940490752, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940474368, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621199424, entitlementHistoryId=740155866493952752}
15:59:26.467 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939999232, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, group=TEST, offerId=620904512}
15:59:26.467 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.467 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621183040, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940490752, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940474368, userId=939753472, statusReason=null, group=TEST, offerId=621199424}
15:59:26.467 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.468 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.468 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.468 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.468 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.468 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.468 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.468 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.468 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.468 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.468 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.468 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.468 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.468 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.468 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.468 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.468 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.468 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.469 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.469 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.469 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.469 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.469 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.469 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.469 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.469 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.470 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.472 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.472 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.472 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.472 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.473 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.474 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.474 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.474 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.474 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.474 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.475 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.475 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.475 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.475 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.475 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.475 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.475 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.475 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.475 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.475 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.475 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.475 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.475 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.475 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.475 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.475 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.475 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.475 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.475 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.475 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.476 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.476 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.476 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.476 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.476 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.476 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.476 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.476 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.476 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.476 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.476 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.476 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.476 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.476 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.476 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.476 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.476 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.476 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.478 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.478 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.478 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.478 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.478 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.478 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.478 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.478 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.479 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.479 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.479 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.479 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.479 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.479 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.479 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.479 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.479 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.479 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.479 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.479 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 940736512, using strategy: org.hibernate.id.Assigned
15:59:26.480 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866499072512, using strategy: org.hibernate.id.Assigned
15:59:26.480 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.480 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.480 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.481 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.481 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.483 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 32 objects
15:59:26.483 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.483 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.483 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.484 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940589056, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621281344, entitlementHistoryId=740155866496000056}
15:59:26.484 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940244992, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940212224, entitlementHistoryId=740155866488832992}
15:59:26.484 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.484 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.484 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939835392, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, group=TEST, offerId=939802624}
15:59:26.484 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.485 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940392448, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, group=TEST, offerId=621101120}
15:59:26.485 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.485 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.485 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.485 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.485 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.485 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940277760, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940326912, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940310528, userId=939753472, statusReason=null, group=TEST, offerId=940294144}
15:59:26.486 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:26.486 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940392448, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621101120, entitlementHistoryId=740155866491904448}
15:59:26.486 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940064768, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940032000, entitlementHistoryId=740155866486784768}
15:59:26.486 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621183040, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940490752, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940474368, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621199424, entitlementHistoryId=740155866493952752}
15:59:26.486 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939999232, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, group=TEST, offerId=620904512}
15:59:26.486 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.486 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621183040, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940490752, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940474368, userId=939753472, statusReason=null, group=TEST, offerId=621199424}
15:59:26.487 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.487 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.487 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.487 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.487 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.487 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.487 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.487 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.487 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.487 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.487 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.487 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.487 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.487 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.487 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.487 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.488 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.488 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.490 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.490 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.490 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.490 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.490 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.490 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.490 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.491 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.491 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.494 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.494 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.494 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.494 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.495 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.496 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.497 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.497 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.497 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.497 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.497 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.497 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.497 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.497 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.497 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.497 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.497 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.497 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.497 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.497 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.497 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.497 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.497 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.497 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.498 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.498 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.498 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.498 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.498 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.498 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.498 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.498 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.498 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.498 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.498 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.498 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.498 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.498 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.498 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.498 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.498 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.498 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.498 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.498 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.498 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.499 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.499 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.499 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.500 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.501 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.501 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.501 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.501 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.501 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.501 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.501 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.501 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.501 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.501 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.501 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.501 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.501 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.501 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.501 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.501 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.501 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.501 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.502 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 940802048, using strategy: org.hibernate.id.Assigned
15:59:26.502 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866500096048, using strategy: org.hibernate.id.Assigned
15:59:26.503 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.503 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.503 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.503 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.503 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.505 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 34 objects
15:59:26.505 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.505 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.506 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.506 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940589056, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621281344, entitlementHistoryId=740155866496000056}
15:59:26.506 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940244992, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940212224, entitlementHistoryId=740155866488832992}
15:59:26.506 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.506 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.506 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939835392, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, group=TEST, offerId=939802624}
15:59:26.507 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.507 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940392448, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, group=TEST, offerId=621101120}
15:59:26.507 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.507 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.507 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.507 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.507 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.507 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940277760, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940326912, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940310528, userId=939753472, statusReason=null, group=TEST, offerId=940294144}
15:59:26.508 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:26.508 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940392448, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621101120, entitlementHistoryId=740155866491904448}
15:59:26.508 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940064768, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940032000, entitlementHistoryId=740155866486784768}
15:59:26.508 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621183040, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940490752, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940474368, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621199424, entitlementHistoryId=740155866493952752}
15:59:26.508 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939999232, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, group=TEST, offerId=620904512}
15:59:26.508 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.508 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621183040, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940490752, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940474368, userId=939753472, statusReason=null, group=TEST, offerId=621199424}
15:59:26.508 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.509 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.509 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.509 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.509 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.509 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.509 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.509 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.509 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.509 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.509 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.509 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.509 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.509 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.509 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.509 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.509 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.509 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.509 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.510 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.510 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.510 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.510 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.510 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.510 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.510 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.511 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.512 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.512 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.512 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.512 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.513 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.514 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.514 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.514 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.514 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.514 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.514 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.514 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.514 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.514 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.515 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.515 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.515 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.515 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.515 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.515 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.515 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.515 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.515 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.515 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.515 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.515 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.515 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.515 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.515 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.515 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.515 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.515 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.515 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.515 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.515 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.515 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.516 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.516 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.516 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.516 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.516 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.516 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.516 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.516 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.516 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.517 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.517 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.517 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.518 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.518 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.518 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.518 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.518 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.518 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.518 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.518 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.518 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.518 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.518 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.518 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.519 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.519 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.519 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.519 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.519 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.519 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.519 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.520 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 940867584, using strategy: org.hibernate.id.Assigned
15:59:26.520 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866501120584, using strategy: org.hibernate.id.Assigned
15:59:26.521 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.521 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.521 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.521 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.521 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.523 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 36 objects
15:59:26.523 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.523 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.523 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940851200, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940867584, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621510720, userId=939753472, statusReason=null, group=TEST, offerId=621494336}
15:59:26.523 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.523 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940589056, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621281344, entitlementHistoryId=740155866496000056}
15:59:26.523 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940244992, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940212224, entitlementHistoryId=740155866488832992}
15:59:26.524 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.524 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.524 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939835392, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, group=TEST, offerId=939802624}
15:59:26.524 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.524 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940392448, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, group=TEST, offerId=621101120}
15:59:26.524 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940851200, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940867584, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621510720, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621494336, entitlementHistoryId=740155866501120584}
15:59:26.524 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.525 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.525 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.525 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.525 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.525 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940277760, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940326912, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940310528, userId=939753472, statusReason=null, group=TEST, offerId=940294144}
15:59:26.525 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:26.525 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940392448, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621101120, entitlementHistoryId=740155866491904448}
15:59:26.525 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940064768, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940032000, entitlementHistoryId=740155866486784768}
15:59:26.526 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621183040, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940490752, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940474368, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621199424, entitlementHistoryId=740155866493952752}
15:59:26.526 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939966464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939999232, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939982848, userId=939753472, statusReason=null, group=TEST, offerId=620904512}
15:59:26.526 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.526 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.526 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.526 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.526 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.526 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.526 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.526 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.527 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.527 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.527 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.527 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.527 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.527 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.527 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.527 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.527 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.527 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.527 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.527 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.527 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.527 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.527 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.527 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.527 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.527 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.528 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.530 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.530 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.530 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.530 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.531 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.532 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.532 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.532 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.532 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.532 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.532 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.532 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.532 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.533 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.533 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.533 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.533 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.533 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.533 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.533 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.533 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.533 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.533 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.533 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.533 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.533 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.533 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.533 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.533 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.533 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.533 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.534 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.534 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.534 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.534 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.534 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.534 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.534 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.534 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.534 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.534 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.534 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.534 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.534 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.534 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.534 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.534 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.534 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.536 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.536 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.536 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.536 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.536 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.536 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.536 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.536 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.536 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.536 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.536 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.536 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.536 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.536 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.536 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.536 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.537 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.537 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.537 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.537 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 940933120, using strategy: org.hibernate.id.Assigned
15:59:26.538 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866502144120, using strategy: org.hibernate.id.Assigned
15:59:26.538 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.538 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.538 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.538 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.539 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.541 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 38 objects
15:59:26.541 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.541 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.541 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940851200, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940867584, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621510720, userId=939753472, statusReason=null, group=TEST, offerId=621494336}
15:59:26.541 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.541 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940589056, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621281344, entitlementHistoryId=740155866496000056}
15:59:26.541 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940244992, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940212224, entitlementHistoryId=740155866488832992}
15:59:26.541 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.541 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.542 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939835392, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, group=TEST, offerId=939802624}
15:59:26.542 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.542 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940392448, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, group=TEST, offerId=621101120}
15:59:26.542 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940933120, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, group=TEST, offerId=621527104}
15:59:26.542 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:26.542 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940851200, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940867584, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621510720, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621494336, entitlementHistoryId=740155866501120584}
15:59:26.542 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.543 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.543 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.543 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.543 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.543 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940277760, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940326912, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940310528, userId=939753472, statusReason=null, group=TEST, offerId=940294144}
15:59:26.543 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:26.543 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940392448, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621101120, entitlementHistoryId=740155866491904448}
15:59:26.543 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940064768, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940032000, entitlementHistoryId=740155866486784768}
15:59:26.544 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.544 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.544 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.544 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.544 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.544 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.544 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.544 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.544 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.544 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.544 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.544 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.544 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.545 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.545 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.545 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.545 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.545 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.545 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.545 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.545 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.545 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.545 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.545 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.545 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.545 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.546 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.548 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.549 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.549 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.549 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.551 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.553 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.554 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.554 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.554 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.554 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.554 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.554 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.554 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.554 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.554 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.554 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.554 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.554 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.554 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.554 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.554 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.554 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.554 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.554 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.554 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.555 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.555 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.555 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.555 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.555 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.555 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.555 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.555 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.555 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.555 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.555 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.559 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.559 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.559 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.559 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.559 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.559 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.559 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.559 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.560 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.560 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.560 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.560 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.562 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.563 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.563 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.563 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.563 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.563 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.563 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.563 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.563 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.563 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.563 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.563 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.563 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.563 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.563 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.563 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.563 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.563 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.563 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.564 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 940982272, using strategy: org.hibernate.id.Assigned
15:59:26.564 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866503168272, using strategy: org.hibernate.id.Assigned
15:59:26.565 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.565 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.565 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.565 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.565 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.568 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 40 objects
15:59:26.568 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.568 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.568 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940851200, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940867584, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621510720, userId=939753472, statusReason=null, group=TEST, offerId=621494336}
15:59:26.568 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.568 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940589056, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621281344, entitlementHistoryId=740155866496000056}
15:59:26.568 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940244992, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940212224, entitlementHistoryId=740155866488832992}
15:59:26.569 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.569 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.569 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939835392, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, group=TEST, offerId=939802624}
15:59:26.569 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.569 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940392448, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, group=TEST, offerId=621101120}
15:59:26.569 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940933120, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, group=TEST, offerId=621527104}
15:59:26.569 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:26.569 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940851200, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940867584, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621510720, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621494336, entitlementHistoryId=740155866501120584}
15:59:26.570 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.570 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.570 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.570 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.570 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.570 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940277760, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940326912, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940310528, userId=939753472, statusReason=null, group=TEST, offerId=940294144}
15:59:26.571 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:26.571 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940392448, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621101120, entitlementHistoryId=740155866491904448}
15:59:26.572 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940064768, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940032000, entitlementHistoryId=740155866486784768}
15:59:26.572 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.573 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.574 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.575 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.575 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.575 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.576 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.576 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.576 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.576 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.576 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.576 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.576 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.576 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.576 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.576 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.576 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.576 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.576 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.576 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.576 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.576 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.576 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.576 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.577 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.577 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.578 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.579 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.580 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.580 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.580 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.581 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.582 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.582 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.583 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.583 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.584 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.584 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.585 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.585 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.585 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.586 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.586 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.586 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.587 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.587 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.587 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.587 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.587 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.587 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.587 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.587 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.587 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.587 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.587 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.587 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.588 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.588 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.588 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.588 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.588 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.588 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.588 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.588 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.588 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.588 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.588 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.588 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.588 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.588 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.588 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.588 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.588 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.588 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.588 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.591 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.591 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.591 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.591 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.591 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.591 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.591 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.591 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.591 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.592 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.592 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.592 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.592 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.592 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.592 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.592 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.592 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.592 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.592 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.592 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 941015040, using strategy: org.hibernate.id.Assigned
15:59:26.593 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866504192040, using strategy: org.hibernate.id.Assigned
15:59:26.593 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.593 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.593 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.594 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.594 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.597 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 42 objects
15:59:26.597 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.597 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.597 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940851200, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940867584, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621510720, userId=939753472, statusReason=null, group=TEST, offerId=621494336}
15:59:26.598 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.598 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940589056, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621281344, entitlementHistoryId=740155866496000056}
15:59:26.598 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:26.598 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940244992, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940212224, entitlementHistoryId=740155866488832992}
15:59:26.598 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.598 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.598 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939835392, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, group=TEST, offerId=939802624}
15:59:26.599 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.599 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940392448, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, group=TEST, offerId=621101120}
15:59:26.599 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940933120, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, group=TEST, offerId=621527104}
15:59:26.599 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:26.599 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940851200, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940867584, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621510720, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621494336, entitlementHistoryId=740155866501120584}
15:59:26.599 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.599 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.599 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.599 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.599 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.599 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940277760, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940326912, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940310528, userId=939753472, statusReason=null, group=TEST, offerId=940294144}
15:59:26.599 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:26.599 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940392448, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621101120, entitlementHistoryId=740155866491904448}
15:59:26.600 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.600 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.600 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.600 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.600 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.600 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.600 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.600 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.600 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.600 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.601 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.601 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.601 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.601 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.601 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.601 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.601 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.601 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.601 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.601 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.601 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.601 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.601 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.601 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.601 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.601 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.602 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.604 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.604 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.604 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.604 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.605 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.606 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.606 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.607 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.607 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.607 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.607 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.607 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.607 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.607 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.607 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.607 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.607 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.607 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.607 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.607 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.607 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.607 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.607 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.607 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.608 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.608 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.608 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.608 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.608 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.608 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.608 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.608 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.608 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.608 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.608 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.608 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.608 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.608 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.608 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.608 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.609 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.609 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.609 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.609 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.609 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.609 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.609 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.609 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.610 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.611 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.611 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.611 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.611 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.611 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.611 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.611 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.611 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.611 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.611 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.612 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.612 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.612 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.612 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.612 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.612 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.612 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.612 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.613 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 941113344, using strategy: org.hibernate.id.Assigned
15:59:26.613 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866505216344, using strategy: org.hibernate.id.Assigned
15:59:26.614 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.614 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.614 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.614 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.614 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.617 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 44 objects
15:59:26.620 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.620 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.620 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940851200, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940867584, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621510720, userId=939753472, statusReason=null, group=TEST, offerId=621494336}
15:59:26.620 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.620 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940589056, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621281344, entitlementHistoryId=740155866496000056}
15:59:26.621 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:26.622 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940244992, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940212224, entitlementHistoryId=740155866488832992}
15:59:26.622 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.622 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:26.622 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.623 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939835392, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, group=TEST, offerId=939802624}
15:59:26.623 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.623 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940392448, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, group=TEST, offerId=621101120}
15:59:26.623 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940933120, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, group=TEST, offerId=621527104}
15:59:26.623 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:26.623 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940851200, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940867584, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621510720, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621494336, entitlementHistoryId=740155866501120584}
15:59:26.623 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.623 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.624 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.624 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.624 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.624 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940277760, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940326912, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940310528, userId=939753472, statusReason=null, group=TEST, offerId=940294144}
15:59:26.626 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:26.626 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.626 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.626 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.626 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.626 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.626 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.627 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.627 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.627 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.627 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.627 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.627 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.627 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.627 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.627 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.627 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.627 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.627 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.627 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.627 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.627 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.627 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.627 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.627 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.627 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.628 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.629 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.630 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.630 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.630 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.630 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.631 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.633 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.633 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.633 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.633 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.633 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.633 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.633 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.633 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.633 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.633 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.633 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.633 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.633 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.633 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.633 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.633 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.633 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.633 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.633 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.634 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.634 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.634 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.634 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.634 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.634 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.634 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.634 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.634 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.634 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.634 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.634 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.634 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.634 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.634 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.634 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.634 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.634 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.634 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.634 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.634 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.634 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.634 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.635 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.636 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.636 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.636 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.636 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.636 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.636 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.636 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.636 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.636 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.636 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.636 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.636 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.636 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.636 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.636 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.636 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.636 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.636 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.636 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.637 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 941178880, using strategy: org.hibernate.id.Assigned
15:59:26.637 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866506240880, using strategy: org.hibernate.id.Assigned
15:59:26.638 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.638 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.638 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.638 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.638 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.640 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 46 objects
15:59:26.640 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.640 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.641 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940851200, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940867584, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621510720, userId=939753472, statusReason=null, group=TEST, offerId=621494336}
15:59:26.641 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.641 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940589056, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621281344, entitlementHistoryId=740155866496000056}
15:59:26.641 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:26.641 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940244992, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940212224, entitlementHistoryId=740155866488832992}
15:59:26.641 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.641 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:26.641 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.642 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939835392, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, group=TEST, offerId=939802624}
15:59:26.642 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.642 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940392448, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, group=TEST, offerId=621101120}
15:59:26.642 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940933120, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, group=TEST, offerId=621527104}
15:59:26.642 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:26.642 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940851200, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940867584, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621510720, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621494336, entitlementHistoryId=740155866501120584}
15:59:26.642 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.642 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:26.642 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.643 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.643 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.643 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.643 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940277760, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940326912, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940310528, userId=939753472, statusReason=null, group=TEST, offerId=940294144}
15:59:26.643 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.643 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.643 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.643 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.643 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.643 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.643 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.644 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.644 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.644 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.644 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.644 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.644 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.644 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.644 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.644 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.644 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.644 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.644 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.644 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.644 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.644 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.644 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.644 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.644 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.645 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.645 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.647 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.647 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.647 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.647 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.648 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.649 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.649 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.649 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.649 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.649 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.649 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.650 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.650 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.650 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.650 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.650 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.650 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.650 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.650 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.650 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.650 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.650 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.650 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.650 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.650 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.650 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.650 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.650 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.650 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.650 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.650 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.650 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.650 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.650 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.650 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.650 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.650 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.651 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.651 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.651 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.651 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.651 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.651 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.651 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.651 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.651 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.651 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.651 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.653 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.653 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.653 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.653 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.653 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.653 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.653 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.653 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.653 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.653 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.653 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.653 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.653 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.653 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.653 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.653 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.653 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.654 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.654 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.654 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 941228032, using strategy: org.hibernate.id.Assigned
15:59:26.654 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866507264032, using strategy: org.hibernate.id.Assigned
15:59:26.655 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.655 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.655 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.655 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.656 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.659 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 48 objects
15:59:26.659 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.660 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.660 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941228032, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=941211648, entitlementHistoryId=740155866507264032}
15:59:26.660 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940851200, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940867584, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621510720, userId=939753472, statusReason=null, group=TEST, offerId=621494336}
15:59:26.660 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.660 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940589056, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621281344, entitlementHistoryId=740155866496000056}
15:59:26.660 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:26.660 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940244992, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940212224, entitlementHistoryId=740155866488832992}
15:59:26.660 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.660 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:26.661 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.661 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939835392, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, group=TEST, offerId=939802624}
15:59:26.661 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.661 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940392448, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, group=TEST, offerId=621101120}
15:59:26.661 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940933120, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, group=TEST, offerId=621527104}
15:59:26.661 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:26.661 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940851200, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940867584, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621510720, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621494336, entitlementHistoryId=740155866501120584}
15:59:26.661 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.662 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:26.662 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.662 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.662 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.662 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.662 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.662 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.663 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.663 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.663 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.663 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.663 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.663 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.663 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.663 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.663 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.663 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.663 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.663 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.663 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.664 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.664 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.664 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.664 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.664 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.664 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.664 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.664 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.664 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.664 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.664 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.665 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.666 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.666 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.666 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.666 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.667 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.669 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.669 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.669 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.669 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.669 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.669 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.669 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.669 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.669 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.669 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.669 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.669 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.669 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.669 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.669 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.669 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.669 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.669 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.669 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.669 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.669 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.669 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.669 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.670 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.670 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.670 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.670 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.670 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.670 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.670 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.670 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.670 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.670 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.670 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.670 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.670 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.670 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.670 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.670 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.670 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.670 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.670 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.670 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.671 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.672 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.672 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.672 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.672 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.672 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.672 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.672 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.672 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.672 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.672 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.672 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.672 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.672 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.672 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.672 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.672 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.672 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.672 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.672 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 941293568, using strategy: org.hibernate.id.Assigned
15:59:26.673 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866508288568, using strategy: org.hibernate.id.Assigned
15:59:26.673 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.673 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.673 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.673 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.673 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.675 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 50 objects
15:59:26.676 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.676 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.676 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941228032, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=941211648, entitlementHistoryId=740155866507264032}
15:59:26.676 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940851200, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940867584, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621510720, userId=939753472, statusReason=null, group=TEST, offerId=621494336}
15:59:26.676 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.676 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940589056, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621281344, entitlementHistoryId=740155866496000056}
15:59:26.676 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:26.676 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940244992, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940212224, entitlementHistoryId=740155866488832992}
15:59:26.677 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.677 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:26.677 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.677 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=939835392, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, group=TEST, offerId=939802624}
15:59:26.677 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.677 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940359680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940392448, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940376064, userId=939753472, statusReason=null, group=TEST, offerId=621101120}
15:59:26.677 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940933120, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, group=TEST, offerId=621527104}
15:59:26.677 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:26.678 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940851200, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940867584, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621510720, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621494336, entitlementHistoryId=740155866501120584}
15:59:26.678 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.678 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:26.678 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.678 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.678 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.678 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.678 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.678 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.679 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.679 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.679 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.679 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.679 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.679 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.679 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.679 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.679 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.679 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.679 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.679 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.679 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.679 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.679 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.679 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.679 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.679 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.679 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.679 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.679 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.680 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.680 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.680 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.681 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.682 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.682 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.682 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.682 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.683 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.684 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.684 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.684 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.684 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.684 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.684 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.684 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.684 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.684 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.684 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.684 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.684 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.684 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.684 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.684 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.684 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.684 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.684 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.684 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.684 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.684 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.684 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.684 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.684 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.684 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.684 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.684 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.684 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.684 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.684 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.684 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.684 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.684 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.684 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.684 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.685 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.685 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.685 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.685 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.685 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.685 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.685 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.685 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.686 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.686 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.686 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.686 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.686 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.686 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.686 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.686 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.686 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.686 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.686 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.686 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.686 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.686 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.686 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.687 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.687 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.687 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.687 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.687 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 941342720, using strategy: org.hibernate.id.Assigned
15:59:26.687 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866509312720, using strategy: org.hibernate.id.Assigned
15:59:26.688 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.688 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.688 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.688 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.688 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.691 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 52 objects
15:59:26.691 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.691 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.691 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.691 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941228032, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=941211648, entitlementHistoryId=740155866507264032}
15:59:26.691 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:26.691 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.692 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:26.692 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.692 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.692 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:26.692 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.692 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.692 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.692 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:26.693 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.693 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.693 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:26.693 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.693 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621412416, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940736512, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621445184, userId=939753472, statusReason=null, group=TEST, offerId=621428800}
15:59:26.693 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941228032, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, group=TEST, offerId=941211648}
15:59:26.693 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621412416, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940736512, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621445184, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621428800, entitlementHistoryId=740155866499072512}
15:59:26.693 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940261376, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, group=TEST, offerId=621019200}
15:59:26.694 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941326336, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941342720, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621822016, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621805632, entitlementHistoryId=740155866509312720}
15:59:26.694 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.694 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.694 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.694 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.694 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.694 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.694 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.694 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.694 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.694 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.694 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.694 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.694 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.694 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.694 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.694 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.695 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.695 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.695 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.695 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.695 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.695 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.695 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.695 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.695 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.695 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.696 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.698 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.698 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.698 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.698 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.699 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.700 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.700 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.700 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.700 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.700 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.700 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.701 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.701 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.701 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.701 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.701 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.701 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.702 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.702 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.702 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.702 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.702 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.702 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.702 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.702 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.702 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.702 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.702 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.702 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.702 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.702 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.702 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.702 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.702 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.702 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.702 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.702 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.703 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.703 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.703 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.703 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.703 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.703 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.703 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.703 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.703 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.703 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.703 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.704 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.704 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.704 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.704 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.704 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.704 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.704 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.704 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.704 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.705 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.705 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.705 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.705 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.705 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.705 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.705 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.705 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.705 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.705 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.705 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 941391872, using strategy: org.hibernate.id.Assigned
15:59:26.706 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866510336872, using strategy: org.hibernate.id.Assigned
15:59:26.706 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.706 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.706 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.706 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.707 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.708 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 54 objects
15:59:26.708 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.709 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.709 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.709 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941228032, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=941211648, entitlementHistoryId=740155866507264032}
15:59:26.709 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:26.709 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.709 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:26.709 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.709 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.709 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:26.710 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.710 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.710 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.710 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:26.710 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.710 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.710 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:26.710 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.711 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621412416, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940736512, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621445184, userId=939753472, statusReason=null, group=TEST, offerId=621428800}
15:59:26.711 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941228032, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, group=TEST, offerId=941211648}
15:59:26.711 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621412416, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940736512, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621445184, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621428800, entitlementHistoryId=740155866499072512}
15:59:26.711 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940261376, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, group=TEST, offerId=621019200}
15:59:26.711 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941326336, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941342720, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621822016, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621805632, entitlementHistoryId=740155866509312720}
15:59:26.711 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.711 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.711 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.711 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.712 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.712 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.712 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.712 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.712 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.712 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.713 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.713 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.713 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.713 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.713 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.713 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.713 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.713 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.713 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.713 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.713 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.713 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.713 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.713 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.713 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.713 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.714 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.716 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.717 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.717 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.717 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.718 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.719 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.719 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.719 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.719 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.719 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.719 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.719 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.719 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.719 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.719 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.719 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.719 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.719 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.719 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.719 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.719 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.719 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.720 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.720 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.720 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.720 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.720 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.720 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.720 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.720 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.720 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.720 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.720 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.720 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.720 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.720 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.720 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.720 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.720 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.720 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.720 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.721 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.721 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.721 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.721 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.721 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.721 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.721 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.722 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.722 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.722 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.722 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.722 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.722 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.723 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.723 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.723 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.723 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.723 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.723 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.723 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.723 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.723 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.723 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.723 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.723 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.723 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.724 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 941441024, using strategy: org.hibernate.id.Assigned
15:59:26.725 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866511360024, using strategy: org.hibernate.id.Assigned
15:59:26.725 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.725 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.725 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.725 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.726 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.728 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 56 objects
15:59:26.728 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.728 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.728 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.728 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941228032, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=941211648, entitlementHistoryId=740155866507264032}
15:59:26.729 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:26.729 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.729 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:26.729 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.729 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.729 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:26.729 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.729 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.730 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.730 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:26.730 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.730 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.730 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:26.730 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.730 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621412416, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940736512, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621445184, userId=939753472, statusReason=null, group=TEST, offerId=621428800}
15:59:26.730 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941228032, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, group=TEST, offerId=941211648}
15:59:26.731 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621412416, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940736512, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621445184, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621428800, entitlementHistoryId=740155866499072512}
15:59:26.731 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940261376, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, group=TEST, offerId=621019200}
15:59:26.731 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941326336, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941342720, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621822016, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621805632, entitlementHistoryId=740155866509312720}
15:59:26.731 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.731 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.731 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.731 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.731 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.731 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.731 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.731 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.731 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.731 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.731 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.732 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.732 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.732 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.732 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.732 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.732 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.733 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.733 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.733 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.734 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.734 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.735 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.735 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.735 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.736 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.739 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.742 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.743 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.743 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.743 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.744 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.746 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.747 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.747 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.748 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.748 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.748 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.749 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.749 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.749 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.749 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.750 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.750 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.750 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.751 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.751 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.751 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.751 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.751 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.751 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.752 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.752 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.752 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.752 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.752 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.752 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.752 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.752 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.752 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.752 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.752 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.752 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.752 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.752 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.752 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.752 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.752 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.752 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.752 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.752 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.752 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.752 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.753 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.753 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.754 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.754 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.754 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.755 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.755 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.755 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.755 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.755 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.755 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.755 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.757 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.758 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.758 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.759 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.759 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.759 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.759 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.759 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.760 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.761 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 941490176, using strategy: org.hibernate.id.Assigned
15:59:26.763 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866512384176, using strategy: org.hibernate.id.Assigned
15:59:26.764 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.765 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.765 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.765 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.766 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.770 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 58 objects
15:59:26.771 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.771 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.772 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.773 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941228032, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=941211648, entitlementHistoryId=740155866507264032}
15:59:26.773 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:26.774 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.775 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:26.775 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.776 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.776 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:26.777 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.777 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.777 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.777 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:26.777 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.778 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.778 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:26.778 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.778 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621412416, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940736512, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621445184, userId=939753472, statusReason=null, group=TEST, offerId=621428800}
15:59:26.778 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941228032, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, group=TEST, offerId=941211648}
15:59:26.778 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621412416, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940736512, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621445184, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621428800, entitlementHistoryId=740155866499072512}
15:59:26.779 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940261376, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, group=TEST, offerId=621019200}
15:59:26.779 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941326336, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941342720, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621822016, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621805632, entitlementHistoryId=740155866509312720}
15:59:26.779 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.779 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.780 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.780 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.780 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.780 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.780 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.780 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.780 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.780 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.780 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.780 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.780 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.781 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.781 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.781 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.781 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.781 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.781 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.781 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.781 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.781 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.781 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.781 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.781 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.781 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.783 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.785 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.788 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.788 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.788 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.789 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.790 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.791 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.791 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.791 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.791 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.791 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.791 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.791 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.791 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.791 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.791 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.791 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.792 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.792 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.792 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.792 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.792 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.792 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.792 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.792 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.792 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.792 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.792 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.792 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.792 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.792 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.792 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.792 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.792 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.792 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.792 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.792 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.792 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.792 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.792 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.792 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.792 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.792 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.792 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.792 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.792 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.793 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.793 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.795 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.795 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.795 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.795 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.795 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.795 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.795 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.795 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.795 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.796 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.796 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.796 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.796 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.796 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.796 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.796 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.796 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.796 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.796 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.796 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 941522944, using strategy: org.hibernate.id.Assigned
15:59:26.797 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866513408944, using strategy: org.hibernate.id.Assigned
15:59:26.797 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.797 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.797 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.798 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.798 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.800 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 60 objects
15:59:26.800 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.800 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.801 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.801 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941228032, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=941211648, entitlementHistoryId=740155866507264032}
15:59:26.801 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:26.801 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.801 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:26.801 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.801 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.801 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:26.801 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.802 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.802 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.802 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:26.802 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.802 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622002240, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941522944, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=622035008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622018624, entitlementHistoryId=740155866513408944}
15:59:26.802 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.802 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:26.803 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.803 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621412416, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940736512, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621445184, userId=939753472, statusReason=null, group=TEST, offerId=621428800}
15:59:26.803 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941228032, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, group=TEST, offerId=941211648}
15:59:26.804 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621412416, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940736512, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621445184, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621428800, entitlementHistoryId=740155866499072512}
15:59:26.804 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940261376, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, group=TEST, offerId=621019200}
15:59:26.804 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.804 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.804 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.805 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.805 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.805 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.805 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.805 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.805 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.805 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.805 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.805 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.805 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.805 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.805 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.805 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.805 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.805 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.805 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.805 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.805 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.805 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.805 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.806 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.806 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.807 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.807 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.809 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.809 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.809 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.809 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.810 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.811 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.812 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.812 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.812 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.812 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.812 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.812 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.812 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.812 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.812 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.812 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.812 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.812 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.812 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.813 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.813 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.813 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.813 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.813 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.813 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.813 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.813 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.813 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.813 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.813 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.813 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.813 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.813 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.813 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.813 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.813 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.814 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.814 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.814 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.814 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.814 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.814 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.814 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.814 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.814 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.815 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.816 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.816 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.819 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.819 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.819 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.820 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.820 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.820 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.820 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.820 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.820 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.820 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.821 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.821 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.821 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.821 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.821 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.821 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.821 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.821 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.821 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.821 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 941572096, using strategy: org.hibernate.id.Assigned
15:59:26.824 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866514432096, using strategy: org.hibernate.id.Assigned
15:59:26.825 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.825 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.826 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.827 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.827 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.830 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 62 objects
15:59:26.831 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.831 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.831 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.831 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941228032, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=941211648, entitlementHistoryId=740155866507264032}
15:59:26.831 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:26.832 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.832 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:26.832 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.833 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.833 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:26.833 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.833 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.833 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.834 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:26.834 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.834 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622002240, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941522944, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=622035008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622018624, entitlementHistoryId=740155866513408944}
15:59:26.835 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.835 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:26.836 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.836 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621412416, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940736512, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621445184, userId=939753472, statusReason=null, group=TEST, offerId=621428800}
15:59:26.836 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941228032, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, group=TEST, offerId=941211648}
15:59:26.837 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621412416, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940736512, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621445184, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621428800, entitlementHistoryId=740155866499072512}
15:59:26.837 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940261376, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, group=TEST, offerId=621019200}
15:59:26.837 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.837 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.837 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.837 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.837 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.837 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.837 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.837 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.837 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.837 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.837 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.837 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.837 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.837 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.837 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.837 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.838 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.838 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.838 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.838 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.838 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.838 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.838 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.838 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.838 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.838 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.839 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.841 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.841 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.841 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.841 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.843 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.845 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.846 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.846 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.846 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.846 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.846 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.846 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.846 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.846 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.846 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.846 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.846 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.846 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.846 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.846 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.846 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.846 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.846 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.846 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.846 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.847 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.847 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.847 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.847 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.847 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.847 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.847 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.847 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.847 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.847 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.847 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.847 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.847 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.847 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.847 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.847 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.847 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.847 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.847 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.847 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.847 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.847 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.847 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.849 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.849 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.849 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.849 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.849 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.849 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.849 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.849 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.849 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.849 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.849 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.849 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.849 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.849 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.849 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.849 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.849 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.849 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.849 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.850 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 941621248, using strategy: org.hibernate.id.Assigned
15:59:26.850 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866515456248, using strategy: org.hibernate.id.Assigned
15:59:26.851 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.851 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.851 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.851 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.852 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.854 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 64 objects
15:59:26.854 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.854 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.854 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.854 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941228032, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=941211648, entitlementHistoryId=740155866507264032}
15:59:26.854 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:26.854 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.855 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:26.855 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.855 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.855 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:26.855 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.855 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.855 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.855 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:26.856 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941588480, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941621248, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941604864, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622133312, entitlementHistoryId=740155866515456248}
15:59:26.856 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.856 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622002240, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941522944, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=622035008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622018624, entitlementHistoryId=740155866513408944}
15:59:26.856 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.856 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:26.856 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.857 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621412416, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940736512, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621445184, userId=939753472, statusReason=null, group=TEST, offerId=621428800}
15:59:26.857 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941228032, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, group=TEST, offerId=941211648}
15:59:26.857 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621412416, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940736512, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621445184, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621428800, entitlementHistoryId=740155866499072512}
15:59:26.857 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.857 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.857 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.857 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.857 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.857 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.857 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.857 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.857 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.857 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.857 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.857 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.857 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.857 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.857 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.857 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.858 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.858 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.858 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.858 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.858 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.858 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.858 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.858 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.858 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.858 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.859 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.860 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.860 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.860 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.861 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.861 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.865 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.865 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.865 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.865 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.865 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.865 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.865 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.865 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.865 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.865 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.865 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.865 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.865 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.865 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.865 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.865 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.865 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.866 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.866 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.866 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.866 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.866 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.866 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.866 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.866 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.866 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.866 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.867 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.867 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.867 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.867 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.867 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.867 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.867 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.867 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.868 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.868 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.868 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.868 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.868 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.868 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.868 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.868 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.869 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.869 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.870 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.870 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.870 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.870 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.870 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.870 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.870 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.870 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.870 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.870 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.870 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.870 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.870 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.870 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.870 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.870 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.870 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.870 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 941686784, using strategy: org.hibernate.id.Assigned
15:59:26.871 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866516480784, using strategy: org.hibernate.id.Assigned
15:59:26.871 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.872 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.872 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.872 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.872 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.874 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 66 objects
15:59:26.875 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.875 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.875 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.875 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941228032, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=941211648, entitlementHistoryId=740155866507264032}
15:59:26.875 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:26.875 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.875 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:26.875 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.875 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.875 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:26.875 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.875 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.876 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.876 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:26.876 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941588480, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941621248, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941604864, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622133312, entitlementHistoryId=740155866515456248}
15:59:26.876 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.876 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622002240, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941522944, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=622035008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622018624, entitlementHistoryId=740155866513408944}
15:59:26.876 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.876 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:26.876 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.876 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621412416, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940736512, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621445184, userId=939753472, statusReason=null, group=TEST, offerId=621428800}
15:59:26.876 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941228032, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, group=TEST, offerId=941211648}
15:59:26.876 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622166080, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941686784, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941670400, userId=939753472, statusReason=null, group=TEST, offerId=941654016}
15:59:26.876 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.876 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.877 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.877 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.877 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.877 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.877 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.877 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.877 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.877 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.877 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.877 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.877 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.877 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.877 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.878 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.879 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.879 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.879 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.879 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.879 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.879 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.879 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.879 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.880 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.880 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.881 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.882 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.882 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.882 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.882 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.883 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.884 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.884 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.884 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.884 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.884 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.884 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.884 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.884 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.884 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.885 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.885 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.885 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.885 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.885 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.885 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.885 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.885 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.885 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.885 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.885 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.885 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.885 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.885 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.885 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.885 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.885 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.885 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.885 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.885 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.885 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.885 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.885 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.885 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.885 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.885 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.885 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.885 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.885 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.886 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.886 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.886 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.886 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.886 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.887 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.887 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.887 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.887 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.887 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.888 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.888 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.888 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.888 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.888 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.888 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.888 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.888 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.888 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.888 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.888 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.888 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.888 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.888 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.888 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 941768704, using strategy: org.hibernate.id.Assigned
15:59:26.889 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866517504704, using strategy: org.hibernate.id.Assigned
15:59:26.889 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.889 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.889 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.890 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.890 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.892 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 68 objects
15:59:26.892 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.892 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.892 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.892 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941228032, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=941211648, entitlementHistoryId=740155866507264032}
15:59:26.892 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:26.892 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.892 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:26.893 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.893 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.893 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:26.893 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622182464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941768704, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941752320, userId=939753472, statusReason=null, group=TEST, offerId=941735936}
15:59:26.894 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.894 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.894 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.894 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:26.894 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941588480, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941621248, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941604864, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622133312, entitlementHistoryId=740155866515456248}
15:59:26.894 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.895 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622002240, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941522944, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=622035008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622018624, entitlementHistoryId=740155866513408944}
15:59:26.895 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.895 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:26.895 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.895 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621412416, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940736512, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621445184, userId=939753472, statusReason=null, group=TEST, offerId=621428800}
15:59:26.895 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941228032, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, group=TEST, offerId=941211648}
15:59:26.895 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.895 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.895 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.895 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.896 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.896 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.896 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.896 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.896 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.896 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.896 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.896 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.896 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.896 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.896 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.896 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.896 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.896 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.896 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.896 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.896 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.896 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.896 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.896 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.896 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.896 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.897 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.898 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.898 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.898 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.899 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.899 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.900 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.900 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.900 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.900 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.900 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.900 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.900 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.900 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.901 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.901 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.901 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.901 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.901 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.901 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.901 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.901 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.901 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.901 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.901 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.901 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.901 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.901 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.901 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.901 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.901 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.901 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.901 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.901 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.901 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.901 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.901 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.901 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.901 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.902 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.902 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.902 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.902 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.902 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.902 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.902 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.902 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.902 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.902 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.904 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.904 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.904 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.904 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.904 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.904 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.904 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.904 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.904 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.904 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.904 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.904 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.905 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.905 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.905 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.905 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.905 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.905 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.905 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.905 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 941834240, using strategy: org.hibernate.id.Assigned
15:59:26.906 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866518528240, using strategy: org.hibernate.id.Assigned
15:59:26.906 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.906 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.907 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.907 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.907 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.910 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 70 objects
15:59:26.910 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.910 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.910 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.910 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941228032, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=941211648, entitlementHistoryId=740155866507264032}
15:59:26.910 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:26.910 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941801472, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941834240, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941817856, userId=939753472, statusReason=null, group=TEST, offerId=622215232}
15:59:26.911 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.911 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:26.911 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.911 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.911 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:26.911 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622182464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941768704, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941752320, userId=939753472, statusReason=null, group=TEST, offerId=941735936}
15:59:26.911 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.911 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.911 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.911 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:26.911 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941588480, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941621248, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941604864, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622133312, entitlementHistoryId=740155866515456248}
15:59:26.911 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.911 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622002240, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941522944, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=622035008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622018624, entitlementHistoryId=740155866513408944}
15:59:26.912 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.912 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:26.912 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.912 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621412416, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940736512, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621445184, userId=939753472, statusReason=null, group=TEST, offerId=621428800}
15:59:26.912 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.912 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.912 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.912 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.913 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.913 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.913 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.913 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.913 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.913 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.913 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.913 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.913 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.913 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.913 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.913 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.913 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.913 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.913 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.913 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.913 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.913 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.913 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.913 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.913 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.914 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.915 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.916 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.916 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.916 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.917 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.917 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.919 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.919 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.919 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.919 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.919 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.919 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.919 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.919 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.919 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.919 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.919 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.919 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.919 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.919 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.919 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.919 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.919 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.919 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.919 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.919 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.920 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.920 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.920 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.920 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.920 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.920 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.920 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.920 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.920 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.920 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.920 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.920 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.920 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.920 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.920 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.920 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.920 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.920 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.920 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.920 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.920 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.920 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.920 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.922 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.924 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.924 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.924 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.924 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.924 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.924 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.924 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.924 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.924 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.925 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.925 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.925 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.925 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.925 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.925 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.925 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.925 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.925 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.925 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 941899776, using strategy: org.hibernate.id.Assigned
15:59:26.926 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866519552776, using strategy: org.hibernate.id.Assigned
15:59:26.926 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.926 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.926 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.926 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.927 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.929 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 72 objects
15:59:26.929 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.929 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.929 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.929 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941228032, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=941211648, entitlementHistoryId=740155866507264032}
15:59:26.930 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:26.930 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941801472, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941834240, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941817856, userId=939753472, statusReason=null, group=TEST, offerId=622215232}
15:59:26.930 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.930 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:26.930 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.930 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.930 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:26.930 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622182464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941768704, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941752320, userId=939753472, statusReason=null, group=TEST, offerId=941735936}
15:59:26.930 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.930 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.930 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.931 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:26.931 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941588480, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941621248, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941604864, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622133312, entitlementHistoryId=740155866515456248}
15:59:26.931 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.931 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622002240, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941522944, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=622035008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622018624, entitlementHistoryId=740155866513408944}
15:59:26.931 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.931 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:26.931 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.931 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621412416, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940736512, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621445184, userId=939753472, statusReason=null, group=TEST, offerId=621428800}
15:59:26.931 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.931 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.932 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.932 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.932 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.932 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.932 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.932 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.932 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.932 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.932 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.932 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.932 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.932 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.932 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.932 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.932 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.932 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.932 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.932 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.932 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.932 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.932 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.932 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.933 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.933 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.934 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.935 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.935 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.935 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.935 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.936 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.937 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.937 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.937 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.937 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.937 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.937 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.937 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.937 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.937 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.937 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.937 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.937 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.937 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.938 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.938 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.938 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.938 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.938 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.938 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.938 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.938 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.938 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.938 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.938 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.938 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.938 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.938 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.938 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.938 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.938 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.938 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.938 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.938 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.939 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.939 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.939 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.939 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.939 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.939 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.939 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.939 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.939 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.939 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.941 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.941 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.941 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.941 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.941 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.941 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.941 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.941 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.941 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.941 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.941 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.941 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.941 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.941 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.941 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.941 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.941 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.941 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.942 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.942 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 941981696, using strategy: org.hibernate.id.Assigned
15:59:26.942 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866484737696, using strategy: org.hibernate.id.Assigned
15:59:26.943 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.943 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.943 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.943 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.943 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.946 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 74 objects
15:59:26.946 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.946 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.946 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.946 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941228032, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=941211648, entitlementHistoryId=740155866507264032}
15:59:26.947 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:26.947 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941801472, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941834240, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941817856, userId=939753472, statusReason=null, group=TEST, offerId=622215232}
15:59:26.947 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.947 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:26.947 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.947 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.947 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:26.947 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622182464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941768704, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941752320, userId=939753472, statusReason=null, group=TEST, offerId=941735936}
15:59:26.947 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.947 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.948 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.948 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:26.948 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941588480, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941621248, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941604864, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622133312, entitlementHistoryId=740155866515456248}
15:59:26.948 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.948 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622002240, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941522944, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=622035008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622018624, entitlementHistoryId=740155866513408944}
15:59:26.948 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.948 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:26.948 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.948 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621412416, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940736512, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621445184, userId=939753472, statusReason=null, group=TEST, offerId=621428800}
15:59:26.948 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.949 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.949 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.949 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.949 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.949 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.949 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.949 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.949 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.949 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.949 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.949 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.949 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.949 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.949 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.949 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.949 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.949 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.949 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.949 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.949 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.950 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.950 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.950 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.950 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.950 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.951 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.952 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.952 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.952 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.952 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.953 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.954 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.954 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.954 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.954 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.954 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.954 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.954 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.954 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.954 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.954 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.954 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.954 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.955 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.955 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.955 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.955 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.955 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.955 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.955 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.955 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.955 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.955 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.955 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.955 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.955 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.955 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.955 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.955 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.955 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.955 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.955 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.955 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.955 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.955 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.955 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.955 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.955 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.955 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.955 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.955 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.955 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.955 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.955 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.957 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.957 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.957 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.957 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.957 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.957 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.958 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.958 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.958 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.958 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.958 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.958 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.958 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.958 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.958 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.958 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.958 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.958 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.958 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.958 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 942047232, using strategy: org.hibernate.id.Assigned
15:59:26.959 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866485761232, using strategy: org.hibernate.id.Assigned
15:59:26.959 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.959 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.959 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.959 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.960 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.962 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 76 objects
15:59:26.963 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.963 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.963 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.963 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941228032, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=941211648, entitlementHistoryId=740155866507264032}
15:59:26.963 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:26.963 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941801472, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941834240, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941817856, userId=939753472, statusReason=null, group=TEST, offerId=622215232}
15:59:26.963 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.963 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:26.964 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.964 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.964 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941998080, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=942047232, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=942030848, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=942014464, entitlementHistoryId=740155866485761232}
15:59:26.965 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:26.965 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622182464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941768704, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941752320, userId=939753472, statusReason=null, group=TEST, offerId=941735936}
15:59:26.965 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.965 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.966 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.966 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:26.966 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941588480, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941621248, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941604864, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622133312, entitlementHistoryId=740155866515456248}
15:59:26.966 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.966 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622002240, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941522944, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=622035008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622018624, entitlementHistoryId=740155866513408944}
15:59:26.966 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.966 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:26.966 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.966 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.966 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.966 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.966 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.967 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.967 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.967 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.967 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.967 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.967 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.967 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.967 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.967 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.967 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.967 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.967 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.967 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.967 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.967 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.967 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.967 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.967 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.967 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.967 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.968 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.968 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.969 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.970 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.970 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.970 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.970 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.971 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.972 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.972 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.972 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.972 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.972 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.972 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.972 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.972 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.972 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.972 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.972 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.972 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.972 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.972 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.972 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.972 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.972 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.972 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.972 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.973 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.973 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.973 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.973 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.973 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.973 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.973 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.973 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.973 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.973 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.973 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.973 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.973 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.973 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.973 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.973 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.973 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.973 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.973 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.973 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.973 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.973 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.973 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.973 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.974 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.975 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.975 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.975 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.975 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.975 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.975 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.975 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.975 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.975 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.975 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.975 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.975 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.975 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.975 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.975 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.975 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.975 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.975 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.976 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 942080000, using strategy: org.hibernate.id.Assigned
15:59:26.976 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866520576000, using strategy: org.hibernate.id.Assigned
15:59:26.976 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.977 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.977 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.977 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.977 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.979 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 78 objects
15:59:26.980 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.980 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.980 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.980 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941228032, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=941211648, entitlementHistoryId=740155866507264032}
15:59:26.980 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:26.980 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941801472, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941834240, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941817856, userId=939753472, statusReason=null, group=TEST, offerId=622215232}
15:59:26.980 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.980 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:26.980 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.980 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.980 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941998080, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=942047232, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=942030848, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=942014464, entitlementHistoryId=740155866485761232}
15:59:26.980 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:26.981 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622182464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941768704, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941752320, userId=939753472, statusReason=null, group=TEST, offerId=941735936}
15:59:26.981 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.981 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.981 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.981 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:26.981 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941588480, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941621248, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941604864, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622133312, entitlementHistoryId=740155866515456248}
15:59:26.981 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.981 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622002240, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941522944, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=622035008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622018624, entitlementHistoryId=740155866513408944}
15:59:26.981 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.982 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:26.982 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.982 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.982 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.983 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.983 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.983 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.983 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.983 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.983 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.983 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.983 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.983 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.983 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.983 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.983 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.983 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.983 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.983 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.983 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.983 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.983 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.983 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.983 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.983 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.983 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.983 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.984 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.984 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.986 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.986 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.986 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.986 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:26.987 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:26.988 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:26.988 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.988 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.988 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.988 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.988 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.988 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.988 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.988 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.988 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.988 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.989 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.989 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.989 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.989 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.989 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.989 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.989 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.989 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.989 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.989 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.989 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.989 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.989 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.989 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.989 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.989 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.989 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.989 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.989 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.989 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.989 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.989 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.989 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.989 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.989 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.989 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.990 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.990 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.990 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.990 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.990 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.990 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:26.991 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:26.991 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:26.991 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.991 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.992 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.992 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.992 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.992 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.992 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.992 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.992 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.992 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:26.992 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:26.992 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.992 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.992 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:26.992 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.992 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:26.992 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:26.992 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 942129152, using strategy: org.hibernate.id.Assigned
15:59:26.993 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866521600152, using strategy: org.hibernate.id.Assigned
15:59:26.993 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:26.993 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:26.993 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:26.993 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:26.994 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:26.996 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 80 objects
15:59:26.996 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:26.996 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:26.996 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:26.996 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941228032, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=941211648, entitlementHistoryId=740155866507264032}
15:59:26.996 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:26.996 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941801472, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941834240, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941817856, userId=939753472, statusReason=null, group=TEST, offerId=622215232}
15:59:26.997 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:26.997 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:26.997 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:26.997 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:26.997 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941998080, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=942047232, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=942030848, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=942014464, entitlementHistoryId=740155866485761232}
15:59:26.997 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:26.997 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622182464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941768704, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941752320, userId=939753472, statusReason=null, group=TEST, offerId=941735936}
15:59:26.997 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:26.997 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:26.997 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:26.997 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:26.997 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941588480, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941621248, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941604864, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622133312, entitlementHistoryId=740155866515456248}
15:59:26.997 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:26.998 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622002240, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941522944, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=622035008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622018624, entitlementHistoryId=740155866513408944}
15:59:26.998 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:26.998 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:26.998 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620953664, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940244992, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940228608, userId=939753472, statusReason=null, group=TEST, offerId=940212224}
15:59:26.998 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:26.998 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:26.998 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:26.998 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.998 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.998 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:26.998 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.998 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.998 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:26.998 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:26.998 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.998 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.998 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.999 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:26.999 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.999 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.999 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.999 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.999 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:26.999 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:26.999 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:26.999 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:26.999 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:26.999 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:26.999 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:26.999 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:27.000 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.001 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.001 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.001 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.001 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:27.002 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.003 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.003 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.003 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:27.003 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.003 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.003 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.003 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.003 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.003 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.003 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.003 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.003 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.003 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.003 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:27.003 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.003 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.003 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:27.003 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.003 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.004 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.004 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.004 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.004 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:27.004 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.004 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.004 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:27.004 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:27.004 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.004 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.004 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.004 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:27.004 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.004 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.004 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.004 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.004 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:27.004 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:27.005 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.005 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.005 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.005 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.005 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.005 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:27.006 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.006 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:27.006 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.006 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.006 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.006 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.006 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.006 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.006 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.006 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.007 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.007 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.007 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:27.007 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.007 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.007 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:27.007 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.007 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.007 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:27.007 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 942161920, using strategy: org.hibernate.id.Assigned
15:59:27.008 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155870716928920, using strategy: org.hibernate.id.Assigned
15:59:27.008 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:27.008 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:27.008 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:27.008 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:27.009 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:27.011 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 82 objects
15:59:27.012 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:27.012 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:27.012 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:27.012 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941228032, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=941211648, entitlementHistoryId=740155866507264032}
15:59:27.012 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:27.012 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941801472, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941834240, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941817856, userId=939753472, statusReason=null, group=TEST, offerId=622215232}
15:59:27.012 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:27.012 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:27.012 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:27.012 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:27.012 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941998080, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=942047232, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=942030848, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=942014464, entitlementHistoryId=740155866485761232}
15:59:27.013 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:27.013 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622182464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941768704, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941752320, userId=939753472, statusReason=null, group=TEST, offerId=941735936}
15:59:27.013 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:27.013 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:27.013 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:27.013 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:27.013 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941588480, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941621248, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941604864, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622133312, entitlementHistoryId=740155866515456248}
15:59:27.013 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:27.013 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622002240, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941522944, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=622035008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622018624, entitlementHistoryId=740155866513408944}
15:59:27.013 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:27.013 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=942145536, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=942161920, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=622477376, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622460992, entitlementHistoryId=740155870716928920}
15:59:27.014 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:27.014 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:27.014 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:27.014 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.014 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.014 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.014 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:27.014 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.014 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.014 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:27.014 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:27.014 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.014 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.014 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.014 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:27.014 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.014 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.014 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.014 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.014 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:27.014 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:27.014 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.014 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.015 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.015 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.015 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.015 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:27.015 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.017 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.017 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.017 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.017 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:27.018 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.019 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.019 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.019 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:27.019 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.019 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.019 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.019 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.019 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.019 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.020 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.020 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.020 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.020 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.020 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:27.020 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.020 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.020 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:27.020 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.020 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.021 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.021 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.021 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.021 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:27.021 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.021 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.021 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:27.021 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:27.021 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.021 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.021 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.021 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:27.021 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.021 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.021 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.021 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.021 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:27.021 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:27.021 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.022 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.022 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.022 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.022 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.023 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:27.025 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.025 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:27.025 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.026 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.026 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.027 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.027 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.027 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.027 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.027 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.027 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.028 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.028 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:27.028 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.028 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.028 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:27.028 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.028 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.028 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:27.028 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 942227456, using strategy: org.hibernate.id.Assigned
15:59:27.029 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155870717952456, using strategy: org.hibernate.id.Assigned
15:59:27.029 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:27.029 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:27.030 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:27.030 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:27.030 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:27.033 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 84 objects
15:59:27.034 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:27.034 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:27.034 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:27.034 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941228032, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=941211648, entitlementHistoryId=740155866507264032}
15:59:27.034 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:27.034 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941801472, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941834240, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941817856, userId=939753472, statusReason=null, group=TEST, offerId=622215232}
15:59:27.034 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:27.035 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:27.035 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:27.035 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:27.035 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941998080, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=942047232, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=942030848, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=942014464, entitlementHistoryId=740155866485761232}
15:59:27.035 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:27.035 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622182464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941768704, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941752320, userId=939753472, statusReason=null, group=TEST, offerId=941735936}
15:59:27.035 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:27.035 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:27.035 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:27.036 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:27.036 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941588480, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941621248, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941604864, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622133312, entitlementHistoryId=740155866515456248}
15:59:27.036 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:27.036 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622002240, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941522944, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=622035008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622018624, entitlementHistoryId=740155866513408944}
15:59:27.036 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:27.036 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=942145536, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=942161920, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=622477376, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622460992, entitlementHistoryId=740155870716928920}
15:59:27.036 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940638208, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621330496, entitlementHistoryId=740155866497024208}
15:59:27.036 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:27.036 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:27.037 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.037 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.037 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.037 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:27.037 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.037 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.037 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:27.037 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:27.037 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.037 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.037 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.037 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:27.037 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.037 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.037 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.037 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.037 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:27.037 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:27.037 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.037 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.037 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.037 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.037 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.038 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:27.038 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.041 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.042 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.042 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.042 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:27.043 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.044 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.044 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.044 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:27.044 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.044 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.045 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.045 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.045 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.045 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.045 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.045 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.045 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.045 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.045 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:27.045 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.045 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.045 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:27.045 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.045 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.045 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.045 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.045 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.045 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:27.045 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.045 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.045 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:27.045 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:27.045 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.045 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.046 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.046 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:27.046 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.046 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.046 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.046 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.046 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:27.046 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:27.046 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.046 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.046 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.046 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.046 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.046 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:27.048 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.048 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:27.048 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.048 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.048 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.048 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.048 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.048 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.048 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.048 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.048 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.048 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.048 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:27.048 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.048 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.048 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:27.048 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.048 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.048 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:27.049 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 942276608, using strategy: org.hibernate.id.Assigned
15:59:27.049 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155870718976608, using strategy: org.hibernate.id.Assigned
15:59:27.050 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:27.050 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:27.050 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:27.050 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:27.050 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:27.053 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 86 objects
15:59:27.053 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:27.053 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:27.053 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:27.053 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941228032, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=941211648, entitlementHistoryId=740155866507264032}
15:59:27.053 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:27.053 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941801472, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941834240, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941817856, userId=939753472, statusReason=null, group=TEST, offerId=622215232}
15:59:27.053 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:27.053 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:27.053 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:27.054 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:27.054 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622542912, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=942276608, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=942260224, userId=939753472, statusReason=null, group=TEST, offerId=622559296}
15:59:27.054 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941998080, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=942047232, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=942030848, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=942014464, entitlementHistoryId=740155866485761232}
15:59:27.054 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:27.054 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622182464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941768704, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941752320, userId=939753472, statusReason=null, group=TEST, offerId=941735936}
15:59:27.054 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:27.054 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:27.054 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:27.055 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:27.055 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941588480, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941621248, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941604864, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622133312, entitlementHistoryId=740155866515456248}
15:59:27.055 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:27.055 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622002240, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941522944, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=622035008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622018624, entitlementHistoryId=740155866513408944}
15:59:27.055 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:27.055 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=942145536, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=942161920, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=622477376, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622460992, entitlementHistoryId=740155870716928920}
15:59:27.055 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:27.055 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:27.056 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.056 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.056 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.056 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:27.056 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.056 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.056 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:27.056 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:27.056 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.056 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.056 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.056 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:27.056 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.056 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.056 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.056 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.056 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:27.056 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:27.056 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.056 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.057 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.057 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.057 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.057 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:27.058 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.059 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.059 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.059 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.060 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:27.060 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.061 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.062 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.062 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:27.062 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.062 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.062 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.062 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.062 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.062 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.062 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.062 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.062 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.062 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.062 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:27.062 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.062 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.062 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:27.062 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.062 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.062 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.062 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.062 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.063 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:27.063 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.063 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.063 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:27.063 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:27.063 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.063 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.063 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.063 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:27.063 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.063 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.063 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.063 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.063 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:27.063 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:27.063 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.063 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.063 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.063 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.063 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.063 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:27.065 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.065 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:27.065 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.065 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.065 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.065 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.065 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.065 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.065 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.065 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.065 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.066 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.066 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:27.066 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.066 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.066 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:27.066 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.066 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.066 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:27.067 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 942325760, using strategy: org.hibernate.id.Assigned
15:59:27.067 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155870720000760, using strategy: org.hibernate.id.Assigned
15:59:27.068 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:27.068 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:27.068 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:27.068 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:27.069 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:27.071 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 88 objects
15:59:27.072 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:27.072 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:27.072 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:27.072 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941228032, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=941211648, entitlementHistoryId=740155866507264032}
15:59:27.072 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:27.072 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941801472, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941834240, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941817856, userId=939753472, statusReason=null, group=TEST, offerId=622215232}
15:59:27.072 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622575680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=942325760, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=622608448, userId=939753472, statusReason=null, group=TEST, offerId=622592064}
15:59:27.072 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:27.072 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:27.072 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:27.072 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:27.073 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622542912, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=942276608, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=942260224, userId=939753472, statusReason=null, group=TEST, offerId=622559296}
15:59:27.073 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941998080, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=942047232, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=942030848, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=942014464, entitlementHistoryId=740155866485761232}
15:59:27.073 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:27.073 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622182464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941768704, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941752320, userId=939753472, statusReason=null, group=TEST, offerId=941735936}
15:59:27.073 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:27.073 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:27.073 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:27.073 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:27.073 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941588480, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941621248, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941604864, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622133312, entitlementHistoryId=740155866515456248}
15:59:27.073 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:27.073 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622002240, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941522944, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=622035008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622018624, entitlementHistoryId=740155866513408944}
15:59:27.073 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:27.073 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:27.074 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:27.074 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.074 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.074 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.074 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:27.074 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.074 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.074 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:27.074 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:27.074 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.074 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.074 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.074 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:27.074 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.074 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.074 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.074 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.074 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:27.074 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:27.074 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.075 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.075 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.075 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.075 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.075 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:27.076 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.077 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.077 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.078 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.078 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:27.078 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.080 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.080 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.080 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:27.080 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.080 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.080 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.080 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.080 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.080 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.080 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.080 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.080 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.080 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.080 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:27.080 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.080 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.080 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:27.080 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.081 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.081 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.081 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.081 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.081 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:27.081 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.081 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.081 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:27.081 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:27.081 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.081 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.081 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.081 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:27.081 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.081 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.081 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.081 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.082 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:27.082 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:27.082 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.082 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.082 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.082 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.082 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.082 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:27.083 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.084 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:27.084 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.084 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.084 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.084 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.084 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.084 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.084 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.084 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.084 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.084 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.084 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:27.084 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.084 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.084 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:27.084 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.084 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.084 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:27.085 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 942424064, using strategy: org.hibernate.id.Assigned
15:59:27.085 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155870721024064, using strategy: org.hibernate.id.Assigned
15:59:27.085 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:27.085 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:27.086 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:27.086 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:27.086 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:27.088 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 90 objects
15:59:27.088 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:27.088 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:27.089 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:27.089 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941228032, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=941211648, entitlementHistoryId=740155866507264032}
15:59:27.089 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:27.089 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941801472, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941834240, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941817856, userId=939753472, statusReason=null, group=TEST, offerId=622215232}
15:59:27.089 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622575680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=942325760, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=622608448, userId=939753472, statusReason=null, group=TEST, offerId=622592064}
15:59:27.089 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:27.089 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:27.089 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:27.089 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:27.089 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622542912, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=942276608, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=942260224, userId=939753472, statusReason=null, group=TEST, offerId=622559296}
15:59:27.089 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941998080, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=942047232, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=942030848, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=942014464, entitlementHistoryId=740155866485761232}
15:59:27.089 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:27.090 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622182464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941768704, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941752320, userId=939753472, statusReason=null, group=TEST, offerId=941735936}
15:59:27.090 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:27.090 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:27.090 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:27.090 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:27.090 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941588480, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941621248, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941604864, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622133312, entitlementHistoryId=740155866515456248}
15:59:27.090 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:27.090 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622002240, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941522944, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=622035008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622018624, entitlementHistoryId=740155866513408944}
15:59:27.090 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940621824, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940638208, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621346880, userId=939753472, statusReason=null, group=TEST, offerId=621330496}
15:59:27.090 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:27.090 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:27.091 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.091 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.091 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.091 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:27.091 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.091 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.091 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:27.091 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:27.091 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.091 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.091 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.091 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:27.091 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.091 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.091 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.091 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.092 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:27.092 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:27.092 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.092 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.092 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.092 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.092 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.092 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:27.093 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.094 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.094 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.094 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.094 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:27.095 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.096 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.096 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.096 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:27.096 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.097 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.097 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.097 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.097 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.097 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.097 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.097 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.097 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.097 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.097 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:27.097 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.097 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.097 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:27.098 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.098 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.098 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.098 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.098 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.098 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:27.098 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.098 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.098 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:27.098 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:27.098 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.098 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.098 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.098 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:27.098 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.098 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.098 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.098 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.099 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:27.099 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:27.099 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.099 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.099 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.099 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.099 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.100 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:27.101 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.101 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:27.101 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.101 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.101 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.101 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.101 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.101 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.102 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.102 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.102 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.102 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.102 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:27.102 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.102 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.102 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:27.102 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.102 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.102 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:27.102 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 942505984, using strategy: org.hibernate.id.Assigned
15:59:27.103 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155870722048984, using strategy: org.hibernate.id.Assigned
15:59:27.103 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:27.103 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:27.103 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:27.103 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:27.104 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:27.107 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 92 objects
15:59:27.107 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:27.107 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:27.107 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:27.107 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941228032, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=941211648, entitlementHistoryId=740155866507264032}
15:59:27.107 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:27.107 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941801472, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941834240, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941817856, userId=939753472, statusReason=null, group=TEST, offerId=622215232}
15:59:27.107 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622575680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=942325760, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=622608448, userId=939753472, statusReason=null, group=TEST, offerId=622592064}
15:59:27.107 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:27.108 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:27.108 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:27.108 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622624832, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=942505984, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=942489600, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=942473216, entitlementHistoryId=740155870722048984}
15:59:27.108 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:27.108 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622542912, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=942276608, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=942260224, userId=939753472, statusReason=null, group=TEST, offerId=622559296}
15:59:27.108 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941998080, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=942047232, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=942030848, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=942014464, entitlementHistoryId=740155866485761232}
15:59:27.108 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:27.108 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622182464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941768704, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941752320, userId=939753472, statusReason=null, group=TEST, offerId=941735936}
15:59:27.108 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:27.108 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:27.108 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:27.108 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:27.109 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941588480, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941621248, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941604864, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622133312, entitlementHistoryId=740155866515456248}
15:59:27.109 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:27.109 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622002240, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941522944, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=622035008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622018624, entitlementHistoryId=740155866513408944}
15:59:27.109 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:27.109 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:27.109 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.109 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.109 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.109 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:27.109 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.109 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.109 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:27.109 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:27.109 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.109 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.109 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.110 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:27.110 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.110 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.110 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.110 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.110 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:27.110 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:27.110 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.110 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.110 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.110 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.110 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.110 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:27.111 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.113 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.113 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.113 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.113 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:27.114 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.116 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.117 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.117 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:27.117 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.118 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.118 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.118 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.118 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.118 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.118 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.118 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.118 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.118 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.118 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:27.118 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.118 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.118 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:27.118 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.118 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.118 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.118 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.119 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.119 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:27.119 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.119 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.119 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:27.119 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:27.119 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.119 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.119 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.119 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:27.119 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.119 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.119 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.119 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.119 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:27.119 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:27.119 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.119 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.119 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.119 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.119 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.120 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:27.122 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.122 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:27.122 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.122 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.122 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.122 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.122 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.122 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.122 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.122 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.122 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.122 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.122 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:27.123 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.124 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.124 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:27.125 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.125 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.125 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:27.126 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 942571520, using strategy: org.hibernate.id.Assigned
15:59:27.126 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155870723072520, using strategy: org.hibernate.id.Assigned
15:59:27.127 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:27.127 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:27.127 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:27.127 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:27.128 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:27.130 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 94 objects
15:59:27.130 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:27.130 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:27.130 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:27.130 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941228032, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=941211648, entitlementHistoryId=740155866507264032}
15:59:27.130 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:27.130 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941801472, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941834240, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941817856, userId=939753472, statusReason=null, group=TEST, offerId=622215232}
15:59:27.130 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622575680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=942325760, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=622608448, userId=939753472, statusReason=null, group=TEST, offerId=622592064}
15:59:27.130 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:27.131 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:27.131 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:27.131 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622624832, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=942505984, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=942489600, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=942473216, entitlementHistoryId=740155870722048984}
15:59:27.131 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:27.131 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622542912, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=942276608, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=942260224, userId=939753472, statusReason=null, group=TEST, offerId=622559296}
15:59:27.131 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941998080, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=942047232, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=942030848, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=942014464, entitlementHistoryId=740155866485761232}
15:59:27.131 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:27.131 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622182464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941768704, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941752320, userId=939753472, statusReason=null, group=TEST, offerId=941735936}
15:59:27.131 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:27.131 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:27.131 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:27.131 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:27.131 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622641216, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=942571520, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=942555136, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622657600, entitlementHistoryId=740155870723072520}
15:59:27.131 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941588480, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941621248, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941604864, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622133312, entitlementHistoryId=740155866515456248}
15:59:27.132 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:27.132 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:27.132 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:27.132 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.132 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.132 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.132 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:27.132 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.132 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.132 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:27.132 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:27.132 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.132 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.132 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.132 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:27.132 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.132 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.133 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.133 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.133 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:27.133 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:27.133 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.133 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.133 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.133 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.133 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.133 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:27.134 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.135 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.136 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.136 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.136 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:27.137 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.138 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.138 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.138 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:27.138 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.138 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.138 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.138 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.138 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.138 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.138 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.138 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.138 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.138 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.138 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:27.138 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.138 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.138 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:27.139 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.139 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.139 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.139 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.139 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.139 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:27.139 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.139 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.139 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:27.139 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:27.139 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.139 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.139 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.139 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:27.139 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.139 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.139 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.139 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.139 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:27.139 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:27.139 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.139 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.139 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.139 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.140 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.140 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:27.141 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.141 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:27.141 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.142 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.142 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.142 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.142 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.142 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.142 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.142 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.142 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.142 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.142 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:27.142 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.142 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.142 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:27.142 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.142 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.142 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:27.142 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 942587904, using strategy: org.hibernate.id.Assigned
15:59:27.143 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155870724096904, using strategy: org.hibernate.id.Assigned
15:59:27.144 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'EntitlementServiceImpl.searchEntitlement' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
15:59:27.144 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:27.144 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:27.146 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:27.146 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:27.149 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 96 objects
15:59:27.149 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:27.149 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:27.150 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940572672, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940589056, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621297728, userId=939753472, statusReason=null, group=TEST, offerId=621281344}
15:59:27.150 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621723712, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941228032, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621740096, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=941211648, entitlementHistoryId=740155866507264032}
15:59:27.150 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621641792, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941015040, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940998656, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621658176, entitlementHistoryId=740155866504192040}
15:59:27.150 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941801472, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941834240, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941817856, userId=939753472, statusReason=null, group=TEST, offerId=622215232}
15:59:27.150 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622575680, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=942325760, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=622608448, userId=939753472, statusReason=null, group=TEST, offerId=622592064}
15:59:27.150 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940556288, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, group=TEST, offerId=940523520}
15:59:27.150 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941064192, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941113344, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941096960, userId=939753472, statusReason=null, group=TEST, offerId=941080576}
15:59:27.150 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940507136, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940556288, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940539904, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940523520, entitlementHistoryId=740155866494976288}
15:59:27.150 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622624832, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=942505984, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=942489600, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=942473216, entitlementHistoryId=740155870722048984}
15:59:27.151 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940113920, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940163072, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940146688, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=940130304, entitlementHistoryId=740155866487808072}
15:59:27.151 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622542912, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=942276608, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=942260224, userId=939753472, statusReason=null, group=TEST, offerId=622559296}
15:59:27.151 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941998080, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=942047232, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=942030848, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=942014464, entitlementHistoryId=740155866485761232}
15:59:27.151 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940916736, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940933120, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621543488, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621527104, entitlementHistoryId=740155866502144120}
15:59:27.151 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622182464, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941768704, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941752320, userId=939753472, statusReason=null, group=TEST, offerId=941735936}
15:59:27.151 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=939884544, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939933696, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939917312, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939900928, entitlementHistoryId=740155866484736696}
15:59:27.151 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621002816, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=940261376, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=621035584, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=621019200, entitlementHistoryId=740155866489856376}
15:59:27.151 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=620871744, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=939835392, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=939819008, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=939802624, entitlementHistoryId=740155866483712392}
15:59:27.151 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=621674560, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=941178880, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941162496, userId=939753472, statusReason=null, group=TEST, offerId=621690944}
15:59:27.151 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=622641216, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=942571520, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=942555136, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622657600, entitlementHistoryId=740155870723072520}
15:59:27.151 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=941588480, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Mon Feb 10 00:00:00 CST 2014, entitlementId=941621248, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=941604864, userId=939753472, statusReason=null, action=CREATE, group=TEST, offerId=622133312, entitlementHistoryId=740155866515456248}
15:59:27.151 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=940015616, status=MANAGED, createdTime=Mon Feb 10 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=940064768, modifiedTime=Mon Feb 10 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=false, createdBy=DEFAULT, expirationTime=Thu Mar 20 00:00:00 CST 2014, entitlementDefinitionId=940048384, userId=939753472, statusReason=null, group=TEST, offerId=940032000}
15:59:27.151 [Test worker] DEBUG o.h.internal.util.EntityPrinter - More......
15:59:27.152 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:27.152 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.152 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.152 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.152 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:27.152 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.152 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.152 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:27.152 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:27.152 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.152 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.152 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.152 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:27.152 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.152 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.152 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.152 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.152 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:27.152 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:27.153 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.153 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.153 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.153 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.153 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.153 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:27.154 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.155 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.155 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.155 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.155 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:27.156 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.158 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.158 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.158 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:27.158 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.158 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.159 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.159 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.159 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.159 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.159 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.159 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.160 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.160 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.160 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:27.160 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.160 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.160 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:27.160 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.160 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.161 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.161 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.161 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.161 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D0000014517266F9C0000000A]
15:59:27.161 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.161 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.161 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D0000014517266F9C0000000A
15:59:27.161 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:27.161 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.161 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.161 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.161 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 from the inaccessible pool
15:59:27.161 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.161 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.162 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.162 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.162 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 to the accessible pool
15:59:27.162 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@7429883 was in state NOT_ACCESSIBLE, no need to test it
15:59:27.162 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.162 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.162 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.162 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 into a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.162 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@7429883 (started) with XID a Bitronix XID [737072696E672D62746D0000014517266F9C0000000A : 737072696E672D62746D0000014517266F9F0000000B]
15:59:27.162 [Test worker] DEBUG org.hibernate.SQL - select * from entitlement where user_id = (?) and developer_id = (?) and ( status = (?) or ( managed_lifecycle = true and ( consumable = false or ( consumable = true and use_count &gt; 0 )) and ( grant_time &lt;= (?) and ( expiration_time is null or expiration_time &gt;= (?) )) )) limit ?
Hibernate: select * from entitlement where user_id = (?) and developer_id = (?) and ( status = (?) or ( managed_lifecycle = true and ( consumable = false or ( consumable = true and use_count &gt; 0 )) and ( grant_time &lt;= (?) and ( expiration_time is null or expiration_time &gt;= (?) )) )) limit ?
15:59:27.162 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 939753472 -&gt; developerId [2]
15:59:27.163 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() Sun Mar 30 00:00:00 CST 2014 -&gt; now [4]
15:59:27.163 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() Sun Mar 30 00:00:00 CST 2014 -&gt; now [5]
15:59:27.163 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 0 -&gt; status [3]
15:59:27.163 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 939753472 -&gt; userId [1]
15:59:27.165 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.165 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@5b07e4df
15:59:27.165 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.165 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.165 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.165 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.165 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.165 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.165 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D0000014517266F9C0000000A], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:26 CST 2014)
15:59:27.165 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.166 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.166 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.166 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 from the accessible pool
15:59:27.166 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.166 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.166 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883 to the inaccessible pool
15:59:27.166 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@7429883
15:59:27.166 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.166 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:27.179 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:27.179 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:27.180 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@31d784e6
15:59:27.180 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
15:59:27.180 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962527671
15:59:27.180 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@3c56319a
15:59:27.180 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.180 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (3 still available)
15:59:27.180 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (3 still available)
15:59:27.180 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172673CA0000000C]
15:59:27.180 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
15:59:27.180 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (3 still available), waiting if necessary
15:59:27.180 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 - closing time: 1396252823655, now time: 1396252767180
15:59:27.180 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.180 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.180 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.180 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.180 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.180 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 to the accessible pool
15:59:27.180 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@1ab5bb12 was in state IN_POOL, testing it
15:59:27.180 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12, skipping test
15:59:27.181 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.181 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.181 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.181 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.181 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@1ab5bb12 belongs to a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.181 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D00000145172673CA0000000C : 737072696E672D62746D00000145172673CD0000000D]
15:59:27.181 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D00000145172673CA0000000C : 737072696E672D62746D00000145172673CD0000000D]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@1ab5bb12 with XID null&gt;
15:59:27.181 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@1ab5bb12 with XID a Bitronix XID [737072696E672D62746D00000145172673CA0000000C : 737072696E672D62746D00000145172673CD0000000D] with NOFLAGS
15:59:27.181 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@1ab5bb12 (started) with XID a Bitronix XID [737072696E672D62746D00000145172673CA0000000C : 737072696E672D62746D00000145172673CD0000000D] with NOFLAGS
15:59:27.181 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@1ab5bb12 (started) with XID a Bitronix XID [737072696E672D62746D00000145172673CA0000000C : 737072696E672D62746D00000145172673CD0000000D]] on a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.181 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D00000145172673CA0000000C] previously unknown to a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12, adding it to the resource's transactions list
15:59:27.181 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:27.184 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.184 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@26a6f781
15:59:27.184 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.184 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.184 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.184 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.184 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.184 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.184 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.184 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.184 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.184 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.185 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from the accessible pool
15:59:27.185 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.185 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.185 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 to the inaccessible pool
15:59:27.185 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.185 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.185 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
15:59:27.185 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:27.186 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 942653440, using strategy: org.hibernate.id.Assigned
15:59:27.187 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155870725120440, using strategy: org.hibernate.id.Assigned
15:59:27.240 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementUnregisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D0000014517266F9C0000000A
15:59:27.241 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D00000145172673CA0000000C
15:59:27.330 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:27.330 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:27.330 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:27.330 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:27.330 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 2 objects
15:59:27.330 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:27.330 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:27.330 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=942620672, status=MANAGED, createdTime=Sun Mar 30 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Sun Mar 30 00:00:00 CST 2014, entitlementId=942653440, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=true, createdBy=DEFAULT, expirationTime=Tue Jan 28 00:00:00 CST 2014, entitlementDefinitionId=942604288, userId=622755904, statusReason=null, action=CREATE, group=TEST, offerId=942637056, entitlementHistoryId=740155870725120440}
15:59:27.330 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=942620672, status=MANAGED, createdTime=Sun Mar 30 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=942653440, modifiedTime=Sun Mar 30 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=true, createdBy=DEFAULT, expirationTime=Tue Jan 28 00:00:00 CST 2014, entitlementDefinitionId=942604288, userId=622755904, statusReason=null, group=TEST, offerId=942637056}
15:59:27.330 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:27.331 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.331 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.331 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.331 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172673CA0000000C]
15:59:27.331 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.331 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.331 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172673CA0000000C
15:59:27.331 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:27.331 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.331 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.331 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.331 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from the inaccessible pool
15:59:27.331 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.331 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.331 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.331 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.331 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 to the accessible pool
15:59:27.331 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@1ab5bb12 was in state NOT_ACCESSIBLE, no need to test it
15:59:27.331 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.331 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.331 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.331 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.331 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@1ab5bb12 (started) with XID a Bitronix XID [737072696E672D62746D00000145172673CA0000000C : 737072696E672D62746D00000145172673CD0000000D]
15:59:27.331 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:27.332 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.334 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.334 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.334 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@1ab5bb12 (started) with XID a Bitronix XID [737072696E672D62746D00000145172673CA0000000C : 737072696E672D62746D00000145172673CD0000000D]
15:59:27.334 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:27.335 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.337 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.337 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.337 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@26a6f781
15:59:27.337 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.337 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.337 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.337 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.337 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.337 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.337 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.337 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.337 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.337 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.338 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from the accessible pool
15:59:27.338 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.338 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.338 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 to the inaccessible pool
15:59:27.338 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.338 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.338 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.338 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.338 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.338 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172673CA0000000C]
15:59:27.338 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.338 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.338 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172673CA0000000C
15:59:27.338 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:27.338 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.338 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.338 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.338 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from the inaccessible pool
15:59:27.338 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.338 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.338 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.338 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.338 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 to the accessible pool
15:59:27.338 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@1ab5bb12 was in state NOT_ACCESSIBLE, no need to test it
15:59:27.338 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.338 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.338 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.339 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.339 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@1ab5bb12 (started) with XID a Bitronix XID [737072696E672D62746D00000145172673CA0000000C : 737072696E672D62746D00000145172673CD0000000D]
15:59:27.339 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:27.340 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
15:59:27.341 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.entitlement.db.entity.EntitlementEntity#942653440]
15:59:27.341 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.341 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@26a6f781
15:59:27.342 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.342 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.342 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.342 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.342 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.342 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.342 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.342 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.342 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.342 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.342 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from the accessible pool
15:59:27.342 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.342 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.342 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 to the inaccessible pool
15:59:27.343 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.343 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.343 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:27.343 [Test worker] INFO  c.j.e.core.EntitlementService - Merge added entitlement into existing entitlement [942653440].
15:59:27.344 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155870725121440, using strategy: org.hibernate.id.Assigned
15:59:27.344 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:27.344 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:27.344 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:27.344 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:27.345 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 1 insertions, 1 updates, 0 deletions to 3 objects
15:59:27.345 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:27.345 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:27.345 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=942620672, status=MANAGED, createdTime=Sun Mar 30 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Sun Mar 30 00:00:00 CST 2014, entitlementId=942653440, useCount=20, type=DEFAULT, managedLifecycle=null, consumable=true, createdBy=DEFAULT, expirationTime=Mon Feb 03 00:00:00 CST 2014, entitlementDefinitionId=942604288, userId=622755904, statusReason=null, action=UPDATE, group=TEST, offerId=942637056, entitlementHistoryId=740155870725121440}
15:59:27.345 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=942620672, status=MANAGED, createdTime=Sun Mar 30 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Sun Mar 30 00:00:00 CST 2014, entitlementId=942653440, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=true, createdBy=DEFAULT, expirationTime=Tue Jan 28 00:00:00 CST 2014, entitlementDefinitionId=942604288, userId=622755904, statusReason=null, action=CREATE, group=TEST, offerId=942637056, entitlementHistoryId=740155870725120440}
15:59:27.345 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=942620672, status=MANAGED, createdTime=Sun Mar 30 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=942653440, modifiedTime=Sun Mar 30 00:00:00 CST 2014, useCount=20, type=DEFAULT, managedLifecycle=true, consumable=true, createdBy=DEFAULT, expirationTime=Mon Feb 03 00:00:00 CST 2014, entitlementDefinitionId=942604288, userId=622755904, statusReason=null, group=TEST, offerId=942637056}
15:59:27.345 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:27.345 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.346 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.346 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.346 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172673CA0000000C]
15:59:27.346 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.346 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.346 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172673CA0000000C
15:59:27.346 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:27.346 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.346 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.346 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.346 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from the inaccessible pool
15:59:27.346 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.346 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.346 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.346 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.346 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 to the accessible pool
15:59:27.346 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@1ab5bb12 was in state NOT_ACCESSIBLE, no need to test it
15:59:27.346 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.346 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.346 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.346 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.346 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@1ab5bb12 (started) with XID a Bitronix XID [737072696E672D62746D00000145172673CA0000000C : 737072696E672D62746D00000145172673CD0000000D]
15:59:27.346 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:27.347 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.348 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.349 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.349 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@1ab5bb12 (started) with XID a Bitronix XID [737072696E672D62746D00000145172673CA0000000C : 737072696E672D62746D00000145172673CD0000000D]
15:59:27.349 [Test worker] DEBUG org.hibernate.SQL - update entitlement set created_by=?, created_time=?, modified_by=?, modified_time=?, tracking_uuid=?, consumable=?, developer_id=?, entitlement_definition_id=?, expiration_time=?, grant_time=?, entitlement_group=?, managed_lifecycle=?, offer_id=?, status=?, status_reason=?, tag=?, type=?, use_count=?, user_id=? where entitlement_id=?
Hibernate: update entitlement set created_by=?, created_time=?, modified_by=?, modified_time=?, tracking_uuid=?, consumable=?, developer_id=?, entitlement_definition_id=?, expiration_time=?, grant_time=?, entitlement_group=?, managed_lifecycle=?, offer_id=?, status=?, status_reason=?, tag=?, type=?, use_count=?, user_id=? where entitlement_id=?
15:59:27.350 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.352 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.352 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.352 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@26a6f781
15:59:27.352 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.353 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.353 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.353 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.353 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.353 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.353 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.353 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.353 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.353 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.353 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from the accessible pool
15:59:27.353 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.353 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.353 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 to the inaccessible pool
15:59:27.353 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.353 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.353 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.353 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.353 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.353 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172673CA0000000C]
15:59:27.353 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.353 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.353 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172673CA0000000C
15:59:27.353 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:27.353 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.353 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.354 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.354 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from the inaccessible pool
15:59:27.354 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.354 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.354 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.354 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.354 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 to the accessible pool
15:59:27.354 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@1ab5bb12 was in state NOT_ACCESSIBLE, no need to test it
15:59:27.354 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.354 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.354 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.354 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.354 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@1ab5bb12 (started) with XID a Bitronix XID [737072696E672D62746D00000145172673CA0000000C : 737072696E672D62746D00000145172673CD0000000D]
15:59:27.354 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:27.355 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
15:59:27.356 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.entitlement.db.entity.EntitlementEntity#942653440]
15:59:27.356 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.357 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@26a6f781
15:59:27.357 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.357 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.357 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.357 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.357 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.357 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.357 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.357 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.357 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.357 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.357 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from the accessible pool
15:59:27.357 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.357 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.357 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 to the inaccessible pool
15:59:27.357 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.357 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.357 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:27.357 [Test worker] INFO  c.j.e.core.EntitlementService - Merge added entitlement into existing entitlement [942653440].
15:59:27.358 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155870725122440, using strategy: org.hibernate.id.Assigned
15:59:27.358 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:27.358 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:27.359 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:27.359 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:27.359 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 1 insertions, 1 updates, 0 deletions to 4 objects
15:59:27.359 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:27.359 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:27.360 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=942620672, status=MANAGED, createdTime=Sun Mar 30 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Sun Mar 30 00:00:00 CST 2014, entitlementId=942653440, useCount=20, type=DEFAULT, managedLifecycle=null, consumable=true, createdBy=DEFAULT, expirationTime=Mon Feb 03 00:00:00 CST 2014, entitlementDefinitionId=942604288, userId=622755904, statusReason=null, action=UPDATE, group=TEST, offerId=942637056, entitlementHistoryId=740155870725121440}
15:59:27.360 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=942620672, status=MANAGED, createdTime=Sun Mar 30 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Sun Mar 30 00:00:00 CST 2014, entitlementId=942653440, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=true, createdBy=DEFAULT, expirationTime=Tue Jan 28 00:00:00 CST 2014, entitlementDefinitionId=942604288, userId=622755904, statusReason=null, action=CREATE, group=TEST, offerId=942637056, entitlementHistoryId=740155870725120440}
15:59:27.360 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=942620672, status=MANAGED, createdTime=Sun Mar 30 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Sun Mar 30 00:00:00 CST 2014, entitlementId=942653440, useCount=40, type=DEFAULT, managedLifecycle=null, consumable=true, createdBy=DEFAULT, expirationTime=Tue Feb 03 00:00:00 CST 2714, entitlementDefinitionId=942604288, userId=622755904, statusReason=null, action=UPDATE, group=TEST, offerId=942637056, entitlementHistoryId=740155870725122440}
15:59:27.360 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=942620672, status=MANAGED, createdTime=Sun Mar 30 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=942653440, modifiedTime=Sun Mar 30 00:00:00 CST 2014, useCount=40, type=DEFAULT, managedLifecycle=true, consumable=true, createdBy=DEFAULT, expirationTime=Tue Feb 03 00:00:00 CST 2714, entitlementDefinitionId=942604288, userId=622755904, statusReason=null, group=TEST, offerId=942637056}
15:59:27.360 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:27.360 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.360 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.360 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.360 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172673CA0000000C]
15:59:27.360 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.360 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.360 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172673CA0000000C
15:59:27.360 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:27.361 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.361 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.361 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.361 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from the inaccessible pool
15:59:27.361 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.361 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.361 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.361 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.361 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 to the accessible pool
15:59:27.361 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@1ab5bb12 was in state NOT_ACCESSIBLE, no need to test it
15:59:27.361 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.361 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.361 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.361 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.361 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@1ab5bb12 (started) with XID a Bitronix XID [737072696E672D62746D00000145172673CA0000000C : 737072696E672D62746D00000145172673CD0000000D]
15:59:27.361 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:27.362 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.363 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.363 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.363 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@1ab5bb12 (started) with XID a Bitronix XID [737072696E672D62746D00000145172673CA0000000C : 737072696E672D62746D00000145172673CD0000000D]
15:59:27.364 [Test worker] DEBUG org.hibernate.SQL - update entitlement set created_by=?, created_time=?, modified_by=?, modified_time=?, tracking_uuid=?, consumable=?, developer_id=?, entitlement_definition_id=?, expiration_time=?, grant_time=?, entitlement_group=?, managed_lifecycle=?, offer_id=?, status=?, status_reason=?, tag=?, type=?, use_count=?, user_id=? where entitlement_id=?
Hibernate: update entitlement set created_by=?, created_time=?, modified_by=?, modified_time=?, tracking_uuid=?, consumable=?, developer_id=?, entitlement_definition_id=?, expiration_time=?, grant_time=?, entitlement_group=?, managed_lifecycle=?, offer_id=?, status=?, status_reason=?, tag=?, type=?, use_count=?, user_id=? where entitlement_id=?
15:59:27.364 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.366 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.366 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.366 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@26a6f781
15:59:27.366 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.366 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.366 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.366 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.366 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.366 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.366 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.366 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.366 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.366 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.366 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from the accessible pool
15:59:27.366 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.366 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.366 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 to the inaccessible pool
15:59:27.366 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.366 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.367 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.367 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.367 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.367 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172673CA0000000C]
15:59:27.367 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.367 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.367 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172673CA0000000C
15:59:27.367 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:27.367 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.367 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.367 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.367 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from the inaccessible pool
15:59:27.367 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.367 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.367 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.367 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.367 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 to the accessible pool
15:59:27.367 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@1ab5bb12 was in state NOT_ACCESSIBLE, no need to test it
15:59:27.367 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.367 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.367 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.367 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.367 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@1ab5bb12 (started) with XID a Bitronix XID [737072696E672D62746D00000145172673CA0000000C : 737072696E672D62746D00000145172673CD0000000D]
15:59:27.368 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.entitlement_definition_id=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:27.369 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.369 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@26a6f781
15:59:27.369 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.369 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.370 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.370 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.370 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.370 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.370 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.370 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.370 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.370 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.370 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from the accessible pool
15:59:27.370 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.370 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.370 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 to the inaccessible pool
15:59:27.370 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.370 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.370 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:27.370 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 942718976, using strategy: org.hibernate.id.Assigned
15:59:27.371 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155870726144976, using strategy: org.hibernate.id.Assigned
15:59:27.372 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:27.372 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:27.373 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - parse() - HQL: from com.junbo.entitlement.db.entity.EntitlementEntity where userId =(:userId) and developerId = (:developerId) and type = (:type) and group = (:group) and tag = (:tag) and status &gt;= 0 and managedLifecycle = true
15:59:27.375 [Test worker] DEBUG o.h.hql.internal.ast.HqlParser - weakKeywords() : new LT(1) token - [&quot;group&quot;,&lt;126&gt; previously: &lt;24&gt;,line=1,col=136,possibleID=true]
15:59:27.377 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - Keyword  'group' is being interpreted as an identifier due to: expecting IDENT, found 'group'
15:59:27.380 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - --- HQL AST ---
 \-[QUERY] Node: 'query'
    +-[SELECT_FROM] Node: 'SELECT_FROM'
    |  \-[FROM] Node: 'from'
    |     \-[RANGE] Node: 'RANGE'
    |        \-[DOT] Node: '.'
    |           +-[DOT] Node: '.'
    |           |  +-[DOT] Node: '.'
    |           |  |  +-[DOT] Node: '.'
    |           |  |  |  +-[DOT] Node: '.'
    |           |  |  |  |  +-[IDENT] Node: 'com'
    |           |  |  |  |  \-[IDENT] Node: 'junbo'
    |           |  |  |  \-[IDENT] Node: 'entitlement'
    |           |  |  \-[IDENT] Node: 'db'
    |           |  \-[IDENT] Node: 'entity'
    |           \-[IDENT] Node: 'EntitlementEntity'
    \-[WHERE] Node: 'where'
       \-[AND] Node: 'and'
          +-[AND] Node: 'and'
          |  +-[AND] Node: 'and'
          |  |  +-[AND] Node: 'and'
          |  |  |  +-[AND] Node: 'and'
          |  |  |  |  +-[AND] Node: 'and'
          |  |  |  |  |  +-[EQ] Node: '='
          |  |  |  |  |  |  +-[IDENT] Node: 'userId'
          |  |  |  |  |  |  \-[COLON] Node: ':'
          |  |  |  |  |  |     \-[IDENT] Node: 'userId'
          |  |  |  |  |  \-[EQ] Node: '='
          |  |  |  |  |     +-[IDENT] Node: 'developerId'
          |  |  |  |  |     \-[COLON] Node: ':'
          |  |  |  |  |        \-[IDENT] Node: 'developerId'
          |  |  |  |  \-[EQ] Node: '='
          |  |  |  |     +-[IDENT] Node: 'type'
          |  |  |  |     \-[COLON] Node: ':'
          |  |  |  |        \-[IDENT] Node: 'type'
          |  |  |  \-[EQ] Node: '='
          |  |  |     +-[IDENT] Node: 'group'
          |  |  |     \-[COLON] Node: ':'
          |  |  |        \-[WEIRD_IDENT] Node: 'group'
          |  |  \-[EQ] Node: '='
          |  |     +-[IDENT] Node: 'tag'
          |  |     \-[COLON] Node: ':'
          |  |        \-[IDENT] Node: 'tag'
          |  \-[GE] Node: '&gt;='
          |     +-[IDENT] Node: 'status'
          |     \-[NUM_INT] Node: '0'
          \-[EQ] Node: '='
             +-[IDENT] Node: 'managedLifecycle'
             \-[TRUE] Node: 'true'

15:59:27.380 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
15:59:27.380 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - select &lt;&lt; begin [level=1, statement=select]
15:59:27.381 [Test worker] DEBUG o.h.h.internal.ast.tree.FromElement - FromClause{level=1} : com.junbo.entitlement.db.entity.EntitlementEntity (&lt;no alias&gt;) -&gt; entitlemen0_
15:59:27.381 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias} -&gt; {synthetic-alias}
15:59:27.381 [Test worker] DEBUG o.h.hql.internal.ast.tree.DotNode - getDataType() : userId -&gt; org.hibernate.type.LongType@36c2b1d3
15:59:27.382 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias}.userId -&gt; entitlemen0_.user_id
15:59:27.382 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias} -&gt; {synthetic-alias}
15:59:27.382 [Test worker] DEBUG o.h.hql.internal.ast.tree.DotNode - getDataType() : developerId -&gt; org.hibernate.type.LongType@36c2b1d3
15:59:27.383 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias}.developerId -&gt; entitlemen0_.developer_id
15:59:27.383 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias} -&gt; {synthetic-alias}
15:59:27.383 [Test worker] DEBUG o.h.hql.internal.ast.tree.DotNode - getDataType() : type -&gt; org.hibernate.type.CustomType@6bc8ef7b
15:59:27.383 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias}.type -&gt; entitlemen0_.type
15:59:27.383 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias} -&gt; {synthetic-alias}
15:59:27.383 [Test worker] DEBUG o.h.hql.internal.ast.tree.DotNode - getDataType() : group -&gt; org.hibernate.type.StringType@32d8ed1b
15:59:27.383 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias}.group -&gt; entitlemen0_.entitlement_group
15:59:27.383 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias} -&gt; {synthetic-alias}
15:59:27.383 [Test worker] DEBUG o.h.hql.internal.ast.tree.DotNode - getDataType() : tag -&gt; org.hibernate.type.StringType@32d8ed1b
15:59:27.383 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias}.tag -&gt; entitlemen0_.tag
15:59:27.384 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias} -&gt; {synthetic-alias}
15:59:27.384 [Test worker] DEBUG o.h.hql.internal.ast.tree.DotNode - getDataType() : status -&gt; org.hibernate.type.CustomType@59f54456
15:59:27.384 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias}.status -&gt; entitlemen0_.status
15:59:27.384 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias} -&gt; {synthetic-alias}
15:59:27.384 [Test worker] DEBUG o.h.hql.internal.ast.tree.DotNode - getDataType() : managedLifecycle -&gt; org.hibernate.type.BooleanType@5f7b530d
15:59:27.384 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias}.managedLifecycle -&gt; entitlemen0_.managed_lifecycle
15:59:27.384 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - select : finishing up [level=1, statement=select]
15:59:27.384 [Test worker] DEBUG o.h.hql.internal.ast.HqlSqlWalker - processQuery() :  ( SELECT ( FromClause{level=1} entitlement entitlemen0_ ) ( where ( and ( and ( and ( and ( and ( and ( = ( entitlemen0_.user_id {synthetic-alias} userId ) ? ) ( = ( entitlemen0_.developer_id {synthetic-alias} developerId ) ? ) ) ( = ( entitlemen0_.type {synthetic-alias} type ) ? ) ) ( = ( entitlemen0_.entitlement_group {synthetic-alias} group ) ? ) ) ( = ( entitlemen0_.tag {synthetic-alias} tag ) ? ) ) ( &gt;= ( entitlemen0_.status {synthetic-alias} status ) 0 ) ) ( = ( entitlemen0_.managed_lifecycle {synthetic-alias} managedLifecycle ) true ) ) ) )
15:59:27.384 [Test worker] DEBUG o.h.hql.internal.ast.HqlSqlWalker - Derived SELECT clause created.
15:59:27.384 [Test worker] DEBUG o.h.h.i.ast.util.JoinProcessor - Using FROM fragment [entitlement entitlemen0_]
15:59:27.385 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - select &gt;&gt; end [level=1, statement=select]
15:59:27.386 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (entitlement)
    +-[SELECT_CLAUSE] SelectClause: '{derived select clause}'
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'entitlemen0_.entitlement_id as entitlem1_0_' {FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=entitlement,tableAlias=entitlemen0_,origin=null,columns={,className=com.junbo.entitlement.db.entity.EntitlementEntity}}}
    |  \-[SQL_TOKEN] SqlFragment: 'entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_'
    +-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[], fromElementByTableAlias=[entitlemen0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
    |  \-[FROM_FRAGMENT] FromElement: 'entitlement entitlemen0_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=entitlement,tableAlias=entitlemen0_,origin=null,columns={,className=com.junbo.entitlement.db.entity.EntitlementEntity}}
    \-[WHERE] SqlNode: 'where'
       \-[AND] SqlNode: 'and'
          +-[AND] SqlNode: 'and'
          |  +-[AND] SqlNode: 'and'
          |  |  +-[AND] SqlNode: 'and'
          |  |  |  +-[AND] SqlNode: 'and'
          |  |  |  |  +-[AND] SqlNode: 'and'
          |  |  |  |  |  +-[EQ] BinaryLogicOperatorNode: '='
          |  |  |  |  |  |  +-[DOT] DotNode: 'entitlemen0_.user_id' {propertyName=userId,dereferenceType=ALL,propertyPath=userId,path={synthetic-alias}.userId,tableAlias=entitlemen0_,className=com.junbo.entitlement.db.entity.EntitlementEntity,classAlias=null}
          |  |  |  |  |  |  |  +-[IDENT] IdentNode: '{synthetic-alias}' {originalText={synthetic-alias}}
          |  |  |  |  |  |  |  \-[IDENT] IdentNode: 'userId' {originalText=userId}
          |  |  |  |  |  |  \-[NAMED_PARAM] ParameterNode: '?' {name=userId, expectedType=org.hibernate.type.LongType@36c2b1d3}
          |  |  |  |  |  \-[EQ] BinaryLogicOperatorNode: '='
          |  |  |  |  |     +-[DOT] DotNode: 'entitlemen0_.developer_id' {propertyName=developerId,dereferenceType=ALL,propertyPath=developerId,path={synthetic-alias}.developerId,tableAlias=entitlemen0_,className=com.junbo.entitlement.db.entity.EntitlementEntity,classAlias=null}
          |  |  |  |  |     |  +-[IDENT] IdentNode: '{synthetic-alias}' {originalText={synthetic-alias}}
          |  |  |  |  |     |  \-[IDENT] IdentNode: 'developerId' {originalText=developerId}
          |  |  |  |  |     \-[NAMED_PARAM] ParameterNode: '?' {name=developerId, expectedType=org.hibernate.type.LongType@36c2b1d3}
          |  |  |  |  \-[EQ] BinaryLogicOperatorNode: '='
          |  |  |  |     +-[DOT] DotNode: 'entitlemen0_.type' {propertyName=type,dereferenceType=ALL,propertyPath=type,path={synthetic-alias}.type,tableAlias=entitlemen0_,className=com.junbo.entitlement.db.entity.EntitlementEntity,classAlias=null}
          |  |  |  |     |  +-[IDENT] IdentNode: '{synthetic-alias}' {originalText={synthetic-alias}}
          |  |  |  |     |  \-[IDENT] IdentNode: 'type' {originalText=type}
          |  |  |  |     \-[NAMED_PARAM] ParameterNode: '?' {name=type, expectedType=org.hibernate.type.CustomType@6bc8ef7b}
          |  |  |  \-[EQ] BinaryLogicOperatorNode: '='
          |  |  |     +-[DOT] DotNode: 'entitlemen0_.entitlement_group' {propertyName=group,dereferenceType=ALL,propertyPath=group,path={synthetic-alias}.group,tableAlias=entitlemen0_,className=com.junbo.entitlement.db.entity.EntitlementEntity,classAlias=null}
          |  |  |     |  +-[IDENT] IdentNode: '{synthetic-alias}' {originalText={synthetic-alias}}
          |  |  |     |  \-[IDENT] IdentNode: 'group' {originalText=group}
          |  |  |     \-[NAMED_PARAM] ParameterNode: '?' {name=group, expectedType=org.hibernate.type.StringType@32d8ed1b}
          |  |  \-[EQ] BinaryLogicOperatorNode: '='
          |  |     +-[DOT] DotNode: 'entitlemen0_.tag' {propertyName=tag,dereferenceType=ALL,propertyPath=tag,path={synthetic-alias}.tag,tableAlias=entitlemen0_,className=com.junbo.entitlement.db.entity.EntitlementEntity,classAlias=null}
          |  |     |  +-[IDENT] IdentNode: '{synthetic-alias}' {originalText={synthetic-alias}}
          |  |     |  \-[IDENT] IdentNode: 'tag' {originalText=tag}
          |  |     \-[NAMED_PARAM] ParameterNode: '?' {name=tag, expectedType=org.hibernate.type.StringType@32d8ed1b}
          |  \-[GE] BinaryLogicOperatorNode: '&gt;='
          |     +-[DOT] DotNode: 'entitlemen0_.status' {propertyName=status,dereferenceType=ALL,propertyPath=status,path={synthetic-alias}.status,tableAlias=entitlemen0_,className=com.junbo.entitlement.db.entity.EntitlementEntity,classAlias=null}
          |     |  +-[IDENT] IdentNode: '{synthetic-alias}' {originalText={synthetic-alias}}
          |     |  \-[IDENT] IdentNode: 'status' {originalText=status}
          |     \-[NUM_INT] LiteralNode: '0'
          \-[EQ] BinaryLogicOperatorNode: '='
             +-[DOT] DotNode: 'entitlemen0_.managed_lifecycle' {propertyName=managedLifecycle,dereferenceType=ALL,propertyPath=managedLifecycle,path={synthetic-alias}.managedLifecycle,tableAlias=entitlemen0_,className=com.junbo.entitlement.db.entity.EntitlementEntity,classAlias=null}
             |  +-[IDENT] IdentNode: '{synthetic-alias}' {originalText={synthetic-alias}}
             |  \-[IDENT] IdentNode: 'managedLifecycle' {originalText=managedLifecycle}
             \-[TRUE] BooleanLiteralNode: 'true'

15:59:27.386 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
15:59:27.387 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - HQL: from com.junbo.entitlement.db.entity.EntitlementEntity where userId =(:userId) and developerId = (:developerId) and type = (:type) and group = (:group) and tag = (:tag) and status &gt;= 0 and managedLifecycle = true
15:59:27.387 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - SQL: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.developer_id=? and entitlemen0_.type=? and entitlemen0_.entitlement_group=? and entitlemen0_.tag=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:27.387 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
15:59:27.387 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
15:59:27.388 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
15:59:27.388 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 2 insertions, 0 updates, 0 deletions to 6 objects
15:59:27.388 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
15:59:27.388 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
15:59:27.388 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=942620672, status=MANAGED, createdTime=Sun Mar 30 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Sun Mar 30 00:00:00 CST 2014, entitlementId=942653440, useCount=20, type=DEFAULT, managedLifecycle=null, consumable=true, createdBy=DEFAULT, expirationTime=Mon Feb 03 00:00:00 CST 2014, entitlementDefinitionId=942604288, userId=622755904, statusReason=null, action=UPDATE, group=TEST, offerId=942637056, entitlementHistoryId=740155870725121440}
15:59:27.388 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=942620672, status=MANAGED, createdTime=Sun Mar 30 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Sun Mar 30 00:00:00 CST 2014, entitlementId=942653440, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=true, createdBy=DEFAULT, expirationTime=Tue Jan 28 00:00:00 CST 2014, entitlementDefinitionId=942604288, userId=622755904, statusReason=null, action=CREATE, group=TEST, offerId=942637056, entitlementHistoryId=740155870725120440}
15:59:27.388 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=942702592, status=MANAGED, createdTime=Sun Mar 30 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Sun Mar 30 00:00:00 CST 2014, entitlementId=942718976, useCount=0, type=DEFAULT, managedLifecycle=null, consumable=true, createdBy=DEFAULT, expirationTime=Tue Jan 28 00:00:00 CST 2014, entitlementDefinitionId=942686208, userId=942669824, statusReason=null, action=CREATE, group=TEST, offerId=622772288, entitlementHistoryId=740155870726144976}
15:59:27.388 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementHistoryEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=942620672, status=MANAGED, createdTime=Sun Mar 30 00:00:00 CST 2014, tag=TEST, modifiedBy=DEFAULT, modifiedTime=Sun Mar 30 00:00:00 CST 2014, entitlementId=942653440, useCount=40, type=DEFAULT, managedLifecycle=null, consumable=true, createdBy=DEFAULT, expirationTime=Tue Feb 03 00:00:00 CST 2714, entitlementDefinitionId=942604288, userId=622755904, statusReason=null, action=UPDATE, group=TEST, offerId=942637056, entitlementHistoryId=740155870725122440}
15:59:27.388 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=942620672, status=MANAGED, createdTime=Sun Mar 30 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=942653440, modifiedTime=Sun Mar 30 00:00:00 CST 2014, useCount=40, type=DEFAULT, managedLifecycle=true, consumable=true, createdBy=DEFAULT, expirationTime=Tue Feb 03 00:00:00 CST 2714, entitlementDefinitionId=942604288, userId=622755904, statusReason=null, group=TEST, offerId=942637056}
15:59:27.388 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.entitlement.db.entity.EntitlementEntity{grantTime=Wed Jan 22 00:00:00 CST 2014, developerId=942702592, status=MANAGED, createdTime=Sun Mar 30 00:00:00 CST 2014, trackingUuid=null, tag=TEST, modifiedBy=DEFAULT, entitlementId=942718976, modifiedTime=Sun Mar 30 00:00:00 CST 2014, useCount=0, type=DEFAULT, managedLifecycle=true, consumable=true, createdBy=DEFAULT, expirationTime=Tue Jan 28 00:00:00 CST 2014, entitlementDefinitionId=942686208, userId=942669824, statusReason=null, group=TEST, offerId=622772288}
15:59:27.389 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: entitlement
15:59:27.389 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.389 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.389 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.389 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172673CA0000000C]
15:59:27.389 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.389 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.389 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172673CA0000000C
15:59:27.389 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:27.389 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.389 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.389 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.389 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from the inaccessible pool
15:59:27.389 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.389 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.389 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.390 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.390 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 to the accessible pool
15:59:27.390 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@1ab5bb12 was in state NOT_ACCESSIBLE, no need to test it
15:59:27.390 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.390 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.390 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.390 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.390 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@1ab5bb12 (started) with XID a Bitronix XID [737072696E672D62746D00000145172673CA0000000C : 737072696E672D62746D00000145172673CD0000000D]
15:59:27.390 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement (created_by, created_time, modified_by, modified_time, tracking_uuid, consumable, developer_id, entitlement_definition_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:27.391 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.392 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.392 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.392 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@1ab5bb12 (started) with XID a Bitronix XID [737072696E672D62746D00000145172673CA0000000C : 737072696E672D62746D00000145172673CD0000000D]
15:59:27.392 [Test worker] DEBUG org.hibernate.SQL - insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into entitlement_history (action, consumable, created_by, created_time, developer_id, entitlement_definition_id, entitlement_id, expiration_time, grant_time, entitlement_group, managed_lifecycle, modified_by, modified_time, offer_id, status, status_reason, tag, type, use_count, user_id, entitlement_history_id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
15:59:27.393 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
15:59:27.394 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
15:59:27.394 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.394 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@26a6f781
15:59:27.394 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.394 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.394 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.394 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.395 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.395 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.395 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.395 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.395 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.395 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.395 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from the accessible pool
15:59:27.395 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.395 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.395 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 to the inaccessible pool
15:59:27.395 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.395 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.395 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
15:59:27.395 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.395 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.395 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172673CA0000000C]
15:59:27.395 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.395 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.395 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172673CA0000000C
15:59:27.395 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
15:59:27.395 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.395 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.395 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.395 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from the inaccessible pool
15:59:27.395 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.395 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.395 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.396 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.396 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 to the accessible pool
15:59:27.396 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@1ab5bb12 was in state NOT_ACCESSIBLE, no need to test it
15:59:27.396 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.396 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/entitlement_ds1 with 3 connection(s) (2 still available)
15:59:27.396 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
15:59:27.396 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.396 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/entitlement_ds1 XAResource=org.postgresql.xa.PGXAConnection@1ab5bb12 (started) with XID a Bitronix XID [737072696E672D62746D00000145172673CA0000000C : 737072696E672D62746D00000145172673CD0000000D]
15:59:27.396 [Test worker] DEBUG org.hibernate.SQL - select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.developer_id=? and entitlemen0_.type=? and entitlemen0_.entitlement_group=? and entitlemen0_.tag=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
Hibernate: select entitlemen0_.entitlement_id as entitlem1_0_, entitlemen0_.created_by as created2_0_, entitlemen0_.created_time as created3_0_, entitlemen0_.modified_by as modified4_0_, entitlemen0_.modified_time as modified5_0_, entitlemen0_.tracking_uuid as tracking6_0_, entitlemen0_.consumable as consumable0_, entitlemen0_.developer_id as developer8_0_, entitlemen0_.entitlement_definition_id as entitlem9_0_, entitlemen0_.expiration_time as expiration10_0_, entitlemen0_.grant_time as grant11_0_, entitlemen0_.entitlement_group as entitle12_0_, entitlemen0_.managed_lifecycle as managed13_0_, entitlemen0_.offer_id as offer14_0_, entitlemen0_.status as status0_, entitlemen0_.status_reason as status16_0_, entitlemen0_.tag as tag0_, entitlemen0_.type as type0_, entitlemen0_.use_count as use19_0_, entitlemen0_.user_id as user20_0_ from entitlement entitlemen0_ where entitlemen0_.user_id=? and entitlemen0_.developer_id=? and entitlemen0_.type=? and entitlemen0_.entitlement_group=? and entitlemen0_.tag=? and entitlemen0_.status&gt;=0 and entitlemen0_.managed_lifecycle=true
15:59:27.399 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
15:59:27.400 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.entitlement.db.entity.EntitlementEntity#942718976]
15:59:27.400 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
15:59:27.400 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@26a6f781
15:59:27.400 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.400 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.400 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.400 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.400 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.400 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.400 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172673CA0000000C], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 15:59:27 CST 2014)
15:59:27.400 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.400 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.400 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
15:59:27.400 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 from the accessible pool
15:59:27.400 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.401 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.401 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12 to the inaccessible pool
15:59:27.401 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/entitlement_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@1ab5bb12
15:59:27.401 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
15:59:27.401 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
15:59:27.401 [Test worker] INFO  c.j.e.core.EntitlementService - Merge added entitlement into existing entitlement [942718976].
15:59:27.401 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155870726145976, using strategy: org.hibernate.id.Assigned
15:59:27.412 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:27.412 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:27.412 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:27.412 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@1c6f5aee
15:59:27.412 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
15:59:27.413 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962527674
15:59:27.413 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@47f607c0
15:59:27.413 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 942784512, using strategy: org.hibernate.id.Assigned
15:59:27.413 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866499073512, using strategy: org.hibernate.id.Assigned
15:59:27.414 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'EntitlementServiceImpl.transferEntitlement' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
15:59:27.414 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:27.414 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:27.415 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155866499074512, using strategy: org.hibernate.id.Assigned
15:59:27.416 [Test worker] INFO  c.j.e.core.EntitlementService - Entitlement [942784512] is deleted for transferring.
15:59:27.416 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:27.416 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 942800896, using strategy: org.hibernate.id.Assigned
15:59:27.416 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155870727168896, using strategy: org.hibernate.id.Assigned
15:59:27.417 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:27.417 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:27.425 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:27.425 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:27.425 [Test worker] WARN  c.j.e.core.service.BaseService - consumable not found, set false and set useCount to 0 as default.
15:59:27.425 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@68871c45
15:59:27.425 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
15:59:27.425 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962527674
15:59:27.426 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@4a37f11e
15:59:27.426 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 942882816, using strategy: org.hibernate.id.Assigned
15:59:27.426 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155870728192816, using strategy: org.hibernate.id.Assigned
15:59:27.427 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'EntitlementServiceImpl.updateEntitlement' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
15:59:27.427 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
15:59:27.427 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
15:59:27.428 [Test worker] INFO  c.j.e.core.service.BaseService - Delete or ban entitlement [942882816], set managedLifecycle and consumable to false and set useCount to 0.
15:59:27.428 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740155870728193816, using strategy: org.hibernate.id.Assigned
</pre>
</span>
</div>
</div>
<div id="footer">
<p>Generated by 
<a href="http://www.gradle.org">Gradle 1.10</a> at 2014-3-31 15:59:28</p>
</div>
</div>
</body>