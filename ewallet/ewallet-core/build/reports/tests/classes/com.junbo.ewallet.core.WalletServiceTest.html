<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta httpEquiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Test results - Class com.junbo.ewallet.core.WalletServiceTest</title>
<link href="css/base-style.css" rel="stylesheet" type="text/css"/>
<link href="css/style.css" rel="stylesheet" type="text/css"/>
<script src="js/report.js" type="text/javascript"></script>
</head>
<body>
<div id="content">
<h1>Class com.junbo.ewallet.core.WalletServiceTest</h1>
<div class="breadcrumbs">
<a href="../index.html">all</a> &gt; 
<a href="../packages/com.junbo.ewallet.core.html">com.junbo.ewallet.core</a> &gt; WalletServiceTest</div>
<div id="summary">
<table>
<tr>
<td>
<div class="summaryGroup">
<table>
<tr>
<td>
<div class="infoBox" id="tests">
<div class="counter">6</div>
<p>tests</p>
</div>
</td>
<td>
<div class="infoBox" id="failures">
<div class="counter">0</div>
<p>failures</p>
</div>
</td>
<td>
<div class="infoBox" id="duration">
<div class="counter">1.059s</div>
<p>duration</p>
</div>
</td>
</tr>
</table>
</div>
</td>
<td>
<div class="infoBox success" id="successRate">
<div class="percent">100%</div>
<p>successful</p>
</div>
</td>
</tr>
</table>
</div>
<div id="tabs">
<ul class="tabLinks">
<li>
<a href="#tab0">Tests</a>
</li>
<li>
<a href="#tab1">Standard output</a>
</li>
</ul>
<div id="tab0" class="tab">
<h2>Tests</h2>
<table>
<thead>
<tr>
<th>Test</th>
<th>Duration</th>
<th>Result</th>
</tr>
</thead>
<tr>
<td class="success">testAdd</td>
<td>0.626s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testCreditAndDebit</td>
<td>0.135s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testExpiredCredit</td>
<td>0.191s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testGetTransactions</td>
<td>0.086s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testNotEnoughMoney</td>
<td>0.013s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdate</td>
<td>0.008s</td>
<td class="success">passed</td>
</tr>
</table>
</div>
<div id="tab1" class="tab">
<h2>Standard output</h2>
<span class="code">
<pre>16:04:07.049 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'
16:04:07.052 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'OculusGlobalCounterInDBImpl.getAndIncrease' with attribute: PROPAGATION_REQUIRES_NEW,ISOLATION_DEFAULT; ''
16:04:07.056 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:04:07.058 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [com.junbo.sharding.id.oculus.OculusGlobalCounterInDBImpl.getAndIncrease]
16:04:07.058 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB8F700000001], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.058 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (905996572) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB8F700000001], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014), default timeout 60s
16:04:07.058 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:04:07.058 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:04:07.058 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB8F700000001], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.059 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D00000145172AB91200000002]
16:04:07.059 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (905996572) with transaction null, default timeout 60s&gt;
16:04:07.059 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:04:07.059 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:04:07.059 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014) for Mon Mar 31 16:05:07 CST 2014
16:04:07.059 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.059 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014) scheduled for Mon Mar 31 16:05:07 CST 2014, total task(s) queued: 5
16:04:07.059 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:04:07 CST 2014
16:04:07.065 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:04:07.065 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:04:07.098 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D00000145172AB8F700000001
16:04:07.099 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D00000145172AB91200000002
16:04:07.136 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@1fa4af2a
16:04:07.137 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:04:07.137 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962530470
16:04:07.138 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@1b2c55c7
16:04:07.180 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:07.180 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available)
16:04:07.180 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available)
16:04:07.180 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172AB91200000002]
16:04:07.180 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:04:07.180 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available), waiting if necessary
16:04:07.180 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 - closing time: 1396253106297, now time: 1396253047180
16:04:07.180 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.180 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.180 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.180 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.180 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.181 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 to the accessible pool
16:04:07.181 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@483384c1 was in state IN_POOL, testing it
16:04:07.181 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1, skipping test
16:04:07.181 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.181 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.181 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:07.181 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.182 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@483384c1 does not belong to any resource of a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (3 still available)
16:04:07.182 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@483384c1 belongs to a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.183 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D00000145172AB91200000002 : 737072696E672D62746D00000145172AB98F00000003]
16:04:07.183 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D00000145172AB91200000002 : 737072696E672D62746D00000145172AB98F00000003]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@483384c1 with XID null&gt;
16:04:07.183 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@483384c1 with XID a Bitronix XID [737072696E672D62746D00000145172AB91200000002 : 737072696E672D62746D00000145172AB98F00000003] with NOFLAGS
16:04:07.183 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@483384c1 (started) with XID a Bitronix XID [737072696E672D62746D00000145172AB91200000002 : 737072696E672D62746D00000145172AB98F00000003] with NOFLAGS
16:04:07.183 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@483384c1 (started) with XID a Bitronix XID [737072696E672D62746D00000145172AB91200000002 : 737072696E672D62746D00000145172AB98F00000003]] on a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.184 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D00000145172AB91200000002] previously unknown to a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1, adding it to the resource's transactions list
16:04:07.205 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
16:04:07.216 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 1 -&gt; shardId [1]
16:04:07.217 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -&gt; optionMode [2]
16:04:07.250 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:04:07.253 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
16:04:07.260 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:07.260 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@210be7c2
16:04:07.260 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.260 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.260 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.260 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.260 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.260 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.261 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.261 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.261 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.261 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:07.261 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 from the accessible pool
16:04:07.262 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.262 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.262 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 to the inaccessible pool
16:04:07.262 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.262 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:07.263 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:04:07.264 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
16:04:07.267 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
16:04:07.267 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:04:07.269 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'IdGlobalCounterDAOImpl.saveOrUpdate' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
16:04:07.269 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:04:07.269 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:04:07.270 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:04:07.275 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:04:07.281 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 1 updates, 0 deletions to 1 objects
16:04:07.281 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:04:07.283 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:04:07.283 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=1, shardId=1, globalCounter=42, optionMode=2}
16:04:07.283 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: id_global_counter
16:04:07.314 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:07.315 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.315 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.315 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172AB91200000002]
16:04:07.315 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.315 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.316 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172AB91200000002
16:04:07.316 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:04:07.316 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.316 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.316 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.316 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 from the inaccessible pool
16:04:07.316 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.316 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.316 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.317 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.317 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 to the accessible pool
16:04:07.317 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@483384c1 was in state NOT_ACCESSIBLE, no need to test it
16:04:07.317 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.317 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.317 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:07.317 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.317 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@483384c1 (started) with XID a Bitronix XID [737072696E672D62746D00000145172AB91200000002 : 737072696E672D62746D00000145172AB98F00000003]
16:04:07.318 [Test worker] DEBUG org.hibernate.SQL - update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
Hibernate: update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
16:04:07.319 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:07.322 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:07.322 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:07.322 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@210be7c2
16:04:07.322 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.322 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.322 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.323 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.323 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.323 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.323 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.323 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.323 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.323 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:07.323 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 from the accessible pool
16:04:07.323 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.324 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.324 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 to the inaccessible pool
16:04:07.324 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.324 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:07.324 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:07.324 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.324 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.324 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172AB91200000002]
16:04:07.325 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.325 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.325 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172AB91200000002
16:04:07.325 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:04:07.325 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.325 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.325 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.325 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 from the inaccessible pool
16:04:07.325 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.325 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.325 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.325 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.325 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 to the accessible pool
16:04:07.325 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@483384c1 was in state NOT_ACCESSIBLE, no need to test it
16:04:07.325 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.325 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.325 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:07.326 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.326 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@483384c1 (started) with XID a Bitronix XID [737072696E672D62746D00000145172AB91200000002 : 737072696E672D62746D00000145172AB98F00000003]
16:04:07.326 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
16:04:07.326 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 1 -&gt; shardId [1]
16:04:07.326 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -&gt; optionMode [2]
16:04:07.336 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:04:07.336 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
16:04:07.336 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:07.336 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@210be7c2
16:04:07.336 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.337 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.337 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.337 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.337 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.337 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.337 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.337 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.337 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.337 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:07.337 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 from the accessible pool
16:04:07.337 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.337 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.337 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 to the inaccessible pool
16:04:07.337 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.337 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:07.337 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:04:07.348 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:04:07.348 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:04:07.349 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 1 updates, 0 deletions to 1 objects
16:04:07.349 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:04:07.349 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:04:07.349 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=1, shardId=1, globalCounter=42, optionMode=2}
16:04:07.349 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: id_global_counter
16:04:07.349 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:07.349 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.349 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.349 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172AB91200000002]
16:04:07.349 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.350 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.350 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172AB91200000002
16:04:07.350 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:04:07.350 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.350 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.350 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.350 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 from the inaccessible pool
16:04:07.350 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.350 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.350 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.350 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.350 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 to the accessible pool
16:04:07.350 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@483384c1 was in state NOT_ACCESSIBLE, no need to test it
16:04:07.350 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.350 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.350 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:07.351 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.351 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@483384c1 (started) with XID a Bitronix XID [737072696E672D62746D00000145172AB91200000002 : 737072696E672D62746D00000145172AB98F00000003]
16:04:07.351 [Test worker] DEBUG org.hibernate.SQL - update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
Hibernate: update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
16:04:07.351 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:07.357 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:07.357 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:07.357 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@210be7c2
16:04:07.357 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.357 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.357 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.358 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.358 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.358 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.358 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.358 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.358 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.358 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:07.358 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 from the accessible pool
16:04:07.358 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.358 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.358 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 to the inaccessible pool
16:04:07.358 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.358 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:07.359 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:07.359 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.359 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.359 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172AB91200000002]
16:04:07.359 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.359 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.359 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172AB91200000002
16:04:07.359 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:04:07.359 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.359 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.359 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.359 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 from the inaccessible pool
16:04:07.359 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.359 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.359 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.360 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.360 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 to the accessible pool
16:04:07.360 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@483384c1 was in state NOT_ACCESSIBLE, no need to test it
16:04:07.360 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.360 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.360 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:07.360 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.360 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@483384c1 (started) with XID a Bitronix XID [737072696E672D62746D00000145172AB91200000002 : 737072696E672D62746D00000145172AB98F00000003]
16:04:07.360 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
16:04:07.361 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 1 -&gt; shardId [1]
16:04:07.361 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -&gt; optionMode [2]
16:04:07.371 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:04:07.371 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
16:04:07.375 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:07.375 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@210be7c2
16:04:07.375 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.375 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.375 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.375 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.375 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.375 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.375 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.375 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.376 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.376 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:07.376 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 from the accessible pool
16:04:07.376 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.376 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.376 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 to the inaccessible pool
16:04:07.376 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.376 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:07.376 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:04:07.377 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:04:07.377 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:04:07.377 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
16:04:07.377 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:04:07.377 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:04:07.378 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=1, shardId=1, globalCounter=42, optionMode=2}
16:04:07.378 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:07.378 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.378 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.378 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172AB91200000002]
16:04:07.378 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.378 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.378 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172AB91200000002
16:04:07.378 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:04:07.382 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.382 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.382 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.382 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 from the inaccessible pool
16:04:07.382 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.382 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.382 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.382 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.382 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 to the accessible pool
16:04:07.382 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@483384c1 was in state NOT_ACCESSIBLE, no need to test it
16:04:07.382 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.382 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.382 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:07.383 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.383 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@483384c1 (started) with XID a Bitronix XID [737072696E672D62746D00000145172AB91200000002 : 737072696E672D62746D00000145172AB98F00000003]
16:04:07.383 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
16:04:07.383 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 1 -&gt; shardId [1]
16:04:07.384 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -&gt; optionMode [2]
16:04:07.388 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:04:07.389 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#1]
16:04:07.389 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:07.389 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@210be7c2
16:04:07.389 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.389 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.389 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.389 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.389 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.389 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.389 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.389 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.390 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.390 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:07.390 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 from the accessible pool
16:04:07.390 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.390 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.390 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 to the inaccessible pool
16:04:07.390 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.390 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:07.390 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:04:07.390 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:04:07.390 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.390 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.391 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.391 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014) scheduled for Mon Mar 31 16:05:07 CST 2014, total task(s) still queued: 4
16:04:07.391 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:04:07.392 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.392 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.392 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@1fa4af2a
16:04:07.392 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:04:07.392 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:04:07.392 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
16:04:07.393 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:04:07.393 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:04:07.393 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=1, shardId=1, globalCounter=42, optionMode=2}
16:04:07.393 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:07.393 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@1b2c55c7
16:04:07.393 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@483384c1 (started) with XID a Bitronix XID [737072696E672D62746D00000145172AB91200000002 : 737072696E672D62746D00000145172AB98F00000003]
16:04:07.393 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@483384c1 (started) with XID a Bitronix XID [737072696E672D62746D00000145172AB91200000002 : 737072696E672D62746D00000145172AB98F00000003]
16:04:07.393 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@483384c1 (started) with XID a Bitronix XID [737072696E672D62746D00000145172AB91200000002 : 737072696E672D62746D00000145172AB98F00000003] with SUCCESS
16:04:07.393 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@483384c1 (started) with XID a Bitronix XID [737072696E672D62746D00000145172AB91200000002 : 737072696E672D62746D00000145172AB98F00000003] with SUCCESS
16:04:07.393 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:04:07.393 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:04:07.394 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:04:07.394 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:04:07.394 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:04:07.394 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:04:07.394 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:04:07.394 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:04:07.394 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:04:07.394 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:04:07.394 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:04:07.395 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@483384c1 (ended) with XID a Bitronix XID [737072696E672D62746D00000145172AB91200000002 : 737072696E672D62746D00000145172AB98F00000003] (with one-phase optimization)
16:04:07.398 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@483384c1 (ended) with XID a Bitronix XID [737072696E672D62746D00000145172AB91200000002 : 737072696E672D62746D00000145172AB98F00000003]
16:04:07.398 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:04:07.399 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:04:07.399 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/sharding]
16:04:07.400 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/sharding]
16:04:07.400 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:04:07.400 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:04:07.400 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.400 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:04:07.400 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D00000145172AB91200000002 : 737072696E672D62746D00000145172AB98F00000003] from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.400 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 cleaned up all transaction states for GTRID [737072696E672D62746D00000145172AB91200000002]
16:04:07.400 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:04:07.400 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@1fa4af2a with status=COMMITTED
16:04:07.401 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:04:07.401 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
16:04:07.403 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@1b2c55c7 with status=COMMITTED
16:04:07.403 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014) with status=COMMITTED
16:04:07.403 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (905996572) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014), default timeout 60s
16:04:07.403 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB91200000002], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.403 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 with status=COMMITTED
16:04:07.403 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.403 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.403 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:07.403 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 from the inaccessible pool
16:04:07.403 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.403 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.404 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1 to the available pool
16:04:07.404 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@483384c1
16:04:07.409 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:04:07.409 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB8F700000001], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.409 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB8F700000001], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)&gt; to &lt;a ThreadContext (905996572) with transaction null, default timeout 60s&gt;
16:04:07.415 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'WalletServiceImpl.add' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
16:04:07.415 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:04:07.415 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:04:07.431 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@443a1ac3
16:04:07.431 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:04:07.431 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962530474
16:04:07.431 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@23f35cc4
16:04:07.473 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - parse() - HQL: from com.junbo.ewallet.db.entity.hibernate.WalletEntity where userId = (:userId) and type = (:type) and currency = (:currency)
16:04:07.484 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - --- HQL AST ---
 \-[QUERY] Node: 'query'
    +-[SELECT_FROM] Node: 'SELECT_FROM'
    |  \-[FROM] Node: 'from'
    |     \-[RANGE] Node: 'RANGE'
    |        \-[DOT] Node: '.'
    |           +-[DOT] Node: '.'
    |           |  +-[DOT] Node: '.'
    |           |  |  +-[DOT] Node: '.'
    |           |  |  |  +-[DOT] Node: '.'
    |           |  |  |  |  +-[DOT] Node: '.'
    |           |  |  |  |  |  +-[IDENT] Node: 'com'
    |           |  |  |  |  |  \-[IDENT] Node: 'junbo'
    |           |  |  |  |  \-[IDENT] Node: 'ewallet'
    |           |  |  |  \-[IDENT] Node: 'db'
    |           |  |  \-[IDENT] Node: 'entity'
    |           |  \-[IDENT] Node: 'hibernate'
    |           \-[IDENT] Node: 'WalletEntity'
    \-[WHERE] Node: 'where'
       \-[AND] Node: 'and'
          +-[AND] Node: 'and'
          |  +-[EQ] Node: '='
          |  |  +-[IDENT] Node: 'userId'
          |  |  \-[COLON] Node: ':'
          |  |     \-[IDENT] Node: 'userId'
          |  \-[EQ] Node: '='
          |     +-[IDENT] Node: 'type'
          |     \-[COLON] Node: ':'
          |        \-[IDENT] Node: 'type'
          \-[EQ] Node: '='
             +-[IDENT] Node: 'currency'
             \-[COLON] Node: ':'
                \-[IDENT] Node: 'currency'

16:04:07.484 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:04:07.518 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - select &lt;&lt; begin [level=1, statement=select]
16:04:07.539 [Test worker] DEBUG o.h.h.internal.ast.tree.FromElement - FromClause{level=1} : com.junbo.ewallet.db.entity.hibernate.WalletEntity (&lt;no alias&gt;) -&gt; walletenti0_
16:04:07.541 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias} -&gt; {synthetic-alias}
16:04:07.542 [Test worker] DEBUG o.h.hql.internal.ast.tree.DotNode - getDataType() : userId -&gt; org.hibernate.type.LongType@1afdf4ee
16:04:07.543 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias}.userId -&gt; walletenti0_.user_id
16:04:07.546 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias} -&gt; {synthetic-alias}
16:04:07.546 [Test worker] DEBUG o.h.hql.internal.ast.tree.DotNode - getDataType() : type -&gt; org.hibernate.type.CustomType@4ca4ef99
16:04:07.546 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias}.type -&gt; walletenti0_.type
16:04:07.547 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias} -&gt; {synthetic-alias}
16:04:07.547 [Test worker] DEBUG o.h.hql.internal.ast.tree.DotNode - getDataType() : currency -&gt; org.hibernate.type.CustomType@45f710d9
16:04:07.547 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias}.currency -&gt; walletenti0_.currency
16:04:07.548 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - select : finishing up [level=1, statement=select]
16:04:07.548 [Test worker] DEBUG o.h.hql.internal.ast.HqlSqlWalker - processQuery() :  ( SELECT ( FromClause{level=1} ewallet walletenti0_ ) ( where ( and ( and ( = ( walletenti0_.user_id {synthetic-alias} userId ) ? ) ( = ( walletenti0_.type {synthetic-alias} type ) ? ) ) ( = ( walletenti0_.currency {synthetic-alias} currency ) ? ) ) ) )
16:04:07.552 [Test worker] DEBUG o.h.hql.internal.ast.HqlSqlWalker - Derived SELECT clause created.
16:04:07.557 [Test worker] DEBUG o.h.h.i.ast.util.JoinProcessor - Using FROM fragment [ewallet walletenti0_]
16:04:07.557 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - select &gt;&gt; end [level=1, statement=select]
16:04:07.558 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (ewallet)
    +-[SELECT_CLAUSE] SelectClause: '{derived select clause}'
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'walletenti0_.id as id2_' {FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=ewallet,tableAlias=walletenti0_,origin=null,columns={,className=com.junbo.ewallet.db.entity.hibernate.WalletEntity}}}
    |  \-[SQL_TOKEN] SqlFragment: 'walletenti0_.created_by as created2_2_, walletenti0_.created_time as created3_2_, walletenti0_.modified_by as modified4_2_, walletenti0_.modified_time as modified5_2_, walletenti0_.balance as balance2_, walletenti0_.currency as currency2_, walletenti0_.status as status2_, walletenti0_.tracking_uuid as tracking9_2_, walletenti0_.type as type2_, walletenti0_.user_id as user11_2_'
    +-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[], fromElementByTableAlias=[walletenti0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
    |  \-[FROM_FRAGMENT] FromElement: 'ewallet walletenti0_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=ewallet,tableAlias=walletenti0_,origin=null,columns={,className=com.junbo.ewallet.db.entity.hibernate.WalletEntity}}
    \-[WHERE] SqlNode: 'where'
       \-[AND] SqlNode: 'and'
          +-[AND] SqlNode: 'and'
          |  +-[EQ] BinaryLogicOperatorNode: '='
          |  |  +-[DOT] DotNode: 'walletenti0_.user_id' {propertyName=userId,dereferenceType=ALL,propertyPath=userId,path={synthetic-alias}.userId,tableAlias=walletenti0_,className=com.junbo.ewallet.db.entity.hibernate.WalletEntity,classAlias=null}
          |  |  |  +-[IDENT] IdentNode: '{synthetic-alias}' {originalText={synthetic-alias}}
          |  |  |  \-[IDENT] IdentNode: 'userId' {originalText=userId}
          |  |  \-[NAMED_PARAM] ParameterNode: '?' {name=userId, expectedType=org.hibernate.type.LongType@1afdf4ee}
          |  \-[EQ] BinaryLogicOperatorNode: '='
          |     +-[DOT] DotNode: 'walletenti0_.type' {propertyName=type,dereferenceType=ALL,propertyPath=type,path={synthetic-alias}.type,tableAlias=walletenti0_,className=com.junbo.ewallet.db.entity.hibernate.WalletEntity,classAlias=null}
          |     |  +-[IDENT] IdentNode: '{synthetic-alias}' {originalText={synthetic-alias}}
          |     |  \-[IDENT] IdentNode: 'type' {originalText=type}
          |     \-[NAMED_PARAM] ParameterNode: '?' {name=type, expectedType=org.hibernate.type.CustomType@4ca4ef99}
          \-[EQ] BinaryLogicOperatorNode: '='
             +-[DOT] DotNode: 'walletenti0_.currency' {propertyName=currency,dereferenceType=ALL,propertyPath=currency,path={synthetic-alias}.currency,tableAlias=walletenti0_,className=com.junbo.ewallet.db.entity.hibernate.WalletEntity,classAlias=null}
             |  +-[IDENT] IdentNode: '{synthetic-alias}' {originalText={synthetic-alias}}
             |  \-[IDENT] IdentNode: 'currency' {originalText=currency}
             \-[NAMED_PARAM] ParameterNode: '?' {name=currency, expectedType=org.hibernate.type.CustomType@45f710d9}

16:04:07.558 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:04:07.567 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - HQL: from com.junbo.ewallet.db.entity.hibernate.WalletEntity where userId = (:userId) and type = (:type) and currency = (:currency)
16:04:07.567 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - SQL: select walletenti0_.id as id2_, walletenti0_.created_by as created2_2_, walletenti0_.created_time as created3_2_, walletenti0_.modified_by as modified4_2_, walletenti0_.modified_time as modified5_2_, walletenti0_.balance as balance2_, walletenti0_.currency as currency2_, walletenti0_.status as status2_, walletenti0_.tracking_uuid as tracking9_2_, walletenti0_.type as type2_, walletenti0_.user_id as user11_2_ from ewallet walletenti0_ where walletenti0_.user_id=? and walletenti0_.type=? and walletenti0_.currency=?
16:04:07.567 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:04:07.572 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:07.572 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (3 still available)
16:04:07.572 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/id_ds1 with 3 connection(s) (3 still available)
16:04:07.572 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172AB8F700000001]
16:04:07.572 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:04:07.572 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/id_ds1 with 3 connection(s) (3 still available), waiting if necessary
16:04:07.572 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab - closing time: 1396253104597, now time: 1396253047572
16:04:07.572 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab from an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.572 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:07.572 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:07.572 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:07.572 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:07.572 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab to the accessible pool
16:04:07.572 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@55c884ab was in state IN_POOL, testing it
16:04:07.572 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab, skipping test
16:04:07.572 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:07.572 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.573 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:07.573 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB8F700000001], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.573 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@55c884ab belongs to a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.573 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D00000145172AB8F700000001 : 737072696E672D62746D00000145172ABB1500000004]
16:04:07.573 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D00000145172AB8F700000001 : 737072696E672D62746D00000145172ABB1500000004]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab with XID null&gt;
16:04:07.573 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab with XID a Bitronix XID [737072696E672D62746D00000145172AB8F700000001 : 737072696E672D62746D00000145172ABB1500000004] with NOFLAGS
16:04:07.573 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (started) with XID a Bitronix XID [737072696E672D62746D00000145172AB8F700000001 : 737072696E672D62746D00000145172ABB1500000004] with NOFLAGS
16:04:07.573 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (started) with XID a Bitronix XID [737072696E672D62746D00000145172AB8F700000001 : 737072696E672D62746D00000145172ABB1500000004]] on a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:07.573 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D00000145172AB8F700000001] previously unknown to a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab, adding it to the resource's transactions list
16:04:07.573 [Test worker] DEBUG org.hibernate.SQL - select walletenti0_.id as id2_, walletenti0_.created_by as created2_2_, walletenti0_.created_time as created3_2_, walletenti0_.modified_by as modified4_2_, walletenti0_.modified_time as modified5_2_, walletenti0_.balance as balance2_, walletenti0_.currency as currency2_, walletenti0_.status as status2_, walletenti0_.tracking_uuid as tracking9_2_, walletenti0_.type as type2_, walletenti0_.user_id as user11_2_ from ewallet walletenti0_ where walletenti0_.user_id=? and walletenti0_.type=? and walletenti0_.currency=?
Hibernate: select walletenti0_.id as id2_, walletenti0_.created_by as created2_2_, walletenti0_.created_time as created3_2_, walletenti0_.modified_by as modified4_2_, walletenti0_.modified_time as modified5_2_, walletenti0_.balance as balance2_, walletenti0_.currency as currency2_, walletenti0_.status as status2_, walletenti0_.tracking_uuid as tracking9_2_, walletenti0_.type as type2_, walletenti0_.user_id as user11_2_ from ewallet walletenti0_ where walletenti0_.user_id=? and walletenti0_.type=? and walletenti0_.currency=?
16:04:07.580 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:07.580 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@2745fd39
16:04:07.580 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:07.580 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB8F700000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.580 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:07.580 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB8F700000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.580 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:07.580 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:07.580 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB8F700000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.580 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:07.581 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:07.581 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:07.581 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab from the accessible pool
16:04:07.581 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:07.581 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:07.581 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab to the inaccessible pool
16:04:07.581 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:07.581 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:07.581 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:04:07.581 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:04:07.582 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:04:07.582 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Suspending current transaction, creating new transaction with name [com.junbo.sharding.id.oculus.OculusGlobalCounterInDBImpl.getAndIncrease]
16:04:07.582 [Test worker] DEBUG b.tm.BitronixTransactionManager - suspending transaction a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB8F700000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.582 [Test worker] DEBUG b.tm.internal.XAResourceManager - suspending an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (started) with XID a Bitronix XID [737072696E672D62746D00000145172AB8F700000001 : 737072696E672D62746D00000145172ABB1500000004]
16:04:07.582 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (started) with XID a Bitronix XID [737072696E672D62746D00000145172AB8F700000001 : 737072696E672D62746D00000145172ABB1500000004] with SUCCESS
16:04:07.582 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (started) with XID a Bitronix XID [737072696E672D62746D00000145172AB8F700000001 : 737072696E672D62746D00000145172ABB1500000004] with SUCCESS
16:04:07.582 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing current thread context: a ThreadContext (905996572) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB8F700000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014), default timeout 60s
16:04:07.582 [Test worker] DEBUG b.tm.BitronixTransactionManager - beginning a new transaction
16:04:07.582 [Test worker] DEBUG b.tm.BitronixTransactionManager - dumping 1 transaction context(s)
16:04:07.582 [Test worker] DEBUG b.tm.BitronixTransactionManager - a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB8F700000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.582 [Test worker] DEBUG bitronix.tm.BitronixTransaction - creating new transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005]
16:04:07.582 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=NO_TRANSACTION, 0 resource(s) enlisted (started null)&gt; to &lt;a ThreadContext (905996572) with transaction null, default timeout 60s&gt;
16:04:07.582 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to ACTIVE
16:04:07.583 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from NO_TRANSACTION to ACTIVE - executing 0 listener(s)
16:04:07.583 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014) for Mon Mar 31 16:05:07 CST 2014
16:04:07.583 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.583 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - scheduled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014) scheduled for Mon Mar 31 16:05:07 CST 2014, total task(s) queued: 5
16:04:07.583 [Test worker] DEBUG b.tm.BitronixTransactionManager - begun new transaction at Mon Mar 31 16:04:07 CST 2014
16:04:07.583 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:04:07.583 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:04:07.583 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@31386a4b
16:04:07.584 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:04:07.584 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962530475
16:04:07.584 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@75e80151
16:04:07.584 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:07.584 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available)
16:04:07.584 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available)
16:04:07.584 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172ABB1E00000005]
16:04:07.584 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:04:07.584 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/sharding with 3 connection(s) (3 still available), waiting if necessary
16:04:07.584 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd - closing time: 1396253106307, now time: 1396253047584
16:04:07.584 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.584 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.585 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.585 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.585 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.585 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd to the accessible pool
16:04:07.585 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@3aa1abcd was in state IN_POOL, testing it
16:04:07.585 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd, skipping test
16:04:07.585 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.585 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.585 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:07.585 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.585 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@3aa1abcd does not belong to any resource of a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.585 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@3aa1abcd belongs to a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.585 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D00000145172ABB1E00000005 : 737072696E672D62746D00000145172ABB2100000006]
16:04:07.585 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D00000145172ABB1E00000005 : 737072696E672D62746D00000145172ABB2100000006]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@3aa1abcd with XID null&gt;
16:04:07.585 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@3aa1abcd with XID a Bitronix XID [737072696E672D62746D00000145172ABB1E00000005 : 737072696E672D62746D00000145172ABB2100000006] with NOFLAGS
16:04:07.585 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@3aa1abcd (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABB1E00000005 : 737072696E672D62746D00000145172ABB2100000006] with NOFLAGS
16:04:07.585 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@3aa1abcd (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABB1E00000005 : 737072696E672D62746D00000145172ABB2100000006]] on a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.586 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D00000145172ABB1E00000005] previously unknown to a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd, adding it to the resource's transactions list
16:04:07.586 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
16:04:07.586 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 0 -&gt; shardId [1]
16:04:07.586 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -&gt; optionMode [2]
16:04:07.590 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:04:07.591 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
16:04:07.591 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:07.591 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@4e252a7e
16:04:07.592 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.592 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.592 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.592 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.592 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.592 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.592 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.592 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.592 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.592 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:07.592 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from the accessible pool
16:04:07.592 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.592 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.592 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd to the inaccessible pool
16:04:07.592 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.593 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:07.593 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:04:07.593 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
16:04:07.593 [Test worker] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
16:04:07.593 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:04:07.593 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:04:07.593 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:04:07.594 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:04:07.594 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:04:07.594 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 1 updates, 0 deletions to 1 objects
16:04:07.594 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:04:07.594 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:04:07.594 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=2, shardId=0, globalCounter=59, optionMode=2}
16:04:07.594 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: id_global_counter
16:04:07.595 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:07.595 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.595 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.595 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172ABB1E00000005]
16:04:07.595 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.595 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.595 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172ABB1E00000005
16:04:07.595 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:04:07.595 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.595 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.595 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.595 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from the inaccessible pool
16:04:07.595 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.595 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.595 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.596 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.596 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd to the accessible pool
16:04:07.596 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@3aa1abcd was in state NOT_ACCESSIBLE, no need to test it
16:04:07.596 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.596 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.596 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:07.596 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.597 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@3aa1abcd (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABB1E00000005 : 737072696E672D62746D00000145172ABB2100000006]
16:04:07.597 [Test worker] DEBUG org.hibernate.SQL - update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
Hibernate: update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
16:04:07.598 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:07.599 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:07.600 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:07.600 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@4e252a7e
16:04:07.600 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.600 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.600 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.600 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.600 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.600 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.600 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.600 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.600 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.600 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:07.600 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from the accessible pool
16:04:07.600 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.600 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.600 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd to the inaccessible pool
16:04:07.600 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.601 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:07.601 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:07.601 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.601 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.601 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172ABB1E00000005]
16:04:07.601 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.601 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.601 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172ABB1E00000005
16:04:07.601 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:04:07.601 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.601 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.601 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.601 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from the inaccessible pool
16:04:07.601 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.601 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.601 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.602 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.602 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd to the accessible pool
16:04:07.602 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@3aa1abcd was in state NOT_ACCESSIBLE, no need to test it
16:04:07.602 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.602 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.602 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:07.602 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.602 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@3aa1abcd (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABB1E00000005 : 737072696E672D62746D00000145172ABB2100000006]
16:04:07.602 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
16:04:07.603 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 0 -&gt; shardId [1]
16:04:07.603 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -&gt; optionMode [2]
16:04:07.604 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementUnregisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D00000145172AB91200000002
16:04:07.604 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D00000145172ABB1E00000005
16:04:07.606 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:04:07.606 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
16:04:07.606 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:07.607 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@4e252a7e
16:04:07.607 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.607 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.607 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.607 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.607 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.607 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.607 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.607 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.607 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.608 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:07.608 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from the accessible pool
16:04:07.608 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.608 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.608 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd to the inaccessible pool
16:04:07.608 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.608 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:07.608 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:04:07.608 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:04:07.608 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:04:07.609 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 1 updates, 0 deletions to 1 objects
16:04:07.609 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:04:07.609 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:04:07.609 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=2, shardId=0, globalCounter=59, optionMode=2}
16:04:07.609 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: id_global_counter
16:04:07.609 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:07.609 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.609 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.610 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172ABB1E00000005]
16:04:07.610 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.610 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.610 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172ABB1E00000005
16:04:07.610 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:04:07.610 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.610 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.610 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.610 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from the inaccessible pool
16:04:07.610 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.610 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.610 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.610 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.611 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd to the accessible pool
16:04:07.611 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@3aa1abcd was in state NOT_ACCESSIBLE, no need to test it
16:04:07.611 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.611 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.611 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:07.611 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.612 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@3aa1abcd (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABB1E00000005 : 737072696E672D62746D00000145172ABB2100000006]
16:04:07.612 [Test worker] DEBUG org.hibernate.SQL - update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
Hibernate: update id_global_counter set global_count=?, option_mode=?, shard_id=? where id=?
16:04:07.613 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:07.616 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:07.616 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:07.616 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@4e252a7e
16:04:07.616 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.616 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.616 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.616 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.617 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.617 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.617 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.617 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.617 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.617 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:07.617 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from the accessible pool
16:04:07.617 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.617 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.617 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd to the inaccessible pool
16:04:07.617 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.617 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:07.618 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:07.618 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.618 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.618 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172ABB1E00000005]
16:04:07.618 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.618 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.618 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172ABB1E00000005
16:04:07.618 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:04:07.618 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.618 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.618 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.618 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from the inaccessible pool
16:04:07.618 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.619 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.619 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.619 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.619 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd to the accessible pool
16:04:07.619 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@3aa1abcd was in state NOT_ACCESSIBLE, no need to test it
16:04:07.619 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.620 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.620 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:07.620 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.620 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@3aa1abcd (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABB1E00000005 : 737072696E672D62746D00000145172ABB2100000006]
16:04:07.621 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
16:04:07.622 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 0 -&gt; shardId [1]
16:04:07.622 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -&gt; optionMode [2]
16:04:07.625 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:04:07.625 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
16:04:07.626 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:07.626 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@4e252a7e
16:04:07.626 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.626 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.626 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.626 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.626 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.626 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.626 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.626 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.626 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.626 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:07.626 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from the accessible pool
16:04:07.626 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.627 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.627 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd to the inaccessible pool
16:04:07.627 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.627 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:07.627 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:04:07.627 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:04:07.627 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:04:07.627 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
16:04:07.628 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:04:07.628 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:04:07.628 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=2, shardId=0, globalCounter=59, optionMode=2}
16:04:07.628 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:07.628 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.628 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.628 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172ABB1E00000005]
16:04:07.628 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.628 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.628 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172ABB1E00000005
16:04:07.628 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:04:07.628 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.628 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.629 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.629 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from the inaccessible pool
16:04:07.629 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.629 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.629 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.629 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.629 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd to the accessible pool
16:04:07.629 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@3aa1abcd was in state NOT_ACCESSIBLE, no need to test it
16:04:07.629 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.629 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/sharding with 3 connection(s) (2 still available)
16:04:07.629 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:07.630 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.630 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@3aa1abcd (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABB1E00000005 : 737072696E672D62746D00000145172ABB2100000006]
16:04:07.630 [Test worker] DEBUG org.hibernate.SQL - select * from id_global_counter where shard_id = ? and option_mode = ?
Hibernate: select * from id_global_counter where shard_id = ? and option_mode = ?
16:04:07.630 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 0 -&gt; shardId [1]
16:04:07.631 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 2 -&gt; optionMode [2]
16:04:07.634 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:04:07.635 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.sharding.id.model.IdGlobalCounterEntity#2]
16:04:07.635 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:07.635 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@4e252a7e
16:04:07.635 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.635 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.635 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.636 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.636 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.636 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.636 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.636 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.636 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.636 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:07.636 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from the accessible pool
16:04:07.636 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.636 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.636 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd to the inaccessible pool
16:04:07.636 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.637 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:07.637 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:04:07.637 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Initiating transaction commit
16:04:07.637 [Test worker] DEBUG b.tm.BitronixTransactionManager - committing transaction a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.637 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelling transaction timeout task on a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.637 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - removing task by a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.637 [Test worker] DEBUG bitronix.tm.timer.TaskScheduler - cancelled a TransactionTimeoutTask on a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014) scheduled for Mon Mar 31 16:05:07 CST 2014, total task(s) still queued: 4
16:04:07.637 [Test worker] DEBUG bitronix.tm.BitronixTransaction - before completion, 4 synchronization(s) to execute
16:04:07.637 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.637 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.637 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@31386a4b
16:04:07.637 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:04:07.637 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:04:07.638 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
16:04:07.638 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:04:07.638 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:04:07.638 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.sharding.id.model.IdGlobalCounterEntity{id=2, shardId=0, globalCounter=59, optionMode=2}
16:04:07.638 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:07.638 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@75e80151
16:04:07.638 [Test worker] DEBUG bitronix.tm.BitronixTransaction - found unclosed resource to delist: an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@3aa1abcd (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABB1E00000005 : 737072696E672D62746D00000145172ABB2100000006]
16:04:07.638 [Test worker] DEBUG b.tm.internal.XAResourceManager - delisting resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@3aa1abcd (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABB1E00000005 : 737072696E672D62746D00000145172ABB2100000006]
16:04:07.638 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ending an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@3aa1abcd (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABB1E00000005 : 737072696E672D62746D00000145172ABB2100000006] with SUCCESS
16:04:07.638 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - ended an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@3aa1abcd (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABB1E00000005 : 737072696E672D62746D00000145172ABB2100000006] with SUCCESS
16:04:07.638 [Test worker] DEBUG bitronix.tm.BitronixTransaction - committing, 1 enlisted resource(s)
16:04:07.638 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARING
16:04:07.639 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to PREPARING - executing 0 listener(s)
16:04:07.639 [Test worker] DEBUG bitronix.tm.twopc.Preparer - 1 resource enlisted, no prepare needed (1PC)
16:04:07.639 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to PREPARED
16:04:07.639 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARING to PREPARED - executing 0 listener(s)
16:04:07.639 [Test worker] DEBUG bitronix.tm.BitronixTransaction - 1 interested resource(s)
16:04:07.639 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTING
16:04:07.639 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from PREPARED to COMMITTING - executing 0 listener(s)
16:04:07.639 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - executing phase on 1 resource(s) enlisted in 1 position(s) in reverse position order
16:04:07.639 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - running 1 job(s) for position '1'
16:04:07.639 [Test worker] DEBUG bitronix.tm.twopc.Committer - committing resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@3aa1abcd (ended) with XID a Bitronix XID [737072696E672D62746D00000145172ABB1E00000005 : 737072696E672D62746D00000145172ABB2100000006] (with one-phase optimization)
16:04:07.649 [Test worker] DEBUG bitronix.tm.twopc.Committer - committed resource an XAResourceHolderState with uniqueName=jdbc/sharding XAResource=org.postgresql.xa.PGXAConnection@3aa1abcd (ended) with XID a Bitronix XID [737072696E672D62746D00000145172ABB1E00000005 : 737072696E672D62746D00000145172ABB2100000006]
16:04:07.650 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - phase executed with 0 exception(s)
16:04:07.650 [Test worker] DEBUG b.tm.twopc.AbstractPhaseEngine - ran 1 job(s) for position '1'
16:04:07.650 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit executed on resources [jdbc/sharding]
16:04:07.650 [Test worker] DEBUG bitronix.tm.twopc.Committer - phase 2 commit succeeded on resources [jdbc/sharding]
16:04:07.650 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to COMMITTED
16:04:07.650 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from COMMITTING to COMMITTED - executing 0 listener(s)
16:04:07.650 [Test worker] DEBUG bitronix.tm.BitronixTransaction - successfully committed a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=COMMITTED, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.650 [Test worker] DEBUG b.tm.internal.XAResourceManager - clearing XAResourceHolder states on 1 resource(s)
16:04:07.650 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - removing XAResourceHolderState of xid a Bitronix XID [737072696E672D62746D00000145172ABB1E00000005 : 737072696E672D62746D00000145172ABB2100000006] from a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.650 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd cleaned up all transaction states for GTRID [737072696E672D62746D00000145172ABB1E00000005]
16:04:07.650 [Test worker] DEBUG bitronix.tm.BitronixTransaction - after completion, 4 synchronization(s) to execute
16:04:07.650 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@31386a4b with status=COMMITTED
16:04:07.650 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Aggressively releasing JDBC connection
16:04:07.650 [Test worker] DEBUG o.h.e.j.internal.JdbcCoordinatorImpl - HHH000420: Closing un-released batch
16:04:07.650 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@75e80151 with status=COMMITTED
16:04:07.651 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a ClearContextSynchronization for a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014) with status=COMMITTED
16:04:07.651 [Test worker] DEBUG b.tm.BitronixTransactionManager - clearing transaction from thread context: a ThreadContext (905996572) with transaction a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014), default timeout 60s
16:04:07.651 [Test worker] DEBUG b.tm.BitronixTransactionManager - removing transaction from in-flight transactions: a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB1E00000005], status=COMMITTED, 0 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.651 [Test worker] DEBUG bitronix.tm.BitronixTransaction - executing synchronization a DeferredReleaseSynchronization of a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd with status=COMMITTED
16:04:07.651 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeuing a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.651 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.651 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:07.651 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd from the inaccessible pool
16:04:07.651 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.651 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to IN_POOL in a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.651 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd to the available pool
16:04:07.651 [Test worker] DEBUG b.t.r.c.DeferredReleaseSynchronization - DeferredReleaseSynchronization requeued a JdbcPooledConnection from datasource jdbc/sharding in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@3aa1abcd
16:04:07.651 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Resuming suspended transaction after completion of inner transaction
16:04:07.651 [Test worker] DEBUG b.tm.BitronixTransactionManager - resuming a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB8F700000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.651 [Test worker] DEBUG b.tm.internal.XAResourceManager - resuming an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (ended) with XID a Bitronix XID [737072696E672D62746D00000145172AB8F700000001 : 737072696E672D62746D00000145172ABB1500000004]
16:04:07.651 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting 1 resource(s)
16:04:07.651 [Test worker] DEBUG b.tm.internal.XAResourceManager - re-enlisting resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab with XID null
16:04:07.651 [Test worker] DEBUG b.tm.internal.XAResourceManager - resource already enlisted but has been ended eligible for join: an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (ended) with XID a Bitronix XID [737072696E672D62746D00000145172AB8F700000001 : 737072696E672D62746D00000145172ABB1500000004]
16:04:07.652 [Test worker] DEBUG b.tm.internal.XAResourceManager - checking joinability of an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab with XID null with an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (ended) with XID a Bitronix XID [737072696E672D62746D00000145172AB8F700000001 : 737072696E672D62746D00000145172ABB1500000004]
16:04:07.652 [Test worker] DEBUG b.tm.internal.XAResourceManager - resources are joinable
16:04:07.652 [Test worker] DEBUG b.tm.internal.XAResourceManager - joining an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab with XID null with an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (ended) with XID a Bitronix XID [737072696E672D62746D00000145172AB8F700000001 : 737072696E672D62746D00000145172ABB1500000004]
16:04:07.652 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D00000145172AB8F700000001 : 737072696E672D62746D00000145172ABB1500000004]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab with XID null&gt;
16:04:07.652 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab with XID a Bitronix XID [737072696E672D62746D00000145172AB8F700000001 : 737072696E672D62746D00000145172ABB1500000004] with JOIN
16:04:07.652 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (started) with XID a Bitronix XID [737072696E672D62746D00000145172AB8F700000001 : 737072696E672D62746D00000145172ABB1500000004] with JOIN
16:04:07.652 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (started) with XID a Bitronix XID [737072696E672D62746D00000145172AB8F700000001 : 737072696E672D62746D00000145172ABB1500000004]] on a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:07.652 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D00000145172AB8F700000001] previously known to a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab, adding it to the resource's transactions list
16:04:07.652 [Test worker] DEBUG bitronix.tm.internal.ThreadContext - assigning &lt;a Bitronix Transaction with GTRID [737072696E672D62746D00000145172AB8F700000001], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)&gt; to &lt;a ThreadContext (905996572) with transaction null, default timeout 60s&gt;
16:04:07.655 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 989872128, using strategy: org.hibernate.id.Assigned
16:04:07.681 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:04:07.681 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:04:07.681 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@6a3449bb
16:04:07.681 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:04:07.681 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962530476
16:04:07.682 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@ed4ca76
16:04:07.682 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:07.682 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (3 still available)
16:04:07.682 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/id_ds1 with 3 connection(s) (3 still available)
16:04:07.682 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172ABB7F00000007]
16:04:07.682 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:04:07.682 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/id_ds1 with 3 connection(s) (3 still available), waiting if necessary
16:04:07.682 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b - closing time: 1396253105109, now time: 1396253047682
16:04:07.682 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b from an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.682 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.682 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.682 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.682 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.682 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b to the accessible pool
16:04:07.682 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@889828b was in state IN_POOL, testing it
16:04:07.683 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b, skipping test
16:04:07.683 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.683 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.683 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:07.683 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB7F00000007], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.683 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@889828b belongs to a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.683 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D00000145172ABB7F00000007 : 737072696E672D62746D00000145172ABB8300000008]
16:04:07.683 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D00000145172ABB7F00000007 : 737072696E672D62746D00000145172ABB8300000008]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@889828b with XID null&gt;
16:04:07.683 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@889828b with XID a Bitronix XID [737072696E672D62746D00000145172ABB7F00000007 : 737072696E672D62746D00000145172ABB8300000008] with NOFLAGS
16:04:07.683 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@889828b (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABB7F00000007 : 737072696E672D62746D00000145172ABB8300000008] with NOFLAGS
16:04:07.683 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@889828b (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABB7F00000007 : 737072696E672D62746D00000145172ABB8300000008]] on a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.683 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D00000145172ABB7F00000007] previously unknown to a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b, adding it to the resource's transactions list
16:04:07.684 [Test worker] DEBUG org.hibernate.SQL - select walletenti0_.id as id2_, walletenti0_.created_by as created2_2_, walletenti0_.created_time as created3_2_, walletenti0_.modified_by as modified4_2_, walletenti0_.modified_time as modified5_2_, walletenti0_.balance as balance2_, walletenti0_.currency as currency2_, walletenti0_.status as status2_, walletenti0_.tracking_uuid as tracking9_2_, walletenti0_.type as type2_, walletenti0_.user_id as user11_2_ from ewallet walletenti0_ where walletenti0_.user_id=? and walletenti0_.type=? and walletenti0_.currency=?
Hibernate: select walletenti0_.id as id2_, walletenti0_.created_by as created2_2_, walletenti0_.created_time as created3_2_, walletenti0_.modified_by as modified4_2_, walletenti0_.modified_time as modified5_2_, walletenti0_.balance as balance2_, walletenti0_.currency as currency2_, walletenti0_.status as status2_, walletenti0_.tracking_uuid as tracking9_2_, walletenti0_.type as type2_, walletenti0_.user_id as user11_2_ from ewallet walletenti0_ where walletenti0_.user_id=? and walletenti0_.type=? and walletenti0_.currency=?
16:04:07.687 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:07.687 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@21bbc5f2
16:04:07.688 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.688 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB7F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.688 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.688 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB7F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.688 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.688 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.688 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB7F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.688 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.688 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.688 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:07.688 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b from the accessible pool
16:04:07.688 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.688 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.688 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b to the inaccessible pool
16:04:07.688 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.688 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:07.689 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:04:07.689 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:04:07.689 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 989888512, using strategy: org.hibernate.id.Assigned
16:04:07.696 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'WalletServiceImpl.credit' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
16:04:07.696 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:04:07.696 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:04:07.700 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 989904896, using strategy: org.hibernate.id.Assigned
16:04:07.701 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 989921280, using strategy: org.hibernate.id.Assigned
16:04:07.703 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740157045080064512, using strategy: org.hibernate.id.Assigned
16:04:07.707 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:04:07.707 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:04:07.708 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 989937664, using strategy: org.hibernate.id.Assigned
16:04:07.708 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 989954048, using strategy: org.hibernate.id.Assigned
16:04:07.709 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740157045080065512, using strategy: org.hibernate.id.Assigned
16:04:07.715 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'WalletServiceImpl.debit' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
16:04:07.715 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:04:07.715 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:04:07.717 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:04:07.717 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:04:07.719 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 7 insertions, 1 updates, 0 deletions to 7 objects
16:04:07.719 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:04:07.719 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:04:07.720 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.WalletLotEntity{id=989937664, walletId=989888512, remainingAmount=10, expirationDate=null, createdBy=DEFAULT, createdTime=Mon Mar 31 16:04:07 CST 2014, modifiedBy=DEFAULT, modifiedTime=Mon Mar 31 16:04:07 CST 2014, totalAmount=10, type=CASH}
16:04:07.720 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.WalletLotEntity{id=989904896, walletId=989888512, remainingAmount=10, expirationDate=null, createdBy=DEFAULT, createdTime=Mon Mar 31 16:04:07 CST 2014, modifiedBy=DEFAULT, modifiedTime=Mon Mar 31 16:04:07 CST 2014, totalAmount=10, type=PROMOTION}
16:04:07.720 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.TransactionEntity{amount=10, id=740157045080064512, walletId=989888512, createdBy=DEFAULT, createdTime=Mon Mar 31 16:04:07 CST 2014, type=CREDIT, offerId=704692288}
16:04:07.720 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.LotTransactionEntity{amount=10, id=989921280, walletId=989888512, createdBy=DEFAULT, walletLotId=989904896, createdTime=Mon Mar 31 16:04:07 CST 2014, type=CREDIT}
16:04:07.720 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.WalletEntity{id=989888512, balance=20, createdBy=DEFAULT, trackingUuid=null, status=ACTIVE, createdTime=Mon Mar 31 16:04:07 CST 2014, modifiedBy=DEFAULT, userId=704675904, modifiedTime=Mon Mar 31 16:04:07 CST 2014, type=SV, currency=USD}
16:04:07.720 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.TransactionEntity{amount=10, id=740157045080065512, walletId=989888512, createdBy=DEFAULT, createdTime=Mon Mar 31 16:04:07 CST 2014, type=CREDIT, offerId=704692288}
16:04:07.720 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.LotTransactionEntity{amount=10, id=989954048, walletId=989888512, createdBy=DEFAULT, walletLotId=989937664, createdTime=Mon Mar 31 16:04:07 CST 2014, type=CREDIT}
16:04:07.721 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: ewallet_lot
16:04:07.738 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:07.738 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.738 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.738 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172ABB7F00000007]
16:04:07.739 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.739 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.739 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172ABB7F00000007
16:04:07.739 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:04:07.739 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b from an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.739 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.739 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.739 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b from the inaccessible pool
16:04:07.739 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.739 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.739 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB7F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.739 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB7F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.739 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b to the accessible pool
16:04:07.739 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@889828b was in state NOT_ACCESSIBLE, no need to test it
16:04:07.739 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.739 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.739 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:07.739 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB7F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.739 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@889828b (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABB7F00000007 : 737072696E672D62746D00000145172ABB8300000008]
16:04:07.740 [Test worker] DEBUG org.hibernate.SQL - insert into ewallet (created_by, created_time, modified_by, modified_time, balance, currency, status, tracking_uuid, type, user_id, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into ewallet (created_by, created_time, modified_by, modified_time, balance, currency, status, tracking_uuid, type, user_id, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:04:07.753 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:07.757 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:07.757 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB7F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.757 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@889828b (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABB7F00000007 : 737072696E672D62746D00000145172ABB8300000008]
16:04:07.758 [Test worker] DEBUG org.hibernate.SQL - insert into ewallet_lot (created_by, created_time, modified_by, modified_time, expiration_date, remaining, total, type, ewallet_id, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into ewallet_lot (created_by, created_time, modified_by, modified_time, expiration_date, remaining, total, type, ewallet_id, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:04:07.763 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:07.766 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:07.767 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB7F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.767 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@889828b (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABB7F00000007 : 737072696E672D62746D00000145172ABB8300000008]
16:04:07.767 [Test worker] DEBUG org.hibernate.SQL - insert into lot_transaction (created_by, created_time, amount, type, ewallet_id, ewallet_lot_id, id) values (?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into lot_transaction (created_by, created_time, amount, type, ewallet_id, ewallet_lot_id, id) values (?, ?, ?, ?, ?, ?, ?)
16:04:07.772 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:07.774 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:07.774 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB7F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.775 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@889828b (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABB7F00000007 : 737072696E672D62746D00000145172ABB8300000008]
16:04:07.775 [Test worker] DEBUG org.hibernate.SQL - insert into transaction (created_by, created_time, amount, offer_id, type, ewallet_id, id) values (?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into transaction (created_by, created_time, amount, offer_id, type, ewallet_id, id) values (?, ?, ?, ?, ?, ?, ?)
16:04:07.777 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:07.779 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:07.779 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB7F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.780 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@889828b (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABB7F00000007 : 737072696E672D62746D00000145172ABB8300000008]
16:04:07.780 [Test worker] DEBUG org.hibernate.SQL - insert into ewallet_lot (created_by, created_time, modified_by, modified_time, expiration_date, remaining, total, type, ewallet_id, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into ewallet_lot (created_by, created_time, modified_by, modified_time, expiration_date, remaining, total, type, ewallet_id, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:04:07.781 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:07.783 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:07.783 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB7F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.783 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@889828b (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABB7F00000007 : 737072696E672D62746D00000145172ABB8300000008]
16:04:07.783 [Test worker] DEBUG org.hibernate.SQL - insert into lot_transaction (created_by, created_time, amount, type, ewallet_id, ewallet_lot_id, id) values (?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into lot_transaction (created_by, created_time, amount, type, ewallet_id, ewallet_lot_id, id) values (?, ?, ?, ?, ?, ?, ?)
16:04:07.786 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:07.787 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:07.787 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB7F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.787 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@889828b (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABB7F00000007 : 737072696E672D62746D00000145172ABB8300000008]
16:04:07.788 [Test worker] DEBUG org.hibernate.SQL - insert into transaction (created_by, created_time, amount, offer_id, type, ewallet_id, id) values (?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into transaction (created_by, created_time, amount, offer_id, type, ewallet_id, id) values (?, ?, ?, ?, ?, ?, ?)
16:04:07.789 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:07.790 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:07.791 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB7F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.791 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@889828b (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABB7F00000007 : 737072696E672D62746D00000145172ABB8300000008]
16:04:07.791 [Test worker] DEBUG org.hibernate.SQL - update ewallet set created_by=?, created_time=?, modified_by=?, modified_time=?, balance=?, currency=?, status=?, tracking_uuid=?, type=?, user_id=? where id=?
Hibernate: update ewallet set created_by=?, created_time=?, modified_by=?, modified_time=?, balance=?, currency=?, status=?, tracking_uuid=?, type=?, user_id=? where id=?
16:04:07.792 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:07.793 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:07.794 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:07.794 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@21bbc5f2
16:04:07.794 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.794 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB7F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.794 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.795 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB7F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.796 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.796 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.796 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB7F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.796 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.796 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.796 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:07.797 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b from the accessible pool
16:04:07.797 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.797 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.797 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b to the inaccessible pool
16:04:07.797 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.797 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:07.797 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:07.797 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.797 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.797 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172ABB7F00000007]
16:04:07.797 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.797 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.797 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172ABB7F00000007
16:04:07.797 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:04:07.797 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b from an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.797 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.797 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.798 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b from the inaccessible pool
16:04:07.798 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.798 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.798 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB7F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.798 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB7F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.798 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b to the accessible pool
16:04:07.798 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@889828b was in state NOT_ACCESSIBLE, no need to test it
16:04:07.798 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.798 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.798 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:07.798 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB7F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.798 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@889828b (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABB7F00000007 : 737072696E672D62746D00000145172ABB8300000008]
16:04:07.798 [Test worker] DEBUG org.hibernate.SQL - select * from ewallet_lot where ewallet_id = (?) and remaining &gt; money(0) and (expiration_date is null or expiration_date &gt;= (?)) order by type desc
Hibernate: select * from ewallet_lot where ewallet_id = (?) and remaining &gt; money(0) and (expiration_date is null or expiration_date &gt;= (?)) order by type desc
16:04:07.799 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 989888512 -&gt; walletId [1]
16:04:07.799 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() Mon Mar 31 16:04:07 CST 2014 -&gt; now [2]
16:04:07.806 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.ewallet.db.entity.hibernate.WalletLotEntity#989904896]
16:04:07.806 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:04:07.807 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 989970432, using strategy: org.hibernate.id.Assigned
16:04:07.808 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.ewallet.db.entity.hibernate.WalletLotEntity#989937664]
16:04:07.808 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:04:07.809 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 989986816, using strategy: org.hibernate.id.Assigned
16:04:07.809 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:07.810 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@21bbc5f2
16:04:07.810 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.810 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB7F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.810 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.810 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB7F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.810 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.810 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.810 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABB7F00000007], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.810 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.810 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.811 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:07.811 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b from the accessible pool
16:04:07.811 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.811 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.811 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b to the inaccessible pool
16:04:07.811 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:07.812 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:07.814 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740157045080066512, using strategy: org.hibernate.id.Assigned
16:04:07.829 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:04:07.830 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:04:07.830 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@254f944
16:04:07.830 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:04:07.830 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962530478
16:04:07.830 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@10661efb
16:04:07.831 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:07.831 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (3 still available)
16:04:07.831 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/id_ds1 with 3 connection(s) (3 still available)
16:04:07.831 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172ABC1300000009]
16:04:07.831 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:04:07.831 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/id_ds1 with 3 connection(s) (3 still available), waiting if necessary
16:04:07.831 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 - closing time: 1396253105857, now time: 1396253047831
16:04:07.831 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 from an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.831 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.831 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.831 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.831 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.831 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895 to the accessible pool
16:04:07.831 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@4b019895 was in state IN_POOL, testing it
16:04:07.831 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895, skipping test
16:04:07.831 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.832 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.832 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:07.832 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABC1300000009], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.832 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@4b019895 belongs to a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.832 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D00000145172ABC1300000009 : 737072696E672D62746D00000145172ABC180000000A]
16:04:07.833 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D00000145172ABC1300000009 : 737072696E672D62746D00000145172ABC180000000A]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@4b019895 with XID null&gt;
16:04:07.833 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@4b019895 with XID a Bitronix XID [737072696E672D62746D00000145172ABC1300000009 : 737072696E672D62746D00000145172ABC180000000A] with NOFLAGS
16:04:07.833 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@4b019895 (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABC1300000009 : 737072696E672D62746D00000145172ABC180000000A] with NOFLAGS
16:04:07.833 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@4b019895 (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABC1300000009 : 737072696E672D62746D00000145172ABC180000000A]] on a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.833 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D00000145172ABC1300000009] previously unknown to a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895, adding it to the resource's transactions list
16:04:07.834 [Test worker] DEBUG org.hibernate.SQL - select walletenti0_.id as id2_, walletenti0_.created_by as created2_2_, walletenti0_.created_time as created3_2_, walletenti0_.modified_by as modified4_2_, walletenti0_.modified_time as modified5_2_, walletenti0_.balance as balance2_, walletenti0_.currency as currency2_, walletenti0_.status as status2_, walletenti0_.tracking_uuid as tracking9_2_, walletenti0_.type as type2_, walletenti0_.user_id as user11_2_ from ewallet walletenti0_ where walletenti0_.user_id=? and walletenti0_.type=? and walletenti0_.currency=?
Hibernate: select walletenti0_.id as id2_, walletenti0_.created_by as created2_2_, walletenti0_.created_time as created3_2_, walletenti0_.modified_by as modified4_2_, walletenti0_.modified_time as modified5_2_, walletenti0_.balance as balance2_, walletenti0_.currency as currency2_, walletenti0_.status as status2_, walletenti0_.tracking_uuid as tracking9_2_, walletenti0_.type as type2_, walletenti0_.user_id as user11_2_ from ewallet walletenti0_ where walletenti0_.user_id=? and walletenti0_.type=? and walletenti0_.currency=?
16:04:07.836 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:07.836 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@7ce60ca0
16:04:07.836 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.837 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABC1300000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.837 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.837 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABC1300000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.837 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.837 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.837 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABC1300000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.837 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.837 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.837 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:07.837 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 from the accessible pool
16:04:07.837 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.837 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.837 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 to the inaccessible pool
16:04:07.837 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.837 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:07.837 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:04:07.838 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:04:07.838 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 990019584, using strategy: org.hibernate.id.Assigned
16:04:07.838 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:04:07.838 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:04:07.839 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 990052352, using strategy: org.hibernate.id.Assigned
16:04:07.839 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 990068736, using strategy: org.hibernate.id.Assigned
16:04:07.840 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740157045081088584, using strategy: org.hibernate.id.Assigned
16:04:07.840 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:04:07.840 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:04:07.841 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:04:07.841 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:04:07.841 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 4 insertions, 1 updates, 0 deletions to 4 objects
16:04:07.842 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:04:07.842 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:04:07.842 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.WalletLotEntity{id=990052352, walletId=990019584, remainingAmount=100, expirationDate=Thu Jan 01 08:01:40 CST 1970, createdBy=DEFAULT, createdTime=Mon Mar 31 16:04:07 CST 2014, modifiedBy=DEFAULT, modifiedTime=Mon Mar 31 16:04:07 CST 2014, totalAmount=100, type=PROMOTION}
16:04:07.842 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.WalletEntity{id=990019584, balance=100, createdBy=DEFAULT, trackingUuid=null, status=ACTIVE, createdTime=Mon Mar 31 16:04:07 CST 2014, modifiedBy=DEFAULT, userId=990003200, modifiedTime=Mon Mar 31 16:04:07 CST 2014, type=SV, currency=USD}
16:04:07.842 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.TransactionEntity{amount=100, id=740157045081088584, walletId=990019584, createdBy=DEFAULT, createdTime=Mon Mar 31 16:04:07 CST 2014, type=CREDIT, offerId=990035968}
16:04:07.842 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.LotTransactionEntity{amount=100, id=990068736, walletId=990019584, createdBy=DEFAULT, walletLotId=990052352, createdTime=Mon Mar 31 16:04:07 CST 2014, type=CREDIT}
16:04:07.842 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: ewallet_lot
16:04:07.843 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:07.843 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.843 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.843 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172ABC1300000009]
16:04:07.843 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.843 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.843 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172ABC1300000009
16:04:07.843 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:04:07.843 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 from an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.843 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.843 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.843 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895 from the inaccessible pool
16:04:07.843 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.843 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.843 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABC1300000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.843 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABC1300000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.844 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895 to the accessible pool
16:04:07.844 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@4b019895 was in state NOT_ACCESSIBLE, no need to test it
16:04:07.844 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.844 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.844 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:07.844 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABC1300000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.844 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@4b019895 (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABC1300000009 : 737072696E672D62746D00000145172ABC180000000A]
16:04:07.844 [Test worker] DEBUG org.hibernate.SQL - insert into ewallet (created_by, created_time, modified_by, modified_time, balance, currency, status, tracking_uuid, type, user_id, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into ewallet (created_by, created_time, modified_by, modified_time, balance, currency, status, tracking_uuid, type, user_id, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:04:07.845 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:07.847 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:07.848 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABC1300000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.848 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@4b019895 (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABC1300000009 : 737072696E672D62746D00000145172ABC180000000A]
16:04:07.849 [Test worker] DEBUG org.hibernate.SQL - insert into ewallet_lot (created_by, created_time, modified_by, modified_time, expiration_date, remaining, total, type, ewallet_id, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into ewallet_lot (created_by, created_time, modified_by, modified_time, expiration_date, remaining, total, type, ewallet_id, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:04:07.849 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:07.851 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:07.851 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABC1300000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.851 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@4b019895 (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABC1300000009 : 737072696E672D62746D00000145172ABC180000000A]
16:04:07.851 [Test worker] DEBUG org.hibernate.SQL - insert into lot_transaction (created_by, created_time, amount, type, ewallet_id, ewallet_lot_id, id) values (?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into lot_transaction (created_by, created_time, amount, type, ewallet_id, ewallet_lot_id, id) values (?, ?, ?, ?, ?, ?, ?)
16:04:07.852 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:07.853 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:07.853 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABC1300000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.853 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@4b019895 (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABC1300000009 : 737072696E672D62746D00000145172ABC180000000A]
16:04:07.854 [Test worker] DEBUG org.hibernate.SQL - insert into transaction (created_by, created_time, amount, offer_id, type, ewallet_id, id) values (?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into transaction (created_by, created_time, amount, offer_id, type, ewallet_id, id) values (?, ?, ?, ?, ?, ?, ?)
16:04:07.854 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:07.855 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementUnregisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D00000145172ABB1E00000005
16:04:07.855 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementUnregisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D00000145172AB8F700000001
16:04:07.855 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D00000145172ABC1300000009
16:04:07.855 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:07.856 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABC1300000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.856 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@4b019895 (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABC1300000009 : 737072696E672D62746D00000145172ABC180000000A]
16:04:07.856 [Test worker] DEBUG org.hibernate.SQL - update ewallet set created_by=?, created_time=?, modified_by=?, modified_time=?, balance=?, currency=?, status=?, tracking_uuid=?, type=?, user_id=? where id=?
Hibernate: update ewallet set created_by=?, created_time=?, modified_by=?, modified_time=?, balance=?, currency=?, status=?, tracking_uuid=?, type=?, user_id=? where id=?
16:04:07.857 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:07.858 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:07.859 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:07.859 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@7ce60ca0
16:04:07.859 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.859 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABC1300000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.859 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.859 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABC1300000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.859 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.859 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.859 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABC1300000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.860 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.862 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.862 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:07.862 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 from the accessible pool
16:04:07.862 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.862 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.863 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 to the inaccessible pool
16:04:07.863 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.863 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:07.863 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:07.863 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.863 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.863 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172ABC1300000009]
16:04:07.864 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.864 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.864 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172ABC1300000009
16:04:07.864 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:04:07.864 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 from an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.864 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.864 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.864 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895 from the inaccessible pool
16:04:07.864 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.864 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.864 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895 as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABC1300000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.865 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895 has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABC1300000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.865 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895 to the accessible pool
16:04:07.865 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@4b019895 was in state NOT_ACCESSIBLE, no need to test it
16:04:07.865 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.865 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:07.865 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:07.865 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABC1300000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.865 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@4b019895 (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABC1300000009 : 737072696E672D62746D00000145172ABC180000000A]
16:04:07.865 [Test worker] DEBUG org.hibernate.SQL - select * from ewallet_lot where ewallet_id = (?) and remaining &gt; money(0) and (expiration_date is null or expiration_date &gt;= (?)) order by type desc
Hibernate: select * from ewallet_lot where ewallet_id = (?) and remaining &gt; money(0) and (expiration_date is null or expiration_date &gt;= (?)) order by type desc
16:04:07.865 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 990019584 -&gt; walletId [1]
16:04:07.866 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() Mon Mar 31 16:04:07 CST 2014 -&gt; now [2]
16:04:07.868 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:07.868 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@7ce60ca0
16:04:07.868 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.868 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABC1300000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.868 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.868 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABC1300000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.868 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.868 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.868 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABC1300000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:07.868 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.868 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.868 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:07.869 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 from the accessible pool
16:04:07.869 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.869 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.869 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 to the inaccessible pool
16:04:07.869 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:07.869 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:08.018 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating transaction failed - marking existing transaction as rollback-only
16:04:08.018 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Setting JTA transaction rollback-only
16:04:08.019 [Test worker] DEBUG b.tm.BitronixTransactionManager - marking transaction as rollback only: a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABC1300000009], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:07 CST 2014)
16:04:08.019 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to MARKED_ROLLBACK
16:04:08.019 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to MARKED_ROLLBACK - executing 0 listener(s)
16:04:08.030 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:04:08.030 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:04:08.030 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@4871ff96
16:04:08.030 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:04:08.030 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962530480
16:04:08.030 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@2b51e2a6
16:04:08.030 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:08.031 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (3 still available)
16:04:08.031 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/id_ds1 with 3 connection(s) (3 still available)
16:04:08.031 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172ABCDC0000000B]
16:04:08.031 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:04:08.031 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/id_ds1 with 3 connection(s) (3 still available), waiting if necessary
16:04:08.031 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab - closing time: 1396253107671, now time: 1396253048031
16:04:08.031 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab from an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:08.031 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.031 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.031 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.031 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.031 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab to the accessible pool
16:04:08.031 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@55c884ab was in state IN_POOL, testing it
16:04:08.031 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab, skipping test
16:04:08.031 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.031 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:08.031 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:08.031 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.031 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@55c884ab belongs to a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:08.031 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D00000145172ABCDC0000000B : 737072696E672D62746D00000145172ABCDF0000000C]
16:04:08.031 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D00000145172ABCDC0000000B : 737072696E672D62746D00000145172ABCDF0000000C]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab with XID null&gt;
16:04:08.031 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab with XID a Bitronix XID [737072696E672D62746D00000145172ABCDC0000000B : 737072696E672D62746D00000145172ABCDF0000000C] with NOFLAGS
16:04:08.032 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABCDC0000000B : 737072696E672D62746D00000145172ABCDF0000000C] with NOFLAGS
16:04:08.032 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABCDC0000000B : 737072696E672D62746D00000145172ABCDF0000000C]] on a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.032 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D00000145172ABCDC0000000B] previously unknown to a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab, adding it to the resource's transactions list
16:04:08.032 [Test worker] DEBUG org.hibernate.SQL - select walletenti0_.id as id2_, walletenti0_.created_by as created2_2_, walletenti0_.created_time as created3_2_, walletenti0_.modified_by as modified4_2_, walletenti0_.modified_time as modified5_2_, walletenti0_.balance as balance2_, walletenti0_.currency as currency2_, walletenti0_.status as status2_, walletenti0_.tracking_uuid as tracking9_2_, walletenti0_.type as type2_, walletenti0_.user_id as user11_2_ from ewallet walletenti0_ where walletenti0_.user_id=? and walletenti0_.type=? and walletenti0_.currency=?
Hibernate: select walletenti0_.id as id2_, walletenti0_.created_by as created2_2_, walletenti0_.created_time as created3_2_, walletenti0_.modified_by as modified4_2_, walletenti0_.modified_time as modified5_2_, walletenti0_.balance as balance2_, walletenti0_.currency as currency2_, walletenti0_.status as status2_, walletenti0_.tracking_uuid as tracking9_2_, walletenti0_.type as type2_, walletenti0_.user_id as user11_2_ from ewallet walletenti0_ where walletenti0_.user_id=? and walletenti0_.type=? and walletenti0_.currency=?
16:04:08.034 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:08.034 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@2745fd39
16:04:08.034 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.034 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.034 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.034 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.034 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.034 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.034 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.034 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.034 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.035 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:08.035 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab from the accessible pool
16:04:08.035 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.035 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.035 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab to the inaccessible pool
16:04:08.035 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.035 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:08.035 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:04:08.035 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:04:08.035 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 990085120, using strategy: org.hibernate.id.Assigned
16:04:08.037 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:04:08.037 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:04:08.038 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 990117888, using strategy: org.hibernate.id.Assigned
16:04:08.038 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 990134272, using strategy: org.hibernate.id.Assigned
16:04:08.039 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740157049276416120, using strategy: org.hibernate.id.Assigned
16:04:08.039 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:04:08.039 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:04:08.040 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 990150656, using strategy: org.hibernate.id.Assigned
16:04:08.040 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 990167040, using strategy: org.hibernate.id.Assigned
16:04:08.041 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740157049276417120, using strategy: org.hibernate.id.Assigned
16:04:08.041 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:04:08.041 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:04:08.042 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:04:08.042 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:04:08.043 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 7 insertions, 1 updates, 0 deletions to 7 objects
16:04:08.043 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:04:08.043 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:04:08.044 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.WalletLotEntity{id=990117888, walletId=990085120, remainingAmount=10, expirationDate=null, createdBy=DEFAULT, createdTime=Mon Mar 31 16:04:08 CST 2014, modifiedBy=DEFAULT, modifiedTime=Mon Mar 31 16:04:08 CST 2014, totalAmount=10, type=PROMOTION}
16:04:08.044 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.WalletEntity{id=990085120, balance=20, createdBy=DEFAULT, trackingUuid=null, status=ACTIVE, createdTime=Mon Mar 31 16:04:08 CST 2014, modifiedBy=DEFAULT, userId=704741440, modifiedTime=Mon Mar 31 16:04:08 CST 2014, type=SV, currency=USD}
16:04:08.044 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.TransactionEntity{amount=10, id=740157049276417120, walletId=990085120, createdBy=DEFAULT, createdTime=Mon Mar 31 16:04:08 CST 2014, type=CREDIT, offerId=990101504}
16:04:08.045 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.TransactionEntity{amount=10, id=740157049276416120, walletId=990085120, createdBy=DEFAULT, createdTime=Mon Mar 31 16:04:08 CST 2014, type=CREDIT, offerId=990101504}
16:04:08.046 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.LotTransactionEntity{amount=10, id=990167040, walletId=990085120, createdBy=DEFAULT, walletLotId=990150656, createdTime=Mon Mar 31 16:04:08 CST 2014, type=CREDIT}
16:04:08.046 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.WalletLotEntity{id=990150656, walletId=990085120, remainingAmount=10, expirationDate=null, createdBy=DEFAULT, createdTime=Mon Mar 31 16:04:08 CST 2014, modifiedBy=DEFAULT, modifiedTime=Mon Mar 31 16:04:08 CST 2014, totalAmount=10, type=CASH}
16:04:08.046 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.LotTransactionEntity{amount=10, id=990134272, walletId=990085120, createdBy=DEFAULT, walletLotId=990117888, createdTime=Mon Mar 31 16:04:08 CST 2014, type=CREDIT}
16:04:08.046 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: ewallet_lot
16:04:08.047 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:08.047 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:08.047 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:08.047 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172ABCDC0000000B]
16:04:08.047 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.047 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.047 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172ABCDC0000000B
16:04:08.047 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:04:08.047 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab from an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:08.047 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.047 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.047 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab from the inaccessible pool
16:04:08.047 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.047 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.047 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.047 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.047 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab to the accessible pool
16:04:08.048 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@55c884ab was in state NOT_ACCESSIBLE, no need to test it
16:04:08.048 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.048 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:08.048 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:08.048 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.048 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABCDC0000000B : 737072696E672D62746D00000145172ABCDF0000000C]
16:04:08.048 [Test worker] DEBUG org.hibernate.SQL - insert into ewallet (created_by, created_time, modified_by, modified_time, balance, currency, status, tracking_uuid, type, user_id, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into ewallet (created_by, created_time, modified_by, modified_time, balance, currency, status, tracking_uuid, type, user_id, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:04:08.049 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:08.050 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:08.051 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.051 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABCDC0000000B : 737072696E672D62746D00000145172ABCDF0000000C]
16:04:08.051 [Test worker] DEBUG org.hibernate.SQL - insert into ewallet_lot (created_by, created_time, modified_by, modified_time, expiration_date, remaining, total, type, ewallet_id, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into ewallet_lot (created_by, created_time, modified_by, modified_time, expiration_date, remaining, total, type, ewallet_id, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:04:08.052 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:08.053 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:08.053 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.053 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABCDC0000000B : 737072696E672D62746D00000145172ABCDF0000000C]
16:04:08.053 [Test worker] DEBUG org.hibernate.SQL - insert into lot_transaction (created_by, created_time, amount, type, ewallet_id, ewallet_lot_id, id) values (?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into lot_transaction (created_by, created_time, amount, type, ewallet_id, ewallet_lot_id, id) values (?, ?, ?, ?, ?, ?, ?)
16:04:08.054 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:08.055 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:08.055 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.055 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABCDC0000000B : 737072696E672D62746D00000145172ABCDF0000000C]
16:04:08.055 [Test worker] DEBUG org.hibernate.SQL - insert into transaction (created_by, created_time, amount, offer_id, type, ewallet_id, id) values (?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into transaction (created_by, created_time, amount, offer_id, type, ewallet_id, id) values (?, ?, ?, ?, ?, ?, ?)
16:04:08.056 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:08.057 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:08.057 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.057 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABCDC0000000B : 737072696E672D62746D00000145172ABCDF0000000C]
16:04:08.057 [Test worker] DEBUG org.hibernate.SQL - insert into ewallet_lot (created_by, created_time, modified_by, modified_time, expiration_date, remaining, total, type, ewallet_id, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into ewallet_lot (created_by, created_time, modified_by, modified_time, expiration_date, remaining, total, type, ewallet_id, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
16:04:08.058 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:08.059 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:08.059 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.059 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABCDC0000000B : 737072696E672D62746D00000145172ABCDF0000000C]
16:04:08.059 [Test worker] DEBUG org.hibernate.SQL - insert into lot_transaction (created_by, created_time, amount, type, ewallet_id, ewallet_lot_id, id) values (?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into lot_transaction (created_by, created_time, amount, type, ewallet_id, ewallet_lot_id, id) values (?, ?, ?, ?, ?, ?, ?)
16:04:08.060 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:08.061 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:08.061 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.061 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABCDC0000000B : 737072696E672D62746D00000145172ABCDF0000000C]
16:04:08.061 [Test worker] DEBUG org.hibernate.SQL - insert into transaction (created_by, created_time, amount, offer_id, type, ewallet_id, id) values (?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into transaction (created_by, created_time, amount, offer_id, type, ewallet_id, id) values (?, ?, ?, ?, ?, ?, ?)
16:04:08.061 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:08.062 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:08.062 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.063 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABCDC0000000B : 737072696E672D62746D00000145172ABCDF0000000C]
16:04:08.063 [Test worker] DEBUG org.hibernate.SQL - update ewallet set created_by=?, created_time=?, modified_by=?, modified_time=?, balance=?, currency=?, status=?, tracking_uuid=?, type=?, user_id=? where id=?
Hibernate: update ewallet set created_by=?, created_time=?, modified_by=?, modified_time=?, balance=?, currency=?, status=?, tracking_uuid=?, type=?, user_id=? where id=?
16:04:08.063 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:08.064 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:08.064 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:08.064 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@2745fd39
16:04:08.064 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.064 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.064 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.064 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.065 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.065 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.065 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.065 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.065 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.065 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:08.065 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab from the accessible pool
16:04:08.065 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.065 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.065 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab to the inaccessible pool
16:04:08.065 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.065 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:08.065 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:08.065 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:08.065 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:08.065 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172ABCDC0000000B]
16:04:08.065 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.066 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.066 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172ABCDC0000000B
16:04:08.066 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:04:08.066 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab from an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:08.066 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.066 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.066 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab from the inaccessible pool
16:04:08.066 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.066 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.066 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.066 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.066 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab to the accessible pool
16:04:08.066 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@55c884ab was in state NOT_ACCESSIBLE, no need to test it
16:04:08.066 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.067 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:08.067 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:08.067 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.067 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABCDC0000000B : 737072696E672D62746D00000145172ABCDF0000000C]
16:04:08.067 [Test worker] DEBUG org.hibernate.SQL - select * from ewallet_lot where ewallet_id = (?) and remaining &gt; money(0) and (expiration_date is null or expiration_date &gt;= (?)) order by type desc
Hibernate: select * from ewallet_lot where ewallet_id = (?) and remaining &gt; money(0) and (expiration_date is null or expiration_date &gt;= (?)) order by type desc
16:04:08.067 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() 990085120 -&gt; walletId [1]
16:04:08.067 [Test worker] DEBUG org.hibernate.loader.Loader - bindNamedParameters() Mon Mar 31 16:04:08 CST 2014 -&gt; now [2]
16:04:08.070 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.ewallet.db.entity.hibernate.WalletLotEntity#990117888]
16:04:08.070 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:04:08.071 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 990183424, using strategy: org.hibernate.id.Assigned
16:04:08.071 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.ewallet.db.entity.hibernate.WalletLotEntity#990150656]
16:04:08.071 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:04:08.072 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 990199808, using strategy: org.hibernate.id.Assigned
16:04:08.072 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:08.072 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@2745fd39
16:04:08.072 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.072 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.072 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.072 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.072 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.072 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.072 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.072 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.073 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.073 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:08.073 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab from the accessible pool
16:04:08.073 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.073 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.073 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab to the inaccessible pool
16:04:08.073 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.073 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:08.073 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740157049276418120, using strategy: org.hibernate.id.Assigned
16:04:08.075 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'WalletServiceImpl.getTransactions' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
16:04:08.075 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:04:08.075 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:04:08.076 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - parse() - HQL: from com.junbo.ewallet.db.entity.hibernate.TransactionEntity where walletId = (:walletId)
16:04:08.078 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - --- HQL AST ---
 \-[QUERY] Node: 'query'
    +-[SELECT_FROM] Node: 'SELECT_FROM'
    |  \-[FROM] Node: 'from'
    |     \-[RANGE] Node: 'RANGE'
    |        \-[DOT] Node: '.'
    |           +-[DOT] Node: '.'
    |           |  +-[DOT] Node: '.'
    |           |  |  +-[DOT] Node: '.'
    |           |  |  |  +-[DOT] Node: '.'
    |           |  |  |  |  +-[DOT] Node: '.'
    |           |  |  |  |  |  +-[IDENT] Node: 'com'
    |           |  |  |  |  |  \-[IDENT] Node: 'junbo'
    |           |  |  |  |  \-[IDENT] Node: 'ewallet'
    |           |  |  |  \-[IDENT] Node: 'db'
    |           |  |  \-[IDENT] Node: 'entity'
    |           |  \-[IDENT] Node: 'hibernate'
    |           \-[IDENT] Node: 'TransactionEntity'
    \-[WHERE] Node: 'where'
       \-[EQ] Node: '='
          +-[IDENT] Node: 'walletId'
          \-[COLON] Node: ':'
             \-[IDENT] Node: 'walletId'

16:04:08.079 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:04:08.080 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - select &lt;&lt; begin [level=1, statement=select]
16:04:08.080 [Test worker] DEBUG o.h.h.internal.ast.tree.FromElement - FromClause{level=1} : com.junbo.ewallet.db.entity.hibernate.TransactionEntity (&lt;no alias&gt;) -&gt; transactio0_
16:04:08.081 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias} -&gt; {synthetic-alias}
16:04:08.081 [Test worker] DEBUG o.h.hql.internal.ast.tree.DotNode - getDataType() : walletId -&gt; org.hibernate.type.LongType@1afdf4ee
16:04:08.081 [Test worker] DEBUG o.h.h.i.ast.tree.FromReferenceNode - Resolved : {synthetic-alias}.walletId -&gt; transactio0_.ewallet_id
16:04:08.082 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - select : finishing up [level=1, statement=select]
16:04:08.082 [Test worker] DEBUG o.h.hql.internal.ast.HqlSqlWalker - processQuery() :  ( SELECT ( FromClause{level=1} transaction transactio0_ ) ( where ( = ( transactio0_.ewallet_id {synthetic-alias} walletId ) ? ) ) )
16:04:08.082 [Test worker] DEBUG o.h.hql.internal.ast.HqlSqlWalker - Derived SELECT clause created.
16:04:08.082 [Test worker] DEBUG o.h.h.i.ast.util.JoinProcessor - Using FROM fragment [transaction transactio0_]
16:04:08.082 [Test worker] DEBUG o.h.h.i.antlr.HqlSqlBaseWalker - select &gt;&gt; end [level=1, statement=select]
16:04:08.083 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - --- SQL AST ---
 \-[SELECT] QueryNode: 'SELECT'  querySpaces (transaction)
    +-[SELECT_CLAUSE] SelectClause: '{derived select clause}'
    |  +-[SELECT_EXPR] SelectExpressionImpl: 'transactio0_.id as id1_' {FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=transaction,tableAlias=transactio0_,origin=null,columns={,className=com.junbo.ewallet.db.entity.hibernate.TransactionEntity}}}
    |  \-[SQL_TOKEN] SqlFragment: 'transactio0_.created_by as created2_1_, transactio0_.created_time as created3_1_, transactio0_.amount as amount1_, transactio0_.offer_id as offer5_1_, transactio0_.type as type1_, transactio0_.ewallet_id as ewallet7_1_'
    +-[FROM] FromClause: 'from' FromClause{level=1, fromElementCounter=1, fromElements=1, fromElementByClassAlias=[], fromElementByTableAlias=[transactio0_], fromElementsByPath=[], collectionJoinFromElementsByPath=[], impliedElements=[]}
    |  \-[FROM_FRAGMENT] FromElement: 'transaction transactio0_' FromElement{explicit,not a collection join,not a fetch join,fetch non-lazy properties,classAlias=null,role=null,tableName=transaction,tableAlias=transactio0_,origin=null,columns={,className=com.junbo.ewallet.db.entity.hibernate.TransactionEntity}}
    \-[WHERE] SqlNode: 'where'
       \-[EQ] BinaryLogicOperatorNode: '='
          +-[DOT] DotNode: 'transactio0_.ewallet_id' {propertyName=walletId,dereferenceType=ALL,propertyPath=walletId,path={synthetic-alias}.walletId,tableAlias=transactio0_,className=com.junbo.ewallet.db.entity.hibernate.TransactionEntity,classAlias=null}
          |  +-[IDENT] IdentNode: '{synthetic-alias}' {originalText={synthetic-alias}}
          |  \-[IDENT] IdentNode: 'walletId' {originalText=walletId}
          \-[NAMED_PARAM] ParameterNode: '?' {name=walletId, expectedType=org.hibernate.type.LongType@1afdf4ee}

16:04:08.083 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:04:08.084 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - HQL: from com.junbo.ewallet.db.entity.hibernate.TransactionEntity where walletId = (:walletId)
16:04:08.084 [Test worker] DEBUG o.h.h.i.ast.QueryTranslatorImpl - SQL: select transactio0_.id as id1_, transactio0_.created_by as created2_1_, transactio0_.created_time as created3_1_, transactio0_.amount as amount1_, transactio0_.offer_id as offer5_1_, transactio0_.type as type1_, transactio0_.ewallet_id as ewallet7_1_ from transaction transactio0_ where transactio0_.ewallet_id=?
16:04:08.084 [Test worker] DEBUG o.h.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
16:04:08.084 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
16:04:08.084 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
16:04:08.085 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 3 insertions, 3 updates, 0 deletions to 10 objects
16:04:08.085 [Test worker] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
16:04:08.085 [Test worker] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
16:04:08.086 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.LotTransactionEntity{amount=10, id=990183424, walletId=990085120, createdBy=DEFAULT, walletLotId=990117888, createdTime=Mon Mar 31 16:04:08 CST 2014, type=DEBIT}
16:04:08.086 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.WalletLotEntity{id=990117888, walletId=990085120, remainingAmount=0, expirationDate=null, createdBy=DEFAULT, createdTime=Mon Mar 31 16:04:08 CST 2014, modifiedBy=DEFAULT, modifiedTime=Mon Mar 31 16:04:08 CST 2014, totalAmount=10, type=PROMOTION}
16:04:08.086 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.TransactionEntity{amount=17, id=740157049276418120, walletId=990085120, createdBy=DEFAULT, createdTime=Mon Mar 31 16:04:08 CST 2014, type=DEBIT, offerId=704757824}
16:04:08.086 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.WalletEntity{id=990085120, balance=3, createdBy=DEFAULT, trackingUuid=null, status=ACTIVE, createdTime=Mon Mar 31 16:04:08 CST 2014, modifiedBy=DEFAULT, userId=704741440, modifiedTime=Mon Mar 31 16:04:08 CST 2014, type=SV, currency=USD}
16:04:08.086 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.TransactionEntity{amount=10, id=740157049276417120, walletId=990085120, createdBy=DEFAULT, createdTime=Mon Mar 31 16:04:08 CST 2014, type=CREDIT, offerId=990101504}
16:04:08.086 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.TransactionEntity{amount=10, id=740157049276416120, walletId=990085120, createdBy=DEFAULT, createdTime=Mon Mar 31 16:04:08 CST 2014, type=CREDIT, offerId=990101504}
16:04:08.086 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.LotTransactionEntity{amount=10, id=990167040, walletId=990085120, createdBy=DEFAULT, walletLotId=990150656, createdTime=Mon Mar 31 16:04:08 CST 2014, type=CREDIT}
16:04:08.087 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.WalletLotEntity{id=990150656, walletId=990085120, remainingAmount=3, expirationDate=null, createdBy=DEFAULT, createdTime=Mon Mar 31 16:04:08 CST 2014, modifiedBy=DEFAULT, modifiedTime=Mon Mar 31 16:04:08 CST 2014, totalAmount=10, type=CASH}
16:04:08.087 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.LotTransactionEntity{amount=10, id=990134272, walletId=990085120, createdBy=DEFAULT, walletLotId=990117888, createdTime=Mon Mar 31 16:04:08 CST 2014, type=CREDIT}
16:04:08.087 [Test worker] DEBUG o.h.internal.util.EntityPrinter - com.junbo.ewallet.db.entity.hibernate.LotTransactionEntity{amount=7, id=990199808, walletId=990085120, createdBy=DEFAULT, walletLotId=990150656, createdTime=Mon Mar 31 16:04:08 CST 2014, type=DEBIT}
16:04:08.087 [Test worker] DEBUG org.hibernate.engine.spi.ActionQueue - Changes must be flushed to space: transaction
16:04:08.087 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:08.088 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:08.088 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:08.088 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172ABCDC0000000B]
16:04:08.088 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.088 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.088 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172ABCDC0000000B
16:04:08.088 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:04:08.088 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab from an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:08.088 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.088 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.088 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab from the inaccessible pool
16:04:08.088 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.088 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.088 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.088 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.088 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab to the accessible pool
16:04:08.088 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@55c884ab was in state NOT_ACCESSIBLE, no need to test it
16:04:08.089 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.089 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:08.089 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:08.089 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.089 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABCDC0000000B : 737072696E672D62746D00000145172ABCDF0000000C]
16:04:08.089 [Test worker] DEBUG org.hibernate.SQL - insert into lot_transaction (created_by, created_time, amount, type, ewallet_id, ewallet_lot_id, id) values (?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into lot_transaction (created_by, created_time, amount, type, ewallet_id, ewallet_lot_id, id) values (?, ?, ?, ?, ?, ?, ?)
16:04:08.090 [Test worker] DEBUG o.h.e.j.b.internal.AbstractBatchImpl - Reusing batch statement
16:04:08.090 [Test worker] DEBUG org.hibernate.SQL - insert into lot_transaction (created_by, created_time, amount, type, ewallet_id, ewallet_lot_id, id) values (?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into lot_transaction (created_by, created_time, amount, type, ewallet_id, ewallet_lot_id, id) values (?, ?, ?, ?, ?, ?, ?)
16:04:08.090 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 2
16:04:08.091 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:08.092 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.092 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABCDC0000000B : 737072696E672D62746D00000145172ABCDF0000000C]
16:04:08.092 [Test worker] DEBUG org.hibernate.SQL - insert into transaction (created_by, created_time, amount, offer_id, type, ewallet_id, id) values (?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into transaction (created_by, created_time, amount, offer_id, type, ewallet_id, id) values (?, ?, ?, ?, ?, ?, ?)
16:04:08.092 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:08.093 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:08.093 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.093 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABCDC0000000B : 737072696E672D62746D00000145172ABCDF0000000C]
16:04:08.094 [Test worker] DEBUG org.hibernate.SQL - update ewallet set created_by=?, created_time=?, modified_by=?, modified_time=?, balance=?, currency=?, status=?, tracking_uuid=?, type=?, user_id=? where id=?
Hibernate: update ewallet set created_by=?, created_time=?, modified_by=?, modified_time=?, balance=?, currency=?, status=?, tracking_uuid=?, type=?, user_id=? where id=?
16:04:08.094 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 1
16:04:08.096 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:08.096 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.096 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABCDC0000000B : 737072696E672D62746D00000145172ABCDF0000000C]
16:04:08.096 [Test worker] DEBUG org.hibernate.SQL - update ewallet_lot set created_by=?, created_time=?, modified_by=?, modified_time=?, expiration_date=?, remaining=?, total=?, type=?, ewallet_id=? where id=?
Hibernate: update ewallet_lot set created_by=?, created_time=?, modified_by=?, modified_time=?, expiration_date=?, remaining=?, total=?, type=?, ewallet_id=? where id=?
16:04:08.097 [Test worker] DEBUG o.h.e.j.b.internal.AbstractBatchImpl - Reusing batch statement
16:04:08.097 [Test worker] DEBUG org.hibernate.SQL - update ewallet_lot set created_by=?, created_time=?, modified_by=?, modified_time=?, expiration_date=?, remaining=?, total=?, type=?, ewallet_id=? where id=?
Hibernate: update ewallet_lot set created_by=?, created_time=?, modified_by=?, modified_time=?, expiration_date=?, remaining=?, total=?, type=?, ewallet_id=? where id=?
16:04:08.097 [Test worker] DEBUG o.h.e.j.batch.internal.BatchingBatch - Executing batch size: 2
16:04:08.099 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Skipping aggressive release due to manual disabling
16:04:08.099 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:08.099 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@2745fd39
16:04:08.099 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.099 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.099 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.099 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.099 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.099 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.099 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.100 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.100 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.100 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:08.100 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab from the accessible pool
16:04:08.100 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.100 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.100 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab to the inaccessible pool
16:04:08.100 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.100 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:08.100 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:08.100 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:08.100 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:08.100 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172ABCDC0000000B]
16:04:08.100 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found a connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.100 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - 1 xa resource(s) created by connection in NOT_ACCESSIBLE state: a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.100 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource GTRID: 737072696E672D62746D00000145172ABCDC0000000B
16:04:08.100 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - NOT_ACCESSIBLE xa resource's GTRID matched this transaction's GTRID, recycling it
16:04:08.100 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found NOT_ACCESSIBLE connection a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab from an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:08.100 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.101 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.101 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab from the inaccessible pool
16:04:08.101 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.101 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from NOT_ACCESSIBLE to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.101 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - marking a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab as recycled in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.101 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab has been recycled, unregistering deferred release from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.101 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab to the accessible pool
16:04:08.101 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@55c884ab was in state NOT_ACCESSIBLE, no need to test it
16:04:08.101 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.101 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:08.101 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:08.101 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.101 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - avoiding re-enlistment of already enlisted but not ended resource an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@55c884ab (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABCDC0000000B : 737072696E672D62746D00000145172ABCDF0000000C]
16:04:08.101 [Test worker] DEBUG org.hibernate.SQL - select transactio0_.id as id1_, transactio0_.created_by as created2_1_, transactio0_.created_time as created3_1_, transactio0_.amount as amount1_, transactio0_.offer_id as offer5_1_, transactio0_.type as type1_, transactio0_.ewallet_id as ewallet7_1_ from transaction transactio0_ where transactio0_.ewallet_id=?
Hibernate: select transactio0_.id as id1_, transactio0_.created_by as created2_1_, transactio0_.created_time as created3_1_, transactio0_.amount as amount1_, transactio0_.offer_id as offer5_1_, transactio0_.type as type1_, transactio0_.ewallet_id as ewallet7_1_ from transaction transactio0_ where transactio0_.ewallet_id=?
16:04:08.103 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 0
16:04:08.104 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.ewallet.db.entity.hibernate.TransactionEntity#740157049276416120]
16:04:08.104 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 1
16:04:08.104 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.ewallet.db.entity.hibernate.TransactionEntity#740157049276417120]
16:04:08.104 [Test worker] DEBUG org.hibernate.loader.Loader - Result set row: 2
16:04:08.105 [Test worker] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.junbo.ewallet.db.entity.hibernate.TransactionEntity#740157049276418120]
16:04:08.106 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementUnregisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D00000145172ABC1300000009
16:04:08.106 [bitronix-async-jmx-worker] DEBUG b.tm.utils.ManagementRegistrar - Calling ManagementRegisterCommand on object with name bitronix.tm:type=Transaction,Gtrid=737072696E672D62746D00000145172ABCDC0000000B
16:04:08.106 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:08.106 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@2745fd39
16:04:08.107 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.107 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.107 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.107 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.107 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.107 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.107 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABCDC0000000B], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.107 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.107 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.107 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:08.108 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab from the accessible pool
16:04:08.110 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.110 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.110 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab to the inaccessible pool
16:04:08.110 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@55c884ab
16:04:08.110 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:08.110 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:04:08.126 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:04:08.126 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:04:08.126 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@4e830d11
16:04:08.126 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:04:08.126 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962530481
16:04:08.126 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@41245f7c
16:04:08.126 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:08.127 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (3 still available)
16:04:08.127 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/id_ds1 with 3 connection(s) (3 still available)
16:04:08.127 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172ABD3C0000000D]
16:04:08.127 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:04:08.127 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/id_ds1 with 3 connection(s) (3 still available), waiting if necessary
16:04:08.127 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b - closing time: 1396253107820, now time: 1396253048127
16:04:08.127 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b from an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:08.127 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:08.127 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:08.127 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:08.127 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:08.127 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b to the accessible pool
16:04:08.127 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@889828b was in state IN_POOL, testing it
16:04:08.127 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b, skipping test
16:04:08.128 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:08.128 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:08.128 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:08.128 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABD3C0000000D], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.128 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@889828b belongs to a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:08.128 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D00000145172ABD3C0000000D : 737072696E672D62746D00000145172ABD400000000E]
16:04:08.129 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D00000145172ABD3C0000000D : 737072696E672D62746D00000145172ABD400000000E]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@889828b with XID null&gt;
16:04:08.129 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@889828b with XID a Bitronix XID [737072696E672D62746D00000145172ABD3C0000000D : 737072696E672D62746D00000145172ABD400000000E] with NOFLAGS
16:04:08.129 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@889828b (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABD3C0000000D : 737072696E672D62746D00000145172ABD400000000E] with NOFLAGS
16:04:08.129 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@889828b (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABD3C0000000D : 737072696E672D62746D00000145172ABD400000000E]] on a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:08.129 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D00000145172ABD3C0000000D] previously unknown to a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b, adding it to the resource's transactions list
16:04:08.129 [Test worker] DEBUG org.hibernate.SQL - select walletenti0_.id as id2_, walletenti0_.created_by as created2_2_, walletenti0_.created_time as created3_2_, walletenti0_.modified_by as modified4_2_, walletenti0_.modified_time as modified5_2_, walletenti0_.balance as balance2_, walletenti0_.currency as currency2_, walletenti0_.status as status2_, walletenti0_.tracking_uuid as tracking9_2_, walletenti0_.type as type2_, walletenti0_.user_id as user11_2_ from ewallet walletenti0_ where walletenti0_.user_id=? and walletenti0_.type=? and walletenti0_.currency=?
Hibernate: select walletenti0_.id as id2_, walletenti0_.created_by as created2_2_, walletenti0_.created_time as created3_2_, walletenti0_.modified_by as modified4_2_, walletenti0_.modified_time as modified5_2_, walletenti0_.balance as balance2_, walletenti0_.currency as currency2_, walletenti0_.status as status2_, walletenti0_.tracking_uuid as tracking9_2_, walletenti0_.type as type2_, walletenti0_.user_id as user11_2_ from ewallet walletenti0_ where walletenti0_.user_id=? and walletenti0_.type=? and walletenti0_.currency=?
16:04:08.132 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:08.132 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@21bbc5f2
16:04:08.132 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:08.132 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABD3C0000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.132 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:08.132 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABD3C0000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.132 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:08.133 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:08.133 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABD3C0000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.133 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:08.133 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:08.133 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:08.133 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b from the accessible pool
16:04:08.133 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:08.133 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:08.133 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b to the inaccessible pool
16:04:08.133 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@889828b
16:04:08.133 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:08.133 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:04:08.133 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:04:08.134 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 990216192, using strategy: org.hibernate.id.Assigned
16:04:08.134 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:04:08.134 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:04:08.134 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 990232576, using strategy: org.hibernate.id.Assigned
16:04:08.135 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 990248960, using strategy: org.hibernate.id.Assigned
16:04:08.136 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 740157049277440192, using strategy: org.hibernate.id.Assigned
16:04:08.137 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:04:08.137 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:04:08.138 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating transaction failed - marking existing transaction as rollback-only
16:04:08.138 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Setting JTA transaction rollback-only
16:04:08.138 [Test worker] DEBUG b.tm.BitronixTransactionManager - marking transaction as rollback only: a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABD3C0000000D], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.138 [Test worker] DEBUG bitronix.tm.BitronixTransaction - changing transaction status to MARKED_ROLLBACK
16:04:08.138 [Test worker] DEBUG bitronix.tm.BitronixTransaction - transaction status is changing from ACTIVE to MARKED_ROLLBACK - executing 0 listener(s)
16:04:08.151 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:04:08.151 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
16:04:08.151 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@2d158783
16:04:08.151 [Test worker] DEBUG o.h.e.t.i.TransactionCoordinatorImpl - successfully registered Synchronization
16:04:08.152 [Test worker] DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp: 13962530481
16:04:08.152 [Test worker] DEBUG bitronix.tm.BitronixTransaction - registering synchronization org.hibernate.context.internal.JTASessionContext$CleanupSynch@7a2ee59f
16:04:08.152 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtaining JDBC connection
16:04:08.152 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquiring connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (3 still available)
16:04:08.152 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - trying to recycle a NOT_ACCESSIBLE connection of an XAPool of resource jdbc/id_ds1 with 3 connection(s) (3 still available)
16:04:08.152 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - current transaction GTRID is [737072696E672D62746D00000145172ABD560000000F]
16:04:08.152 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - no NOT_ACCESSIBLE connection enlisted in this transaction
16:04:08.152 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - getting IN_POOL connection from an XAPool of resource jdbc/id_ds1 with 3 connection(s) (3 still available), waiting if necessary
16:04:08.152 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - checking if connection can be closed: a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 - closing time: 1396253108023, now time: 1396253048152
16:04:08.152 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - found IN_POOL connection a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 from an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:08.152 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - getting connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:08.152 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:08.152 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state IN_POOL with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:08.152 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from IN_POOL to ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:08.152 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895 to the accessible pool
16:04:08.153 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - connection org.postgresql.xa.PGXAConnection@4b019895 was in state IN_POOL, testing it
16:04:08.153 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - no query to test connection of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895, skipping test
16:04:08.153 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - got connection handle from a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:08.153 [Test worker] DEBUG b.tm.resource.jdbc.PoolingDataSource - acquired connection from a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:08.153 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Obtained JDBC connection
16:04:08.153 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - enlisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895 into a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABD560000000F], status=ACTIVE, 0 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.153 [Test worker] DEBUG b.tm.resource.ResourceRegistrar - XAResource org.postgresql.xa.PGXAConnection@4b019895 belongs to a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895 that itself belongs to a PoolingDataSource containing an XAPool of resource jdbc/id_ds1 with 3 connection(s) (2 still available)
16:04:08.153 [Test worker] DEBUG b.tm.internal.XAResourceManager - creating new branch with a Bitronix XID [737072696E672D62746D00000145172ABD560000000F : 737072696E672D62746D00000145172ABD5900000010]
16:04:08.153 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - assigning &lt;a Bitronix XID [737072696E672D62746D00000145172ABD560000000F : 737072696E672D62746D00000145172ABD5900000010]&gt; to &lt;an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@4b019895 with XID null&gt;
16:04:08.153 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - starting an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@4b019895 with XID a Bitronix XID [737072696E672D62746D00000145172ABD560000000F : 737072696E672D62746D00000145172ABD5900000010] with NOFLAGS
16:04:08.153 [Test worker] DEBUG b.tm.internal.XAResourceHolderState - started an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@4b019895 (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABD560000000F : 737072696E672D62746D00000145172ABD5900000010] with NOFLAGS
16:04:08.153 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - putting XAResourceHolderState [an XAResourceHolderState with uniqueName=jdbc/id_ds1 XAResource=org.postgresql.xa.PGXAConnection@4b019895 (started) with XID a Bitronix XID [737072696E672D62746D00000145172ABD560000000F : 737072696E672D62746D00000145172ABD5900000010]] on a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:08.153 [Test worker] DEBUG b.t.r.c.AbstractXAResourceHolder - GTRID [737072696E672D62746D00000145172ABD560000000F] previously unknown to a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895, adding it to the resource's transactions list
16:04:08.153 [Test worker] DEBUG org.hibernate.SQL - select walletenti0_.id as id2_, walletenti0_.created_by as created2_2_, walletenti0_.created_time as created3_2_, walletenti0_.modified_by as modified4_2_, walletenti0_.modified_time as modified5_2_, walletenti0_.balance as balance2_, walletenti0_.currency as currency2_, walletenti0_.status as status2_, walletenti0_.tracking_uuid as tracking9_2_, walletenti0_.type as type2_, walletenti0_.user_id as user11_2_ from ewallet walletenti0_ where walletenti0_.user_id=? and walletenti0_.type=? and walletenti0_.currency=?
Hibernate: select walletenti0_.id as id2_, walletenti0_.created_by as created2_2_, walletenti0_.created_time as created3_2_, walletenti0_.modified_by as modified4_2_, walletenti0_.modified_time as modified5_2_, walletenti0_.balance as balance2_, walletenti0_.currency as currency2_, walletenti0_.status as status2_, walletenti0_.tracking_uuid as tracking9_2_, walletenti0_.type as type2_, walletenti0_.user_id as user11_2_ from ewallet walletenti0_ where walletenti0_.user_id=? and walletenti0_.type=? and walletenti0_.currency=?
16:04:08.155 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection
16:04:08.155 [Test worker] DEBUG b.t.r.jdbc.proxy.ConnectionJavaProxy - closing a ConnectionJavaProxy of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895 on Pooled connection wrapping physical connection org.postgresql.jdbc4.Jdbc4Connection@7ce60ca0
16:04:08.155 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - releasing to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 1 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:08.155 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - delisting a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABD560000000F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.155 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:08.155 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - requeuing a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 from a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABD560000000F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.155 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - resource is in enlisting global transaction context: a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:08.155 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - deferring release to pool of a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:08.155 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 is not already registered for deferred release in a Bitronix Transaction with GTRID [737072696E672D62746D00000145172ABD560000000F], status=ACTIVE, 1 resource(s) enlisted (started Mon Mar 31 16:04:08 CST 2014)
16:04:08.155 [Test worker] DEBUG b.t.r.c.TransactionContextHelper - registering DeferredReleaseSynchronization for a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:08.155 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:08.155 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - closing 0 dangling uncached statement(s)
16:04:08.155 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - removed a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 from the accessible pool
16:04:08.155 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - state changing from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:08.155 [Test worker] DEBUG b.t.r.c.AbstractXAStatefulHolder - notifying 2 stateChangeEventListener(s) about state changed from ACCESSIBLE to NOT_ACCESSIBLE in a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:08.156 [Test worker] DEBUG bitronix.tm.resource.common.XAPool - added a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895 to the inaccessible pool
16:04:08.156 [Test worker] DEBUG b.t.r.jdbc.JdbcPooledConnection - released to pool a JdbcPooledConnection from datasource jdbc/id_ds1 in state NOT_ACCESSIBLE with usage count 0 wrapping org.postgresql.xa.PGXAConnection@4b019895
16:04:08.156 [Test worker] DEBUG o.h.e.j.i.LogicalConnectionImpl - Released JDBC connection
16:04:08.156 [Test worker] DEBUG o.h.e.j.i.p.ConnectionProxyHandler - HHH000163: Logical connection releasing its physical connection
16:04:08.156 [Test worker] DEBUG o.h.e.i.StatefulPersistenceContext - Initializing non-lazy collections
16:04:08.156 [Test worker] DEBUG o.h.e.i.AbstractSaveEventListener - Generated identifier: 990265344, using strategy: org.hibernate.id.Assigned
16:04:08.158 [Test worker] DEBUG o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'WalletServiceImpl.update' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
16:04:08.158 [Test worker] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
16:04:08.158 [Test worker] DEBUG o.s.t.jta.JtaTransactionManager - Participating in existing transaction
</pre>
</span>
</div>
</div>
<div id="footer">
<p>Generated by 
<a href="http://www.gradle.org">Gradle 1.10</a> at 2014-3-31 16:04:09</p>
</div>
</div>
</body>