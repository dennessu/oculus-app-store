<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns="http://www.springframework.org/schema/beans"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <import resource="classpath*:spring/orderflow/*.xml"/>

    <bean id="flowDefLoader" class="com.junbo.langur.core.webflow.definition.FlowDefLoaderImpl"/>

    <bean id="orderStateRepository" class="com.junbo.common.webflow.CloudantStateRepositoryImpl" parent="cloudantClient">
        <property name="dbName" value="oauth_flow_state"/>
        <property name="marshaller" ref="polymorphicCloudantMarshaller"/>
    </bean>

    <bean id="stateExecutorFactory" class="com.junbo.langur.core.webflow.executor.StateExecutorFactoryImpl"/>

    <bean id="flowExecutor" class="com.junbo.langur.core.webflow.executor.FlowExecutorImpl">
        <property name="flowDefLoader" ref="flowDefLoader"/>
        <property name="stateExecutorFactory" ref="stateExecutorFactory"/>
        <property name="stateRepository" ref="orderStateRepository"/>
    </bean>

    <bean id="authSettleAction" class="com.junbo.order.core.impl.orderaction.AuthSettleAction">
        <property name="orderActionType" value="AUTHORIZE"/>
    </bean>

    <bean id="physicalSettleAction" class="com.junbo.order.core.impl.orderaction.PhysicalSettleAction">
        <property name="orderActionType" value="PARTIAL_CHARGE"/>
        <property name="completeCharge" value="false"/>
    </bean>

    <bean id="completeCharge_physicalSettleAction" class="com.junbo.order.core.impl.orderaction.PhysicalSettleAction">
        <property name="orderActionType" value="CHARGE"/>
        <property name="completeCharge" value="true"/>
    </bean>

    <bean id="fulfillmentAction" class="com.junbo.order.core.impl.orderaction.FulfillmentAction">
        <property name="orderActionType" value="FULFILL"/>
    </bean>

    <bean id="immediateSettleAction" class="com.junbo.order.core.impl.orderaction.ImmediateSettleAction">
        <property name="orderActionType" value="CHARGE"/>
    </bean>

    <bean id="refundOrderAction" class="com.junbo.order.core.impl.orderaction.RefundOrderAction">
        <property name="orderActionType" value="REFUND"/>
    </bean>

    <bean id="ratingAction" class="com.junbo.order.core.impl.orderaction.RatingAction">
    </bean>

    <bean id="sendEmailAction" class="com.junbo.order.core.impl.orderaction.SendEmailAction">
    </bean>

    <bean id="markSettleAction" class="com.junbo.order.core.impl.orderaction.MarkSettleAction">
    </bean>

    <bean id="validateTentativeOrderAction" class="com.junbo.order.core.impl.orderaction.ValidateOrderAction">
    </bean>

    <bean id="createSubledgerItemAction" class="com.junbo.order.core.impl.orderaction.CreateSubledgerItemAction">
    </bean>

    <bean id="webPaymentChargeAction" class="com.junbo.order.core.impl.orderaction.WebPaymentChargeAction">
        <property name="orderActionType" value="CHARGE"/>
    </bean>

    <bean id="confirmBalanceAction" class="com.junbo.order.core.impl.orderaction.ConfirmBalanceAction">
    </bean>

    <bean id="updateOrderAction" class="com.junbo.order.core.impl.orderaction.SaveOrderAction">
        <property name="newOrder" value="false"/>
    </bean>

    <bean id="asyncChargeCheckAction" class="com.junbo.order.core.impl.orderaction.AsyncChargeCheckAction"/>

    <bean id="chargeEventCheckAction" class="com.junbo.order.core.impl.orderaction.OrderEventStatusCheckAction">
        <property name="orderActionType" value="CHARGE"/>
    </bean>

    <bean id="authEventCheckAction" class="com.junbo.order.core.impl.orderaction.OrderEventStatusCheckAction">
        <property name="orderActionType" value="AUTHORIZE"/>
    </bean>
</beans>
